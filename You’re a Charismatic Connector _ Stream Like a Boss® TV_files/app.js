!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var i=[],n=Object.getPrototypeOf,r=i.slice,a=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},s=i.push,o=i.indexOf,l={},u=l.toString,d=l.hasOwnProperty,c=d.toString,p=c.call(Object),h={},f=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},m=function(e){return null!=e&&e===e.window},g=e.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function y(e,t,i){var n,r,a=(i=i||g).createElement("script");if(a.text=e,t)for(n in v)(r=t[n]||t.getAttribute&&t.getAttribute(n))&&a.setAttribute(n,r);i.head.appendChild(a).parentNode.removeChild(a)}function _(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[u.call(e)]||"object":typeof e}var b="3.5.1",T=function(e,t){return new T.fn.init(e,t)};function w(e){var t=!!e&&"length"in e&&e.length,i=_(e);return!f(e)&&!m(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}T.fn=T.prototype={jquery:b,constructor:T,length:0,toArray:function(){return r.call(this)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=T.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return T.each(this,e)},map:function(e){return this.pushStack(T.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(T.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(0<=i&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:i.sort,splice:i.splice},T.extend=T.fn.extend=function(){var e,t,i,n,r,a,s=arguments[0]||{},o=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[o]||{},o++),"object"==typeof s||f(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)n=e[t],"__proto__"!==t&&s!==n&&(u&&n&&(T.isPlainObject(n)||(r=Array.isArray(n)))?(i=s[t],a=r&&!Array.isArray(i)?[]:r||T.isPlainObject(i)?i:{},r=!1,s[t]=T.extend(u,a,n)):void 0!==n&&(s[t]=n));return s},T.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==u.call(e)||(t=n(e))&&("function"!=typeof(i=d.call(t,"constructor")&&t.constructor)||c.call(i)!==p))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){y(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(w(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){var i=t||[];return null!=e&&(w(Object(e))?T.merge(i,"string"==typeof e?[e]:e):s.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:o.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,a=e.length,s=!i;r<a;r++)!t(e[r],r)!==s&&n.push(e[r]);return n},map:function(e,t,i){var n,r,s=0,o=[];if(w(e))for(n=e.length;s<n;s++)null!=(r=t(e[s],s,i))&&o.push(r);else for(s in e)null!=(r=t(e[s],s,i))&&o.push(r);return a(o)},guid:1,support:h}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=i[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});var k=function(e){var t,i,n,r,a,s,o,l,u,d,c,p,h,f,m,g,v,y,_,b="sizzle"+1*new Date,T=e.document,w=0,k=0,S=le(),x=le(),M=le(),C=le(),E=function(e,t){return e===t&&(c=!0),0},I={}.hasOwnProperty,D=[],A=D.pop,O=D.push,N=D.push,L=D.slice,P=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",U="[\\x20\\t\\r\\n\\f]",R="(?:\\\\[\\da-fA-F]{1,6}"+U+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",z="\\["+U+"*("+R+")(?:"+U+"*([*^$|!~]?=)"+U+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+U+"*\\]",B=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",F=new RegExp(U+"+","g"),$=new RegExp("^"+U+"+|((?:^|[^\\\\])(?:\\\\.)*)"+U+"+$","g"),q=new RegExp("^"+U+"*,"+U+"*"),H=new RegExp("^"+U+"*([>+~]|"+U+")"+U+"*"),W=new RegExp(U+"|>"),V=new RegExp(B),Y=new RegExp("^"+R+"$"),G={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+U+"*(even|odd|(([+-]|)(\\d*)n|)"+U+"*(?:([+-]|)"+U+"*(\\d+)|))"+U+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+U+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+U+"*((?:-\\d)?\\d*)"+U+"*\\)|)(?=[^-]|$)","i")},Q=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+U+"?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){p()},se=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{N.apply(D=L.call(T.childNodes),T.childNodes),D[T.childNodes.length].nodeType}catch(t){N={apply:D.length?function(e,t){O.apply(e,L.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function oe(e,t,n,r){var a,o,u,d,c,f,v,y=t&&t.ownerDocument,T=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return n;if(!r&&(p(t),t=t||h,m)){if(11!==T&&(c=J.exec(e)))if(a=c[1]){if(9===T){if(!(u=t.getElementById(a)))return n;if(u.id===a)return n.push(u),n}else if(y&&(u=y.getElementById(a))&&_(t,u)&&u.id===a)return n.push(u),n}else{if(c[2])return N.apply(n,t.getElementsByTagName(e)),n;if((a=c[3])&&i.getElementsByClassName&&t.getElementsByClassName)return N.apply(n,t.getElementsByClassName(a)),n}if(i.qsa&&!C[e+" "]&&(!g||!g.test(e))&&(1!==T||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===T&&(W.test(e)||H.test(e))){for((y=ee.test(e)&&ve(t.parentNode)||t)===t&&i.scope||((d=t.getAttribute("id"))?d=d.replace(ne,re):t.setAttribute("id",d=b)),o=(f=s(e)).length;o--;)f[o]=(d?"#"+d:":scope")+" "+_e(f[o]);v=f.join(",")}try{return N.apply(n,y.querySelectorAll(v)),n}catch(t){C(e,!0)}finally{d===b&&t.removeAttribute("id")}}}return l(e.replace($,"$1"),t,n,r)}function le(){var e=[];return function t(i,r){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=r}}function ue(e){return e[b]=!0,e}function de(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var i=e.split("|"),r=i.length;r--;)n.attrHandle[i[r]]=t}function pe(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ue(function(t){return t=+t,ue(function(i,n){for(var r,a=e([],i.length,t),s=a.length;s--;)i[r=a[s]]&&(i[r]=!(n[r]=i[r]))})})}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=oe.support={},a=oe.isXML=function(e){var t=e.namespaceURI,i=(e.ownerDocument||e).documentElement;return!Q.test(t||i&&i.nodeName||"HTML")},p=oe.setDocument=function(e){var t,r,s=e?e.ownerDocument||e:T;return s!=h&&9===s.nodeType&&s.documentElement&&(f=(h=s).documentElement,m=!a(h),T!=h&&(r=h.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ae,!1):r.attachEvent&&r.attachEvent("onunload",ae)),i.scope=de(function(e){return f.appendChild(e).appendChild(h.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),i.attributes=de(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=de(function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=Z.test(h.getElementsByClassName),i.getById=de(function(e){return f.appendChild(e).id=b,!h.getElementsByName||!h.getElementsByName(b).length}),i.getById?(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var i,n,r,a=t.getElementById(e);if(a){if((i=a.getAttributeNode("id"))&&i.value===e)return[a];for(r=t.getElementsByName(e),n=0;a=r[n++];)if((i=a.getAttributeNode("id"))&&i.value===e)return[a]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;i=a[r++];)1===i.nodeType&&n.push(i);return n}return a},n.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(i.qsa=Z.test(h.querySelectorAll))&&(de(function(e){var t;f.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+U+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+U+"*(?:value|"+j+")"),e.querySelectorAll("[id~="+b+"-]").length||g.push("~="),(t=h.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\["+U+"*name"+U+"*="+U+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")}),de(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+U+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(i.matchesSelector=Z.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&de(function(e){i.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",B)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=Z.test(f.compareDocumentPosition),_=t||Z.test(f.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},E=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e==h||e.ownerDocument==T&&_(T,e)?-1:t==h||t.ownerDocument==T&&_(T,t)?1:d?P(d,e)-P(d,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var i,n=0,r=e.parentNode,a=t.parentNode,s=[e],o=[t];if(!r||!a)return e==h?-1:t==h?1:r?-1:a?1:d?P(d,e)-P(d,t):0;if(r===a)return pe(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)o.unshift(i);for(;s[n]===o[n];)n++;return n?pe(s[n],o[n]):s[n]==T?-1:o[n]==T?1:0}),h},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if(p(e),i.matchesSelector&&m&&!C[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var n=y.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){C(t,!0)}return 0<oe(t,h,null,[e]).length},oe.contains=function(e,t){return(e.ownerDocument||e)!=h&&p(e),_(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!=h&&p(e);var r=n.attrHandle[t.toLowerCase()],a=r&&I.call(n.attrHandle,t.toLowerCase())?r(e,t,!m):void 0;return void 0!==a?a:i.attributes||!m?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},oe.escape=function(e){return(e+"").replace(ne,re)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,n=[],r=0,a=0;if(c=!i.detectDuplicates,d=!i.sortStable&&e.slice(0),e.sort(E),c){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)e.splice(n[r],1)}return d=null,e},r=oe.getText=function(e){var t,i="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=r(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)i+=r(t);return i},(n=oe.selectors={cacheLength:50,createPseudo:ue,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&V.test(i)&&(t=s(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+U+")"+e+"("+U+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var r=oe.attr(n,e);return null==r?"!="===t:!t||(r+="","="===t?r===i:"!="===t?r!==i:"^="===t?i&&0===r.indexOf(i):"*="===t?i&&-1<r.indexOf(i):"$="===t?i&&r.slice(-i.length)===i:"~="===t?-1<(" "+r.replace(F," ")+" ").indexOf(i):"|="===t&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,r){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var u,d,c,p,h,f,m=a!==s?"nextSibling":"previousSibling",g=t.parentNode,v=o&&t.nodeName.toLowerCase(),y=!l&&!o,_=!1;if(g){if(a){for(;m;){for(p=t;p=p[m];)if(o?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(_=(h=(u=(d=(c=(p=g)[b]||(p[b]={}))[p.uniqueID]||(c[p.uniqueID]={}))[e]||[])[0]===w&&u[1])&&u[2],p=h&&g.childNodes[h];p=++h&&p&&p[m]||(_=h=0)||f.pop();)if(1===p.nodeType&&++_&&p===t){d[e]=[w,h,_];break}}else if(y&&(_=h=(u=(d=(c=(p=t)[b]||(p[b]={}))[p.uniqueID]||(c[p.uniqueID]={}))[e]||[])[0]===w&&u[1]),!1===_)for(;(p=++h&&p&&p[m]||(_=h=0)||f.pop())&&((o?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++_||(y&&((d=(c=p[b]||(p[b]={}))[p.uniqueID]||(c[p.uniqueID]={}))[e]=[w,_]),p!==t)););return(_-=r)===n||_%n==0&&0<=_/n}}},PSEUDO:function(e,t){var i,r=n.pseudos[e]||n.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return r[b]?r(t):1<r.length?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,i){for(var n,a=r(e,t),s=a.length;s--;)e[n=P(e,a[s])]=!(i[n]=a[s])}):function(e){return r(e,0,i)}):r}},pseudos:{not:ue(function(e){var t=[],i=[],n=o(e.replace($,"$1"));return n[b]?ue(function(e,t,i,r){for(var a,s=n(e,null,r,[]),o=e.length;o--;)(a=s[o])&&(e[o]=!(t[o]=a))}):function(e,r,a){return t[0]=e,n(t,null,a,i),t[0]=null,!i.pop()}}),has:ue(function(e){return function(t){return 0<oe(e,t).length}}),contains:ue(function(e){return e=e.replace(te,ie),function(t){return-1<(t.textContent||r(t)).indexOf(e)}}),lang:ue(function(e){return Y.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge(function(){return[0]}),last:ge(function(e,t){return[t-1]}),eq:ge(function(e,t,i){return[i<0?i+t:i]}),even:ge(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:ge(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:ge(function(e,t,i){for(var n=i<0?i+t:t<i?t:i;0<=--n;)e.push(n);return e}),gt:ge(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=fe(t);function ye(){}function _e(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function be(e,t,i){var n=t.dir,r=t.next,a=r||n,s=i&&"parentNode"===a,o=k++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||s)return e(t,i,r);return!1}:function(t,i,l){var u,d,c,p=[w,o];if(l){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(d=(c=t[b]||(t[b]={}))[t.uniqueID]||(c[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[n]||t;else{if((u=d[a])&&u[0]===w&&u[1]===o)return p[2]=u[2];if((d[a]=p)[2]=e(t,i,l))return!0}return!1}}function Te(e){return 1<e.length?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function we(e,t,i,n,r){for(var a,s=[],o=0,l=e.length,u=null!=t;o<l;o++)(a=e[o])&&(i&&!i(a,n,r)||(s.push(a),u&&t.push(o)));return s}function ke(e,t,i,n,r,a){return n&&!n[b]&&(n=ke(n)),r&&!r[b]&&(r=ke(r,a)),ue(function(a,s,o,l){var u,d,c,p=[],h=[],f=s.length,m=a||function(e,t,i){for(var n=0,r=t.length;n<r;n++)oe(e,t[n],i);return i}(t||"*",o.nodeType?[o]:o,[]),g=!e||!a&&t?m:we(m,p,e,o,l),v=i?r||(a?e:f||n)?[]:s:g;if(i&&i(g,v,o,l),n)for(u=we(v,h),n(u,[],o,l),d=u.length;d--;)(c=u[d])&&(v[h[d]]=!(g[h[d]]=c));if(a){if(r||e){if(r){for(u=[],d=v.length;d--;)(c=v[d])&&u.push(g[d]=c);r(null,v=[],u,l)}for(d=v.length;d--;)(c=v[d])&&-1<(u=r?P(a,c):p[d])&&(a[u]=!(s[u]=c))}}else v=we(v===s?v.splice(f,v.length):v),r?r(null,s,v,l):N.apply(s,v)})}function Se(e){for(var t,i,r,a=e.length,s=n.relative[e[0].type],o=s||n.relative[" "],l=s?1:0,d=be(function(e){return e===t},o,!0),c=be(function(e){return-1<P(t,e)},o,!0),p=[function(e,i,n){var r=!s&&(n||i!==u)||((t=i).nodeType?d(e,i,n):c(e,i,n));return t=null,r}];l<a;l++)if(i=n.relative[e[l].type])p=[be(Te(p),i)];else{if((i=n.filter[e[l].type].apply(null,e[l].matches))[b]){for(r=++l;r<a&&!n.relative[e[r].type];r++);return ke(1<l&&Te(p),1<l&&_e(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace($,"$1"),i,l<r&&Se(e.slice(l,r)),r<a&&Se(e=e.slice(r)),r<a&&_e(e))}p.push(i)}return Te(p)}return ye.prototype=n.filters=n.pseudos,n.setFilters=new ye,s=oe.tokenize=function(e,t){var i,r,a,s,o,l,u,d=x[e+" "];if(d)return t?0:d.slice(0);for(o=e,l=[],u=n.preFilter;o;){for(s in i&&!(r=q.exec(o))||(r&&(o=o.slice(r[0].length)||o),l.push(a=[])),i=!1,(r=H.exec(o))&&(i=r.shift(),a.push({value:i,type:r[0].replace($," ")}),o=o.slice(i.length)),n.filter)!(r=G[s].exec(o))||u[s]&&!(r=u[s](r))||(i=r.shift(),a.push({value:i,type:s,matches:r}),o=o.slice(i.length));if(!i)break}return t?o.length:o?oe.error(e):x(e,l).slice(0)},o=oe.compile=function(e,t){var i,r,a,o,l,d,c=[],f=[],g=M[e+" "];if(!g){for(t||(t=s(e)),i=t.length;i--;)(g=Se(t[i]))[b]?c.push(g):f.push(g);(g=M(e,(r=f,o=0<(a=c).length,l=0<r.length,d=function(e,t,i,s,d){var c,f,g,v=0,y="0",_=e&&[],b=[],T=u,k=e||l&&n.find.TAG("*",d),S=w+=null==T?1:Math.random()||.1,x=k.length;for(d&&(u=t==h||t||d);y!==x&&null!=(c=k[y]);y++){if(l&&c){for(f=0,t||c.ownerDocument==h||(p(c),i=!m);g=r[f++];)if(g(c,t||h,i)){s.push(c);break}d&&(w=S)}o&&((c=!g&&c)&&v--,e&&_.push(c))}if(v+=y,o&&y!==v){for(f=0;g=a[f++];)g(_,b,t,i);if(e){if(0<v)for(;y--;)_[y]||b[y]||(b[y]=A.call(s));b=we(b)}N.apply(s,b),d&&!e&&0<b.length&&1<v+a.length&&oe.uniqueSort(s)}return d&&(w=S,u=T),_},o?ue(d):d))).selector=e}return g},l=oe.select=function(e,t,i,r){var a,l,u,d,c,p="function"==typeof e&&e,h=!r&&s(e=p.selector||e);if(i=i||[],1===h.length){if(2<(l=h[0]=h[0].slice(0)).length&&"ID"===(u=l[0]).type&&9===t.nodeType&&m&&n.relative[l[1].type]){if(!(t=(n.find.ID(u.matches[0].replace(te,ie),t)||[])[0]))return i;p&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(a=G.needsContext.test(e)?0:l.length;a--&&(u=l[a],!n.relative[d=u.type]);)if((c=n.find[d])&&(r=c(u.matches[0].replace(te,ie),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(a,1),!(e=r.length&&_e(l)))return N.apply(i,r),i;break}}return(p||o(e,h))(r,t,!m,i,!t||ee.test(e)&&ve(t.parentNode)||t),i},i.sortStable=b.split("").sort(E).join("")===b,i.detectDuplicates=!!c,p(),i.sortDetached=de(function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))}),de(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),i.attributes&&de(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),de(function(e){return null==e.getAttribute("disabled")})||ce(j,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),oe}(e);T.find=k,T.expr=k.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=k.uniqueSort,T.text=k.getText,T.isXMLDoc=k.isXML,T.contains=k.contains,T.escapeSelector=k.escape;var S=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&T(e).is(i))break;n.push(e)}return n},x=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},M=T.expr.match.needsContext;function C(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var E=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(e,t,i){return f(t)?T.grep(e,function(e,n){return!!t.call(e,n,e)!==i}):t.nodeType?T.grep(e,function(e){return e===t!==i}):"string"!=typeof t?T.grep(e,function(e){return-1<o.call(t,e)!==i}):T.filter(t,e,i)}T.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?T.find.matchesSelector(n,e)?[n]:[]:T.find.matches(e,T.grep(t,function(e){return 1===e.nodeType}))},T.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(T(e).filter(function(){for(t=0;t<n;t++)if(T.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)T.find(e,r[t],i);return 1<n?T.uniqueSort(i):i},filter:function(e){return this.pushStack(I(this,e||[],!1))},not:function(e){return this.pushStack(I(this,e||[],!0))},is:function(e){return!!I(this,"string"==typeof e&&M.test(e)?T(e):e||[],!1).length}});var D,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||D,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:A.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof T?t[0]:t,T.merge(this,T.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:g,!0)),E.test(n[1])&&T.isPlainObject(t))for(n in t)f(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=g.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):f(e)?void 0!==i.ready?i.ready(e):e(T):T.makeArray(e,this)}).prototype=T.fn,D=T(g);var O=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}T.fn.extend({has:function(e){var t=T(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(T.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,a=[],s="string"!=typeof e&&T(e);if(!M.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?-1<s.index(i):1===i.nodeType&&T.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(1<a.length?T.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?o.call(T(e),this[0]):o.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),T.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return S(e,"parentNode")},parentsUntil:function(e,t,i){return S(e,"parentNode",i)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return S(e,"nextSibling")},prevAll:function(e){return S(e,"previousSibling")},nextUntil:function(e,t,i){return S(e,"nextSibling",i)},prevUntil:function(e,t,i){return S(e,"previousSibling",i)},siblings:function(e){return x((e.parentNode||{}).firstChild,e)},children:function(e){return x(e.firstChild)},contents:function(e){return null!=e.contentDocument&&n(e.contentDocument)?e.contentDocument:(C(e,"template")&&(e=e.content||e),T.merge([],e.childNodes))}},function(e,t){T.fn[e]=function(i,n){var r=T.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=T.filter(n,r)),1<this.length&&(N[e]||T.uniqueSort(r),O.test(e)&&r.reverse()),this.pushStack(r)}});var P=/[^\x20\t\r\n\f]+/g;function j(e){return e}function U(e){throw e}function R(e,t,i,n){var r;try{e&&f(r=e.promise)?r.call(e).done(t).fail(i):e&&f(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}T.Callbacks=function(e){var t,i;e="string"==typeof e?(t=e,i={},T.each(t.match(P)||[],function(e,t){i[t]=!0}),i):T.extend({},e);var n,r,a,s,o=[],l=[],u=-1,d=function(){for(s=s||e.once,a=n=!0;l.length;u=-1)for(r=l.shift();++u<o.length;)!1===o[u].apply(r[0],r[1])&&e.stopOnFalse&&(u=o.length,r=!1);e.memory||(r=!1),n=!1,s&&(o=r?[]:"")},c={add:function(){return o&&(r&&!n&&(u=o.length-1,l.push(r)),function t(i){T.each(i,function(i,n){f(n)?e.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==_(n)&&t(n)})}(arguments),r&&!n&&d()),this},remove:function(){return T.each(arguments,function(e,t){for(var i;-1<(i=T.inArray(t,o,i));)o.splice(i,1),i<=u&&u--}),this},has:function(e){return e?-1<T.inArray(e,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return s=l=[],o=r="",this},disabled:function(){return!o},lock:function(){return s=l=[],r||n||(o=r=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),n||d()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!a}};return c},T.extend({Deferred:function(t){var i=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return T.Deferred(function(t){T.each(i,function(i,n){var r=f(e[n[4]])&&e[n[4]];a[n[1]](function(){var e=r&&r.apply(this,arguments);e&&f(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(t,n,r){var a=0;function s(t,i,n,r){return function(){var o=this,l=arguments,u=function(){var e,u;if(!(t<a)){if((e=n.apply(o,l))===i.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"==typeof e||"function"==typeof e)&&e.then,f(u)?r?u.call(e,s(a,i,j,r),s(a,i,U,r)):(a++,u.call(e,s(a,i,j,r),s(a,i,U,r),s(a,i,j,i.notifyWith))):(n!==j&&(o=void 0,l=[e]),(r||i.resolveWith)(o,l))}},d=r?u:function(){try{u()}catch(e){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(e,d.stackTrace),a<=t+1&&(n!==U&&(o=void 0,l=[e]),i.rejectWith(o,l))}};t?d():(T.Deferred.getStackHook&&(d.stackTrace=T.Deferred.getStackHook()),e.setTimeout(d))}}return T.Deferred(function(e){i[0][3].add(s(0,e,f(r)?r:j,e.notifyWith)),i[1][3].add(s(0,e,f(t)?t:j)),i[2][3].add(s(0,e,f(n)?n:U))}).promise()},promise:function(e){return null!=e?T.extend(e,r):r}},a={};return T.each(i,function(e,t){var s=t[2],o=t[5];r[t[1]]=s.add,o&&s.add(function(){n=o},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),s.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=s.fireWith}),r.promise(a),t&&t.call(a,a),a},when:function(e){var t=arguments.length,i=t,n=Array(i),a=r.call(arguments),s=T.Deferred(),o=function(e){return function(i){n[e]=this,a[e]=1<arguments.length?r.call(arguments):i,--t||s.resolveWith(n,a)}};if(t<=1&&(R(e,s.done(o(i)).resolve,s.reject,!t),"pending"===s.state()||f(a[i]&&a[i].then)))return s.then();for(;i--;)R(a[i],o(i),s.reject);return s.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&z.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},T.readyException=function(t){e.setTimeout(function(){throw t})};var B=T.Deferred();function F(){g.removeEventListener("DOMContentLoaded",F),e.removeEventListener("load",F),T.ready()}T.fn.ready=function(e){return B.then(e).catch(function(e){T.readyException(e)}),this},T.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--T.readyWait:T.isReady)||(T.isReady=!0)!==e&&0<--T.readyWait||B.resolveWith(g,[T])}}),T.ready.then=B.then,"complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll?e.setTimeout(T.ready):(g.addEventListener("DOMContentLoaded",F),e.addEventListener("load",F));var $=function(e,t,i,n,r,a,s){var o=0,l=e.length,u=null==i;if("object"===_(i))for(o in r=!0,i)$(e,t,o,i[o],!0,a,s);else if(void 0!==n&&(r=!0,f(n)||(s=!0),u&&(s?(t.call(e,n),t=null):(u=t,t=function(e,t,i){return u.call(T(e),i)})),t))for(;o<l;o++)t(e[o],i,s?n:n.call(e[o],o,t(e[o],i)));return r?e:u?t.call(e):l?t(e[0],i):a},q=/^-ms-/,H=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function V(e){return e.replace(q,"ms-").replace(H,W)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=T.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[V(t)]=i;else for(n in t)r[V(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(V):(t=V(t))in n?[t]:t.match(P)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||T.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!T.isEmptyObject(t)}};var Q=new G,X=new G,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function J(e,t,i){var n,r;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:K.test(r)?JSON.parse(r):r)}catch(e){}X.set(e,t,i)}else i=void 0;return i}T.extend({hasData:function(e){return X.hasData(e)||Q.hasData(e)},data:function(e,t,i){return X.access(e,t,i)},removeData:function(e,t){X.remove(e,t)},_data:function(e,t,i){return Q.access(e,t,i)},_removeData:function(e,t){Q.remove(e,t)}}),T.fn.extend({data:function(e,t){var i,n,r,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(r=X.get(a),1===a.nodeType&&!Q.get(a,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(n=s[i].name).indexOf("data-")&&(n=V(n.slice(5)),J(a,n,r[n]));Q.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){X.set(this,e)}):$(this,function(t){var i;if(a&&void 0===t)return void 0!==(i=X.get(a,e))?i:void 0!==(i=J(a,e))?i:void 0;this.each(function(){X.set(this,e,t)})},null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){X.remove(this,e)})}}),T.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=Q.get(e,t),i&&(!n||Array.isArray(i)?n=Q.access(e,t,T.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=T.queue(e,t),n=i.length,r=i.shift(),a=T._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete a.stop,r.call(e,function(){T.dequeue(e,t)},a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Q.get(e,i)||Q.access(e,i,{empty:T.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",i])})})}}),T.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?T.queue(this[0],e):void 0===t?this:this.each(function(){var i=T.queue(this,e,t);T._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&T.dequeue(this,e)})},dequeue:function(e){return this.each(function(){T.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=T.Deferred(),a=this,s=this.length,o=function(){--n||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=Q.get(a[s],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(o));return o(),r.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],ne=g.documentElement,re=function(e){return T.contains(e.ownerDocument,e)},ae={composed:!0};ne.getRootNode&&(re=function(e){return T.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===T.css(e,"display")};function oe(e,t,i,n){var r,a,s=20,o=n?function(){return n.cur()}:function(){return T.css(e,t,"")},l=o(),u=i&&i[3]||(T.cssNumber[t]?"":"px"),d=e.nodeType&&(T.cssNumber[t]||"px"!==u&&+l)&&te.exec(T.css(e,t));if(d&&d[3]!==u){for(l/=2,u=u||d[3],d=+l||1;s--;)T.style(e,t,d+u),(1-a)*(1-(a=o()/l||.5))<=0&&(s=0),d/=a;d*=2,T.style(e,t,d+u),i=i||[]}return i&&(d=+d||+l||0,r=i[1]?d+(i[1]+1)*i[2]:+i[2],n&&(n.unit=u,n.start=d,n.end=r)),r}var le={};function ue(e,t){for(var i,n,r,a,s,o,l,u=[],d=0,c=e.length;d<c;d++)(n=e[d]).style&&(i=n.style.display,t?("none"===i&&(u[d]=Q.get(n,"display")||null,u[d]||(n.style.display="")),""===n.style.display&&se(n)&&(u[d]=(l=s=a=void 0,s=(r=n).ownerDocument,o=r.nodeName,(l=le[o])||(a=s.body.appendChild(s.createElement(o)),l=T.css(a,"display"),a.parentNode.removeChild(a),"none"===l&&(l="block"),le[o]=l)))):"none"!==i&&(u[d]="none",Q.set(n,"display",i)));for(d=0;d<c;d++)null!=u[d]&&(e[d].style.display=u[d]);return e}T.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?T(this).show():T(this).hide()})}});var de,ce,pe=/^(?:checkbox|radio)$/i,he=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,fe=/^$|^module$|\/(?:java|ecma)script/i;de=g.createDocumentFragment().appendChild(g.createElement("div")),(ce=g.createElement("input")).setAttribute("type","radio"),ce.setAttribute("checked","checked"),ce.setAttribute("name","t"),de.appendChild(ce),h.checkClone=de.cloneNode(!0).cloneNode(!0).lastChild.checked,de.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!de.cloneNode(!0).lastChild.defaultValue,de.innerHTML="<option></option>",h.option=!!de.lastChild;var me={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&C(e,t)?T.merge([e],i):i}function ve(e,t){for(var i=0,n=e.length;i<n;i++)Q.set(e[i],"globalEval",!t||Q.get(t[i],"globalEval"))}me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,h.option||(me.optgroup=me.option=[1,"<select multiple='multiple'>","</select>"]);var ye=/<|&#?\w+;/;function _e(e,t,i,n,r){for(var a,s,o,l,u,d,c=t.createDocumentFragment(),p=[],h=0,f=e.length;h<f;h++)if((a=e[h])||0===a)if("object"===_(a))T.merge(p,a.nodeType?[a]:a);else if(ye.test(a)){for(s=s||c.appendChild(t.createElement("div")),o=(he.exec(a)||["",""])[1].toLowerCase(),l=me[o]||me._default,s.innerHTML=l[1]+T.htmlPrefilter(a)+l[2],d=l[0];d--;)s=s.lastChild;T.merge(p,s.childNodes),(s=c.firstChild).textContent=""}else p.push(t.createTextNode(a));for(c.textContent="",h=0;a=p[h++];)if(n&&-1<T.inArray(a,n))r&&r.push(a);else if(u=re(a),s=ge(c.appendChild(a),"script"),u&&ve(s),i)for(d=0;a=s[d++];)fe.test(a.type||"")&&i.push(a);return c}var be=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,we=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Se(){return!1}function xe(e,t){return e===function(){try{return g.activeElement}catch(e){}}()==("focus"===t)}function Me(e,t,i,n,r,a){var s,o;if("object"==typeof t){for(o in"string"!=typeof i&&(n=n||i,i=void 0),t)Me(e,o,i,n,t[o],a);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=Se;else if(!r)return e;return 1===a&&(s=r,(r=function(e){return T().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=T.guid++)),e.each(function(){T.event.add(this,t,r,n,i)})}function Ce(e,t,i){i?(Q.set(e,t,!1),T.event.add(e,t,{namespace:!1,handler:function(e){var n,a,s=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(s.length)(T.event.special[t]||{}).delegateType&&e.stopPropagation();else if(s=r.call(arguments),Q.set(this,t,s),n=i(this,t),this[t](),s!==(a=Q.get(this,t))||n?Q.set(this,t,!1):a={},s!==a)return e.stopImmediatePropagation(),e.preventDefault(),a.value}else s.length&&(Q.set(this,t,{value:T.event.trigger(T.extend(s[0],T.Event.prototype),s.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&T.event.add(e,t,ke)}T.event={global:{},add:function(e,t,i,n,r){var a,s,o,l,u,d,c,p,h,f,m,g=Q.get(e);if(Y(e))for(i.handler&&(i=(a=i).handler,r=a.selector),r&&T.find.matchesSelector(ne,r),i.guid||(i.guid=T.guid++),(l=g.events)||(l=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(P)||[""]).length;u--;)h=m=(o=we.exec(t[u])||[])[1],f=(o[2]||"").split(".").sort(),h&&(c=T.event.special[h]||{},h=(r?c.delegateType:c.bindType)||h,c=T.event.special[h]||{},d=T.extend({type:h,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&T.expr.match.needsContext.test(r),namespace:f.join(".")},a),(p=l[h])||((p=l[h]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,n,f,s)||e.addEventListener&&e.addEventListener(h,s)),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,d):p.push(d),T.event.global[h]=!0)},remove:function(e,t,i,n,r){var a,s,o,l,u,d,c,p,h,f,m,g=Q.hasData(e)&&Q.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(P)||[""]).length;u--;)if(h=m=(o=we.exec(t[u])||[])[1],f=(o[2]||"").split(".").sort(),h){for(c=T.event.special[h]||{},p=l[h=(n?c.delegateType:c.bindType)||h]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=p.length;a--;)d=p[a],!r&&m!==d.origType||i&&i.guid!==d.guid||o&&!o.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(p.splice(a,1),d.selector&&p.delegateCount--,c.remove&&c.remove.call(e,d));s&&!p.length&&(c.teardown&&!1!==c.teardown.call(e,f,g.handle)||T.removeEvent(e,h,g.handle),delete l[h])}else for(h in l)T.event.remove(e,h+t[u],i,n,!0);T.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,a,s,o=new Array(arguments.length),l=T.event.fix(e),u=(Q.get(this,"events")||Object.create(null))[l.type]||[],d=T.event.special[l.type]||{};for(o[0]=l,t=1;t<arguments.length;t++)o[t]=arguments[t];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(s=T.event.handlers.call(this,l,u),t=0;(r=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,i=0;(a=r.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==a.namespace&&!l.rnamespace.test(a.namespace)||(l.handleObj=a,l.data=a.data,void 0!==(n=((T.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,o))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,n,r,a,s,o=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&1<=e.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(a=[],s={},i=0;i<l;i++)void 0===s[r=(n=t[i]).selector+" "]&&(s[r]=n.needsContext?-1<T(r,this).index(u):T.find(r,this,null,[u]).length),s[r]&&a.push(n);a.length&&o.push({elem:u,handlers:a})}return u=this,l<t.length&&o.push({elem:u,handlers:t.slice(l)}),o},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:f(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[T.expando]?e:new T.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&C(t,"input")&&Ce(t,"click",ke),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&C(t,"input")&&Ce(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&C(t,"input")&&Q.get(t,"click")||C(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},T.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},T.Event=function(e,t){if(!(this instanceof T.Event))return new T.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&T.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},function(e,t){T.event.special[e]={setup:function(){return Ce(this,e,xe),!1},trigger:function(){return Ce(this,e),!0},delegateType:t}}),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){T.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||T.contains(this,n))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),T.fn.extend({on:function(e,t,i,n){return Me(this,e,t,i,n)},one:function(e,t,i,n){return Me(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,T(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Se),this.each(function(){T.event.remove(this,e,i,t)})}});var Ee=/<script|<style|<link/i,Ie=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ae(e,t){return C(e,"table")&&C(11!==t.nodeType?t:t.firstChild,"tr")&&T(e).children("tbody")[0]||e}function Oe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ne(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var i,n,r,a,s,o;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.get(e).events))for(r in Q.remove(t,"handle events"),o)for(i=0,n=o[r].length;i<n;i++)T.event.add(t,r,o[r][i]);X.hasData(e)&&(a=X.access(e),s=T.extend({},a),X.set(t,s))}}function Pe(e,t,i,n){t=a(t);var r,s,o,l,u,d,c=0,p=e.length,m=p-1,g=t[0],v=f(g);if(v||1<p&&"string"==typeof g&&!h.checkClone&&Ie.test(g))return e.each(function(r){var a=e.eq(r);v&&(t[0]=g.call(this,r,a.html())),Pe(a,t,i,n)});if(p&&(s=(r=_e(t,e[0].ownerDocument,!1,e,n)).firstChild,1===r.childNodes.length&&(r=s),s||n)){for(l=(o=T.map(ge(r,"script"),Oe)).length;c<p;c++)u=r,c!==m&&(u=T.clone(u,!0,!0),l&&T.merge(o,ge(u,"script"))),i.call(e[c],u,c);if(l)for(d=o[o.length-1].ownerDocument,T.map(o,Ne),c=0;c<l;c++)u=o[c],fe.test(u.type||"")&&!Q.access(u,"globalEval")&&T.contains(d,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?T._evalUrl&&!u.noModule&&T._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},d):y(u.textContent.replace(De,""),u,d))}return e}function je(e,t,i){for(var n,r=t?T.filter(t,e):e,a=0;null!=(n=r[a]);a++)i||1!==n.nodeType||T.cleanData(ge(n)),n.parentNode&&(i&&re(n)&&ve(ge(n,"script")),n.parentNode.removeChild(n));return e}T.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,r,a,s,o,l,u,d=e.cloneNode(!0),c=re(e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||T.isXMLDoc(e)))for(s=ge(d),n=0,r=(a=ge(e)).length;n<r;n++)o=a[n],"input"===(u=(l=s[n]).nodeName.toLowerCase())&&pe.test(o.type)?l.checked=o.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=o.defaultValue);if(t)if(i)for(a=a||ge(e),s=s||ge(d),n=0,r=a.length;n<r;n++)Le(a[n],s[n]);else Le(e,d);return 0<(s=ge(d,"script")).length&&ve(s,!c&&ge(e,"script")),d},cleanData:function(e){for(var t,i,n,r=T.event.special,a=0;void 0!==(i=e[a]);a++)if(Y(i)){if(t=i[Q.expando]){if(t.events)for(n in t.events)r[n]?T.event.remove(i,n):T.removeEvent(i,n,t.handle);i[Q.expando]=void 0}i[X.expando]&&(i[X.expando]=void 0)}}}),T.fn.extend({detach:function(e){return je(this,e,!0)},remove:function(e){return je(this,e)},text:function(e){return $(this,function(e){return void 0===e?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ae(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ae(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(T.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return T.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ee.test(e)&&!me[(he.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(T.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Pe(this,arguments,function(t){var i=this.parentNode;T.inArray(this,e)<0&&(T.cleanData(ge(this)),i&&i.replaceChild(t,this))},e)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){T.fn[e]=function(e){for(var i,n=[],r=T(e),a=r.length-1,o=0;o<=a;o++)i=o===a?this:this.clone(!0),T(r[o])[t](i),s.apply(n,i.get());return this.pushStack(n)}});var Ue=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},ze=function(e,t,i){var n,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];for(r in n=i.call(e),t)e.style[r]=a[r];return n},Be=new RegExp(ie.join("|"),"i");function Fe(e,t,i){var n,r,a,s,o=e.style;return(i=i||Re(e))&&(""!==(s=i.getPropertyValue(t)||i[t])||re(e)||(s=T.style(e,t)),!h.pixelBoxStyles()&&Ue.test(s)&&Be.test(t)&&(n=o.width,r=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=i.width,o.width=n,o.minWidth=r,o.maxWidth=a)),void 0!==s?s+"":s}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(d){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(u).appendChild(d);var t=e.getComputedStyle(d);n="1%"!==t.top,l=12===i(t.marginLeft),d.style.right="60%",s=36===i(t.right),r=36===i(t.width),d.style.position="absolute",a=12===i(d.offsetWidth/3),ne.removeChild(u),d=null}}function i(e){return Math.round(parseFloat(e))}var n,r,a,s,o,l,u=g.createElement("div"),d=g.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===d.style.backgroundClip,T.extend(h,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),a},reliableTrDimensions:function(){var t,i,n,r;return null==o&&(t=g.createElement("table"),i=g.createElement("tr"),n=g.createElement("div"),t.style.cssText="position:absolute;left:-11111px",i.style.height="1px",n.style.height="9px",ne.appendChild(t).appendChild(i).appendChild(n),r=e.getComputedStyle(i),o=3<parseInt(r.height),ne.removeChild(t)),o}}))}();var qe=["Webkit","Moz","ms"],He=g.createElement("div").style,We={};function Ve(e){return T.cssProps[e]||We[e]||(e in He?e:We[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=qe.length;i--;)if((e=qe[i]+t)in He)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"};function Ke(e,t,i){var n=te.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function Ze(e,t,i,n,r,a){var s="width"===t?1:0,o=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=T.css(e,i+ie[s],!0,r)),n?("content"===i&&(l-=T.css(e,"padding"+ie[s],!0,r)),"margin"!==i&&(l-=T.css(e,"border"+ie[s]+"Width",!0,r))):(l+=T.css(e,"padding"+ie[s],!0,r),"padding"!==i?l+=T.css(e,"border"+ie[s]+"Width",!0,r):o+=T.css(e,"border"+ie[s]+"Width",!0,r));return!n&&0<=a&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-o-.5))||0),l}function Je(e,t,i){var n=Re(e),r=(!h.boxSizingReliable()||i)&&"border-box"===T.css(e,"boxSizing",!1,n),a=r,s=Fe(e,t,n),o="offset"+t[0].toUpperCase()+t.slice(1);if(Ue.test(s)){if(!i)return s;s="auto"}return(!h.boxSizingReliable()&&r||!h.reliableTrDimensions()&&C(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===T.css(e,"display",!1,n))&&e.getClientRects().length&&(r="border-box"===T.css(e,"boxSizing",!1,n),(a=o in e)&&(s=e[o])),(s=parseFloat(s)||0)+Ze(e,t,i||(r?"border":"content"),a,n,s)+"px"}function et(e,t,i,n,r){return new et.prototype.init(e,t,i,n,r)}T.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Fe(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,o=V(t),l=Ge.test(t),u=e.style;if(l||(t=Ve(o)),s=T.cssHooks[t]||T.cssHooks[o],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(e,!1,n))?r:u[t];"string"==(a=typeof i)&&(r=te.exec(i))&&r[1]&&(i=oe(e,t,r),a="number"),null!=i&&i==i&&("number"!==a||l||(i+=r&&r[3]||(T.cssNumber[o]?"":"px")),h.clearCloneStyle||""!==i||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l?u.setProperty(t,i):u[t]=i))}},css:function(e,t,i,n){var r,a,s,o=V(t);return Ge.test(t)||(t=Ve(o)),(s=T.cssHooks[t]||T.cssHooks[o])&&"get"in s&&(r=s.get(e,!0,i)),void 0===r&&(r=Fe(e,t,n)),"normal"===r&&t in Xe&&(r=Xe[t]),""===i||i?(a=parseFloat(r),!0===i||isFinite(a)?a||0:r):r}}),T.each(["height","width"],function(e,t){T.cssHooks[t]={get:function(e,i,n){if(i)return!Ye.test(T.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,t,n):ze(e,Qe,function(){return Je(e,t,n)})},set:function(e,i,n){var r,a=Re(e),s=!h.scrollboxSize()&&"absolute"===a.position,o=(s||n)&&"border-box"===T.css(e,"boxSizing",!1,a),l=n?Ze(e,t,n,o,a):0;return o&&s&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-Ze(e,t,"border",!1,a)-.5)),l&&(r=te.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=T.css(e,t)),Ke(0,i,l)}}}),T.cssHooks.marginLeft=$e(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(e,t){T.cssHooks[e+t]={expand:function(i){for(var n=0,r={},a="string"==typeof i?i.split(" "):[i];n<4;n++)r[e+ie[n]+t]=a[n]||a[n-2]||a[0];return r}},"margin"!==e&&(T.cssHooks[e+t].set=Ke)}),T.fn.extend({css:function(e,t){return $(this,function(e,t,i){var n,r,a={},s=0;if(Array.isArray(t)){for(n=Re(e),r=t.length;s<r;s++)a[t[s]]=T.css(e,t[s],!1,n);return a}return void 0!==i?T.style(e,t,i):T.css(e,t)},e,t,1<arguments.length)}}),((T.Tween=et).prototype={constructor:et,init:function(e,t,i,n,r,a){this.elem=e,this.prop=i,this.easing=r||T.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(T.cssNumber[i]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,i=et.propHooks[this.prop];return this.options.duration?this.pos=t=T.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=T.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){T.fx.step[e.prop]?T.fx.step[e.prop](e):1!==e.elem.nodeType||!T.cssHooks[e.prop]&&null==e.elem.style[Ve(e.prop)]?e.elem[e.prop]=e.now:T.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},T.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},T.fx=et.prototype.init,T.fx.step={};var tt,it,nt,rt,at=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function ot(){it&&(!1===g.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(ot):e.setTimeout(ot,T.fx.interval),T.fx.tick())}function lt(){return e.setTimeout(function(){tt=void 0}),tt=Date.now()}function ut(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=ie[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function dt(e,t,i){for(var n,r=(ct.tweeners[t]||[]).concat(ct.tweeners["*"]),a=0,s=r.length;a<s;a++)if(n=r[a].call(i,t,e))return n}function ct(e,t,i){var n,r,a=0,s=ct.prefilters.length,o=T.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=tt||lt(),i=Math.max(0,u.startTime+u.duration-t),n=1-(i/u.duration||0),a=0,s=u.tweens.length;a<s;a++)u.tweens[a].run(n);return o.notifyWith(e,[u,n,i]),n<1&&s?i:(s||o.notifyWith(e,[u,1,0]),o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},i),originalProperties:t,originalOptions:i,startTime:tt||lt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=T.Tween(e,u.opts,t,i,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var i=0,n=t?u.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)u.tweens[i].run(1);return t?(o.notifyWith(e,[u,1,0]),o.resolveWith(e,[u,t])):o.rejectWith(e,[u,t]),this}}),d=u.props;for(function(e,t){var i,n,r,a,s;for(i in e)if(r=t[n=V(i)],a=e[i],Array.isArray(a)&&(r=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),(s=T.cssHooks[n])&&"expand"in s)for(i in a=s.expand(a),delete e[n],a)i in e||(e[i]=a[i],t[i]=r);else t[n]=r}(d,u.opts.specialEasing);a<s;a++)if(n=ct.prefilters[a].call(u,e,d,u.opts))return f(n.stop)&&(T._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return T.map(d,dt,u),f(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),T.fx.timer(T.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}T.Animation=T.extend(ct,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return oe(i.elem,e,te.exec(t),i),i}]},tweener:function(e,t){f(e)?(t=e,e=["*"]):e=e.match(P);for(var i,n=0,r=e.length;n<r;n++)i=e[n],ct.tweeners[i]=ct.tweeners[i]||[],ct.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,r,a,s,o,l,u,d,c="width"in t||"height"in t,p=this,h={},f=e.style,m=e.nodeType&&se(e),g=Q.get(e,"fxshow");for(n in i.queue||(null==(s=T._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,p.always(function(){p.always(function(){s.unqueued--,T.queue(e,"fx").length||s.empty.fire()})})),t)if(r=t[n],at.test(r)){if(delete t[n],a=a||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;m=!0}h[n]=g&&g[n]||T.style(e,n)}if((l=!T.isEmptyObject(t))||!T.isEmptyObject(h))for(n in c&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=g&&g.display)&&(u=Q.get(e,"display")),"none"===(d=T.css(e,"display"))&&(u?d=u:(ue([e],!0),u=e.style.display||u,d=T.css(e,"display"),ue([e]))),("inline"===d||"inline-block"===d&&null!=u)&&"none"===T.css(e,"float")&&(l||(p.done(function(){f.display=u}),null==u&&(d=f.display,u="none"===d?"":d)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",p.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1,h)l||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:u}),a&&(g.hidden=!m),m&&ue([e],!0),p.done(function(){for(n in m||ue([e]),Q.remove(e,"fxshow"),h)T.style(e,n,h[n])})),l=dt(m?g[n]:0,n,p),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ct.prefilters.unshift(e):ct.prefilters.push(e)}}),T.speed=function(e,t,i){var n=e&&"object"==typeof e?T.extend({},e):{complete:i||!i&&t||f(e)&&e,duration:e,easing:i&&t||t&&!f(t)&&t};return T.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in T.fx.speeds?n.duration=T.fx.speeds[n.duration]:n.duration=T.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){f(n.old)&&n.old.call(this),n.queue&&T.dequeue(this,n.queue)},n},T.fn.extend({fadeTo:function(e,t,i,n){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=T.isEmptyObject(e),a=T.speed(t,i,n),s=function(){var t=ct(this,T.extend({},e),a);(r||Q.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=T.timers,s=Q.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&st.test(r)&&n(s[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(i),t=!1,a.splice(r,1));!t&&i||T.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=Q.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],a=T.timers,s=n?n.length:0;for(i.finish=!0,T.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),T.each(["toggle","show","hide"],function(e,t){var i=T.fn[t];T.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ut(t,!0),e,n,r)}}),T.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){T.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),T.timers=[],T.fx.tick=function(){var e,t=0,i=T.timers;for(tt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||T.fx.stop(),tt=void 0},T.fx.timer=function(e){T.timers.push(e),T.fx.start()},T.fx.interval=13,T.fx.start=function(){it||(it=!0,ot())},T.fx.stop=function(){it=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(t,i){return t=T.fx&&T.fx.speeds[t]||t,i=i||"fx",this.queue(i,function(i,n){var r=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(r)}})},nt=g.createElement("input"),rt=g.createElement("select").appendChild(g.createElement("option")),nt.type="checkbox",h.checkOn=""!==nt.value,h.optSelected=rt.selected,(nt=g.createElement("input")).value="t",nt.type="radio",h.radioValue="t"===nt.value;var pt,ht=T.expr.attrHandle;T.fn.extend({attr:function(e,t){return $(this,T.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){T.removeAttr(this,e)})}}),T.extend({attr:function(e,t,i){var n,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?T.prop(e,t,i):(1===a&&T.isXMLDoc(e)||(r=T.attrHooks[t.toLowerCase()]||(T.expr.match.bool.test(t)?pt:void 0)),void 0!==i?null===i?void T.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:null==(n=T.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&C(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(P);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),pt={set:function(e,t,i){return!1===t?T.removeAttr(e,i):e.setAttribute(i,i),i}},T.each(T.expr.match.bool.source.match(/\w+/g),function(e,t){var i=ht[t]||T.find.attr;ht[t]=function(e,t,n){var r,a,s=t.toLowerCase();return n||(a=ht[s],ht[s]=r,r=null!=i(e,t,n)?s:null,ht[s]=a),r}});var ft=/^(?:input|select|textarea|button)$/i,mt=/^(?:a|area)$/i;function gt(e){return(e.match(P)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}T.fn.extend({prop:function(e,t){return $(this,T.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[T.propFix[e]||e]})}}),T.extend({prop:function(e,t,i){var n,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&T.isXMLDoc(e)||(t=T.propFix[t]||t,r=T.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=T.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||mt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(T.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(e){var t,i,n,r,a,s,o,l=0;if(f(e))return this.each(function(t){T(this).addClass(e.call(this,t,vt(this)))});if((t=yt(e)).length)for(;i=this[l++];)if(r=vt(i),n=1===i.nodeType&&" "+gt(r)+" "){for(s=0;a=t[s++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");r!==(o=gt(n))&&i.setAttribute("class",o)}return this},removeClass:function(e){var t,i,n,r,a,s,o,l=0;if(f(e))return this.each(function(t){T(this).removeClass(e.call(this,t,vt(this)))});if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;i=this[l++];)if(r=vt(i),n=1===i.nodeType&&" "+gt(r)+" "){for(s=0;a=t[s++];)for(;-1<n.indexOf(" "+a+" ");)n=n.replace(" "+a+" "," ");r!==(o=gt(n))&&i.setAttribute("class",o)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):f(e)?this.each(function(i){T(this).toggleClass(e.call(this,i,vt(this),t),t)}):this.each(function(){var t,r,a,s;if(n)for(r=0,a=T(this),s=yt(e);t=s[r++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==i||((t=vt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+gt(vt(i))+" ").indexOf(t))return!0;return!1}});var _t=/\r/g;T.fn.extend({val:function(e){var t,i,n,r=this[0];return arguments.length?(n=f(e),this.each(function(i){var r;1===this.nodeType&&(null==(r=n?e.call(this,i,T(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=T.map(r,function(e){return null==e?"":e+""})),(t=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=T.valHooks[r.type]||T.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(_t,""):null==i?"":i:void 0}}),T.extend({valHooks:{option:{get:function(e){var t=T.find.attr(e,"value");return null!=t?t:gt(T.text(e))}},select:{get:function(e){var t,i,n,r=e.options,a=e.selectedIndex,s="select-one"===e.type,o=s?null:[],l=s?a+1:r.length;for(n=a<0?l:s?a:0;n<l;n++)if(((i=r[n]).selected||n===a)&&!i.disabled&&(!i.parentNode.disabled||!C(i.parentNode,"optgroup"))){if(t=T(i).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var i,n,r=e.options,a=T.makeArray(t),s=r.length;s--;)((n=r[s]).selected=-1<T.inArray(T.valHooks.option.get(n),a))&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<T.inArray(T(e).val(),t)}},h.checkOn||(T.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.focusin="onfocusin"in e;var bt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};T.extend(T.event,{trigger:function(t,i,n,r){var a,s,o,l,u,c,p,h,v=[n||g],y=d.call(t,"type")?t.type:t,_=d.call(t,"namespace")?t.namespace.split("."):[];if(s=h=o=n=n||g,3!==n.nodeType&&8!==n.nodeType&&!bt.test(y+T.event.triggered)&&(-1<y.indexOf(".")&&(y=(_=y.split(".")).shift(),_.sort()),u=y.indexOf(":")<0&&"on"+y,(t=t[T.expando]?t:new T.Event(y,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=_.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:T.makeArray(i,[t]),p=T.event.special[y]||{},r||!p.trigger||!1!==p.trigger.apply(n,i))){if(!r&&!p.noBubble&&!m(n)){for(l=p.delegateType||y,bt.test(l+y)||(s=s.parentNode);s;s=s.parentNode)v.push(s),o=s;o===(n.ownerDocument||g)&&v.push(o.defaultView||o.parentWindow||e)}for(a=0;(s=v[a++])&&!t.isPropagationStopped();)h=s,t.type=1<a?l:p.bindType||y,(c=(Q.get(s,"events")||Object.create(null))[t.type]&&Q.get(s,"handle"))&&c.apply(s,i),(c=u&&s[u])&&c.apply&&Y(s)&&(t.result=c.apply(s,i),!1===t.result&&t.preventDefault());return t.type=y,r||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(v.pop(),i)||!Y(n)||u&&f(n[y])&&!m(n)&&((o=n[u])&&(n[u]=null),T.event.triggered=y,t.isPropagationStopped()&&h.addEventListener(y,Tt),n[y](),t.isPropagationStopped()&&h.removeEventListener(y,Tt),T.event.triggered=void 0,o&&(n[u]=o)),t.result}},simulate:function(e,t,i){var n=T.extend(new T.Event,i,{type:e,isSimulated:!0});T.event.trigger(n,null,t)}}),T.fn.extend({trigger:function(e,t){return this.each(function(){T.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return T.event.trigger(e,t,i,!0)}}),h.focusin||T.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){T.event.simulate(t,e.target,T.event.fix(e))};T.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,r=Q.access(n,t);r||n.addEventListener(e,i,!0),Q.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,r=Q.access(n,t)-1;r?Q.access(n,t,r):(n.removeEventListener(e,i,!0),Q.remove(n,t))}}});var wt=e.location,kt={guid:Date.now()},St=/\?/;T.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(t){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+t),i};var xt=/\[\]$/,Mt=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;function It(e,t,i,n){var r;if(Array.isArray(t))T.each(t,function(t,r){i||xt.test(e)?n(e,r):It(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,i,n)});else if(i||"object"!==_(t))n(e,t);else for(r in t)It(e+"["+r+"]",t[r],i,n)}T.param=function(e,t){var i,n=[],r=function(e,t){var i=f(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e))T.each(e,function(){r(this.name,this.value)});else for(i in e)It(i,e[i],t,r);return n.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&Et.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var i=T(this).val();return null==i?null:Array.isArray(i)?T.map(i,function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:i.replace(Mt,"\r\n")}}).get()}});var Dt=/%20/g,At=/#.*$/,Ot=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Pt=/^\/\//,jt={},Ut={},Rt="*/".concat("*"),zt=g.createElement("a");function Bt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,a=t.toLowerCase().match(P)||[];if(f(i))for(;n=a[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Ft(e,t,i,n){var r={},a=e===Ut;function s(o){var l;return r[o]=!0,T.each(e[o]||[],function(e,o){var u=o(t,i,n);return"string"!=typeof u||a||r[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),s(u),!1)}),l}return s(t.dataTypes[0])||!r["*"]&&s("*")}function $t(e,t){var i,n,r=T.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&T.extend(!0,e,n),e}zt.href=wt.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,T.ajaxSettings),t):$t(T.ajaxSettings,e)},ajaxPrefilter:Bt(jt),ajaxTransport:Bt(Ut),ajax:function(t,i){"object"==typeof t&&(i=t,t=void 0),i=i||{};var n,r,a,s,o,l,u,d,c,p,h=T.ajaxSetup({},i),f=h.context||h,m=h.context&&(f.nodeType||f.jquery)?T(f):T.event,v=T.Deferred(),y=T.Callbacks("once memory"),_=h.statusCode||{},b={},w={},k="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Nt.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==u&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)S.always(e[S.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||k;return n&&n.abort(t),x(0,t),this}};if(v.promise(S),h.url=((t||h.url||wt.href)+"").replace(Pt,wt.protocol+"//"),h.type=i.method||i.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(P)||[""],null==h.crossDomain){l=g.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=zt.protocol+"//"+zt.host!=l.protocol+"//"+l.host}catch(t){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=T.param(h.data,h.traditional)),Ft(jt,h,i,S),u)return S;for(c in(d=T.event&&h.global)&&0==T.active++&&T.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Lt.test(h.type),r=h.url.replace(At,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Dt,"+")):(p=h.url.slice(r.length),h.data&&(h.processData||"string"==typeof h.data)&&(r+=(St.test(r)?"&":"?")+h.data,delete h.data),!1===h.cache&&(r=r.replace(Ot,"$1"),p=(St.test(r)?"&":"?")+"_="+kt.guid+++p),h.url=r+p),h.ifModified&&(T.lastModified[r]&&S.setRequestHeader("If-Modified-Since",T.lastModified[r]),T.etag[r]&&S.setRequestHeader("If-None-Match",T.etag[r])),(h.data&&h.hasContent&&!1!==h.contentType||i.contentType)&&S.setRequestHeader("Content-Type",h.contentType),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Rt+"; q=0.01":""):h.accepts["*"]),h.headers)S.setRequestHeader(c,h.headers[c]);if(h.beforeSend&&(!1===h.beforeSend.call(f,S,h)||u))return S.abort();if(k="abort",y.add(h.complete),S.done(h.success),S.fail(h.error),n=Ft(Ut,h,i,S)){if(S.readyState=1,d&&m.trigger("ajaxSend",[S,h]),u)return S;h.async&&0<h.timeout&&(o=e.setTimeout(function(){S.abort("timeout")},h.timeout));try{u=!1,n.send(b,x)}catch(t){if(u)throw t;x(-1,t)}}else x(-1,"No Transport");function x(t,i,s,l){var c,p,g,b,w,k=i;u||(u=!0,o&&e.clearTimeout(o),n=void 0,a=l||"",S.readyState=0<t?4:0,c=200<=t&&t<300||304===t,s&&(b=function(e,t,i){for(var n,r,a,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in o)if(o[r]&&o[r].test(n)){l.unshift(r);break}if(l[0]in i)a=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}s||(s=r)}a=a||s}if(a)return a!==l[0]&&l.unshift(a),i[a]}(h,S,s)),!c&&-1<T.inArray("script",h.dataTypes)&&(h.converters["text script"]=function(){}),b=function(e,t,i,n){var r,a,s,o,l,u={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(a=d.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=d.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=u[l+" "+a]||u["* "+a]))for(r in u)if((o=r.split(" "))[1]===a&&(s=u[l+" "+o[0]]||u["* "+o[0]])){!0===s?s=u[r]:!0!==u[r]&&(a=o[0],d.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(h,b,S,c),c?(h.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(T.lastModified[r]=w),(w=S.getResponseHeader("etag"))&&(T.etag[r]=w)),204===t||"HEAD"===h.type?k="nocontent":304===t?k="notmodified":(k=b.state,p=b.data,c=!(g=b.error))):(g=k,!t&&k||(k="error",t<0&&(t=0))),S.status=t,S.statusText=(i||k)+"",c?v.resolveWith(f,[p,k,S]):v.rejectWith(f,[S,k,g]),S.statusCode(_),_=void 0,d&&m.trigger(c?"ajaxSuccess":"ajaxError",[S,h,c?p:g]),y.fireWith(f,[S,k]),d&&(m.trigger("ajaxComplete",[S,h]),--T.active||T.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,i){return T.get(e,t,i,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],function(e,t){T[t]=function(e,i,n,r){return f(i)&&(r=r||n,n=i,i=void 0),T.ajax(T.extend({url:e,type:t,dataType:r,data:i,success:n},T.isPlainObject(e)&&e))}}),T.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),T._evalUrl=function(e,t,i){return T.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){T.globalEval(e,t,i)}})},T.fn.extend({wrapAll:function(e){var t;return this[0]&&(f(e)&&(e=e.call(this[0])),t=T(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return f(e)?this.each(function(t){T(this).wrapInner(e.call(this,t))}):this.each(function(){var t=T(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=f(e);return this.each(function(i){T(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)},T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var qt={0:200,1223:204},Ht=T.ajaxSettings.xhr();h.cors=!!Ht&&"withCredentials"in Ht,h.ajax=Ht=!!Ht,T.ajaxTransport(function(t){var i,n;if(h.cors||Ht&&!t.crossDomain)return{send:function(r,a){var s,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];for(s in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)o.setRequestHeader(s,r[s]);i=function(e){return function(){i&&(i=n=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?a(0,"error"):a(o.status,o.statusText):a(qt[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=i(),n=o.onerror=o.ontimeout=i("error"),void 0!==o.onabort?o.onabort=n:o.onreadystatechange=function(){4===o.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{o.send(t.hasContent&&t.data||null)}catch(r){if(i)throw r}},abort:function(){i&&i()}}}),T.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return T.globalEval(e),e}}}),T.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),T.ajaxTransport("script",function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,r){t=T("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),g.head.appendChild(t[0])},abort:function(){i&&i()}}});var Wt,Vt=[],Yt=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vt.pop()||T.expando+"_"+kt.guid++;return this[e]=!0,e}}),T.ajaxPrefilter("json jsonp",function(t,i,n){var r,a,s,o=!1!==t.jsonp&&(Yt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=f(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Yt,"$1"+r):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||T.error(r+" was not called"),s[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){s=arguments},n.always(function(){void 0===a?T(e).removeProp(r):e[r]=a,t[r]&&(t.jsonpCallback=i.jsonpCallback,Vt.push(r)),s&&f(a)&&a(s[0]),s=a=void 0}),"script"}),h.createHTMLDocument=((Wt=g.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Wt.childNodes.length),T.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(h.createHTMLDocument?((n=(t=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,t.head.appendChild(n)):t=g),a=!i&&[],(r=E.exec(e))?[t.createElement(r[1])]:(r=_e([e],t,a),a&&a.length&&T(a).remove(),T.merge([],r.childNodes)));var n,r,a},T.fn.load=function(e,t,i){var n,r,a,s=this,o=e.indexOf(" ");return-1<o&&(n=gt(e.slice(o)),e=e.slice(0,o)),f(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<s.length&&T.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){a=arguments,s.html(n?T("<div>").append(T.parseHTML(e)).find(n):e)}).always(i&&function(e,t){s.each(function(){i.apply(this,a||[e.responseText,t,e])})}),this},T.expr.pseudos.animated=function(e){return T.grep(T.timers,function(t){return e===t.elem}).length},T.offset={setOffset:function(e,t,i){var n,r,a,s,o,l,u=T.css(e,"position"),d=T(e),c={};"static"===u&&(e.style.position="relative"),o=d.offset(),a=T.css(e,"top"),l=T.css(e,"left"),("absolute"===u||"fixed"===u)&&-1<(a+l).indexOf("auto")?(s=(n=d.position()).top,r=n.left):(s=parseFloat(a)||0,r=parseFloat(l)||0),f(t)&&(t=t.call(e,i,T.extend({},o))),null!=t.top&&(c.top=t.top-o.top+s),null!=t.left&&(c.left=t.left-o.left+r),"using"in t?t.using.call(e,c):("number"==typeof c.top&&(c.top+="px"),"number"==typeof c.left&&(c.left+="px"),d.css(c))}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){T.offset.setOffset(this,e,t)});var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],r={top:0,left:0};if("fixed"===T.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===T.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((r=T(e).offset()).top+=T.css(e,"borderTopWidth",!0),r.left+=T.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-T.css(n,"marginTop",!0),left:t.left-r.left-T.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===T.css(e,"position");)e=e.offsetParent;return e||ne})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;T.fn[e]=function(n){return $(this,function(e,n,r){var a;if(m(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===r)return a?a[t]:e[n];a?a.scrollTo(i?a.pageXOffset:r,i?r:a.pageYOffset):e[n]=r},e,n,arguments.length)}}),T.each(["top","left"],function(e,t){T.cssHooks[t]=$e(h.pixelPosition,function(e,i){if(i)return i=Fe(e,t),Ue.test(i)?T(e).position()[t]+"px":i})}),T.each({Height:"height",Width:"width"},function(e,t){T.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){T.fn[n]=function(r,a){var s=arguments.length&&(i||"boolean"!=typeof r),o=i||(!0===r||!0===a?"margin":"border");return $(this,function(t,i,r){var a;return m(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===r?T.css(t,i,o):T.style(t,i,r,o)},t,s?r:void 0,s)}})}),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){T.fn[t]=function(e){return this.on(t,e)}}),T.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){T.fn[t]=function(e,i){return 0<arguments.length?this.on(t,null,e,i):this.trigger(t)}});var Gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;T.proxy=function(e,t){var i,n,a;if("string"==typeof t&&(i=e[t],t=e,e=i),f(e))return n=r.call(arguments,2),(a=function(){return e.apply(t||this,n.concat(r.call(arguments)))}).guid=e.guid=e.guid||T.guid++,a},T.holdReady=function(e){e?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=C,T.isFunction=f,T.isWindow=m,T.camelCase=V,T.type=_,T.now=Date.now,T.isNumeric=function(e){var t=T.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},T.trim=function(e){return null==e?"":(e+"").replace(Gt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return T});var Qt=e.jQuery,Xt=e.$;return T.noConflict=function(t){return e.$===T&&(e.$=Xt),t&&e.jQuery===T&&(e.jQuery=Qt),T},void 0===t&&(e.jQuery=e.$=T),T}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],t):(e=e||self).videojs=t(e.window,e.document)}(this,function(e,t){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var i="7.8.4",n=[],r=function(t,i){return function(r,a,s){var o=i.levels[a],l=new RegExp("^("+o+")$");if("log"!==r&&s.unshift(r.toUpperCase()+":"),s.unshift(t+":"),n){n.push([].concat(s));var u=n.length-1e3;n.splice(0,u>0?u:0)}if(e.console){var d=e.console[r];d||"debug"!==r||(d=e.console.info||e.console.log),d&&o&&l.test(r)&&d[Array.isArray(s)?"apply":"call"](e.console,s)}}};var a=function e(t){var i,a="info",s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i("log",a,t)};return i=r(t,s),s.createLogger=function(i){return e(t+": "+i)},s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:a},s.level=function(e){if("string"==typeof e){if(!s.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');a=e}return a},(s.history=function(){return n?[].concat(n):[]}).filter=function(e){return(n||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},s.history.clear=function(){n&&(n.length=0)},s.history.disable=function(){null!==n&&(n.length=0,n=null)},s.history.enable=function(){null===n&&(n=[])},s.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("error",a,t)},s.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("warn",a,t)},s.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("debug",a,t)},s}("VIDEOJS"),s=a.createLogger;function o(e,t){return e(t={exports:{}},t.exports),t.exports}var l=o(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},t.apply(this,arguments)}e.exports=t}),u=Object.prototype.toString,d=function(e){return h(e)?Object.keys(e):[]};function c(e,t){d(e).forEach(function(i){return t(e[i],i)})}function p(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Object.assign?l.apply(void 0,[e].concat(i)):(i.forEach(function(t){t&&c(t,function(t,i){e[i]=t})}),e)}function h(e){return!!e&&"object"==typeof e}function f(e){return h(e)&&"[object Object]"===u.call(e)&&e.constructor===Object}function m(t,i){if(!t||!i)return"";if("function"==typeof e.getComputedStyle){var n=e.getComputedStyle(t);return n?n.getPropertyValue(i)||n[i]:""}return""}function g(e){return"string"==typeof e&&Boolean(e.trim())}function v(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function y(){return t===e.document}function _(e){return h(e)&&1===e.nodeType}function b(){try{return e.parent!==e.self}catch(e){return!0}}function T(e){return function(i,n){if(!g(i))return t[e](null);g(n)&&(n=t.querySelector(n));var r=_(n)?n:t;return r[e]&&r[e](i)}}function w(e,i,n,r){void 0===e&&(e="div"),void 0===i&&(i={}),void 0===n&&(n={});var s=t.createElement(e);return Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(a.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+t+"."),s.setAttribute(e,t)):"textContent"===e?k(s,t):s[e]!==t&&(s[e]=t)}),Object.getOwnPropertyNames(n).forEach(function(e){s.setAttribute(e,n[e])}),r&&$(s,r),s}function k(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function S(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function x(e,t){return v(t),e.classList?e.classList.contains(t):(i=t,new RegExp("(^|\\s)"+i+"($|\\s)")).test(e.className);var i}function M(e,t){return e.classList?e.classList.add(t):x(e,t)||(e.className=(e.className+" "+t).trim()),e}function C(e,t){return e.classList?e.classList.remove(t):(v(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function E(e,t,i){var n=x(e,t);if("function"==typeof i&&(i=i(e,t)),"boolean"!=typeof i&&(i=!n),i!==n)return i?M(e,t):C(e,t),e}function I(e,t){Object.getOwnPropertyNames(t).forEach(function(i){var n=t[i];null==n||!1===n?e.removeAttribute(i):e.setAttribute(i,!0===n?"":n)})}function D(e){var t={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,r=n.length-1;r>=0;r--){var a=n[r].name,s=n[r].value;"boolean"!=typeof e[a]&&-1===i.indexOf(","+a+",")||(s=null!==s),t[a]=s}return t}function A(e,t){return e.getAttribute(t)}function O(e,t,i){e.setAttribute(t,i)}function N(e,t){e.removeAttribute(t)}function L(){t.body.focus(),t.onselectstart=function(){return!1}}function P(){t.onselectstart=function(){return!0}}function j(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(m(e,"height"))),i.width||(i.width=parseFloat(m(e,"width"))),i}}function U(i){var n;if(i.getBoundingClientRect&&i.parentNode&&(n=i.getBoundingClientRect()),!n)return{left:0,top:0};var r=t.documentElement,a=t.body,s=r.clientLeft||a.clientLeft||0,o=e.pageXOffset||a.scrollLeft,l=n.left+o-s,u=r.clientTop||a.clientTop||0,d=e.pageYOffset||a.scrollTop,c=n.top+d-u;return{left:Math.round(l),top:Math.round(c)}}function R(e,t){var i={},n=U(e),r=e.offsetWidth,a=e.offsetHeight,s=n.top,o=n.left,l=t.pageY,u=t.pageX;return t.changedTouches&&(u=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(s-l+a)/a)),i.x=Math.max(0,Math.min(1,(u-o)/r)),i}function z(e){return h(e)&&3===e.nodeType}function B(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function F(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),_(e)||z(e)?e:"string"==typeof e&&/\S/.test(e)?t.createTextNode(e):void 0}).filter(function(e){return e})}function $(e,t){return F(t).forEach(function(t){return e.appendChild(t)}),e}function q(e,t){return $(B(e),t)}function H(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}var W,V=T("querySelector"),Y=T("querySelectorAll"),G=Object.freeze({__proto__:null,isReal:y,isEl:_,isInFrame:b,createEl:w,textContent:k,prependTo:S,hasClass:x,addClass:M,removeClass:C,toggleClass:E,setAttributes:I,getAttributes:D,getAttribute:A,setAttribute:O,removeAttribute:N,blockTextSelection:L,unblockTextSelection:P,getBoundingClientRect:j,findPosition:U,getPointerPosition:R,isTextNode:z,emptyEl:B,normalizeContent:F,appendContent:$,insertContent:q,isSingleLeftClick:H,$:V,$$:Y}),Q=!1,X=function(){if(y()&&!1!==W.options.autoSetup){var e=Array.prototype.slice.call(t.getElementsByTagName("video")),i=Array.prototype.slice.call(t.getElementsByTagName("audio")),n=Array.prototype.slice.call(t.getElementsByTagName("video-js")),r=e.concat(i,n);if(r&&r.length>0)for(var a=0,s=r.length;a<s;a++){var o=r[a];if(!o||!o.getAttribute){K(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&W(o)}else Q||K(1)}};function K(t,i){i&&(W=i),e.setTimeout(X,t)}function Z(){Q=!0,e.removeEventListener("load",Z)}y()&&("complete"===t.readyState?Z():e.addEventListener("load",Z));var J,ee=function(e){var i=t.createElement("style");return i.className=e,i},te=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},ie=3;function ne(){return ie++}e.WeakMap||(J=function(){function t(){this.vdata="vdata"+Math.floor(e.performance&&e.performance.now()||Date.now()),this.data={}}var i=t.prototype;return i.set=function(e,t){var i=e[this.vdata]||ne();return e[this.vdata]||(e[this.vdata]=i),this.data[i]=t,this},i.get=function(e){var t=e[this.vdata];if(t)return this.data[t];a("We have no data for this element",e)},i.has=function(e){return e[this.vdata]in this.data},i.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},t}());var re,ae=e.WeakMap?new WeakMap:new J;function se(e,t){if(ae.has(e)){var i=ae.get(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&ae.delete(e)}}function oe(e,t,i,n){i.forEach(function(i){e(t,i,n)})}function le(i){if(i.fixed_)return i;function n(){return!0}function r(){return!1}if(!i||!i.isPropagationStopped){var a=i||e.event;for(var s in i={},a)"layerX"!==s&&"layerY"!==s&&"keyLocation"!==s&&"webkitMovementX"!==s&&"webkitMovementY"!==s&&("returnValue"===s&&a.preventDefault||(i[s]=a[s]));if(i.target||(i.target=i.srcElement||t),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){a.preventDefault&&a.preventDefault(),i.returnValue=!1,a.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),i.cancelBubble=!0,a.cancelBubble=!0,i.isPropagationStopped=n},i.isPropagationStopped=r,i.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),i.isImmediatePropagationStopped=n,i.stopPropagation()},i.isImmediatePropagationStopped=r,null!==i.clientX&&void 0!==i.clientX){var o=t.documentElement,l=t.body;i.pageX=i.clientX+(o&&o.scrollLeft||l&&l.scrollLeft||0)-(o&&o.clientLeft||l&&l.clientLeft||0),i.pageY=i.clientY+(o&&o.scrollTop||l&&l.scrollTop||0)-(o&&o.clientTop||l&&l.clientTop||0)}i.which=i.charCode||i.keyCode,null!==i.button&&void 0!==i.button&&(i.button=1&i.button?0:4&i.button?1:2&i.button?2:0)}return i.fixed_=!0,i}var ue=function(){if("boolean"!=typeof re){re=!1;try{var t=Object.defineProperty({},"passive",{get:function(){re=!0}});e.addEventListener("test",null,t),e.removeEventListener("test",null,t)}catch(e){}}return re},de=["touchstart","touchmove"];function ce(e,t,i){if(Array.isArray(t))return oe(ce,e,t,i);ae.has(e)||ae.set(e,{});var n=ae.get(e);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),i.guid||(i.guid=ne()),n.handlers[t].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,i){if(!n.disabled){t=le(t);var r=n.handlers[t.type];if(r)for(var s=r.slice(0),o=0,l=s.length;o<l&&!t.isImmediatePropagationStopped();o++)try{s[o].call(e,t,i)}catch(e){a.error(e)}}}),1===n.handlers[t].length)if(e.addEventListener){var r=!1;ue()&&de.indexOf(t)>-1&&(r={passive:!0}),e.addEventListener(t,n.dispatcher,r)}else e.attachEvent&&e.attachEvent("on"+t,n.dispatcher)}function pe(e,t,i){if(ae.has(e)){var n=ae.get(e);if(n.handlers){if(Array.isArray(t))return oe(pe,e,t,i);var r=function(e,t){n.handlers[t]=[],se(e,t)};if(void 0!==t){var a=n.handlers[t];if(a)if(i){if(i.guid)for(var s=0;s<a.length;s++)a[s].guid===i.guid&&a.splice(s--,1);se(e,t)}else r(e,t)}else for(var o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&r(e,o)}}}function he(e,t,i){var n=ae.has(e)?ae.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=le(t),n.dispatcher&&n.dispatcher.call(e,t,i),r&&!t.isPropagationStopped()&&!0===t.bubbles)he.call(null,r,t,i);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){ae.has(t.target)||ae.set(t.target,{});var a=ae.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function fe(e,t,i){if(Array.isArray(t))return oe(fe,e,t,i);var n=function n(){pe(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||ne(),ce(e,t,n)}function me(e,t,i){var n=function n(){pe(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||ne(),ce(e,t,n)}var ge,ve=Object.freeze({__proto__:null,fixEvent:le,on:ce,off:pe,trigger:he,one:fe,any:me}),ye=30,_e=function(e,t,i){t.guid||(t.guid=ne());var n=t.bind(e);return n.guid=i?i+"_"+t.guid:t.guid,n},be=function(t,i){var n=e.performance.now();return function(){var r=e.performance.now();r-n>=i&&(t.apply(void 0,arguments),n=r)}},Te=function(t,i,n,r){var a;void 0===r&&(r=e);var s=function(){var e=this,s=arguments,o=function(){a=null,o=null,n||t.apply(e,s)};!a&&n&&t.apply(e,s),r.clearTimeout(a),a=r.setTimeout(o,i)};return s.cancel=function(){r.clearTimeout(a),a=null},s},we=function(){};we.prototype.allowedEvents_={},we.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},ce(this,e,t),this.addEventListener=i},we.prototype.addEventListener=we.prototype.on,we.prototype.off=function(e,t){pe(this,e,t)},we.prototype.removeEventListener=we.prototype.off,we.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},fe(this,e,t),this.addEventListener=i},we.prototype.any=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},me(this,e,t),this.addEventListener=i},we.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=le(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),he(this,e)},we.prototype.dispatchEvent=we.prototype.trigger,we.prototype.queueTrigger=function(t){var i=this;ge||(ge=new Map);var n=t.type||t,r=ge.get(this);r||(r=new Map,ge.set(this,r));var a=r.get(n);r.delete(n),e.clearTimeout(a);var s=e.setTimeout(function(){0===r.size&&(r=null,ge.delete(i)),i.trigger(t)},0);r.set(n,s)};var ke=function(e){return e instanceof we||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},Se=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},xe=function(e){if(!e.nodeName&&!ke(e))throw new Error("Invalid target; must be a DOM node or evented object.")},Me=function(e){if(!Se(e))throw new Error("Invalid event type; must be a non-empty string or array.")},Ce=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},Ee=function(e,t){var i,n,r,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return a?(i=e.eventBusEl_,t.length>=3&&t.shift(),n=t[0],r=t[1]):(i=t[0],n=t[1],r=t[2]),xe(i),Me(n),Ce(r),{isTargetingSelf:a,target:i,type:n,listener:r=_e(e,r)}},Ie=function(e,t,i,n){xe(e),e.nodeName?ve[t](e,i,n):e[t](i,n)},De={on:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=Ee(this,i),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(Ie(s,"on",o,l),!a){var u=function(){return e.off(s,o,l)};u.guid=l.guid;var d=function(){return e.off("dispose",u)};d.guid=l.guid,Ie(this,"on","dispose",u),Ie(s,"on","dispose",d)}},one:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=Ee(this,i),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(a)Ie(s,"one",o,l);else{var u=function t(){e.off(s,o,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};u.guid=l.guid,Ie(s,"one",o,u)}},any:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=Ee(this,i),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(a)Ie(s,"any",o,l);else{var u=function t(){e.off(s,o,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};u.guid=l.guid,Ie(s,"any",o,u)}},off:function(e,t,i){if(!e||Se(e))pe(this.eventBusEl_,e,t);else{var n=e,r=t;xe(n),Me(r),Ce(i),i=_e(this,i),this.off("dispose",i),n.nodeName?(pe(n,r,i),pe(n,"dispose",i)):ke(n)&&(n.off(r,i),n.off("dispose",i))}},trigger:function(e,t){return he(this.eventBusEl_,e,t)}};function Ae(t,i){void 0===i&&(i={});var n=i.eventBusKey;if(n){if(!t[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');t.eventBusEl_=t[n]}else t.eventBusEl_=w("span",{className:"vjs-event-bus"});return p(t,De),t.eventedCallbacks&&t.eventedCallbacks.forEach(function(e){e()}),t.on("dispose",function(){t.off(),e.setTimeout(function(){t.eventBusEl_=null},0)}),t}var Oe={state:{},setState:function(e){var t,i=this;return"function"==typeof e&&(e=e()),c(e,function(e,n){i.state[n]!==e&&((t=t||{})[n]={from:i.state[n],to:e}),i.state[n]=e}),t&&ke(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Ne(e,t){return p(e,Oe),e.state=p({},e.state,t),"function"==typeof e.handleStateChanged&&ke(e)&&e.on("statechanged",e.handleStateChanged),e}var Le=function(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})},Pe=function(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})};function je(){for(var e={},t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach(function(t){t&&c(t,function(t,i){f(t)?(f(e[i])||(e[i]={}),e[i]=je(e[i],t)):e[i]=t})}),e}var Ue=function(){function t(t,i,n){if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=je({},this.options_),i=this.options_=je(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){var r=t&&t.id&&t.id()||"no_player";this.id_=r+"_component_"+ne()}var a;this.name_=i.name||null,i.el?this.el_=i.el:!1!==i.createEl&&(this.el_=this.createEl()),!1!==i.evented&&Ae(this,{eventBusKey:this.el_?"el_":null}),Ne(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},e.Set||(a=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var i in this.set_)e.call(t,i,i,this)},e}()),this.setTimeoutIds_=e.Set?new Set:new a,this.setIntervalIds_=e.Set?new Set:new a,this.rafIds_=e.Set?new Set:new a,this.clearingTimersOnDispose_=!1,!1!==i.initChildren&&this.initChildren(),this.ready(n),!1!==i.reportTouchActivity&&this.enableTouchActivity()}var i=t.prototype;return i.dispose=function(){if(!this.isDisposed_){if(this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),ae.has(this.el_)&&ae.delete(this.el_),this.el_=null),this.player_=null}},i.isDisposed=function(){return Boolean(this.isDisposed_)},i.player=function(){return this.player_},i.options=function(e){return e?(this.options_=je(this.options_,e),this.options_):this.options_},i.el=function(){return this.el_},i.createEl=function(e,t,i){return w(e,t,i)},i.localize=function(e,t,i){void 0===i&&(i=e);var n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[n],s=n&&n.split("-")[0],o=r&&r[s],l=i;return a&&a[e]?l=a[e]:o&&o[e]&&(l=o[e]),t&&(l=l.replace(/\{(\d+)\}/g,function(e,i){var n=t[i-1],r=n;return void 0===n&&(r=e),r})),l},i.contentEl=function(){return this.contentEl_||this.el_},i.id=function(){return this.id_},i.name=function(){return this.name_},i.children=function(){return this.children_},i.getChildById=function(e){return this.childIndex_[e]},i.getChild=function(e){if(e)return this.childNameIndex_[e]},i.getDescendant=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t=t.reduce(function(e,t){return e.concat(t)},[]);for(var n=this,r=0;r<t.length;r++)if(!(n=n.getChild(t[r]))||!n.getChild)return;return n},i.addChild=function(e,i,n){var r,a;if(void 0===i&&(i={}),void 0===n&&(n=this.children_.length),"string"==typeof e){a=Pe(e);var s=i.componentClass||a;i.name=a;var o=t.getComponent(s);if(!o)throw new Error("Component "+s+" does not exist");if("function"!=typeof o)return null;r=new o(this.player_||this,i)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(a=a||r.name&&Pe(r.name()))&&(this.childNameIndex_[a]=r,this.childNameIndex_[Le(a)]=r),"function"==typeof r.el&&r.el()){var l=null;this.children_[n+1]&&(this.children_[n+1].el_?l=this.children_[n+1].el_:_(this.children_[n+1])&&(l=this.children_[n+1])),this.contentEl().insertBefore(r.el(),l)}return r},i.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Pe(e.name())]=null,this.childNameIndex_[Le(e.name())]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},i.initChildren=function(){var e=this,i=this.options_.children;if(i){var n,r=this.options_,a=t.getComponent("Tech");(n=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(e){return!n.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(t){var n,r;return"string"==typeof t?r=i[n=t]||e.options_[n]||{}:(n=t.name,r=t),{name:n,opts:r}}).filter(function(e){var i=t.getComponent(e.opts.componentClass||Pe(e.name));return i&&!a.isTech(i)}).forEach(function(t){var i=t.name,n=t.opts;if(void 0!==r[i]&&(n=r[i]),!1!==n){!0===n&&(n={}),n.playerOptions=e.options_.playerOptions;var a=e.addChild(i,n);a&&(e[i]=a)}})}},i.buildCSSClass=function(){return""},i.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},i.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},i.$=function(e,t){return V(e,t||this.contentEl())},i.$$=function(e,t){return Y(e,t||this.contentEl())},i.hasClass=function(e){return x(this.el_,e)},i.addClass=function(e){M(this.el_,e)},i.removeClass=function(e){C(this.el_,e)},i.toggleClass=function(e,t){E(this.el_,e,t)},i.show=function(){this.removeClass("vjs-hidden")},i.hide=function(){this.addClass("vjs-hidden")},i.lockShowing=function(){this.addClass("vjs-lock-showing")},i.unlockShowing=function(){this.removeClass("vjs-lock-showing")},i.getAttribute=function(e){return A(this.el_,e)},i.setAttribute=function(e,t){O(this.el_,e,t)},i.removeAttribute=function(e){N(this.el_,e)},i.width=function(e,t){return this.dimension("width",e,t)},i.height=function(e,t){return this.dimension("height",e,t)},i.dimensions=function(e,t){this.width(e,!0),this.height(t)},i.dimension=function(e,t,i){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[e],r=n.indexOf("px");return-1!==r?parseInt(n.slice(0,r),10):parseInt(this.el_["offset"+Pe(e)],10)},i.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=m(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var i="offset"+Pe(e);t=this.el_[i]}return t},i.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},i.currentWidth=function(){return this.currentDimension("width")},i.currentHeight=function(){return this.currentDimension("height")},i.focus=function(){this.el_.focus()},i.blur=function(){this.el_.blur()},i.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},i.handleKeyPress=function(e){this.handleKeyDown(e)},i.emitTapEvents=function(){var t,i=0,n=null;this.on("touchstart",function(r){1===r.touches.length&&(n={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},i=e.performance.now(),t=!0)}),this.on("touchmove",function(e){if(e.touches.length>1)t=!1;else if(n){var i=e.touches[0].pageX-n.pageX,r=e.touches[0].pageY-n.pageY;Math.sqrt(i*i+r*r)>10&&(t=!1)}});var r=function(){t=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",function(r){(n=null,!0===t)&&(e.performance.now()-i<200&&(r.preventDefault(),this.trigger("tap")))})},i.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=_e(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var i=function(i){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",i),this.on("touchcancel",i)}},i.setTimeout=function(t,i){var n,r=this;return t=_e(this,t),this.clearTimersOnDispose_(),n=e.setTimeout(function(){r.setTimeoutIds_.has(n)&&r.setTimeoutIds_.delete(n),t()},i),this.setTimeoutIds_.add(n),n},i.clearTimeout=function(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),e.clearTimeout(t)),t},i.setInterval=function(t,i){t=_e(this,t),this.clearTimersOnDispose_();var n=e.setInterval(t,i);return this.setIntervalIds_.add(n),n},i.clearInterval=function(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),e.clearInterval(t)),t},i.requestAnimationFrame=function(t){var i,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),t=_e(this,t),i=e.requestAnimationFrame(function(){n.rafIds_.has(i)&&n.rafIds_.delete(i),t()}),this.rafIds_.add(i),i):this.setTimeout(t,1e3/60)},i.cancelAnimationFrame=function(t){return this.supportsRaf_?(this.rafIds_.has(t)&&(this.rafIds_.delete(t),e.cancelAnimationFrame(t)),t):this.clearTimeout(t)},i.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var i=t[0],n=t[1];e[i].forEach(e[n],e)}),e.clearingTimersOnDispose_=!1}))},t.registerComponent=function(e,i){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var n,r=t.getComponent("Tech"),a=r&&r.isTech(i),s=t===i||t.prototype.isPrototypeOf(i.prototype);if(a||!s)throw n=a?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+e+'"; '+n+".");e=Pe(e),t.components_||(t.components_={});var o=t.getComponent("Player");if("Player"===e&&o&&o.players){var l=o.players,u=Object.keys(l);if(l&&u.length>0&&u.map(function(e){return l[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[e]=i,t.components_[Le(e)]=i,i},t.getComponent=function(e){if(e&&t.components_)return t.components_[e]},t}();Ue.prototype.supportsRaf_="function"==typeof e.requestAnimationFrame&&"function"==typeof e.cancelAnimationFrame,Ue.registerComponent("Component",Ue);var Re=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};o(function(e){function t(i){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(i)}e.exports=t}),o(function(e){function t(i){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(i)}e.exports=t});var ze,Be=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t},Fe=e.navigator&&e.navigator.userAgent||"",$e=/AppleWebKit\/([\d.]+)/i.exec(Fe),qe=$e?parseFloat($e.pop()):null,He=/iPod/i.test(Fe),We=(ze=Fe.match(/OS (\d+)_/i))&&ze[1]?ze[1]:null,Ve=/Android/i.test(Fe),Ye=function(){var e=Fe.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),Ge=Ve&&Ye<5&&qe<537,Qe=/Firefox/i.test(Fe),Xe=/Edg/i.test(Fe),Ke=!Xe&&(/Chrome/i.test(Fe)||/CriOS/i.test(Fe)),Ze=function(){var e=Fe.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),Je=function(){var e=/MSIE\s(\d+)\.\d/.exec(Fe),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(Fe)&&/rv:11.0/.test(Fe)&&(t=11),t}(),et=/Safari/i.test(Fe)&&!Ke&&!Ve&&!Xe,tt=/Windows/i.test(Fe),it=y()&&("ontouchstart"in e||e.navigator.maxTouchPoints||e.DocumentTouch&&e.document instanceof e.DocumentTouch),nt=/iPad/i.test(Fe)||et&&it&&!/iPhone/i.test(Fe),rt=/iPhone/i.test(Fe)&&!nt,at=rt||nt||He,st=(et||at)&&!Ke,ot=Object.freeze({__proto__:null,IS_IPOD:He,IOS_VERSION:We,IS_ANDROID:Ve,ANDROID_VERSION:Ye,IS_NATIVE_ANDROID:Ge,IS_FIREFOX:Qe,IS_EDGE:Xe,IS_CHROME:Ke,CHROME_VERSION:Ze,IE_VERSION:Je,IS_SAFARI:et,IS_WINDOWS:tt,TOUCH_ENABLED:it,IS_IPAD:nt,IS_IPHONE:rt,IS_IOS:at,IS_ANY_SAFARI:st});function lt(e,t,i,n){return function(e,t,i){if("number"!=typeof t||t<0||t>i)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}(e,n,i.length-1),i[n][t]}function ut(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:lt.bind(null,"start",0,e),end:lt.bind(null,"end",1,e)}}function dt(e,t){return Array.isArray(e)?ut(e):void 0===e||void 0===t?ut():ut([[e,t]])}function ct(e,t){var i,n,r=0;if(!t)return 0;e&&e.length||(e=dt(0,0));for(var a=0;a<e.length;a++)i=e.start(a),(n=e.end(a))>t&&(n=t),r+=n-i;return r/t}for(var pt,ht={prefixed:!0},ft=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],mt=ft[0],gt=0;gt<ft.length;gt++)if(ft[gt][1]in t){pt=ft[gt];break}if(pt){for(var vt=0;vt<pt.length;vt++)ht[mt[vt]]=pt[vt];ht.prefixed=pt[0]!==mt[0]}function yt(e){if(e instanceof yt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:h(e)&&("number"==typeof e.code&&(this.code=e.code),p(this,e)),this.message||(this.message=yt.defaultMessages[this.code]||"")}yt.prototype.code=0,yt.prototype.message="",yt.prototype.status=null,yt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],yt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var _t=0;_t<yt.errorTypes.length;_t++)yt[yt.errorTypes[_t]]=_t,yt.prototype[yt.errorTypes[_t]]=_t;var bt=function(e,t){var i,n=null;try{i=JSON.parse(e,t)}catch(e){n=e}return[n,i]};function Tt(e){return null!=e&&"function"==typeof e.then}function wt(e){Tt(e)&&e.then(null,function(e){})}var kt=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,i,n){return e[i]&&(t[i]=e[i]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},St=function(e){var t=e.$$("track"),i=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=kt(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===i.indexOf(e)}).map(kt))},xt=function(e,t){return e.forEach(function(e){var i=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return i.addCue(e)})}),t.textTracks()},Mt=o(function(e,t){function i(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return s[e];var i,a=String(e);return(i=n[a.toLowerCase()])?i:(i=r[a.toLowerCase()])||(1===a.length?a.charCodeAt(0):void 0)}i.isEventKey=function(e,t){if(e&&"object"==typeof e){var i=e.which||e.keyCode||e.charCode;if(null==i)return!1;if("string"==typeof t){var a;if(a=n[t.toLowerCase()])return a===i;if(a=r[t.toLowerCase()])return a===i}else if("number"==typeof t)return t===i;return!1}};var n=(t=e.exports=i).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"â§":16,"â¥":18,"â":17,"â":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;a<123;a++)n[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)n[a-48]=a;for(a=1;a<13;a++)n["f"+a]=a+111;for(a=0;a<10;a++)n["numpad "+a]=a+96;var s=t.names=t.title={};for(a in n)s[n[a]]=a;for(var o in r)n[o]=r[o]}),Ct=(Mt.code,Mt.codes,Mt.aliases,Mt.names,Mt.title,"vjs-modal-dialog"),Et=function(i){function n(e,t){var n;return(n=i.call(this,e,t)||this).opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=w("div",{className:Ct+"-content"},{role:"document"}),n.descEl_=w("p",{className:Ct+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),k(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}Be(n,i);var r=n.prototype;return r.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,i.prototype.dispose.call(this)},r.buildCSSClass=function(){return Ct+" vjs-hidden "+i.prototype.buildCSSClass.call(this)},r.label=function(){return this.localize(this.options_.label||"Modal Window")},r.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},r.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},r.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close)}!t&&i&&(this.off(i,"close",this.close),this.removeChild(i),i.dispose())}return this.closeable_},r.fill=function(){this.fillWith(this.content())},r.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),q(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);var r=this.getChild("closeButton");r&&i.appendChild(r.el_)},r.empty=function(){this.trigger("beforemodalempty"),B(this.contentEl()),this.trigger("modalempty")},r.content=function(e){return void 0!==e&&(this.content_=e),this.content_},r.conditionalFocus_=function(){var e=t.activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,(i.contains(e)||i===e)&&(this.previouslyActiveEl_=e,this.focus())},r.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},r.handleKeyDown=function(e){if(e.stopPropagation(),Mt.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(Mt.isEventKey(e,"Tab")){for(var i,n=this.focusableEls_(),r=this.el_.querySelector(":focus"),a=0;a<n.length;a++)if(r===n[a]){i=a;break}t.activeElement===this.el_&&(i=0),e.shiftKey&&0===i?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||i!==n.length-1||(n[0].focus(),e.preventDefault())}},r.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(t){return(t instanceof e.HTMLAnchorElement||t instanceof e.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof e.HTMLInputElement||t instanceof e.HTMLSelectElement||t instanceof e.HTMLTextAreaElement||t instanceof e.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof e.HTMLIFrameElement||t instanceof e.HTMLObjectElement||t instanceof e.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},n}(Ue);Et.prototype.options_={pauseOnOpen:!0,temporary:!0},Ue.registerComponent("ModalDialog",Et);var It=function(e){function t(t){var i;void 0===t&&(t=[]),(i=e.call(this)||this).tracks_=[],Object.defineProperty(Re(i),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<t.length;n++)i.addTrack(t[n]);return i}Be(t,e);var i=t.prototype;return i.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this}))},i.removeTrack=function(e){for(var t,i=0,n=this.length;i<n;i++)if(this[i]===e){(t=this[i]).off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},i.getTrackById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},t}(we);for(var Dt in It.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},It.prototype.allowedEvents_)It.prototype["on"+Dt]=null;var At=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)},Ot=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].enabled){At(t,t[n]);break}return(i=e.call(this,t)||this).changing_=!1,i}Be(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;t.enabled&&At(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){i.changing_||(i.changing_=!0,At(i,t),i.changing_=!1,i.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(It),Nt=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)},Lt=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].selected){Nt(t,t[n]);break}return(i=e.call(this,t)||this).changing_=!1,Object.defineProperty(Re(i),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i}Be(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;t.selected&&Nt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){i.changing_||(i.changing_=!0,Nt(i,t),i.changing_=!1,i.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(It),Pt=function(e){function t(){return e.apply(this,arguments)||this}Be(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return i.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return i.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(It),jt=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},t.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),Ut=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,i=0,n=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<n)for(i=t;i<n;i++)r.call(this,i)},t.getCueById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},e}(),Rt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},zt={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Bt={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ft={disabled:"disabled",hidden:"hidden",showing:"showing"},$t=function(e){function t(t){var i;void 0===t&&(t={}),i=e.call(this)||this;var n={id:t.id||"vjs_track_"+ne(),kind:t.kind||"",label:t.label||"",language:t.language||""},r=function(e){Object.defineProperty(Re(i),e,{get:function(){return n[e]},set:function(){}})};for(var a in n)r(a);return i}return Be(t,e),t}(we),qt=function(i){var n=["protocol","hostname","port","pathname","search","hash","host"],r=t.createElement("a");r.href=i;var a,s=""===r.host&&"file:"!==r.protocol;s&&((a=t.createElement("div")).innerHTML='<a href="'+i+'"></a>',r=a.firstChild,a.setAttribute("style","display:none; position:absolute;"),t.body.appendChild(a));for(var o={},l=0;l<n.length;l++)o[n[l]]=r[n[l]];return"http:"===o.protocol&&(o.host=o.host.replace(/:80$/,"")),"https:"===o.protocol&&(o.host=o.host.replace(/:443$/,"")),o.protocol||(o.protocol=e.location.protocol),s&&t.body.removeChild(a),o},Ht=function(e){if(!e.match(/^https?:\/\//)){var i=t.createElement("div");i.innerHTML='<a href="'+e+'">x</a>',e=i.firstChild.href}return e},Wt=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},Vt=function(t,i){void 0===i&&(i=e.location);var n=qt(t);return(":"===n.protocol?i.protocol:n.protocol)+n.host!==i.protocol+i.host},Yt=Object.freeze({__proto__:null,parseUrl:qt,getAbsoluteURL:Ht,getFileExtension:Wt,isCrossOrigin:Vt}),Gt=function(e){var t=Qt.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},Qt=Object.prototype.toString;var Xt=function(e){var t={};return e?(e.trim().split("\n").forEach(function(e){var i=e.indexOf(":"),n=e.slice(0,i).trim().toLowerCase(),r=e.slice(i+1).trim();void 0===t[n]?t[n]=r:Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]}),t):t},Kt=ei,Zt=ei;function Jt(e,t,i){var n=e;return Gt(t)?(i=t,"string"==typeof e&&(n={uri:e})):n=l({},t,{uri:e}),n.callback=i,n}function ei(e,t,i){return ti(t=Jt(e,t,i))}function ti(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,i=function(i,n,r){t||(t=!0,e.callback(i,n,r))};function n(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(l),m)try{e=JSON.parse(e)}catch(e){}return e}function r(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,i(e,g)}function a(){if(!o){var t;clearTimeout(u),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=g,a=null;return 0!==t?(r={body:n(),statusCode:t,method:c,headers:{},url:d,rawRequest:l},l.getAllResponseHeaders&&(r.headers=Xt(l.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),i(a,r,r.body)}}var s,o,l=e.xhr||null;l||(l=e.cors||e.useXDR?new ei.XDomainRequest:new ei.XMLHttpRequest);var u,d=l.url=e.uri||e.url,c=l.method=e.method||"GET",p=e.body||e.data,h=l.headers=e.headers||{},f=!!e.sync,m=!1,g={body:void 0,headers:{},statusCode:0,method:c,url:d,rawRequest:l};if("json"in e&&!1!==e.json&&(m=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(a,0)},l.onload=a,l.onerror=r,l.onprogress=function(){},l.onabort=function(){o=!0},l.ontimeout=r,l.open(c,d,!f,e.username,e.password),f||(l.withCredentials=!!e.withCredentials),!f&&e.timeout>0&&(u=setTimeout(function(){if(!o){o=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}},e.timeout)),l.setRequestHeader)for(s in h)h.hasOwnProperty(s)&&l.setRequestHeader(s,h[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(p||null),l}ei.XMLHttpRequest=e.XMLHttpRequest||function(){},ei.XDomainRequest="withCredentials"in new ei.XMLHttpRequest?ei.XMLHttpRequest:e.XDomainRequest,function(e,t){for(var i=0;i<e.length;i++)t(e[i])}(["get","put","post","patch","head","delete"],function(e){ei["delete"===e?"del":e]=function(t,i,n){return(i=Jt(t,i,n)).method=e.toUpperCase(),ti(i)}}),Kt.default=Zt;var ii=function(t,i){var n=new e.WebVTT.Parser(e,e.vttjs,e.WebVTT.StringDecoder()),r=[];n.oncue=function(e){i.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){i.trigger({type:"loadeddata",target:i})},n.parse(t),r.length>0&&(e.console&&e.console.groupCollapsed&&e.console.groupCollapsed("Text Track parsing errors for "+i.src),r.forEach(function(e){return a.error(e)}),e.console&&e.console.groupEnd&&e.console.groupEnd()),n.flush()},ni=function(t,i){var n={uri:t},r=Vt(t);r&&(n.cors=r),Kt(n,_e(this,function(t,n,r){if(t)return a.error(t,n);i.loaded_=!0,"function"!=typeof e.WebVTT?i.tech_&&i.tech_.any(["vttjsloaded","vttjserror"],function(e){if("vttjserror"!==e.type)return ii(r,i);a.error("vttjs failed to load, stopping trying to process "+i.src)}):ii(r,i)}))},ri=function(t){function i(e){var i;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var n=je(e,{kind:Bt[e.kind]||"subtitles",language:e.language||e.srclang||""}),r=Ft[n.mode]||"disabled",a=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(r="hidden"),(i=t.call(this,n)||this).tech_=n.tech,i.cues_=[],i.activeCues_=[],i.preload_=!1!==i.tech_.preloadTextTracks;var s=new Ut(i.cues_),o=new Ut(i.activeCues_),l=!1,u=_e(Re(i),function(){this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1)});return"disabled"!==r&&i.tech_.ready(function(){i.tech_.on("timeupdate",u)},!0),Object.defineProperties(Re(i),{default:{get:function(){return a},set:function(){}},mode:{get:function(){return r},set:function(e){var t=this;Ft[e]&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||ni(this.src,this),"disabled"!==r?this.tech_.ready(function(){t.tech_.on("timeupdate",u)},!0):this.tech_.off("timeupdate",u),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?s:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var e=this.tech_.currentTime(),t=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];r.startTime<=e&&r.endTime>=e?t.push(r):r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e&&t.push(r)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(l=!0);return this.activeCues_=t,o.setCues_(this.activeCues_),o},set:function(){}}}),n.src?(i.src=n.src,i.preload_||(i.loaded_=!0),(i.preload_||a||"subtitles"!==n.kind&&"captions"!==n.kind)&&ni(i.src,Re(i))):i.loaded_=!0,i}Be(i,t);var n=i.prototype;return n.addCue=function(t){var i=t;if(e.vttjs&&!(t instanceof e.vttjs.VTTCue)){for(var n in i=new e.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)n in i||(i[n]=t[n]);i.id=t.id,i.originalCue_=t}for(var r=this.tech_.textTracks(),a=0;a<r.length;a++)r[a]!==this&&r[a].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},i}($t);ri.prototype.allowedEvents_={cuechange:"cuechange"};var ai=function(e){function t(t){var i;void 0===t&&(t={});var n=je(t,{kind:zt[t.kind]||""});i=e.call(this,n)||this;var r=!1;return Object.defineProperty(Re(i),"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return Be(t,e),t}($t),si=function(e){function t(t){var i;void 0===t&&(t={});var n=je(t,{kind:Rt[t.kind]||""});i=e.call(this,n)||this;var r=!1;return Object.defineProperty(Re(i),"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return Be(t,e),t}($t),oi=0,li=2,ui=function(e){function t(t){var i,n;void 0===t&&(t={}),i=e.call(this)||this;var r=new ri(t);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i.default=r.default,Object.defineProperties(Re(i),{readyState:{get:function(){return n}},track:{get:function(){return r}}}),n=oi,r.addEventListener("loadeddata",function(){n=li,i.trigger({type:"load",target:Re(i)})}),i}return Be(t,e),t}(we);ui.prototype.allowedEvents_={load:"load"},ui.NONE=oi,ui.LOADING=1,ui.LOADED=li,ui.ERROR=3;var di={audio:{ListClass:Ot,TrackClass:ai,capitalName:"Audio"},video:{ListClass:Lt,TrackClass:si,capitalName:"Video"},text:{ListClass:Pt,TrackClass:ri,capitalName:"Text"}};Object.keys(di).forEach(function(e){di[e].getterName=e+"Tracks",di[e].privateName=e+"Tracks_"});var ci={remoteText:{ListClass:Pt,TrackClass:ri,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:jt,TrackClass:ui,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},pi=l({},di,ci);ci.names=Object.keys(ci),di.names=Object.keys(di),pi.names=[].concat(ci.names).concat(di.names);var hi=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function fi(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function mi(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function gi(){this.values=hi(null)}function vi(e,t,i,n){var r=n?e.split(n):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(i);if(2===s.length)t(s[0],s[1])}}function yi(e,t,i){var n=e;function r(){var t=mi(e);if(null===t)throw new fi(fi.Errors.BadTimeStamp,"Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new fi(fi.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),a(),t.endTime=r(),a(),function(e,t){var n=new gi;vi(e,function(e,t){switch(e){case"region":for(var r=i.length-1;r>=0;r--)if(i[r].id===t){n.set(e,i[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];n.integer(e,s),n.percent(e,s)&&n.set("snapToLines",!1),n.alt(e,s,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start","center","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");try{t.line=n.get("line","auto")}catch(e){}t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100);try{t.align=n.get("align","center")}catch(e){t.align=n.get("align","middle")}try{t.position=n.get("position","auto")}catch(e){t.position=n.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=n.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}fi.prototype=hi(Error.prototype),fi.prototype.constructor=fi,fi.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},gi.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var _i=t.createElement("textarea"),bi={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Ti={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},wi={v:"title",lang:"lang"},ki={rt:"ruby"};function Si(e,t){function i(){if(!t)return null;var e,i=t.match(/^([^<]*)(<[^>]*>?)?/);return e=i[1]?i[1]:i[2],t=t.substr(e.length),e}function n(e,t){return!ki[t.localName]||ki[t.localName]===e.localName}function r(t,i){var n=bi[t];if(!n)return null;var r=e.document.createElement(n),a=wi[t];return a&&i&&(r[a]=i.trim()),r}for(var a,s,o=e.document.createElement("div"),l=o,u=[];null!==(a=i());)if("<"!==a[0])l.appendChild(e.document.createTextNode((s=a,_i.innerHTML=s,s=_i.textContent,_i.textContent="",s)));else{if("/"===a[1]){u.length&&u[u.length-1]===a.substr(2).replace(">","")&&(u.pop(),l=l.parentNode);continue}var d,c=mi(a.substr(1,a.length-2));if(c){d=e.document.createProcessingInstruction("timestamp",c),l.appendChild(d);continue}var p=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(d=r(p[1],p[3])))continue;if(!n(l,d))continue;if(p[2]){var h=p[2].split(".");h.forEach(function(e){var t=/^bg_/.test(e),i=t?e.slice(3):e;if(Ti.hasOwnProperty(i)){var n=t?"background-color":"color",r=Ti[i];d.style[n]=r}}),d.className=h.join(" ")}u.push(p[1]),l.appendChild(d),l=d}return o}var xi=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Mi(e){for(var t=0;t<xi.length;t++){var i=xi[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function Ci(e){var t=[],i="";if(!e||!e.childNodes)return"ltr";function n(e,t){for(var i=t.childNodes.length-1;i>=0;i--)e.push(t.childNodes[i])}function r(e){if(!e||!e.length)return null;var t=e.pop(),i=t.textContent||t.innerText;if(i){var a=i.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):i}return"ruby"===t.tagName?r(e):t.childNodes?(n(e,t),r(e)):void 0}for(n(t,e);i=r(t);)for(var a=0;a<i.length;a++)if(Mi(i.charCodeAt(a)))return"rtl";return"ltr"}function Ei(){}function Ii(e,t,i){Ei.call(this),this.cue=t,this.cueDiv=Si(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:Ci(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Di(e){var t,i,n,r;if(e.div){i=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||i,this.bottom=e.bottom||r+(e.height||i),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight}function Ai(e,t,i,n){var r=new Di(t),a=t.cue,s=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,n=0,r=0;r<i.length&&i[r]!==t;r++)"showing"===i[r].mode&&n++;return-1*++n}(a),o=[];if(a.snapToLines){var l;switch(a.vertical){case"":o=["+y","-y"],l="height";break;case"rl":o=["+x","-x"],l="width";break;case"lr":o=["-x","+x"],l="width"}var u=r.lineHeight,d=u*Math.round(s),c=i[l]+u,p=o[0];Math.abs(d)>c&&(d=d<0?-1:1,d*=Math.ceil(c/u)*u),s<0&&(d+=""===a.vertical?i.height:i.width,o=o.reverse()),r.move(p,d)}else{var h=r.lineHeight/i.height*100;switch(a.lineAlign){case"center":s-=h/2;break;case"end":s-=h}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}o=["+y","-x","+x","-y"],r=new Di(t)}var f=function(e,t){for(var r,a=new Di(e),s=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(i,t[o])||e.within(i)&&e.overlapsAny(n);)e.move(t[o]);if(e.within(i))return e;var l=e.intersectPercentage(i);s>l&&(r=new Di(e),s=l),e=new Di(a)}return r||a}(r,o);t.move(f.toCSSCompatValues(i))}function Oi(){}Ei.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},Ei.prototype.formatStyle=function(e,t){return 0===e?0:e+t},Ii.prototype=hi(Ei.prototype),Ii.prototype.constructor=Ii,Di.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Di.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Di.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Di.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Di.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Di.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Di.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Di.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i}},Oi.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Oi.convertCueToDOMTree=function(e,t){return e&&t?Si(e,t):null};Oi.processCues=function(e,t,i){if(!e||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=e.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",i.appendChild(n),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var r=[],a=Di.getSimpleBoxPosition(n),s={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var i,o,l=0;l<t.length;l++)o=t[l],i=new Ii(e,o,s),n.appendChild(i.div),Ai(0,i,a,r),o.displayState=i.div,r.push(Di.getSimpleBoxPosition(i))}()}else for(var o=0;o<t.length;o++)n.appendChild(t[o].displayState)},Oi.Parser=function(e,t,i){i||(i=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]},Oi.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof fi))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function i(){for(var e=t.buffer,i=0;i<e.length&&"\r"!==e[i]&&"\n"!==e[i];)++i;var n=e.substr(0,i);return"\r"===e[i]&&++i,"\n"===e[i]&&++i,t.buffer=e.substr(i),n}function n(e){e.match(/X-TIMESTAMP-MAP/)?vi(e,function(e,i){switch(e){case"X-TIMESTAMP-MAP":n=i,r=new gi,vi(n,function(e,t){switch(e){case"MPEGT":r.integer(e+"S",t);break;case"LOCA":r.set(e+"L",mi(t))}},/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:r.get("MPEGTS"),LOCAL:r.get("LOCAL")})}var n,r},/=/):vi(e,function(e,i){switch(e){case"Region":!function(e){var i=new gi;if(vi(e,function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var r=new gi;if(r.percent("x",n[0]),r.percent("y",n[1]),!r.has("x")||!r.has("y"))break;i.set(e+"X",r.get("x")),i.set(e+"Y",r.get("y"));break;case"scroll":i.alt(e,t,["up"])}},/=/,/\s/),i.has("id")){var n=new(t.vttjs.VTTRegion||t.window.VTTRegion);n.width=i.get("width",100),n.lines=i.get("lines",3),n.regionAnchorX=i.get("regionanchorX",0),n.regionAnchorY=i.get("regionanchorY",100),n.viewportAnchorX=i.get("viewportanchorX",0),n.viewportAnchorY=i.get("viewportanchorY",100),n.scroll=i.get("scroll",""),t.onregion&&t.onregion(n),t.regionList.push({id:i.get("id"),region:n})}}(i)}},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(r=i()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new fi(fi.Errors.BadSignature);t.state="HEADER"}for(var s=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:r=i(),t.state){case"HEADER":/:/.test(r)?n(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(e){t.cue.align="middle"}if(t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{yi(r,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(s=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new fi(fi.Errors.BadSignature)}catch(e){this.reportOrThrowError(e)}return this.onflush&&this.onflush(),this}};var Ni=Oi,Li="auto",Pi={"":1,lr:1,rl:1},ji={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Ui(e){return"string"==typeof e&&(!!ji[e.toLowerCase()]&&e.toLowerCase())}function Ri(e,t,i){this.hasBeenReset=!1;var n="",r=!1,a=e,s=t,o=i,l=null,u="",d=!0,c="auto",p="start",h="auto",f="auto",m=100,g="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t=function(e){return"string"==typeof e&&!!Pi[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return d},set:function(e){d=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e&&e!==Li)throw new SyntaxError("Line: an invalid number or illegal string was specified.");c=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return p},set:function(e){var t=Ui(e);t?(p=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return h},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");h=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=Ui(e);t?(f=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){var t=Ui(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=void 0}Ri.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var zi=Ri,Bi={"":!0,up:!0};function Fi(e){return"number"==typeof e&&e>=0&&e<=100}var $i=function(){var e=100,t=3,i=0,n=100,r=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Fi(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(e){if(!Fi(e))throw new Error("RegionAnchorX must be between 0 and 100.");n=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!Fi(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!Fi(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!Fi(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return s},set:function(e){var t=function(e){return"string"==typeof e&&!!Bi[e.toLowerCase()]&&e.toLowerCase()}(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):s=t}}})},qi=o(function(t){var i=t.exports={WebVTT:Ni,VTTCue:zi,VTTRegion:$i};e.vttjs=i,e.WebVTT=i.WebVTT;var n=i.VTTCue,r=i.VTTRegion,a=e.VTTCue,s=e.VTTRegion;i.shim=function(){e.VTTCue=n,e.VTTRegion=r},i.restore=function(){e.VTTCue=a,e.VTTRegion=s},e.VTTCue||i.shim()});qi.WebVTT,qi.VTTCue,qi.VTTRegion;var Hi=function(i){function n(e,t){var n;return void 0===e&&(e={}),void 0===t&&(t=function(){}),e.reportTouchActivity=!1,(n=i.call(this,null,e,t)||this).hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),pi.names.forEach(function(t){var i=pi[t];e&&e[i.getterName]&&(n[i.privateName]=e[i.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){!1===e["native"+t+"Tracks"]&&(n["featuresNative"+t+"Tracks"]=!1)}),!1===e.nativeCaptions||!1===e.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=!1!==e.preloadTextTracks,n.autoRemoteTextTracks_=new pi.text.ListClass,n.initTrackListeners(),e.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}Be(n,i);var r=n.prototype;return r.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},r.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},r.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},r.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(_e(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},r.onDurationChange=function(e){this.duration_=this.duration()},r.buffered=function(){return dt(0,0)},r.bufferedPercent=function(){return ct(this.buffered(),this.duration_)},r.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},r.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},r.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.dispose=function(){this.clearTracks(di.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),i.prototype.dispose.call(this)},r.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(e){for(var i=t[e+"Tracks"]()||[],n=i.length;n--;){var r=i[n];"text"===e&&t.removeRemoteTextTrack(r),i.removeTrack(r)}})},r.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var i=e[t];this.removeRemoteTextTrack(i)}},r.reset=function(){},r.error=function(e){return void 0!==e&&(this.error_=new yt(e),this.trigger("error")),this.error_},r.played=function(){return this.hasStarted_?dt(0,0):dt()},r.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.initTrackListeners=function(){var e=this;di.names.forEach(function(t){var i=di[t],n=function(){e.trigger(t+"trackchange")},r=e[i.getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),e.on("dispose",function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)})})},r.addWebVttScript_=function(){var i=this;if(!e.WebVTT)if(t.body.contains(this.el())){if(!this.options_["vtt.js"]&&f(qi)&&Object.keys(qi).length>0)return void this.trigger("vttjsloaded");var n=t.createElement("script");n.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",n.onload=function(){i.trigger("vttjsloaded")},n.onerror=function(){i.trigger("vttjserror")},this.on("dispose",function(){n.onload=null,n.onerror=null}),e.WebVTT=!0,this.el().parentNode.appendChild(n)}else this.ready(this.addWebVttScript_)},r.emulateTextTracks=function(){var e=this,t=this.textTracks(),i=this.remoteTextTracks(),n=function(e){return t.addTrack(e.track)},r=function(e){return t.removeTrack(e.track)};i.on("addtrack",n),i.on("removetrack",r),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},s=function(){a();for(var e=0;e<t.length;e++){var i=t[e];i.removeEventListener("cuechange",a),"showing"===i.mode&&i.addEventListener("cuechange",a)}};s(),t.addEventListener("change",s),t.addEventListener("addtrack",s),t.addEventListener("removetrack",s),this.on("dispose",function(){i.off("addtrack",n),i.off("removetrack",r),t.removeEventListener("change",s),t.removeEventListener("addtrack",s),t.removeEventListener("removetrack",s);for(var e=0;e<t.length;e++){t[e].removeEventListener("cuechange",a)}})},r.addTextTrack=function(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,i,n,r){void 0===r&&(r={});var a=e.textTracks();r.kind=t,i&&(r.label=i),n&&(r.language=n),r.tech=e;var s=new pi.text.TrackClass(r);return a.addTrack(s),s}(this,e,t,i)},r.createRemoteTextTrack=function(e){var t=je(e,{tech:this});return new ci.remoteTextEl.TrackClass(t)},r.addRemoteTextTrack=function(e,t){var i=this;void 0===e&&(e={});var n=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(a.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==t&&this.ready(function(){return i.autoRemoteTextTracks_.addTrack(n.track)}),n},r.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},r.getVideoPlaybackQuality=function(){return{}},r.requestPictureInPicture=function(){var t=this.options_.Promise||e.Promise;if(t)return t.reject()},r.setPoster=function(){},r.playsinline=function(){},r.setPlaysinline=function(){},r.overrideNativeAudioTracks=function(){},r.overrideNativeVideoTracks=function(){},r.canPlayType=function(){return""},n.canPlayType=function(){return""},n.canPlaySource=function(e,t){return n.canPlayType(e.type)},n.isTech=function(e){return e.prototype instanceof n||e instanceof n||e===n},n.registerTech=function(e,t){if(n.techs_||(n.techs_={}),!n.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!n.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!n.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Pe(e),n.techs_[e]=t,n.techs_[Le(e)]=t,"Tech"!==e&&n.defaultTechOrder_.push(e),t},n.getTech=function(t){if(t)return n.techs_&&n.techs_[t]?n.techs_[t]:(t=Pe(t),e&&e.videojs&&e.videojs[t]?(a.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),e.videojs[t]):void 0)},n}(Ue);pi.names.forEach(function(e){var t=pi[e];Hi.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Hi.prototype.featuresVolumeControl=!0,Hi.prototype.featuresMuteControl=!0,Hi.prototype.featuresFullscreenResize=!1,Hi.prototype.featuresPlaybackRate=!1,Hi.prototype.featuresProgressEvents=!1,Hi.prototype.featuresSourceset=!1,Hi.prototype.featuresTimeupdateEvents=!1,Hi.prototype.featuresNativeTextTracks=!1,Hi.withSourceHandlers=function(e){e.registerSourceHandler=function(t,i){var n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),void 0===i&&(i=n.length),n.splice(i,0,t)},e.canPlayType=function(t){for(var i,n=e.sourceHandlers||[],r=0;r<n.length;r++)if(i=n[r].canPlayType(t))return i;return""},e.selectSourceHandler=function(t,i){for(var n=e.sourceHandlers||[],r=0;r<n.length;r++)if(n[r].canHandleSource(t,i))return n[r];return null},e.canPlaySource=function(t,i){var n=e.selectSourceHandler(t,i);return n?n.canHandleSource(t,i):""};["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var i=e.selectSourceHandler(t,this.options_);i||(e.nativeSourceHandler?i=e.nativeSourceHandler:a.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),i!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Ue.registerComponent("Tech",Hi),Hi.registerTech("Tech",Hi),Hi.defaultTechOrder_=[];var Wi={},Vi={},Yi={};function Gi(e,t,i){e.setTimeout(function(){return function e(t,i,n,r,a,s){void 0===t&&(t={});void 0===i&&(i=[]);void 0===a&&(a=[]);void 0===s&&(s=!1);var o=i,l=o[0],u=o.slice(1);if("string"==typeof l)e(t,Wi[l],n,r,a,s);else if(l){var d=function(e,t){var i=Vi[e.id()],n=null;if(null==i)return n=t(e),Vi[e.id()]=[[t,n]],n;for(var r=0;r<i.length;r++){var a=i[r],s=a[0],o=a[1];s===t&&(n=o)}null===n&&(n=t(e),i.push([t,n]));return n}(r,l);if(!d.setSource)return a.push(d),e(t,u,n,r,a,s);d.setSource(p({},t),function(i,o){if(i)return e(t,u,n,r,a,s);a.push(d),e(o,t.type===o.type?u:Wi[o.type],n,r,a,s)})}else u.length?e(t,u,n,r,a,s):s?n(t,a):e(t,Wi["*"],n,r,a,!0)}(t,Wi[t.type],i,e)},1)}function Qi(e,t,i,n){void 0===n&&(n=null);var r="call"+Pe(i),a=e.reduce(Ji(r),n),s=a===Yi,o=s?null:t[i](a);return function(e,t,i,n){for(var r=e.length-1;r>=0;r--){var a=e[r];a[t]&&a[t](n,i)}}(e,i,o,s),o}var Xi={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},Ki={setCurrentTime:1,setMuted:1,setVolume:1},Zi={play:1,pause:1};function Ji(e){return function(t,i){return t===Yi?Yi:i[e]?i[e](t):t}}var en={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},tn=function(e){void 0===e&&(e="");var t=Wt(e);return en[t.toLowerCase()]||""};function nn(e){if(!e.type){var t=tn(e.src);t&&(e.type=t)}return e}var rn=function(e){function t(t,i,n){var r,a=je({createEl:!1},i);if(r=e.call(this,t,a,n)||this,i.playerOptions.sources&&0!==i.playerOptions.sources.length)t.src(i.playerOptions.sources);else for(var s=0,o=i.playerOptions.techOrder;s<o.length;s++){var l=Pe(o[s]),u=Hi.getTech(l);if(l||(u=Ue.getComponent(l)),u&&u.isSupported()){t.loadTech_(l);break}}return r}return Be(t,e),t}(Ue);Ue.registerComponent("MediaLoader",rn);var an=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).emitTapEvents(),n.enable(),n}Be(t,e);var i=t.prototype;return i.createEl=function(t,i,n){void 0===t&&(t="div"),void 0===i&&(i={}),void 0===n&&(n={}),i=p({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i),"button"===t&&a.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),n=p({role:"button"},n),this.tabIndex_=i.tabIndex;var r=e.prototype.createEl.call(this,t,i,n);return this.createControlTextEl(r),r},i.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},i.createControlTextEl=function(e){return this.controlTextEl_=w("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},i.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,k(this.controlTextEl_,i),this.nonIconControl||t.setAttribute("title",i)},i.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},i.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},i.handleKeyDown=function(t){Mt.isEventKey(t,"Space")||Mt.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(Ue);Ue.registerComponent("ClickableComponent",an);var sn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update(),t.on("posterchange",_e(Re(n),n.update)),n}Be(t,e);var i=t.prototype;return i.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},i.createEl=function(){return w("div",{className:"vjs-poster",tabIndex:-1})},i.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},i.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},i.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(Je||Xe)&&t||this.player_.tech(!0).focus(),this.player_.paused()?wt(this.player_.play()):this.player_.pause()}},t}(an);Ue.registerComponent("PosterImage",sn);var on={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function ln(e,t){var i;if(4===e.length)i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");i=e.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function un(e,t,i){try{e.style[t]=i}catch(e){return}}var dn=function(t){function i(i,n,r){var a;a=t.call(this,i,n,r)||this;var s=_e(Re(a),a.updateDisplay);return i.on("loadstart",_e(Re(a),a.toggleDisplay)),i.on("texttrackchange",s),i.on("loadedmetadata",_e(Re(a),a.preselectTrack)),i.ready(_e(Re(a),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else{i.on("fullscreenchange",s),i.on("playerresize",s),e.addEventListener("orientationchange",s),i.on("dispose",function(){return e.removeEventListener("orientationchange",s)});for(var t=this.options_.playerOptions.tracks||[],n=0;n<t.length;n++)this.player_.addRemoteTextTrack(t[n],!0);this.preselectTrack()}})),a}Be(i,t);var n=i.prototype;return n.preselectTrack=function(){for(var e,t,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,s=0;s<r.length;s++){var o=r[s];a&&a.enabled&&a.language&&a.language===o.language&&o.kind in n?o.kind===a.kind?i=o:i||(i=o):a&&!a.enabled?(i=null,e=null,t=null):o.default&&("descriptions"!==o.kind||e?o.kind in n&&!t&&(t=o):e=o)}i?i.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof e.WebVTT&&e.WebVTT.processCues(e,[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var i=[],n=0;n<e.length;++n){var r=e[n];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{for(var a=null,s=null,o=e.length;o--;){var l=e[o];"showing"===l.mode&&("descriptions"===l.kind?a=l:s=l)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},n.updateDisplayState=function(t){for(var i=this.player_.textTrackSettings.getValues(),n=t.activeCues,r=n.length;r--;){var a=n[r];if(a){var s=a.displayState;if(i.color&&(s.firstChild.style.color=i.color),i.textOpacity&&un(s.firstChild,"color",ln(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(s.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&un(s.firstChild,"backgroundColor",ln(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?un(s,"backgroundColor",ln(i.windowColor,i.windowOpacity)):s.style.backgroundColor=i.windowColor),i.edgeStyle&&("dropshadow"===i.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===i.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===i.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===i.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),i.fontPercent&&1!==i.fontPercent){var o=e.parseFloat(s.style.fontSize);s.style.fontSize=o*i.fontPercent+"px",s.style.height="auto",s.style.top="auto",s.style.bottom="2px"}i.fontFamily&&"default"!==i.fontFamily&&("small-caps"===i.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=on[i.fontFamily])}}},n.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof e.WebVTT&&!t.every(function(e){return!e.activeCues})){for(var i=[],n=0;n<t.length;++n)for(var r=t[n],a=0;a<r.activeCues.length;++a)i.push(r.activeCues[a]);e.WebVTT.processCues(e,i,this.el_);for(var s=0;s<t.length;++s){for(var o=t[s],l=0;l<o.activeCues.length;++l){var u=o.activeCues[l].displayState;M(u,"vjs-text-track-cue"),M(u,"vjs-text-track-cue-"+(o.language?o.language:s))}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},i}(Ue);Ue.registerComponent("TextTrackDisplay",dn);var cn=function(e){function t(){return e.apply(this,arguments)||this}return Be(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),i=this.localize(t?"Audio Player":"Video Player"),n=w("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])}),r=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r},t}(Ue);Ue.registerComponent("LoadingSpinner",cn);var pn=function(e){function t(){return e.apply(this,arguments)||this}Be(t,e);var i=t.prototype;return i.createEl=function(e,t,i){void 0===t&&(t={}),void 0===i&&(i={}),t=p({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),i=p({type:"button"},i);var n=Ue.prototype.createEl.call(this,"button",t,i);return this.createControlTextEl(n),n},i.addChild=function(e,t){void 0===t&&(t={});var i=this.constructor.name;return a.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),Ue.prototype.addChild.call(this,e,t)},i.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(t){Mt.isEventKey(t,"Space")||Mt.isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(an);Ue.registerComponent("Button",pn);var hn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-big-play-button"},i.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return wt(t),void(!this.player_.tech(!0)||(Je||Xe)&&i||this.player_.tech(!0).focus())}var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){var a=function(){return r.focus()};Tt(t)?t.then(a,function(){}):this.setTimeout(a,1)}else this.player_.tech(!0).focus()},i.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},i.handleMouseDown=function(e){this.mouseused_=!0},t}(pn);hn.prototype.controlText_="Play Video",Ue.registerComponent("BigPlayButton",hn);var fn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).controlText(i&&i.controlText||n.localize("Close")),n}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},i.handleKeyDown=function(t){Mt.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(pn);Ue.registerComponent("CloseButton",fn);var mn=function(e){function t(t,i){var n;return void 0===i&&(i={}),n=e.call(this,t,i)||this,i.replay=void 0===i.replay||i.replay,n.on(t,"play",n.handlePlay),n.on(t,"pause",n.handlePause),i.replay&&n.on(t,"ended",n.handleEnded),n}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},i.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(pn);mn.prototype.controlText_="Play",Ue.registerComponent("PlayToggle",mn);var gn=function(e,t){e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=n=i="-"),(r=r>0||s>0?r+":":"")+(n=((r||a>=10)&&n<10?"0"+n:n)+":")+(i=i<10?"0"+i:i)},vn=gn;function yn(e,t){return void 0===t&&(t=e),vn(e,t)}var _n=function(e){function i(t,i){var n;return(n=e.call(this,t,i)||this).on(t,["timeupdate","ended"],n.updateContent),n.updateTextNode_(),n}Be(i,e);var n=i.prototype;return n.createEl=function(){var t=this.buildCSSClass(),i=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"Â </span>"});return this.contentEl_=w("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),i.appendChild(this.contentEl_),i},n.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},n.updateTextNode_=function(e){var i=this;void 0===e&&(e=0),e=yn(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestAnimationFrame(function(){if(i.contentEl_){var e=i.textNode_;i.textNode_=t.createTextNode(i.formattedTime_),i.textNode_&&(e?i.contentEl_.replaceChild(i.textNode_,e):i.contentEl_.appendChild(i.textNode_))}}))},n.updateContent=function(e){},i}(Ue);_n.prototype.labelText_="Time",_n.prototype.controlText_="Time",Ue.registerComponent("TimeDisplay",_n);var bn=function(e){function t(){return e.apply(this,arguments)||this}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(_n);bn.prototype.labelText_="Current Time",bn.prototype.controlText_="Current Time",Ue.registerComponent("CurrentTimeDisplay",bn);var Tn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"durationchange",n.updateContent),n.on(t,"loadstart",n.updateContent),n.on(t,"loadedmetadata",n.updateContent),n}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-duration"},i.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(_n);Tn.prototype.labelText_="Duration",Tn.prototype.controlText_="Duration",Ue.registerComponent("DurationDisplay",Tn);var wn=function(e){function t(){return e.apply(this,arguments)||this}return Be(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(Ue);Ue.registerComponent("TimeDivider",wn);var kn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"durationchange",n.updateContent),n}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-remaining-time"},i.createEl=function(){var t=e.prototype.createEl.call(this);return t.insertBefore(w("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},i.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(_n);kn.prototype.labelText_="Remaining Time",kn.prototype.controlText_="Remaining Time",Ue.registerComponent("RemainingTimeDisplay",kn);var Sn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}Be(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=w("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"Â </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},i.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},i.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Ue);Ue.registerComponent("LiveDisplay",Sn);var xn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatus),n}Be(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=w("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},i.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,e.prototype.dispose.call(this)},t}(pn);xn.prototype.controlText_="Seek to live, currently playing live",Ue.registerComponent("SeekToLive",xn);var Mn=function(e,t,i){return e=Number(e),Math.min(i,Math.max(t,isNaN(e)?t:e))},Cn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}Be(t,e);var i=t.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function(t,i,n){return void 0===i&&(i={}),void 0===n&&(n={}),i.className=i.className+" vjs-slider",i=p({tabIndex:0},i),n=p({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),e.prototype.createEl.call(this,t,i,n)},i.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Ke||e.preventDefault(),L(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},i.handleMouseMove=function(e){},i.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;P(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},i.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_?t:(this.progress_=t,this.requestAnimationFrame(function(){var i=e.vertical()?"height":"width";e.bar.el().style[i]=(100*t).toFixed(2)+"%"}),t)}},i.getProgress=function(){return Number(Mn(this.getPercent(),0,1).toFixed(4))},i.calculateDistance=function(e){var t=R(this.el_,e);return this.vertical()?t.y:t.x},i.handleKeyDown=function(t){Mt.isEventKey(t,"Left")||Mt.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):Mt.isEventKey(t,"Right")||Mt.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){e.stopPropagation(),e.preventDefault()},i.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Ue);Ue.registerComponent("Slider",Cn);var En=function(e,t){return Mn(e/t*100,0,100).toFixed(2)+"%"},In=function(e){function i(t,i){var n;return(n=e.call(this,t,i)||this).partEls_=[],n.on(t,"progress",n.update),n}Be(i,e);var n=i.prototype;return n.createEl=function(){var i=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=w("span",{className:"vjs-control-text"}),r=w("span",{textContent:this.localize("Loaded")}),a=t.createTextNode(": ");return this.percentageEl_=w("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),i.appendChild(n),n.appendChild(r),n.appendChild(a),n.appendChild(this.percentageEl_),i},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},n.update=function(e){var t=this;this.requestAnimationFrame(function(){var e=t.player_.liveTracker,i=t.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():t.player_.duration(),r=t.player_.bufferedEnd(),a=t.partEls_,s=En(r,n);t.percent_!==s&&(t.el_.style.width=s,k(t.percentageEl_,s),t.percent_=s);for(var o=0;o<i.length;o++){var l=i.start(o),u=i.end(o),d=a[o];d||(d=t.el_.appendChild(w()),a[o]=d),d.dataset.start===l&&d.dataset.end===u||(d.dataset.start=l,d.dataset.end=u,d.style.left=En(l,r),d.style.width=En(u-l,r))}for(var c=a.length;c>i.length;c--)t.el_.removeChild(a[c-1]);a.length=i.length})},i}(Ue);Ue.registerComponent("LoadProgressBar",In);var Dn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=be(_e(Re(n),n.update),ye),n}Be(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function(e,t,i){var n=j(this.el_),r=j(this.player_.el()),a=e.width*t;if(r&&n){var s=e.left-r.left+a,o=e.width-a+(r.right-e.right),l=n.width/2;s<l?l+=l-s:o<l&&(l=o),l<0?l=0:l>n.width&&(l=n.width),this.el_.style.right="-"+l+"px",this.write(i)}},i.write=function(e){k(this.el_,e)},i.updateTime=function(e,t,i,n){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var a,s=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var o=r.player_.liveTracker.liveWindow(),l=o-t*o;a=(l<1?"":"-")+yn(l,o)}else a=yn(i,s);r.update(e,t,a),n&&n()})},t}(Ue);Ue.registerComponent("TimeTooltip",Dn);var An=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=be(_e(Re(n),n.update),ye),n}Be(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(e,t){var i=this.getChild("timeTooltip");if(i){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,n)}},t}(Ue);An.prototype.options_={children:[]},at||Ve||An.prototype.options_.children.push("timeTooltip"),Ue.registerComponent("PlayProgressBar",An);var On=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=be(_e(Re(n),n.update),ye),n}Be(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(e,t){var i=this,n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,function(){i.el_.style.left=e.width*t+"px"})},t}(Ue);On.prototype.options_={children:["timeTooltip"]},Ue.registerComponent("MouseTimeDisplay",On);var Nn=function(e){function i(t,i){var n;return(n=e.call(this,t,i)||this).setEventHandlers_(),n}Be(i,e);var n=i.prototype;return n.setEventHandlers_=function(){this.update_=_e(this,this.update),this.update=be(this.update_,ye),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in t&&"visibilityState"in t&&this.on(t,"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(e){t.hidden?this.disableInterval_(e):(this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,ye))},n.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(t){var i=this,n=e.prototype.update.call(this);return this.requestAnimationFrame(function(){var e=i.player_.ended()?i.player_.duration():i.getCurrentTime_(),t=i.player_.liveTracker,r=i.player_.duration();t&&t.isLive()&&(r=i.player_.liveTracker.liveCurrentTime()),i.percent_!==n&&(i.el_.setAttribute("aria-valuenow",(100*n).toFixed(2)),i.percent_=n),i.currentTime_===e&&i.duration_===r||(i.el_.setAttribute("aria-valuetext",i.localize("progress bar timing: currentTime={1} duration={2}",[yn(e,r),yn(r,r)],"{1} of {2}")),i.currentTime_=e,i.duration_=r),i.bar&&i.bar.update(j(i.el()),i.getProgress())}),n},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var e,t=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(e=(t-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},n.handleMouseDown=function(t){H(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),e.prototype.handleMouseDown.call(this,t))},n.handleMouseMove=function(e){if(H(e)){var t,i=this.calculateDistance(e),n=this.player_.liveTracker;if(n&&n.isLive()){if(i>=.99)return void n.seekToLiveEdge();var r=n.seekableStart(),a=n.liveCurrentTime();if((t=r+i*n.liveWindow())>=a&&(t=a),t<=r&&(t=r+.1),t===1/0)return}else(t=i*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},n.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},n.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},n.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?wt(this.player_.play()):this.update_()},n.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},n.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(t){if(Mt.isEventKey(t,"Space")||Mt.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(Mt.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(0);else if(Mt.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(Mt(t))){t.preventDefault(),t.stopPropagation();var i=10*(Mt.codes[Mt(t)]-Mt.codes[0])/100;this.player_.currentTime(this.player_.duration()*i)}else Mt.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):Mt.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableInterval_),this.off(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in t&&"visibilityState"in t&&this.off(t,"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},i}(Cn);Nn.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},at||Ve||Nn.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Ue.registerComponent("SeekBar",Nn);var Ln=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).handleMouseMove=be(_e(Re(n),n.handleMouseMove),ye),n.throttledHandleMouseSeek=be(_e(Re(n),n.handleMouseSeek),ye),n.enable(),n}Be(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var i=t.getChild("playProgressBar"),n=t.getChild("mouseTimeDisplay");if(i||n){var r=t.el(),a=j(r),s=R(r,e).x;s=Mn(0,1,s),n&&n.update(a,s),i&&i.update(a,t.getProgress())}}},i.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},i.enabled=function(){return this.enabled_},i.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},i.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},i.handleMouseUp=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(Ue);Ln.prototype.options_={children:["seekBar"]},Ue.registerComponent("ProgressControl",Ln);var Pn=function(e){function i(i,n){var r;return(r=e.call(this,i,n)||this).on(i,["enterpictureinpicture","leavepictureinpicture"],r.handlePictureInPictureChange),t.pictureInPictureEnabled||r.disable(),r}Be(i,e);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},i}(pn);Pn.prototype.controlText_="Picture-in-Picture",Ue.registerComponent("PictureInPictureToggle",Pn);var jn=function(e){function i(i,n){var r;return(r=e.call(this,i,n)||this).on(i,"fullscreenchange",r.handleFullscreenChange),!1===t[i.fsApi_.fullscreenEnabled]&&r.disable(),r}Be(i,e);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},i}(pn);jn.prototype.controlText_="Fullscreen",Ue.registerComponent("FullscreenToggle",jn);var Un=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},Rn=function(e){function t(){return e.apply(this,arguments)||this}return Be(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Ue);Ue.registerComponent("VolumeLevel",Rn);var zn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on("slideractive",n.updateLastVolume_),n.on(t,"volumechange",n.updateARIAAttributes),t.ready(function(){return n.updateARIAAttributes()}),n}Be(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function(t){H(t)&&e.prototype.handleMouseDown.call(this,t)},i.handleMouseMove=function(e){H(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},i.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},i.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},i.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},t}(Cn);zn.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},zn.prototype.playerEvent="volumechange",Ue.registerComponent("VolumeBar",zn);var Bn=function(e){function t(t,i){var n;return void 0===i&&(i={}),i.vertical=i.vertical||!1,(void 0===i.volumeBar||f(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),n=e.call(this,t,i)||this,Un(Re(n),t),n.throttledHandleMouseMove=be(_e(Re(n),n.handleMouseMove),ye),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}Be(t,e);var i=t.prototype;return i.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},i.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},i.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},i.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Ue);Bn.prototype.options_={children:["volumeBar"]},Ue.registerComponent("VolumeControl",Bn);var Fn=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},$n=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,Fn(Re(n),t),n.on(t,["loadstart","volumechange"],n.update),n}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){var t=this.player_.volume(),i=this.player_.lastVolume_();if(0===t){var n=i<.1?.1:i;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},i.update=function(e){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function(){var e=this.player_.volume(),t=3;at&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var i=0;i<4;i++)C(this.el_,"vjs-vol-"+i);M(this.el_,"vjs-vol-"+t)},i.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(pn);$n.prototype.controlText_="Mute",Ue.registerComponent("MuteToggle",$n);var qn=function(e){function i(t,i){var n;return void 0===i&&(i={}),void 0!==i.inline?i.inline=i.inline:i.inline=!0,(void 0===i.volumeControl||f(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(n=e.call(this,t,i)||this).on(t,["loadstart"],n.volumePanelState_),n.on(n.muteToggle,"keyup",n.handleKeyPress),n.on(n.volumeControl,"keyup",n.handleVolumeControlKeyUp),n.on("keydown",n.handleKeyPress),n.on("mouseover",n.handleMouseOver),n.on("mouseout",n.handleMouseOut),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}Be(i,e);var n=i.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},n.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(e){Mt.isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(e){this.addClass("vjs-hover"),ce(t,"keyup",_e(this,this.handleKeyPress))},n.handleMouseOut=function(e){this.removeClass("vjs-hover"),pe(t,"keyup",_e(this,this.handleKeyPress))},n.handleKeyPress=function(e){Mt.isEventKey(e,"Esc")&&this.handleMouseOut()},i}(Ue);qn.prototype.options_={children:["muteToggle","volumeControl"]},Ue.registerComponent("VolumePanel",qn);var Hn=function(e){function i(t,i){var n;return n=e.call(this,t,i)||this,i&&(n.menuButton_=i.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyDown),n.boundHandleBlur_=_e(Re(n),n.handleBlur),n.boundHandleTapClick_=_e(Re(n),n.handleTapClick),n}Be(i,e);var n=i.prototype;return n.addEventListenerForItem=function(e){e instanceof Ue&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(e){e instanceof Ue&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},n.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},n.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=w(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),ce(i,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),i},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},n.handleBlur=function(e){var i=e.relatedTarget||t.activeElement;if(!this.children().some(function(e){return e.el()===i})){var n=this.menuButton_;n&&n.buttonPressed_&&i!==n.el().firstChild&&n.unpressButton()}},n.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var i=t.filter(function(t){return t.el()===e.target})[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}},n.handleKeyDown=function(e){Mt.isEventKey(e,"Left")||Mt.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Mt.isEventKey(e,"Right")||Mt.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},i}(Ue);Ue.registerComponent("Menu",Hn);var Wn=function(e){function i(i,n){var r;void 0===n&&(n={}),(r=e.call(this,i,n)||this).menuButton_=new pn(i,n),r.menuButton_.controlText(r.controlText_),r.menuButton_.el_.setAttribute("aria-haspopup","true");var a=pn.prototype.buildCSSClass();return r.menuButton_.el_.className=r.buildCSSClass()+" "+a,r.menuButton_.removeClass("vjs-control"),r.addChild(r.menuButton_),r.update(),r.enabled_=!0,r.on(r.menuButton_,"tap",r.handleClick),r.on(r.menuButton_,"click",r.handleClick),r.on(r.menuButton_,"keydown",r.handleKeyDown),r.on(r.menuButton_,"mouseenter",function(){r.addClass("vjs-hover"),r.menu.show(),ce(t,"keyup",_e(Re(r),r.handleMenuKeyUp))}),r.on("mouseleave",r.handleMouseLeave),r.on("keydown",r.handleSubmenuKeyDown),r}Be(i,e);var n=i.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},n.createMenu=function(){var e=new Hn(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=w("li",{className:"vjs-menu-title",innerHTML:Pe(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var i=new Ue(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},n.createItems=function(){},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+pn.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(e){this.removeClass("vjs-hover"),pe(t,"keyup",_e(this,this.handleMenuKeyUp))},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(e){Mt.isEventKey(e,"Esc")||Mt.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Mt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Mt.isEventKey(e,"Up")||Mt.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(e){(Mt.isEventKey(e,"Esc")||Mt.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},n.handleSubmenuKeyDown=function(e){(Mt.isEventKey(e,"Esc")||Mt.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Mt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),at&&b())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},i}(Ue);Ue.registerComponent("MenuButton",Wn);var Vn=function(e){function t(t,i){var n,r=i.tracks;if((n=e.call(this,t,i)||this).items.length<=1&&n.hide(),!r)return Re(n);var a=_e(Re(n),n.update);return r.addEventListener("removetrack",a),r.addEventListener("addtrack",a),n.player_.on("ready",a),n.player_.on("dispose",function(){r.removeEventListener("removetrack",a),r.removeEventListener("addtrack",a)}),n}return Be(t,e),t}(Wn);Ue.registerComponent("TrackButton",Vn);var Yn=["Tab","Esc","Up","Down","Right","Left"],Gn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).selectable=i.selectable,n.isSelected_=i.selected||!1,n.multiSelectable=i.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}Be(t,e);var i=t.prototype;return i.createEl=function(t,i,n){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",p({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},i),n)},i.handleKeyDown=function(t){Yn.some(function(e){return Mt.isEventKey(t,e)})||e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){this.selected(!0)},i.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(an);Ue.registerComponent("MenuItem",Gn);var Qn=function(i){function n(n,r){var a,s=r.track,o=n.textTracks();r.label=s.label||s.language||"Unknown",r.selected="showing"===s.mode,(a=i.call(this,n,r)||this).track=s,a.kinds=(r.kinds||[r.kind||a.track.kind]).filter(Boolean);var l,u=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.handleTracksChange.apply(Re(a),t)},d=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.handleSelectedLanguageChange.apply(Re(a),t)};(n.on(["loadstart","texttrackchange"],u),o.addEventListener("change",u),o.addEventListener("selectedlanguagechange",d),a.on("dispose",function(){n.off(["loadstart","texttrackchange"],u),o.removeEventListener("change",u),o.removeEventListener("selectedlanguagechange",d)}),void 0===o.onchange)&&a.on(["tap","click"],function(){if("object"!=typeof e.Event)try{l=new e.Event("change")}catch(e){}l||(l=t.createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(l)});return a.handleTracksChange(),a}Be(n,i);var r=n.prototype;return r.handleClick=function(e){var t=this.track,n=this.player_.textTracks();if(i.prototype.handleClick.call(this,e),n)for(var r=0;r<n.length;r++){var a=n[r];-1!==this.kinds.indexOf(a.kind)&&(a===t?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},r.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},r.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},r.dispose=function(){this.track=null,i.prototype.dispose.call(this)},n}(Gn);Ue.registerComponent("TextTrackMenuItem",Qn);var Xn=function(e){function t(t,i){return i.track={player:t,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,e.call(this,t,i)||this}Be(t,e);var i=t.prototype;return i.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var a=t[n];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},i.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var a=t[n];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(Qn);Ue.registerComponent("OffTextTrackMenuItem",Xn);var Kn=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.textTracks(),e.call(this,t,i)||this}return Be(t,e),t.prototype.createItems=function(e,t){var i;void 0===e&&(e=[]),void 0===t&&(t=Qn),this.label_&&(i=this.label_+" off"),e.push(new Xn(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var a=n[r];if(this.kinds_.indexOf(a.kind)>-1){var s=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+a.kind+"-menu-item"),e.push(s)}}return e},t}(Vn);Ue.registerComponent("TextTrackButton",Kn);var Zn=function(e){function t(t,i){var n,r=i.track,a=i.cue,s=t.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=a.text,i.selected=a.startTime<=s&&s<a.endTime,(n=e.call(this,t,i)||this).track=r,n.cue=a,r.addEventListener("cuechange",_e(Re(n),n.update)),n}Be(t,e);var i=t.prototype;return i.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},i.update=function(e){var t=this.cue,i=this.player_.currentTime();this.selected(t.startTime<=i&&i<t.endTime)},t}(Gn);Ue.registerComponent("ChaptersTrackMenuItem",Zn);var Jn=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},i.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},i.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},i.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var i=e[t];if(i.kind===this.kind_)return i}},i.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Pe(this.kind_))},i.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},i.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,n=t.length;i<n;i++){var r=t[i],a=new Zn(this.player_,{track:this.track_,cue:r});e.push(a)}return e},t}(Kn);Jn.prototype.kind_="chapters",Jn.prototype.controlText_="Chapters",Ue.registerComponent("ChaptersButton",Jn);var er=function(e){function t(t,i,n){var r;r=e.call(this,t,i,n)||this;var a=t.textTracks(),s=_e(Re(r),r.handleTracksChange);return a.addEventListener("change",s),r.on("dispose",function(){a.removeEventListener("change",s)}),r}Be(t,e);var i=t.prototype;return i.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,n=0,r=t.length;n<r;n++){var a=t[n];if(a.kind!==this.kind_&&"showing"===a.mode){i=!0;break}}i?this.disable():this.enable()},i.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Kn);er.prototype.kind_="descriptions",er.prototype.controlText_="Descriptions",Ue.registerComponent("DescriptionsButton",er);var tr=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Kn);tr.prototype.kind_="subtitles",tr.prototype.controlText_="Subtitles",Ue.registerComponent("SubtitlesButton",tr);var ir=function(e){function t(t,i){var n;return i.track={player:t,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(n=e.call(this,t,i)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+i.kind+" settings dialog"),n}return Be(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(Qn);Ue.registerComponent("CaptionSettingsMenuItem",ir);var nr=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new ir(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Kn);nr.prototype.kind_="captions",nr.prototype.controlText_="Captions",Ue.registerComponent("CaptionsButton",nr);var rr=function(e){function t(){return e.apply(this,arguments)||this}return Be(t,e),t.prototype.createEl=function(t,i,n){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),r+="</span>",e.prototype.createEl.call(this,t,p({innerHTML:r},i),n)},t}(Qn);Ue.registerComponent("SubsCapsMenuItem",rr);var ar=function(e){function t(t,i){var n;return void 0===i&&(i={}),(n=e.call(this,t,i)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(Pe(n.label_)),n}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new ir(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,rr)},t}(Kn);ar.prototype.kinds_=["captions","subtitles"],ar.prototype.controlText_="Subtitles",Ue.registerComponent("SubsCapsButton",ar);var sr=function(e){function t(t,i){var n,r=i.track,a=t.audioTracks();i.label=r.label||r.language||"Unknown",i.selected=r.enabled,(n=e.call(this,t,i)||this).track=r,n.addClass("vjs-"+r.kind+"-menu-item");var s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(Re(n),t)};return a.addEventListener("change",s),n.on("dispose",function(){a.removeEventListener("change",s)}),n}Be(t,e);var i=t.prototype;return i.createEl=function(t,i,n){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),r+="</span>",e.prototype.createEl.call(this,t,p({innerHTML:r},i),n)},i.handleClick=function(t){var i=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var n=0;n<i.length;n++){var r=i[n];r.enabled=r===this.track}},i.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Gn);Ue.registerComponent("AudioTrackMenuItem",sr);var or=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.audioTracks(),e.call(this,t,i)||this}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var n=t[i];e.push(new sr(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e},t}(Vn);or.prototype.controlText_="Audio Track",Ue.registerComponent("AudioTrackButton",or);var lr=function(e){function t(t,i){var n,r=i.rate,a=parseFloat(r,10);return i.label=r,i.selected=1===a,i.selectable=!0,i.multiSelectable=!1,(n=e.call(this,t,i)||this).label=r,n.rate=a,n.on(t,"ratechange",n.update),n}Be(t,e);var i=t.prototype;return i.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Gn);lr.prototype.contentElType="button",Ue.registerComponent("PlaybackRateMenuItem",lr);var ur=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateVisibility(),n.updateLabel(),n.on(t,"loadstart",n.updateVisibility),n.on(t,"ratechange",n.updateLabel),n}Be(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=w("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},i.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},i.createMenu=function(){var e=new Hn(this.player()),t=this.playbackRates();if(t)for(var i=t.length-1;i>=0;i--)e.addChild(new lr(this.player(),{rate:t[i]+"x"}));return e},i.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function(e){for(var t=this.player().playbackRate(),i=this.playbackRates(),n=i[0],r=0;r<i.length;r++)if(i[r]>t){n=i[r];break}this.player().playbackRate(n)},i.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},i.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},i.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(Wn);ur.prototype.controlText_="Playback Rate",Ue.registerComponent("PlaybackRateMenuButton",ur);var dr=function(e){function t(){return e.apply(this,arguments)||this}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Ue);Ue.registerComponent("Spacer",dr);var cr=function(e){function t(){return e.apply(this,arguments)||this}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="Â ",t},t}(dr);Ue.registerComponent("CustomControlSpacer",cr);var pr=function(e){function t(){return e.apply(this,arguments)||this}return Be(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Ue);pr.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in t&&pr.prototype.options_.children.splice(pr.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Ue.registerComponent("ControlBar",pr);var hr=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"error",n.open),n}Be(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},i.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Et);hr.prototype.options_=l({},Et.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Ue.registerComponent("ErrorDisplay",hr);var fr=["#000","Black"],mr=["#00F","Blue"],gr=["#0FF","Cyan"],vr=["#0F0","Green"],yr=["#F0F","Magenta"],_r=["#F00","Red"],br=["#FFF","White"],Tr=["#FF0","Yellow"],wr=["1","Opaque"],kr=["0.5","Semi-Transparent"],Sr=["0","Transparent"],xr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[fr,br,_r,vr,mr,Tr,yr,gr]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[wr,kr,Sr]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[br,fr,_r,vr,mr,Tr,yr,gr]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[wr,kr]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Sr,kr,wr]}};function Mr(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}xr.windowColor.options=xr.backgroundColor.options;var Cr=function(t){function i(e,i){var n;return i.temporary=!1,(n=t.call(this,e,i)||this).updateDisplay=_e(Re(n),n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=w("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===i.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),c(xr,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}Be(i,t);var n=i.prototype;return n.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},n.createElSelect_=function(e,t,i){var n=this;void 0===t&&(t=""),void 0===i&&(i="label");var r=xr[e],a=r.id.replace("%s",this.id_),s=[t,a].join(" ").trim();return["<"+i+' id="'+a+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(r.label),"</"+i+">",'<select aria-labelledby="'+s+'">'].concat(r.options.map(function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return w("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return w("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return w("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e,t,i,n=this;return t=function(e,t,i){var r,a,s=(r=n.$(t.selector),a=t.parser,Mr(r.options[r.options.selectedIndex].value,a));return void 0!==s&&(e[i]=s),e},void 0===(i={})&&(i=0),d(e=xr).reduce(function(i,n){return t(i,e[n],n)},i)},n.setValues=function(e){var t=this;c(xr,function(i,n){!function(e,t,i){if(t)for(var n=0;n<e.options.length;n++)if(Mr(e.options[n].value,i)===t){e.selectedIndex=n;break}}(t.$(i.selector),e[n],i.parser)})},n.setDefaults=function(){var e=this;c(xr,function(t){var i=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=i})},n.restoreSettings=function(){var t;try{t=JSON.parse(e.localStorage.getItem("vjs-text-track-settings"))}catch(e){a.warn(e)}t&&this.setValues(t)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?e.localStorage.setItem("vjs-text-track-settings",JSON.stringify(t)):e.localStorage.removeItem("vjs-text-track-settings")}catch(e){a.warn(e)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()},i}(Et);Ue.registerComponent("TextTrackSettings",Cr);var Er=function(t){function i(i,n){var r,a=n.ResizeObserver||e.ResizeObserver;null===n.ResizeObserver&&(a=!1);var s=je({createEl:!a,reportTouchActivity:!1},n);return(r=t.call(this,i,s)||this).ResizeObserver=n.ResizeObserver||e.ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=Te(function(){r.resizeHandler()},100,!1,Re(r)),a?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(i.el())):(r.loadListener_=function(){if(r.el_&&r.el_.contentWindow){var e=r.debouncedHandler_,t=r.unloadListener_=function(){pe(this,"resize",e),pe(this,"unload",t),t=null};ce(r.el_.contentWindow,"unload",t),ce(r.el_.contentWindow,"resize",e)}},r.one("load",r.loadListener_)),r}Be(i,t);var n=i.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},i}(Ue);Ue.registerComponent("ResizeManager",Er);var Ir={trackingThreshold:30,liveTolerance:15},Dr=function(i){function n(e,n){var r,a=je(Ir,n,{createEl:!1});return(r=i.call(this,e,a)||this).reset_(),r.on(r.player_,"durationchange",r.handleDurationchange),Je&&"hidden"in t&&"visibilityState"in t&&r.on(t,"visibilitychange",r.handleVisibilityChange),r}Be(n,i);var r=n.prototype;return r.handleVisibilityChange=function(){this.player_.duration()===1/0&&(t.hidden?this.stopTracking():this.startTracking())},r.trackLive_=function(){var t=this.player_.seekable();if(t&&t.length){var i=Number(e.performance.now().toFixed(4)),n=-1===this.lastTime_?0:(i-this.lastTime_)/1e3;this.lastTime_=i,this.pastSeekEnd_=this.pastSeekEnd()+n;var r=this.liveCurrentTime(),a=this.player_.currentTime(),s=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-a)>this.options_.liveTolerance;this.timeupdateSeen_&&r!==1/0||(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}},r.handleDurationchange=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},r.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,ye),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked):(this.one(this.player_,"play",this.handlePlay),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)))},r.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked)},r.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=!this.skipNextSeeked_&&e>2,this.skipNextSeeked_=!1,this.trackLive_()},r.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},r.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.skipNextSeeked_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLive_),this.off(this.player_,"seeked",this.handleSeeked),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate),this.off(this.player_,"timeupdate",this.seekToLiveEdge)},r.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},r.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0},r.seekableStart=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0},r.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?1/0:e-this.seekableStart()},r.isLive=function(){return this.isTracking()},r.atLiveEdge=function(){return!this.behindLiveEdge()},r.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},r.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},r.behindLiveEdge=function(){return this.behindLiveEdge_},r.isTracking=function(){return"number"==typeof this.trackingInterval_},r.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.skipNextSeeked_=!0,this.player_.currentTime(this.liveCurrentTime()))},r.dispose=function(){this.off(t,"visibilitychange",this.handleVisibilityChange),this.stopTracking(),i.prototype.dispose.call(this)},n}(Ue);Ue.registerComponent("LiveTracker",Dr);var Ar,Or=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var i=e.$$("source"),n=[],r="";if(!i.length)return!1;for(var a=0;a<i.length;a++){var s=i[a].src;s&&-1===n.indexOf(s)&&n.push(s)}return!!n.length&&(1===n.length&&(r=n[0]),e.triggerSourceset(r),!0)},Nr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(i){var n=t.createElement(this.nodeName.toLowerCase());n.innerHTML=i;for(var r=t.createDocumentFragment();n.childNodes.length;)r.appendChild(n.childNodes[0]);return this.innerText="",e.Element.prototype.appendChild.call(this,r),this.innerHTML}}),Lr=function(e,t){for(var i={},n=0;n<e.length&&!((i=Object.getOwnPropertyDescriptor(e[n],t))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i},Pr=function(t){var i=t.el();if(!i.resetSourceWatch_){var n={},r=function(t){return Lr([t.el(),e.HTMLMediaElement.prototype,e.Element.prototype,Nr],"innerHTML")}(t),a=function(e){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=e.apply(i,r);return Or(t),s}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){i[e]&&(n[e]=i[e],i[e]=a(n[e]))}),Object.defineProperty(i,"innerHTML",je(r,{set:a(r.set)})),i.resetSourceWatch_=function(){i.resetSourceWatch_=null,Object.keys(n).forEach(function(e){i[e]=n[e]}),Object.defineProperty(i,"innerHTML",r)},t.one("sourceset",i.resetSourceWatch_)}},jr=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Ht(e.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return e.Element.prototype.setAttribute.call(this,"src",t),t}}),Ur=function(t){if(t.featuresSourceset){var i=t.el();if(!i.resetSourceset_){var n=function(t){return Lr([t.el(),e.HTMLMediaElement.prototype,jr],"src")}(t),r=i.setAttribute,a=i.load;Object.defineProperty(i,"src",je(n,{set:function(e){var r=n.set.call(i,e);return t.triggerSourceset(i.src),r}})),i.setAttribute=function(e,n){var a=r.call(i,e,n);return/src/i.test(e)&&t.triggerSourceset(i.src),a},i.load=function(){var e=a.call(i);return Or(t)||(t.triggerSourceset(""),Pr(t)),e},i.currentSrc?t.triggerSourceset(i.currentSrc):Or(t)||Pr(t),i.resetSourceset_=function(){i.resetSourceset_=null,i.load=a,i.setAttribute=r,Object.defineProperty(i,"src",n),i.resetSourceWatch_&&i.resetSourceWatch_()}}}},Rr=function(e,t,i,n){void 0===n&&(n=!0);var r=function(i){return Object.defineProperty(e,t,{value:i,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var e=i();return r(e),e}};return n&&(a.set=r),Object.defineProperty(e,t,a)},zr=function(i){function n(e,t){var n;n=i.call(this,e,t)||this;var r=e.source,s=!1;if(r&&(n.el_.currentSrc!==r.src||e.tag&&3===e.tag.initNetworkState_)?n.setSource(r):n.handleLateInit_(n.el_),e.enableSourceset&&n.setupSourcesetHandling_(),n.el_.hasChildNodes()){for(var o=n.el_.childNodes,l=o.length,u=[];l--;){var d=o[l];"track"===d.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(d),n.remoteTextTracks().addTrack(d.track),n.textTracks().addTrack(d.track),s||n.el_.hasAttribute("crossorigin")||!Vt(d.src)||(s=!0)):u.push(d))}for(var c=0;c<u.length;c++)n.el_.removeChild(u[c])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&s&&a.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(it||rt||Ge)&&!0===e.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}Be(n,i);var r=n.prototype;return r.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),n.disposeMediaElement(this.el_),this.options_=null,i.prototype.dispose.call(this)},r.setupSourcesetHandling_=function(){Ur(this)},r.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),i=function(){e=[];for(var i=0;i<t.length;i++){var n=t[i];"metadata"===n.kind&&e.push({track:n,storedMode:n.mode})}};i(),t.addEventListener("change",i),this.on("dispose",function(){return t.removeEventListener("change",i)});var n=function i(){for(var n=0;n<e.length;n++){var r=e[n];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}t.removeEventListener("change",i)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",i),t.removeEventListener("change",n),t.addEventListener("change",n)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",i),t.addEventListener("change",i),t.removeEventListener("change",n)})},r.overrideNative_=function(e,t){var i=this;if(t===this["featuresNative"+e+"Tracks"]){var n=e.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){i.el()[n+"Tracks"].removeEventListener(e,i[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},r.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},r.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},r.proxyNativeTracksForType_=function(e){var t=this,i=di[e],n=this.el()[i.getterName],r=this[i.getterName]();if(this["featuresNative"+i.capitalName+"Tracks"]&&n&&n.addEventListener){var a={change:function(i){var n={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(n),"text"===e&&t[ci.remoteText.getterName]().trigger(n)},addtrack:function(e){r.addTrack(e.track)},removetrack:function(e){r.removeTrack(e.track)}},s=function(){for(var e=[],t=0;t<r.length;t++){for(var i=!1,a=0;a<n.length;a++)if(n[a]===r[t]){i=!0;break}i||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[i.getterName+"Listeners_"]=a,Object.keys(a).forEach(function(e){var i=a[e];n.addEventListener(e,i),t.on("dispose",function(t){return n.removeEventListener(e,i)})}),this.on("loadstart",s),this.on("dispose",function(e){return t.off("loadstart",s)})}},r.proxyNativeTracks_=function(){var e=this;di.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},r.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),n.disposeMediaElement(e),e=i}else{e=t.createElement("video");var r=je({},this.options_.tag&&D(this.options_.tag));it&&!0===this.options_.nativeControlsForTouch||delete r.controls,I(e,p(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&O(e,"preload",this.options_.preload);for(var a=["loop","muted","playsinline","autoplay"],s=0;s<a.length;s++){var o=a[s],l=this.options_[o];void 0!==l&&(l?O(e,o,o):N(e,o),e[o]=l)}return e},r.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,i=function(){t=!0};this.on("loadstart",i);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",n),t||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),e.readyState>=2&&r.push("loadeddata"),e.readyState>=3&&r.push("canplay"),e.readyState>=4&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},r.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){a(e,"Video is not ready. (Video.js)")}},r.duration=function(){var e=this;if(this.el_.duration===1/0&&Ve&&Ke&&0===this.el_.currentTime){return this.on("timeupdate",function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN}return this.el_.duration||NaN},r.width=function(){return this.el_.offsetWidth},r.height=function(){return this.el_.offsetHeight},r.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",function(){e.off("webkitbeginfullscreen",i),e.off("webkitendfullscreen",t)})}},r.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=e.navigator&&e.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},r.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)wt(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},r.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},r.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},r.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},r.reset=function(){n.resetMediaElement(this.el_)},r.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},r.setControls=function(e){this.el_.controls=!!e},r.addTextTrack=function(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):i.prototype.addTextTrack.call(this,e,t,n)},r.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return i.prototype.createRemoteTextTrack.call(this,e);var n=t.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n},r.addRemoteTextTrack=function(e,t){var n=i.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},r.removeRemoteTextTrack=function(e){if(i.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),n=t.length;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])},r.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),e.performance&&"function"==typeof e.performance.now?t.creationTime=e.performance.now():e.performance&&e.performance.timing&&"number"==typeof e.performance.timing.navigationStart&&(t.creationTime=e.Date.now()-e.performance.timing.navigationStart),t},n}(Hi);Rr(zr,"TEST_VID",function(){if(y()){var e=t.createElement("video"),i=t.createElement("track");return i.kind="captions",i.srclang="en",i.label="English",e.appendChild(i),e}}),zr.isSupported=function(){try{zr.TEST_VID.volume=.5}catch(e){return!1}return!(!zr.TEST_VID||!zr.TEST_VID.canPlayType)},zr.canPlayType=function(e){return zr.TEST_VID.canPlayType(e)},zr.canPlaySource=function(e,t){return zr.canPlayType(e.type)},zr.canControlVolume=function(){try{var e=zr.TEST_VID.volume;return zr.TEST_VID.volume=e/2+.1,e!==zr.TEST_VID.volume}catch(e){return!1}},zr.canMuteVolume=function(){try{var e=zr.TEST_VID.muted;return zr.TEST_VID.muted=!e,zr.TEST_VID.muted?O(zr.TEST_VID,"muted","muted"):N(zr.TEST_VID,"muted"),e!==zr.TEST_VID.muted}catch(e){return!1}},zr.canControlPlaybackRate=function(){if(Ve&&Ke&&Ze<58)return!1;try{var e=zr.TEST_VID.playbackRate;return zr.TEST_VID.playbackRate=e/2+.1,e!==zr.TEST_VID.playbackRate}catch(e){return!1}},zr.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(t.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(t.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(t.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(t.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},zr.supportsNativeTextTracks=function(){return st||at&&Ke},zr.supportsNativeVideoTracks=function(){return!(!zr.TEST_VID||!zr.TEST_VID.videoTracks)},zr.supportsNativeAudioTracks=function(){return!(!zr.TEST_VID||!zr.TEST_VID.audioTracks)},zr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[0],i=e[1];Rr(zr.prototype,t,function(){return zr[i]()},!0)}),zr.prototype.movingMediaElementInDOM=!at,zr.prototype.featuresFullscreenResize=!0,zr.prototype.featuresProgressEvents=!0,zr.prototype.featuresTimeupdateEvents=!0,zr.patchCanPlayType=function(){Ye>=4&&!Qe&&!Ke&&(Ar=zr.TEST_VID&&zr.TEST_VID.constructor.prototype.canPlayType,zr.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":Ar.call(this,e)})},zr.unpatchCanPlayType=function(){var e=zr.TEST_VID.constructor.prototype.canPlayType;return Ar&&(zr.TEST_VID.constructor.prototype.canPlayType=Ar),e},zr.patchCanPlayType(),zr.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},zr.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){zr.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){zr.prototype["set"+Pe(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){zr.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","crossOrigin"].forEach(function(e){zr.prototype["set"+Pe(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){zr.prototype[e]=function(){return this.el_[e]()}}),Hi.withSourceHandlers(zr),zr.nativeSourceHandler={},zr.nativeSourceHandler.canPlayType=function(e){try{return zr.TEST_VID.canPlayType(e)}catch(e){return""}},zr.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return zr.nativeSourceHandler.canPlayType(e.type);if(e.src){var i=Wt(e.src);return zr.nativeSourceHandler.canPlayType("video/"+i)}return""},zr.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},zr.nativeSourceHandler.dispose=function(){},zr.registerSourceHandler(zr.nativeSourceHandler),Hi.registerTech("Html5",zr);var Br=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Fr={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},$r=["tiny","xsmall","small","medium","large","xlarge","huge"],qr={};$r.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;qr[e]="vjs-layout-"+t});var Hr={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Wr=function(n){function r(e,a,o){var l;if(e.id=e.id||a.id||"vjs_video_"+ne(),(a=p(r.getTagSettings(e),a)).initChildren=!1,a.createEl=!1,a.evented=!1,a.reportTouchActivity=!1,!a.language)if("function"==typeof e.closest){var u=e.closest("[lang]");u&&u.getAttribute&&(a.language=u.getAttribute("lang"))}else for(var d=e;d&&1===d.nodeType;){if(D(d).hasOwnProperty("lang")){a.language=d.getAttribute("lang");break}d=d.parentNode}if((l=n.call(this,null,a,o)||this).boundDocumentFullscreenChange_=_e(Re(l),l.documentFullscreenChange_),l.boundFullWindowOnEscKey_=_e(Re(l),l.fullWindowOnEscKey),l.isFullscreen_=!1,l.log=s(l.id_),l.fsApi_=ht,l.isPosterFromTech_=!1,l.queuedCallbacks_=[],l.isReady_=!1,l.hasStarted_=!1,l.userActive_=!1,!l.options_||!l.options_.techOrder||!l.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(l.tag=e,l.tagAttributes=e&&D(e),l.language(l.options_.language),a.languages){var c={};Object.getOwnPropertyNames(a.languages).forEach(function(e){c[e.toLowerCase()]=a.languages[e]}),l.languages_=c}else l.languages_=r.prototype.options_.languages;l.resetCache_(),l.poster_=a.poster||"",l.controls_=!!a.controls,e.controls=!1,e.removeAttribute("controls"),l.changingSrc_=!1,l.playCallbacks_=[],l.playTerminatedQueue_=[],e.hasAttribute("autoplay")?l.autoplay(!0):l.autoplay(l.options_.autoplay),a.plugins&&Object.keys(a.plugins).forEach(function(e){if("function"!=typeof l[e])throw new Error('plugin "'+e+'" does not exist')}),l.scrubbing_=!1,l.el_=l.createEl(),Ae(Re(l),{eventBusKey:"el_"}),l.fsApi_.requestFullscreen&&(ce(t,l.fsApi_.fullscreenchange,l.boundDocumentFullscreenChange_),l.on(l.fsApi_.fullscreenchange,l.boundDocumentFullscreenChange_)),l.fluid_&&l.on("playerreset",l.updateStyleEl_);var h=je(l.options_);a.plugins&&Object.keys(a.plugins).forEach(function(e){l[e](a.plugins[e])}),l.options_.playerOptions=h,l.middleware_=[],l.initChildren(),l.isAudio("audio"===e.nodeName.toLowerCase()),l.controls()?l.addClass("vjs-controls-enabled"):l.addClass("vjs-controls-disabled"),l.el_.setAttribute("role","region"),l.isAudio()?l.el_.setAttribute("aria-label",l.localize("Audio Player")):l.el_.setAttribute("aria-label",l.localize("Video Player")),l.isAudio()&&l.addClass("vjs-audio"),l.flexNotSupported_()&&l.addClass("vjs-no-flex"),it&&l.addClass("vjs-touch-enabled"),at||l.addClass("vjs-workinghover"),r.players[l.id_]=Re(l);var f=i.split(".")[0];return l.addClass("vjs-v"+f),l.userActive(!0),l.reportUserActivity(),l.one("play",l.listenForUserActivity_),l.on("stageclick",l.handleStageClick_),l.on("keydown",l.handleKeyDown),l.breakpoints(l.options_.breakpoints),l.responsive(l.options_.responsive),l}Be(r,n);var o=r.prototype;return o.dispose=function(){var e=this;this.trigger("dispose"),this.off("dispose"),pe(t,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),pe(t,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),r.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Vi[this.id()]=null,pi.names.forEach(function(t){var i=pi[t],n=e[i.getterName]();n&&n.off&&n.off()}),n.prototype.dispose.call(this)},o.createEl=function(){var i,r=this.tag,a=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player"),s="video-js"===this.tag.tagName.toLowerCase();a?i=this.el_=r.parentNode:s||(i=this.el_=n.prototype.createEl.call(this,"div"));var o=D(r);if(s){for(i=this.el_=r,r=this.tag=t.createElement("video");i.children.length;)r.appendChild(i.firstChild);x(i,"video-js")||M(i,"video-js"),i.appendChild(r),a=this.playerElIngest_=i,Object.keys(i).forEach(function(e){try{r[e]=i[e]}catch(e){}})}if(r.setAttribute("tabindex","-1"),o.tabindex="-1",(Je||Ke&&tt)&&(r.setAttribute("role","application"),o.role="application"),r.removeAttribute("width"),r.removeAttribute("height"),"width"in o&&delete o.width,"height"in o&&delete o.height,Object.getOwnPropertyNames(o).forEach(function(e){s&&"class"===e||i.setAttribute(e,o[e]),s&&r.setAttribute(e,o[e])}),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=i.player=this,this.addClass("vjs-paused"),!0!==e.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=ee("vjs-styles-dimensions");var l=V(".vjs-styles-defaults"),u=V("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var d=r.getElementsByTagName("a"),c=0;c<d.length;c++){var p=d.item(c);M(p,"vjs-hidden"),p.setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&!a&&r.parentNode.insertBefore(i,r),S(r,i),this.children_.unshift(r),this.el_.setAttribute("lang",this.language_),this.el_=i,i},o.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):a.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},o.width=function(e){return this.dimension("width",e)},o.height=function(e){return this.dimension("height",e)},o.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t||"auto"===t)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?a.error('Improper value "'+t+'" supplied for for '+e):(this[i]=n,this.updateStyleEl_())},o.fluid=function(e){if(void 0===e)return!!this.fluid_;var t,i;this.fluid_=!!e,ke(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),ke(t=function(){this.on("playerreset",this.updateStyleEl_)})?i():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(i))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},o.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},o.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},o.updateStyleEl_=function(){if(!0!==e.VIDEOJS_NO_DYNAMIC_STYLE){var t,i,n,r=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),a=r[1]/r[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/a:this.videoWidth()||300,i=void 0!==this.height_?this.height_:t*a,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),te(this.styleEl_,"\n      ."+n+" {\n        width: "+t+"px;\n        height: "+i+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*a+"%;\n      }\n    ")}else{var s="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();l&&(s>=0&&(l.width=s),o>=0&&(l.height=o))}},o.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_();var n=Pe(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(Hi.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var a={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};pi.names.forEach(function(e){var t=pi[e];a[t.getterName]=i[t.privateName]}),p(a,this.options_[n]),p(a,this.options_[r]),p(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);var s=Hi.getTech(e);if(!s)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new s(a),this.tech_.ready(_e(this,this.handleTechReady_),!0),xt(this.textTracksJson_||[],this.tech_),Br.forEach(function(e){i.on(i.tech_,e,i["handleTech"+Pe(e)+"_"])}),Object.keys(Fr).forEach(function(e){i.on(i.tech_,e,function(t){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+Fr[e]+"_"].bind(i),event:t}):i["handleTech"+Fr[e]+"_"](t)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||S(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},o.unloadTech_=function(){var e=this;pi.names.forEach(function(t){var i=pi[t];e[i.privateName]=e[i.getterName]()}),this.textTracksJson_=St(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},o.tech=function(e){return void 0===e&&a.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},o.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},o.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},o.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},o.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},o.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var i,n=function(){var e=t.muted();t.muted(!0);var i=function(){t.muted(e)};t.playTerminatedQueue_.push(i);var n=t.play();if(Tt(n))return n.catch(i)};if("any"===e&&!0!==this.muted()?Tt(i=this.play())&&(i=i.catch(n)):i="muted"===e&&!0!==this.muted()?n():this.play(),Tt(i))return i.then(function(){t.trigger({type:"autoplay-success",autoplay:e})}).catch(function(i){t.trigger({type:"autoplay-failure",autoplay:e})})}},o.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,i="";"string"!=typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(e){return e.src===t});if(i.length)return i[0].type;for(var n=e.$$("source"),r=0;r<n.length;r++){var a=n[r];if(a.type&&a.src&&a.src===t)return a.type}return tn(t)}(this,t)),this.cache_.source=je({},e,{src:t,type:i});for(var n=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),r=[],a=this.$$("source"),s=[],o=0;o<a.length;o++){var l=D(a[o]);r.push(l),l.src&&l.src===t&&s.push(l.src)}s.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},o.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var i=function(e){return t.updateSourceCaches_(e)},n=this.currentSource().src,r=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==n)&&(i=function(){}),i(r),e.src||this.tech_.any(["sourceset","loadstart"],function(e){if("sourceset"!==e.type){var i=t.techGet("currentSrc");t.lastSource_.tech=i,t.updateSourceCaches_(i)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},o.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},o.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},o.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},o.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",function i(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",i))})},o.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},o.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},o.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},o.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},o.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},o.handleTechFirstPlay_=function(){this.options_.starttime&&(a.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},o.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},o.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},o.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},o.handleTechClick_=function(e){H(e)&&this.controls_&&(this.paused()?wt(this.play()):this.pause())},o.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},o.handleTechTap_=function(){this.userActive(!this.userActive())},o.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},o.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},o.handleTechTouchEnd_=function(e){e.preventDefault()},o.handleStageClick_=function(){this.reportUserActivity()},o.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},o.documentFullscreenChange_=function(e){var i=e.target.player;if(!i||i===this){var n=this.el(),r=t[this.fsApi_.fullscreenElement]===n;!r&&n.matches?r=n.matches(":"+this.fsApi_.fullscreen):!r&&n.msMatchesSelector&&(r=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}},o.handleTechFullscreenChange_=function(e,t){t&&(t.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(t.isFullscreen))},o.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},o.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},o.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},o.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},o.handleTechError_=function(){var e=this.tech_.error();this.error(e)},o.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},o.getCache=function(){return this.cache_},o.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},o.techCall_=function(e,t){this.ready(function(){if(e in Ki)return function(e,t,i,n){return t[i](e.reduce(Ji(i),n))}(this.middleware_,this.tech_,e,t);if(e in Zi)return Qi(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw a(e),e}},!0)},o.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Xi)return function(e,t,i){return e.reduceRight(Ji(i),t[i]())}(this.middleware_,this.tech_,e);if(e in Zi)return Qi(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw a("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw a("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw a(t),t}}},o.play=function(){var t=this,i=this.options_.Promise||e.Promise;return i?new i(function(e){t.play_(e)}):this.play_()},o.play_=function(e){var t=this;void 0===e&&(e=wt),this.playCallbacks_.push(e);var i=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(i||!st&&!at||this.load());var n=this.techGet_("play");null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)},o.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},o.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})},o.pause=function(){this.techCall_("pause")},o.paused=function(){return!1!==this.techGet_("paused")},o.played=function(){return this.techGet_("played")||dt(0,0)},o.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},o.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.applyInitTime_),void this.one("canplay",this.applyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},o.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},o.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},o.remainingTime=function(){return this.duration()-this.currentTime()},o.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},o.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=dt(0,0)),e},o.bufferedPercent=function(){return ct(this.buffered(),this.duration())},o.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return i>t&&(i=t),i},o.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},o.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},o.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},o.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},o.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},o.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},o.requestFullscreen=function(t){var i=this.options_.Promise||e.Promise;if(i){var n=this;return new i(function(e,i){function r(){n.off("fullscreenerror",s),n.off("fullscreenchange",a)}function a(){r(),e()}function s(e,t){r(),i(t)}n.one("fullscreenchange",a),n.one("fullscreenerror",s);var o=n.requestFullscreenHelper_(t);if(o)return o.then(r,r),o})}return this.requestFullscreenHelper_()},o.requestFullscreenHelper_=function(e){var t,i=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](t);return n&&n.then(function(){return i.isFullscreen(!0)},function(){return i.isFullscreen(!1)}),n}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},o.exitFullscreen=function(){var t=this.options_.Promise||e.Promise;if(t){var i=this;return new t(function(e,t){function n(){i.off("fullscreenerror",a),i.off("fullscreenchange",r)}function r(){n(),e()}function a(e,i){n(),t(i)}i.one("fullscreenchange",r),i.one("fullscreenerror",a);var s=i.exitFullscreenHelper_();if(s)return s.then(n,n),s})}return this.exitFullscreenHelper_()},o.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var i=t[this.fsApi_.exitFullscreen]();return i&&i.then(function(){return e.isFullscreen(!1)}),i}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},o.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=t.documentElement.style.overflow,ce(t,"keydown",this.boundFullWindowOnEscKey_),t.documentElement.style.overflow="hidden",M(t.body,"vjs-full-window"),this.trigger("enterFullWindow")},o.fullWindowOnEscKey=function(e){Mt.isEventKey(e,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},o.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,pe(t,"keydown",this.boundFullWindowOnEscKey_),t.documentElement.style.overflow=this.docOrigOverflow,C(t.body,"vjs-full-window"),this.trigger("exitFullWindow")},o.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},o.requestPictureInPicture=function(){if("pictureInPictureEnabled"in t)return this.techGet_("requestPictureInPicture")},o.exitPictureInPicture=function(){if("pictureInPictureEnabled"in t)return t.exitPictureInPicture()},o.handleKeyDown=function(e){var t=this.options_.userActions;if(t&&t.hotkeys){(function(e){var t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;if("input"===t)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type);return-1!==["textarea"].indexOf(t)})(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}},o.handleHotkeys=function(e){var i=this.options_.userActions?this.options_.userActions.hotkeys:{},n=i.fullscreenKey,r=void 0===n?function(e){return Mt.isEventKey(e,"f")}:n,a=i.muteKey,s=void 0===a?function(e){return Mt.isEventKey(e,"m")}:a,o=i.playPauseKey,l=void 0===o?function(e){return Mt.isEventKey(e,"k")||Mt.isEventKey(e,"Space")}:o;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();var u=Ue.getComponent("FullscreenToggle");!1!==t[this.fsApi_.fullscreenEnabled]&&u.prototype.handleClick.call(this,e)}else if(s.call(this,e)){e.preventDefault(),e.stopPropagation(),Ue.getComponent("MuteToggle").prototype.handleClick.call(this,e)}else if(l.call(this,e)){e.preventDefault(),e.stopPropagation(),Ue.getComponent("PlayToggle").prototype.handleClick.call(this,e)}},o.canPlayType=function(e){for(var t,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],s=Hi.getTech(r);if(s||(s=Ue.getComponent(r)),s){if(s.isSupported()&&(t=s.canPlayType(e)))return t}else a.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},o.selectSource=function(e){var t,i=this,n=this.options_.techOrder.map(function(e){return[e,Hi.getTech(e)]}).filter(function(e){var t=e[0],i=e[1];return i?i.isSupported():(a.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(e,t,i){var n;return e.some(function(e){return t.some(function(t){if(n=i(e,t))return!0})}),n},s=function(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}};return(this.options_.sourceOrder?r(e,n,(t=s,function(e,i){return t(i,e)})):r(n,e,s))||!1},o.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";var i=function e(t){if(Array.isArray(t)){var i=[];t.forEach(function(t){t=e(t),Array.isArray(t)?i=i.concat(t):h(t)&&i.push(t)}),t=i}else t="string"==typeof t&&t.trim()?[nn({src:t})]:h(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[nn(t)]:[];return t}(e);i.length?(this.changingSrc_=!0,this.cache_.sources=i,this.updateSourceCaches_(i[0]),Gi(this,i[0],function(e,n){var r,a;if(t.middleware_=n,t.cache_.sources=i,t.updateSourceCaches_(e),t.src_(e))return i.length>1?t.src(i.slice(1)):(t.changingSrc_=!1,t.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void t.triggerReady());r=n,a=t.tech_,r.forEach(function(e){return e.setTech&&e.setTech(a)})})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},o.src_=function(e){var t,i,n=this,r=this.selectSource([e]);return!r||(t=r.tech,i=this.techName_,Pe(t)!==Pe(i)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){n.changingSrc_=!1}),!1):(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1))},o.load=function(){this.techCall_("load")},o.reset=function(){var t=this,i=this.options_.Promise||e.Promise;this.paused()||!i?this.doReset_():wt(this.play().then(function(){return t.doReset_()}))},o.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),ke(this)&&this.trigger("playerreset")},o.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},o.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,i=e.remainingTimeDisplay;t&&t.updateContent(),i&&i.updateContent()},o.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},o.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},o.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},o.currentSource=function(){return this.cache_.source||{}},o.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},o.currentType=function(){return this.currentSource()&&this.currentSource().type||""},o.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},o.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},o.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},o.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},o.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},o.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},o.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},o.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},o.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&4===e.code){var t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new yt(e),this.addClass("vjs-error"),a.error("(CODE:"+this.error_.code+" "+yt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},o.reportUserActivity=function(e){this.userActivity_=!0},o.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.trigger("userinactive")}},o.listenForUserActivity_=function(){var e,t,i,n=_e(this,this.reportUserActivity),r=function(t){n(),this.clearInterval(e)};this.on("mousedown",function(){n(),this.clearInterval(e),e=this.setInterval(n,250)}),this.on("mousemove",function(e){e.screenX===t&&e.screenY===i||(t=e.screenX,i=e.screenY,n())}),this.on("mouseup",r),this.on("mouseleave",r);var a,s=this.getChild("controlBar");!s||at||Ve||(s.on("mouseenter",function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),s.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",n),this.on("keyup",n),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},o.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},o.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},o.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},o.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},o.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},o.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},o.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},o.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},o.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},o.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},o.languages=function(){return je(r.prototype.options_.languages,this.languages_)},o.toJSON=function(){var e=je(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var n=t[i];(n=je(n)).player=void 0,e.tracks[i]=n}return e},o.createModal=function(e,t){var i=this;(t=t||{}).content=e||"";var n=new Et(this,t);return this.addChild(n),n.on("dispose",function(){i.removeChild(n)}),n.open(),n},o.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),i=0;i<$r.length;i++){var n=$r[i];if(t<=this.breakpoints_[n]){if(e===n)return;e&&this.removeClass(qr[e]),this.addClass(qr[n]),this.breakpoint_=n;break}}},o.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},o.breakpoints=function(e){return void 0===e?p(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=p({},Hr,e),this.updateCurrentBreakpoint_(),p(this.breakpoints_))},o.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},o.currentBreakpoint=function(){return this.breakpoint_},o.currentBreakpointClass=function(){return qr[this.breakpoint_]||""},o.loadMedia=function(e,t){var i=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=je(e);var n=this.cache_.media,r=n.artwork,a=n.poster,s=n.src,o=n.textTracks;!r&&a&&(this.cache_.media.artwork=[{src:a,type:tn(a)}]),s&&this.src(s),a&&this.poster(a),Array.isArray(o)&&o.forEach(function(e){return i.addRemoteTextTrack(e,!1)}),this.ready(t)}},o.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:tn(t.poster)}]),t}return je(this.cache_.media)},r.getTagSettings=function(e){var t={sources:[],tracks:[]},i=D(e),n=i["data-setup"];if(x(e,"vjs-fill")&&(i.fill=!0),x(e,"vjs-fluid")&&(i.fluid=!0),null!==n){var r=bt(n||"{}"),s=r[0],o=r[1];s&&a.error(s),p(i,o)}if(p(t,i),e.hasChildNodes())for(var l=e.childNodes,u=0,d=l.length;u<d;u++){var c=l[u],h=c.nodeName.toLowerCase();"source"===h?t.sources.push(D(c)):"track"===h&&t.tracks.push(D(c))}return t},o.flexNotSupported_=function(){var e=t.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},r}(Ue);pi.names.forEach(function(e){var t=pi[e];Wr.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Wr.prototype.crossorigin=Wr.prototype.crossOrigin,Wr.players={};var Vr=e.navigator;Wr.prototype.options_={techOrder:Hi.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Vr&&(Vr.languages&&Vr.languages[0]||Vr.userLanguage||Vr.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Wr.prototype[e]=function(){return this.techGet_(e)}}),Br.forEach(function(e){Wr.prototype["handleTech"+Pe(e)+"_"]=function(){return this.trigger(e)}}),Ue.registerComponent("Player",Wr);var Yr=o(function(e){function t(i,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(i,n)}e.exports=t});var Gr=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}},Qr=o(function(e){function t(i,n,r){return Gr()?e.exports=t=Reflect.construct:e.exports=t=function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&Yr(r,i.prototype),r},t.apply(null,arguments)}e.exports=t}),Xr={},Kr=function(e){return Xr.hasOwnProperty(e)},Zr=function(e){return Kr(e)?Xr[e]:void 0},Jr=function(e,t){e.activePlugins_=e.activePlugins_||{},e.activePlugins_[t]=!0},ea=function(e,t,i){var n=(i?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)},ta=function(e,t){return t.prototype.name=e,function(){ea(this,{name:e,plugin:t,instance:null},!0);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var a=Qr(t,[this].concat(n));return this[e]=function(){return a},ea(this,a.getEventHash()),a}},ia=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,Ae(this),delete this.trigger,Ne(this,this.constructor.defaultState),Jr(t,this.name),this.dispose=_e(this,this.dispose),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),he(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t.activePlugins_[e]=!1,this.player=this.state=null,t[e]=ta(e,Xr[e])},e.isBasic=function(t){var i="string"==typeof t?Zr(t):t;return"function"==typeof i&&!e.prototype.isPrototypeOf(i.prototype)},e.registerPlugin=function(t,i){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(Kr(t))a.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Wr.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof i)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof i+".");return Xr[t]=i,"plugin"!==t&&(e.isBasic(i)?Wr.prototype[t]=function(e,t){var i=function(){ea(this,{name:e,plugin:t,instance:null},!0);var i=t.apply(this,arguments);return Jr(this,e),ea(this,{name:e,plugin:t,instance:i}),i};return Object.keys(t).forEach(function(e){i[e]=t[e]}),i}(t,i):Wr.prototype[t]=ta(t,i)),i},e.deregisterPlugin=function(e){if("plugin"===e)throw new Error("Cannot de-register base plugin.");Kr(e)&&(delete Xr[e],delete Wr.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(Xr)),e.forEach(function(e){var i=Zr(e);i&&((t=t||{})[e]=i)}),t},e.getPluginVersion=function(e){var t=Zr(e);return t&&t.VERSION||""},e}();ia.getPlugin=Zr,ia.BASE_PLUGIN_NAME="plugin",ia.registerPlugin("plugin",ia),Wr.prototype.usingPlugin=function(e){return!!this.activePlugins_&&!0===this.activePlugins_[e]},Wr.prototype.hasPlugin=function(e){return!!Kr(e)};var na=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yr(e,t)},ra=function(e){return 0===e.indexOf("#")?e.slice(1):e};function aa(e,t,i){var n=aa.getPlayer(e);if(n)return t&&a.warn('Player "'+e+'" is already initialised. Options will not be applied.'),i&&n.ready(i),n;var r="string"==typeof e?V("#"+ra(e)):e;if(!_(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||a.warn("The element supplied is not included in the DOM"),t=t||{},aa.hooks("beforesetup").forEach(function(e){var i=e(r,je(t));h(i)&&!Array.isArray(i)?t=je(t,i):a.error("please return an object in beforesetup hooks")});var s=Ue.getComponent("Player");return n=new s(r,t,i),aa.hooks("setup").forEach(function(e){return e(n)}),n}if(aa.hooks_={},aa.hooks=function(e,t){return aa.hooks_[e]=aa.hooks_[e]||[],t&&(aa.hooks_[e]=aa.hooks_[e].concat(t)),aa.hooks_[e]},aa.hook=function(e,t){aa.hooks(e,t)},aa.hookOnce=function(e,t){aa.hooks(e,[].concat(t).map(function(t){return function i(){return aa.removeHook(e,i),t.apply(void 0,arguments)}}))},aa.removeHook=function(e,t){var i=aa.hooks(e).indexOf(t);return!(i<=-1)&&(aa.hooks_[e]=aa.hooks_[e].slice(),aa.hooks_[e].splice(i,1),!0)},!0!==e.VIDEOJS_NO_DYNAMIC_STYLE&&y()){var sa=V(".vjs-styles-defaults");if(!sa){sa=ee("vjs-styles-defaults");var oa=V("head");oa&&oa.insertBefore(sa,oa.firstChild),te(sa,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}K(1,aa),aa.VERSION=i,aa.options=Wr.prototype.options_,aa.getPlayers=function(){return Wr.players},aa.getPlayer=function(e){var t,i=Wr.players;if("string"==typeof e){var n=ra(e),r=i[n];if(r)return r;t=V("#"+n)}else t=e;if(_(t)){var a=t,s=a.player,o=a.playerId;if(s||i[o])return s||i[o]}},aa.getAllPlayers=function(){return Object.keys(Wr.players).map(function(e){return Wr.players[e]}).filter(Boolean)},aa.players=Wr.players,aa.getComponent=Ue.getComponent,aa.registerComponent=function(e,t){Hi.isTech(t)&&a.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Ue.registerComponent.call(Ue,e,t)},aa.getTech=Hi.getTech,aa.registerTech=Hi.registerTech,aa.use=function(e,t){Wi[e]=Wi[e]||[],Wi[e].push(t)},Object.defineProperty(aa,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(aa.middleware,"TERMINATOR",{value:Yi,writeable:!1,enumerable:!0}),aa.browser=ot,aa.TOUCH_ENABLED=it,aa.extend=function(e,t){void 0===t&&(t={});var i=function(){e.apply(this,arguments)},n={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),n=t):"function"==typeof t&&(i=t),na(i,e),e&&(i.super_=e),n)n.hasOwnProperty(r)&&(i.prototype[r]=n[r]);return i},aa.mergeOptions=je,aa.bind=_e,aa.registerPlugin=ia.registerPlugin,aa.deregisterPlugin=ia.deregisterPlugin,aa.plugin=function(e,t){return a.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ia.registerPlugin(e,t)},aa.getPlugins=ia.getPlugins,aa.getPlugin=ia.getPlugin,aa.getPluginVersion=ia.getPluginVersion,aa.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),aa.options.languages=je(aa.options.languages,((i={})[e]=t,i)),aa.options.languages[e]},aa.log=a,aa.createLogger=s,aa.createTimeRange=aa.createTimeRanges=dt,aa.formatTime=yn,aa.setFormatTime=function(e){vn=e},aa.resetFormatTime=function(){vn=gn},aa.parseUrl=qt,aa.isCrossOrigin=Vt,aa.EventTarget=we,aa.on=ce,aa.one=fe,aa.off=pe,aa.trigger=he,aa.xhr=Kt,aa.TextTrack=ri,aa.AudioTrack=ai,aa.VideoTrack=si,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){aa[e]=function(){return a.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),G[e].apply(null,arguments)}}),aa.computedStyle=m,aa.dom=G,aa.url=Yt,aa.defineLazyProperty=Rr;var la=o(function(e,t){var i,n,r,a,s;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=n.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var d=o.path,c=d.substring(0,d.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(c)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s});function ua(){return(ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function da(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ca=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),i>-1},t.trigger=function(e){var t,i,n,r=this.listeners[e];if(r)if(2===arguments.length)for(i=r.length,t=0;t<i;++t)r[t].call(this,arguments[1]);else for(n=Array.prototype.slice.call(arguments,1),i=r.length,t=0;t<i;++t)r[t].apply(this,n)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),pa=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return da(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(ca),ha=function(e){for(var t,i=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=i.length;r--;)""!==i[r]&&((t=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n},fa=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}da(t,e);var i=t.prototype;return i.push=function(e){var t,i,n=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce(function(t,i){var n=i(e);return n===e?t:t.concat([n])},[e]).forEach(function(e){for(var r=0;r<n.customParsers.length;r++)if(n.customParsers[r].call(n,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),void n.trigger("data",i);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"totalduration"},t[1]&&(i.duration=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),void n.trigger("data",i);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"byterange"},t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),void n.trigger("data",i);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"map"},t[1]){var a=ha(t[1]);if(a.URI&&(i.uri=a.URI),a.BYTERANGE){var s=a.BYTERANGE.split("@"),o=s[0],l=s[1];i.byterange={},o&&(i.byterange.length=parseInt(o,10)),l&&(i.byterange.offset=parseInt(l,10))}}n.trigger("data",i)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=ha(t[1]),i.attributes.RESOLUTION){var u=i.attributes.RESOLUTION.split("x"),d={};u[0]&&(d.width=parseInt(u[0],10)),u[1]&&(d.height=parseInt(u[1],10)),i.attributes.RESOLUTION=d}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}n.trigger("data",i)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return i={type:"tag",tagType:"media"},t[1]&&(i.attributes=ha(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-ENDLIST/.exec(e))n.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return i={type:"tag",tagType:"key"},t[1]&&(i.attributes=ha(t[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void n.trigger("data",i);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return i={type:"tag",tagType:"start"},t[1]&&(i.attributes=ha(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void n.trigger("data",i);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);n.trigger("data",{type:"tag",data:e.slice(4)})}}}else n.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:e}))},i.addParser=function(e){var t=this,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){if(i.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:n,segment:a}),!0})},i.addTagMapper=function(e){var t=e.expression,i=e.map;this.tagMappers.push(function(e){return t.test(e)?i(e):e})},t}(ca);function ma(t){for(var i=e.atob(t||""),n=new Uint8Array(i.length),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n}var ga=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new pa,t.parseStream=new fa,t.lineStream.pipe(t.parseStream);var i,n,r=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),a=[],s={},o={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l=0;return t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},t.parseStream.on("data",function(e){var t,u;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(s.byterange=t,t.length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&(s.byterange=t,t.offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:ma(e.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(n.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,l=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){i={},e.uri&&(i.uri=e.uri),e.byterange&&(i.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||o,e.attributes?(s.attributes||(s.attributes={}),ua(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||o,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var i=this.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes["GROUP-ID"]]=i[e.attributes["GROUP-ID"]]||{},t=i[e.attributes["GROUP-ID"]],(u={default:/yes/i.test(e.attributes.DEFAULT)}).default?u.autoselect=!0:u.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(u.language=e.attributes.LANGUAGE),e.attributes.URI&&(u.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(u.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(u.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(u.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=u}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){l+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data}}[e.tagType]||function(){}).call(r)},uri:function(){s.uri=e.uri,a.push(s),!this.manifest.targetDuration||"duration"in s||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),n&&(s.key=n),s.timeline=l,i&&(s.map=i),s={}},comment:function(){},custom:function(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)}),t}da(t,e);var i=t.prototype;return i.push=function(e){this.lineStream.push(e)},i.end=function(){this.lineStream.push("\n")},i.addParser=function(e){this.parseStream.addParser(e)},i.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(ca);function va(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var ya=va(la),_a=va(e),ba=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=ya.buildAbsoluteURL(_a.location&&_a.location.href||"",e)),ya.buildAbsoluteURL(e,t))};var Ta,wa=(Ta=e)&&"object"==typeof Ta&&"default"in Ta?Ta.default:Ta,ka=function(e){return wa.atob?wa.atob(e):Buffer.from(e,"base64").toString("binary")};var Sa=function(e){for(var t=ka(e),i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i},xa=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ma=new RegExp("[\\-\\.0-9"+xa.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Ca=new RegExp("^"+xa.source+Ma.source+"*(?::"+xa.source+Ma.source+"*)?$"),Ea=0,Ia=1,Da=2,Aa=3,Oa=4,Na=5,La=6,Pa=7;function ja(){}function Ua(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function Ra(e,t,i,n,r,a){for(var s,o=++t,l=Ea;;){var u=e.charAt(o);switch(u){case"=":if(l===Ia)s=e.slice(t,o),l=Aa;else{if(l!==Da)throw new Error("attribute equal must after attrName");l=Aa}break;case"'":case'"':if(l===Aa||l===Ia){if(l===Ia&&(a.warning('attribute value must after "="'),s=e.slice(t,o)),t=o+1,!((o=e.indexOf(u,t))>0))throw new Error("attribute value no end '"+u+"' match");d=e.slice(t,o).replace(/&#?\w+;/g,r),i.add(s,d,t-1),l=Na}else{if(l!=Oa)throw new Error('attribute value must after "="');d=e.slice(t,o).replace(/&#?\w+;/g,r),i.add(s,d,t),a.warning('attribute "'+s+'" missed start quot('+u+")!!"),t=o+1,l=Na}break;case"/":switch(l){case Ea:i.setTagName(e.slice(t,o));case Na:case La:case Pa:l=Pa,i.closed=!0;case Oa:case Ia:case Da:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),l==Ea&&i.setTagName(e.slice(t,o)),o;case">":switch(l){case Ea:i.setTagName(e.slice(t,o));case Na:case La:case Pa:break;case Oa:case Ia:"/"===(d=e.slice(t,o)).slice(-1)&&(i.closed=!0,d=d.slice(0,-1));case Da:l===Da&&(d=s),l==Oa?(a.warning('attribute "'+d+'" missed quot(")!!'),i.add(s,d.replace(/&#?\w+;/g,r),t)):("http://www.w3.org/1999/xhtml"===n[""]&&d.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),i.add(d,d,t));break;case Aa:throw new Error("attribute value missed!!")}return o;case"Â":u=" ";default:if(u<=" ")switch(l){case Ea:i.setTagName(e.slice(t,o)),l=La;break;case Ia:s=e.slice(t,o),l=Da;break;case Oa:var d=e.slice(t,o).replace(/&#?\w+;/g,r);a.warning('attribute "'+d+'" missed quot(")!!'),i.add(s,d,t);case Na:l=La}else switch(l){case Da:i.tagName;"http://www.w3.org/1999/xhtml"===n[""]&&s.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),i.add(s,s,t),t=o,l=Ia;break;case Na:a.warning('attribute space is required"'+s+'"!!');case La:l=Ia,t=o;break;case Aa:l=Oa,t=o;break;case Pa:throw new Error("elements closed character '/' and '>' must be connected to")}}o++}}function za(e,t,i){for(var n=e.tagName,r=null,a=e.length;a--;){var s=e[a],o=s.qName,l=s.value;if((p=o.indexOf(":"))>0)var u=s.prefix=o.slice(0,p),d=o.slice(p+1),c="xmlns"===u&&d;else d=o,u=null,c="xmlns"===o&&"";s.localName=d,!1!==c&&(null==r&&(r={},$a(i,i={})),i[c]=r[c]=l,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(c,l))}for(a=e.length;a--;){(u=(s=e[a]).prefix)&&("xml"===u&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(s.uri=i[u||""]))}var p;(p=n.indexOf(":"))>0?(u=e.prefix=n.slice(0,p),d=e.localName=n.slice(p+1)):(u=null,d=e.localName=n);var h=e.uri=i[u||""];if(t.startElement(h,d,n,e),!e.closed)return e.currentNSMap=i,e.localNSMap=r,!0;if(t.endElement(h,d,n),r)for(u in r)t.endPrefixMapping(u)}function Ba(e,t,i,n,r){if(/^(?:script|textarea)$/i.test(i)){var a=e.indexOf("</"+i+">",t),s=e.substring(t+1,a);if(/[&<]/.test(s))return/^script$/i.test(i)?(r.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,n),r.characters(s,0,s.length),a)}return t+1}function Fa(e,t,i,n){var r=n[i];return null==r&&((r=e.lastIndexOf("</"+i+">"))<t&&(r=e.lastIndexOf("</"+i)),n[i]=r),r<t}function $a(e,t){for(var i in e)t[i]=e[i]}function qa(e,t,i,n){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(i.comment(e,t+4,r-t-4),r+3):(n.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return i.startCDATA(),i.characters(e,t+9,r-t-9),i.endCDATA(),r+3}var a=function(e,t){var i,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);for(;i=r.exec(e);)if(n.push(i),i[1])return n}(e,t),s=a.length;if(s>1&&/!doctype/i.test(a[0][0])){var o=a[1][0],l=s>3&&/^public$/i.test(a[2][0])&&a[3][0],u=s>4&&a[4][0],d=a[s-1];return i.startDTD(o,l&&l.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),i.endDTD(),d.index+d[0].length}}return-1}function Ha(e,t,i){var n=e.indexOf("?>",t);if(n){var r=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return i.processingInstruction(r[1],r[2]),n+2}return-1}return-1}function Wa(e){}function Va(e,t){return e.__proto__=t,e}ja.prototype={parse:function(e,t,i){var n=this.domBuilder;n.startDocument(),$a(t,t={}),function(e,t,i,n,r){function a(e){var t=e.slice(1,-1);return t in i?i[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),i=56320+(1023&e);return String.fromCharCode(t,i)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(r.error("entity not found:"+e),e)}function s(t){if(t>f){var i=e.substring(f,t).replace(/&#?\w+;/g,a);c&&o(f),n.characters(i,0,t-f),f=t}}function o(t,i){for(;t>=u&&(i=d.exec(e));)l=i.index,u=l+i[0].length,c.lineNumber++;c.columnNumber=t-l+1}var l=0,u=0,d=/.*(?:\r\n?|\n)|.*$/g,c=n.locator,p=[{currentNSMap:t}],h={},f=0;for(;;){try{var m=e.indexOf("<",f);if(m<0){if(!e.substr(f).match(/^\s*$/)){var g=n.doc,v=g.createTextNode(e.substr(f));g.appendChild(v),n.currentElement=v}return}switch(m>f&&s(m),e.charAt(m+1)){case"/":var y=e.indexOf(">",m+3),_=e.substring(m+2,y),b=p.pop();y<0?(_=e.substring(m+2).replace(/[\s<].*/,""),r.error("end tag name: "+_+" is not complete:"+b.tagName),y=m+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),r.error("end tag name: "+_+" maybe not complete"),y=m+1+_.length);var T=b.localNSMap,w=b.tagName==_,k=w||b.tagName&&b.tagName.toLowerCase()==_.toLowerCase();if(k){if(n.endElement(b.uri,b.localName,_),T)for(var S in T)n.endPrefixMapping(S);w||r.fatalError("end tag name: "+_+" is not match the current start tagName:"+b.tagName)}else p.push(b);y++;break;case"?":c&&o(m),y=Ha(e,m,n);break;case"!":c&&o(m),y=qa(e,m,n,r);break;default:c&&o(m);var x=new Wa,M=p[p.length-1].currentNSMap,y=Ra(e,m,x,M,a,r),C=x.length;if(!x.closed&&Fa(e,y,x.tagName,h)&&(x.closed=!0,i.nbsp||r.warning("unclosed xml attribute")),c&&C){for(var E=Ua(c,{}),I=0;I<C;I++){var D=x[I];o(D.offset),D.locator=Ua(c,{})}n.locator=E,za(x,n,M)&&p.push(x),n.locator=c}else za(x,n,M)&&p.push(x);"http://www.w3.org/1999/xhtml"!==x.uri||x.closed?y++:y=Ba(e,y,x.tagName,a,n)}}catch(e){r.error("element parse error: "+e),y=-1}y>f?f=y:s(Math.max(m,f)+1)}}(e,t,i,n,this.errorHandler),n.endDocument()}},Wa.prototype={setTagName:function(e){if(!Ca.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,i){if(!Ca.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:i}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},Va({},Va.prototype)instanceof Va||(Va=function(e,t){function i(){}for(t in i.prototype=t,i=new i,e)i[t]=e[t];return i});var Ya={XMLReader:ja};function Ga(e,t){for(var i in e)t[i]=e[i]}function Qa(e,t){var i=e.prototype;if(Object.create){var n=Object.create(t.prototype);i.__proto__=n}if(!(i instanceof t)){var r=function(){};r.prototype=t.prototype,Ga(i,r=new r),e.prototype=i=r}i.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),i.constructor=e)}var Xa="http://www.w3.org/1999/xhtml",Ka={},Za=Ka.ELEMENT_NODE=1,Ja=Ka.ATTRIBUTE_NODE=2,es=Ka.TEXT_NODE=3,ts=Ka.CDATA_SECTION_NODE=4,is=Ka.ENTITY_REFERENCE_NODE=5,ns=Ka.ENTITY_NODE=6,rs=Ka.PROCESSING_INSTRUCTION_NODE=7,as=Ka.COMMENT_NODE=8,ss=Ka.DOCUMENT_NODE=9,os=Ka.DOCUMENT_TYPE_NODE=10,ls=Ka.DOCUMENT_FRAGMENT_NODE=11,us=Ka.NOTATION_NODE=12,ds={},cs={},ps=(ds.INDEX_SIZE_ERR=(cs[1]="Index size error",1),ds.DOMSTRING_SIZE_ERR=(cs[2]="DOMString size error",2),ds.HIERARCHY_REQUEST_ERR=(cs[3]="Hierarchy request error",3)),hs=(ds.WRONG_DOCUMENT_ERR=(cs[4]="Wrong document",4),ds.INVALID_CHARACTER_ERR=(cs[5]="Invalid character",5),ds.NO_DATA_ALLOWED_ERR=(cs[6]="No data allowed",6),ds.NO_MODIFICATION_ALLOWED_ERR=(cs[7]="No modification allowed",7),ds.NOT_FOUND_ERR=(cs[8]="Not found",8)),fs=(ds.NOT_SUPPORTED_ERR=(cs[9]="Not supported",9),ds.INUSE_ATTRIBUTE_ERR=(cs[10]="Attribute in use",10));ds.INVALID_STATE_ERR=(cs[11]="Invalid state",11),ds.SYNTAX_ERR=(cs[12]="Syntax error",12),ds.INVALID_MODIFICATION_ERR=(cs[13]="Invalid modification",13),ds.NAMESPACE_ERR=(cs[14]="Invalid namespace",14),ds.INVALID_ACCESS_ERR=(cs[15]="Invalid access",15);function ms(e,t){if(t instanceof Error)var i=t;else i=this,Error.call(this,cs[e]),this.message=cs[e],Error.captureStackTrace&&Error.captureStackTrace(this,ms);return i.code=e,t&&(this.message=this.message+": "+t),i}function gs(){}function vs(e,t){this._node=e,this._refresh=t,ys(this)}function ys(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var i=e._refresh(e._node);Gs(e,"length",i.length),Ga(i,e),e._inc=t}}function _s(){}function bs(e,t){for(var i=e.length;i--;)if(e[i]===t)return i}function Ts(e,t,i,n){if(n?t[bs(t,n)]=i:t[t.length++]=i,e){i.ownerElement=e;var r=e.ownerDocument;r&&(n&&Es(r,e,n),function(e,t,i){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&(t._nsMap[i.prefix?i.localName:""]=i.value)}(r,e,i))}}function ws(e,t,i){var n=bs(t,i);if(!(n>=0))throw ms(hs,new Error(e.tagName+"@"+i));for(var r=t.length-1;n<r;)t[n]=t[++n];if(t.length=r,e){var a=e.ownerDocument;a&&(Es(a,e,i),i.ownerElement=null)}}function ks(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Ss(){}function xs(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function Ms(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(Ms(e,t))return!0}while(e=e.nextSibling)}function Cs(){}function Es(e,t,i,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&delete t._nsMap[i.prefix?i.localName:""]}function Is(e,t,i){if(e&&e._inc){e._inc++;var n=t.childNodes;if(i)n[n.length++]=i;else{for(var r=t.firstChild,a=0;r;)n[a++]=r,r=r.nextSibling;n.length=a}}}function Ds(e,t){var i=t.previousSibling,n=t.nextSibling;return i?i.nextSibling=n:e.firstChild=n,n?n.previousSibling=i:e.lastChild=i,Is(e.ownerDocument,e),t}function As(e,t,i){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===ls){var r=t.firstChild;if(null==r)return t;var a=t.lastChild}else r=a=t;var s=i?i.previousSibling:e.lastChild;r.previousSibling=s,a.nextSibling=i,s?s.nextSibling=r:e.firstChild=r,null==i?e.lastChild=a:i.previousSibling=a;do{r.parentNode=e}while(r!==a&&(r=r.nextSibling));return Is(e.ownerDocument||e,e),t.nodeType==ls&&(t.firstChild=t.lastChild=null),t}function Os(){this._nsMap={}}function Ns(){}function Ls(){}function Ps(){}function js(){}function Us(){}function Rs(){}function zs(){}function Bs(){}function Fs(){}function $s(){}function qs(){}function Hs(){}function Ws(e,t){var i=[],n=9==this.nodeType?this.documentElement:this,r=n.prefix,a=n.namespaceURI;if(a&&null==r&&null==(r=n.lookupPrefix(a)))var s=[{namespace:a,prefix:null}];return Ys(this,i,e,t,s),i.join("")}function Vs(e,t,i){var n=e.prefix||"",r=e.namespaceURI;if(!n&&!r)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===r||"http://www.w3.org/2000/xmlns/"==r)return!1;for(var a=i.length;a--;){var s=i[a];if(s.prefix==n)return s.namespace!=r}return!0}function Ys(e,t,i,n,r){if(n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case Za:r||(r=[]);r.length;var a=e.attributes,s=a.length,o=e.firstChild,l=e.tagName;i=Xa===e.namespaceURI||i,t.push("<",l);for(var u=0;u<s;u++){"xmlns"==(d=a.item(u)).prefix?r.push({prefix:d.localName,namespace:d.value}):"xmlns"==d.nodeName&&r.push({prefix:"",namespace:d.value})}for(u=0;u<s;u++){var d;if(Vs(d=a.item(u),0,r)){var c=d.prefix||"",p=d.namespaceURI,h=c?" xmlns:"+c:" xmlns";t.push(h,'="',p,'"'),r.push({prefix:c,namespace:p})}Ys(d,t,i,n,r)}if(Vs(e,0,r)){c=e.prefix||"",p=e.namespaceURI,h=c?" xmlns:"+c:" xmlns";t.push(h,'="',p,'"'),r.push({prefix:c,namespace:p})}if(o||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),i&&/^script$/i.test(l))for(;o;)o.data?t.push(o.data):Ys(o,t,i,n,r),o=o.nextSibling;else for(;o;)Ys(o,t,i,n,r),o=o.nextSibling;t.push("</",l,">")}else t.push("/>");return;case ss:case ls:for(o=e.firstChild;o;)Ys(o,t,i,n,r),o=o.nextSibling;return;case Ja:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,xs),'"');case es:return t.push(e.data.replace(/[<&]/g,xs));case ts:return t.push("<![CDATA[",e.data,"]]>");case as:return t.push("\x3c!--",e.data,"--\x3e");case os:var f=e.publicId,m=e.systemId;if(t.push("<!DOCTYPE ",e.name),f)t.push(' PUBLIC "',f),m&&"."!=m&&t.push('" "',m),t.push('">');else if(m&&"."!=m)t.push(' SYSTEM "',m,'">');else{var g=e.internalSubset;g&&t.push(" [",g,"]"),t.push(">")}return;case rs:return t.push("<?",e.target," ",e.data,"?>");case is:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function Gs(e,t,i){e[t]=i}ms.prototype=Error.prototype,Ga(ds,ms),gs.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var i=[],n=0;n<this.length;n++)Ys(this[n],i,e,t);return i.join("")}},vs.prototype.item=function(e){return ys(this),this[e]},Qa(vs,gs),_s.prototype={length:0,item:gs.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var i=this[t];if(i.nodeName==e)return i}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new ms(fs);var i=this.getNamedItem(e.nodeName);return Ts(this._ownerElement,this,e,i),i},setNamedItemNS:function(e){var t,i=e.ownerElement;if(i&&i!=this._ownerElement)throw new ms(fs);return t=this.getNamedItemNS(e.namespaceURI,e.localName),Ts(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return ws(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var i=this.getNamedItemNS(e,t);return ws(this._ownerElement,this,i),i},getNamedItemNS:function(e,t){for(var i=this.length;i--;){var n=this[i];if(n.localName==t&&n.namespaceURI==e)return n}return null}},ks.prototype={hasFeature:function(e,t){var i=this._features[e.toLowerCase()];return!(!i||t&&!(t in i))},createDocument:function(e,t,i){var n=new Cs;if(n.implementation=this,n.childNodes=new gs,n.doctype=i,i&&n.appendChild(i),t){var r=n.createElementNS(e,t);n.appendChild(r)}return n},createDocumentType:function(e,t,i){var n=new Rs;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=i,n}},Ss.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return As(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return Ds(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,i,n){var r=new i.constructor;for(var a in i){var s=i[a];"object"!=typeof s&&s!=r[a]&&(r[a]=s)}i.childNodes&&(r.childNodes=new gs);r.ownerDocument=t;switch(r.nodeType){case Za:var o=i.attributes,l=r.attributes=new _s,u=o.length;l._ownerElement=r;for(var d=0;d<u;d++)r.setAttributeNode(e(t,o.item(d),!0));break;case Ja:n=!0}if(n)for(var c=i.firstChild;c;)r.appendChild(e(t,c,n)),c=c.nextSibling;return r}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==es&&e.nodeType==es?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var i=t._nsMap;if(i)for(var n in i)if(i[n]==e)return n;t=t.nodeType==Ja?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var i=t._nsMap;if(i&&e in i)return i[e];t=t.nodeType==Ja?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},Ga(Ka,Ss),Ga(Ka,Ss.prototype),Cs.prototype={nodeName:"#document",nodeType:ss,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==ls){for(var i=e.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,t),i=n}return e}return null==this.documentElement&&e.nodeType==Za&&(this.documentElement=e),As(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),Ds(this,e)},importNode:function(e,t){return function e(t,i,n){var r;switch(i.nodeType){case Za:(r=i.cloneNode(!1)).ownerDocument=t;case ls:break;case Ja:n=!0}r||(r=i.cloneNode(!1));r.ownerDocument=t;r.parentNode=null;if(n)for(var a=i.firstChild;a;)r.appendChild(e(t,a,n)),a=a.nextSibling;return r}(this,e,t)},getElementById:function(e){var t=null;return Ms(this.documentElement,function(i){if(i.nodeType==Za&&i.getAttribute("id")==e)return t=i,!0}),t},createElement:function(e){var t=new Os;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new gs,(t.attributes=new _s)._ownerElement=t,t},createDocumentFragment:function(){var e=new $s;return e.ownerDocument=this,e.childNodes=new gs,e},createTextNode:function(e){var t=new Ps;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new js;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new Us;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var i=new qs;return i.ownerDocument=this,i.tagName=i.target=e,i.nodeValue=i.data=t,i},createAttribute:function(e){var t=new Ns;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new Fs;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var i=new Os,n=t.split(":"),r=i.attributes=new _s;return i.childNodes=new gs,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=e,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,r._ownerElement=i,i},createAttributeNS:function(e,t){var i=new Ns,n=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=e,i.specified=!0,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,i}},Qa(Cs,Ss),Os.prototype={nodeType:Za,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var i=this.ownerDocument.createAttribute(e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===ls?this.insertBefore(e,null):function(e,t){var i=t.parentNode;if(i){var n=e.lastChild;i.removeChild(t),n=e.lastChild}return n=e.lastChild,t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,Is(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);i&&this.removeAttributeNode(i)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);return i&&i.value||""},setAttributeNS:function(e,t,i){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new vs(this,function(t){var i=[];return Ms(t,function(n){n===t||n.nodeType!=Za||"*"!==e&&n.tagName!=e||i.push(n)}),i})},getElementsByTagNameNS:function(e,t){return new vs(this,function(i){var n=[];return Ms(i,function(r){r===i||r.nodeType!==Za||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||n.push(r)}),n})}},Cs.prototype.getElementsByTagName=Os.prototype.getElementsByTagName,Cs.prototype.getElementsByTagNameNS=Os.prototype.getElementsByTagNameNS,Qa(Os,Ss),Ns.prototype.nodeType=Ja,Qa(Ns,Ss),Ls.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(cs[ps])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,i){i=this.data.substring(0,e)+i+this.data.substring(e+t),this.nodeValue=this.data=i,this.length=i.length}},Qa(Ls,Ss),Ps.prototype={nodeName:"#text",nodeType:es,splitText:function(e){var t=this.data,i=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},Qa(Ps,Ls),js.prototype={nodeName:"#comment",nodeType:as},Qa(js,Ls),Us.prototype={nodeName:"#cdata-section",nodeType:ts},Qa(Us,Ls),Rs.prototype.nodeType=os,Qa(Rs,Ss),zs.prototype.nodeType=us,Qa(zs,Ss),Bs.prototype.nodeType=ns,Qa(Bs,Ss),Fs.prototype.nodeType=is,Qa(Fs,Ss),$s.prototype.nodeName="#document-fragment",$s.prototype.nodeType=ls,Qa($s,Ss),qs.prototype.nodeType=rs,Qa(qs,Ss),Hs.prototype.serializeToString=function(e,t,i){return Ws.call(e,t,i)},Ss.prototype.toString=Ws;try{if(Object.defineProperty){Object.defineProperty(vs.prototype,"length",{get:function(){return ys(this),this.$$length}}),Object.defineProperty(Ss.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case Za:case ls:var i=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&i.push(e(t)),t=t.nextSibling;return i.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case Za:case ls:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Gs=function(e,t,i){e["$$"+t]=i}}}catch(e){}var Qs,Xs,Ks,Zs,Js,eo,to,io={DOMImplementation:ks,XMLSerializer:Hs},no=o(function(e,t){function i(e){this.options=e||{locator:{}}}function n(){this.cdata=!1}function r(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,i){return"string"==typeof e?e.substr(t,i):e.length>=t+i||t?new java.lang.String(e,t,i)+"":e}function o(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}i.prototype.parseFromString=function(e,t){var i=this.options,r=new l,s=i.domBuilder||new n,o=i.errorHandler,u=i.locator,d=i.xmlns||{},c={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&s.setDocumentLocator(u),r.errorHandler=function(e,t,i){if(!e){if(t instanceof n)return t;e=t}var r={},s=e instanceof Function;function o(t){var n=e[t];!n&&s&&(n=2==e.length?function(i){e(t,i)}:e),r[t]=n&&function(e){n("[xmldom "+t+"]\t"+e+a(i))}||function(){}}return i=i||{},o("warning"),o("error"),o("fatalError"),r}(o,s,u),r.domBuilder=i.domBuilder||s,/\/x?html?$/.test(t)&&(c.nbsp="Â ",c.copy="Â©",d[""]="http://www.w3.org/1999/xhtml"),d.xml=d.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,d,c):r.errorHandler.error("invalid doc source"),s.doc},n.prototype={startDocument:function(){this.doc=(new u).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,i,n){var a=this.doc,s=a.createElementNS(e,i||t),l=n.length;o(this,s),this.currentElement=s,this.locator&&r(this.locator,s);for(var u=0;u<l;u++){e=n.getURI(u);var d=n.getValue(u),c=(i=n.getQName(u),a.createAttributeNS(e,i));this.locator&&r(n.getLocator(u),c),c.value=c.nodeValue=d,s.setAttributeNode(c)}},endElement:function(e,t,i){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var i=this.doc.createProcessingInstruction(e,t);this.locator&&r(this.locator,i),o(this,i)},ignorableWhitespace:function(e,t,i){},characters:function(e,t,i){if(e=s.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&r(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,i){e=s.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&r(this.locator,n),o(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var a=n.createDocumentType(e,t,i);this.locator&&r(this.locator,a),o(this,a)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){n.prototype[e]=function(){return null}});var l=Ya.XMLReader,u=t.DOMImplementation=io.DOMImplementation;t.XMLSerializer=io.XMLSerializer,t.DOMParser=i}),ro=(no.DOMImplementation,no.XMLSerializer,no.DOMParser),ao=function(e){return!!e&&"object"==typeof e},so=function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.reduce(function(t,i){return Object.keys(i).forEach(function(n){Array.isArray(t[n])&&Array.isArray(i[n])?t[n]=t[n].concat(i[n]):ao(t[n])&&ao(i[n])?t[n]=e(t[n],i[n]):t[n]=i[n]}),t},{})},oo=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},lo=function(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},uo="INVALID_NUMBER_OF_PERIOD",co="DASH_EMPTY_MANIFEST",po="DASH_INVALID_XML",ho="NO_BASE_URL",fo="SEGMENT_TIME_UNSPECIFIED",mo="UNSUPPORTED_UTC_TIMING_SCHEME",go=function(e){var t=e.baseUrl,i=void 0===t?"":t,n=e.source,r=void 0===n?"":n,a=e.range,s=void 0===a?"":a,o=e.indexRange,l=void 0===o?"":o,u={uri:r,resolvedUri:ba(i||"",r)};if(s||l){var d=(s||l).split("-"),c=parseInt(d[0],10),p=parseInt(d[1],10);u.byterange={length:p-c+1,offset:c}}return u},vo={static:function(e){var t=e.duration,i=e.timescale,n=void 0===i?1:i,r=e.sourceDuration;return{start:0,end:Math.ceil(r/(t/n))}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,s=e.duration,o=e.start,l=void 0===o?0:o,u=e.minimumUpdatePeriod,d=void 0===u?0:u,c=e.timeShiftBufferDepth,p=void 0===c?1/0:c,h=(t+i)/1e3,f=n+l,m=h+d-f,g=Math.ceil(m*a/s),v=Math.floor((h-f-p)*a/s),y=Math.floor((h-f)*a/s);return{start:Math.max(0,v),end:Math.min(g,y)}}},yo=function(e){var t=e.type,i=void 0===t?"static":t,n=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.sourceDuration,o=vo[i](e),l=function(e,t){for(var i=[],n=e;n<t;n++)i.push(n);return i}(o.start,o.end).map(function(e){return function(t,i){var n=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.periodIndex,o=e.startNumber;return{number:(void 0===o?1:o)+t,duration:n/a,timeline:s,time:i*n}}}(e));if("static"===i){var u=l.length-1;l[u].duration=s-n/a*u}return l},_o=function(e){var t=e.baseUrl,i=e.initialization,n=void 0===i?{}:i,r=e.sourceDuration,a=e.timescale,s=void 0===a?1:a,o=e.indexRange,l=void 0===o?"":o,u=e.duration;if(!t)throw new Error(ho);var d=go({baseUrl:t,source:n.sourceURL,range:n.range}),c=go({baseUrl:t,source:t,indexRange:l});if(c.map=d,u){var p=yo(e);p.length&&(c.duration=p[0].duration,c.timeline=p[0].timeline)}else r&&(c.duration=r/s,c.timeline=0);return c.number=0,[c]},bo=function(e,t,i){for(var n=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,a=e.timeline||0,s=e.sidx.byterange,o=s.offset+s.length,l=t.timescale,u=t.references.filter(function(e){return 1!==e.referenceType}),d=[],c=o+t.firstOffset,p=0;p<u.length;p++){var h=t.references[p],f=h.referencedSize,m=h.subsegmentDuration,g=_o({baseUrl:i,timescale:l,timeline:a,periodIndex:a,duration:m,sourceDuration:r,indexRange:c+"-"+(c+f-1)})[0];n&&(g.map=n),d.push(g),c+=f}return e.segments=d,e},To=function(e){var t;return(t=e.reduce(function(e,t){var i,n=t.attributes.id+(t.attributes.lang||"");e[n]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t;return e},{}),Object.keys(t).map(function(e){return t[e]})).map(function(e){var t,i;return e.discontinuityStarts=(t=e.segments,i="discontinuity",t.reduce(function(e,t,n){return t[i]&&e.push(n),e},[])),e})},wo=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var i in e){var n=e[i];if(n.sidx){var r=n.sidx.uri+"-"+(s=n.sidx.byterange,o=void 0,o=s.offset+s.length-1,s.offset+"-"+o),a=t[r]&&t[r].sidx;n.sidx&&a&&bo(n,a,n.sidx.resolvedUri)}}var s,o;return e},ko=function(e){var t,i=e.attributes,n=e.segments,r=e.sidx,a={attributes:(t={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),r&&(a.sidx=r),a},So=function(e){var t,i=e.attributes,n=e.segments,r=e.sidx,a={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),r&&(a.sidx=r),a},xo=function(e,t){var i;if(void 0===t&&(t={}),!e.length)return{};var n=e[0].attributes,r=n.sourceDuration,a=n.type,s=void 0===a?"static":a,o=n.suggestedPresentationDelay,l=n.minimumUpdatePeriod,u=void 0===l?0:l,d=To(e.filter(function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType})).map(So),c=To(e.filter(function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType})),p=e.filter(function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType}),h={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(i={AUDIO:{},VIDEO:{}},i["CLOSED-CAPTIONS"]={},i.SUBTITLES={},i),uri:"",duration:r,playlists:wo(d,t),minimumUpdatePeriod:1e3*u};return"dynamic"===s&&(h.suggestedPresentationDelay=o),c.length&&(h.mediaGroups.AUDIO.audio=function(e,t){var i;void 0===t&&(t={});var n=e.reduce(function(e,n){var r=n.attributes.role&&n.attributes.role.value||"",a=n.attributes.lang||"",s="main";if(a){var o=r?" ("+r+")":"";s=""+n.attributes.lang+o}return e[s]&&e[s].playlists[0].attributes.BANDWIDTH>n.attributes.bandwidth?e:(e[s]={language:a,autoselect:!0,default:"main"===r,playlists:wo([ko(n)],t),uri:""},void 0===i&&"main"===r&&((i=n).default=!0),e)},{});i||(n[Object.keys(n)[0]].default=!0);return n}(c,t)),p.length&&(h.mediaGroups.SUBTITLES.subs=function(e,t){return void 0===t&&(t={}),e.reduce(function(e,i){var n,r,a,s,o=i.attributes.lang||"text";return e[o]?e:(e[o]={language:o,default:!1,autoselect:!1,playlists:wo([(n=i,a=n.attributes,s=n.segments,void 0===s&&(s=[{uri:a.baseUrl,timeline:a.periodIndex,resolvedUri:a.baseUrl||"",duration:a.sourceDuration,number:0}],a.duration=a.sourceDuration),{attributes:(r={NAME:a.id,BANDWIDTH:a.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:"static"===(a.type||"static"),timeline:a.periodIndex,resolvedUri:a.baseUrl||"",targetDuration:a.duration,segments:s,mediaSequence:s.length?s[0].number:1})],t),uri:""},e)},{})}(p,t)),h},Mo=function(e,t,i){var n=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=void 0===s?1:s,l=e.start,u=void 0===l?0:l,d=e.minimumUpdatePeriod,c=(n+r)/1e3+(void 0===d?0:d)-(a+u);return Math.ceil((c*o-t)/i)},Co=function(e,t){for(var i=e.type,n=void 0===i?"static":i,r=e.minimumUpdatePeriod,a=void 0===r?0:r,s=e.media,o=void 0===s?"":s,l=e.sourceDuration,u=e.timescale,d=void 0===u?1:u,c=e.startNumber,p=void 0===c?1:c,h=e.periodIndex,f=[],m=-1,g=0;g<t.length;g++){var v=t[g],y=v.d,_=v.r||0,b=v.t||0;m<0&&(m=b),b&&b>m&&(m=b);var T=void 0;if(_<0){var w=g+1;T=w===t.length?"dynamic"===n&&a>0&&o.indexOf("$Number$")>0?Mo(e,m,y):(l*d-m)/y:(t[w].t-m)/y}else T=_+1;for(var k=p+f.length+T,S=p+f.length;S<k;)f.push({number:S,duration:y/d,time:m,timeline:h}),m+=y,S++}return f},Eo=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Io=function(e,t){return e.replace(Eo,function(e){return function(t,i,n,r){if("$$"===t)return"$";if(void 0===e[i])return t;var a=""+e[i];return"RepresentationID"===i?a:(r=n?parseInt(r,10):1,a.length>=r?a:""+new Array(r-a.length+1).join("0")+a)}}(t))},Do=function(e,t){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},n=e.initialization,r=void 0===n?{sourceURL:"",range:""}:n,a=go({baseUrl:e.baseUrl,source:Io(r.sourceURL,i),range:r.range});return function(e,t){return e.duration||t?e.duration?yo(e):Co(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t).map(function(t){i.Number=t.number,i.Time=t.time;var n=Io(e.media||"",i);return{uri:n,timeline:t.timeline,duration:t.duration,resolvedUri:ba(e.baseUrl||"",n),map:a,number:t.number}})},Ao=function(e,t){var i=e.duration,n=e.segmentUrls,r=void 0===n?[]:n;if(!i&&!t||i&&t)throw new Error(fo);var a,s=r.map(function(t){return function(e,t){var i=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,a=go({baseUrl:i,source:r.sourceURL,range:r.range}),s=go({baseUrl:i,source:t.media,range:t.mediaRange});return s.map=a,s}(e,t)});return i&&(a=yo(e)),t&&(a=Co(e,t)),a.map(function(e,t){if(s[t]){var i=s[t];return i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}}).filter(function(e){return e})},Oo=function(e){var t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=Do,t=so(n,r.template)):r.base?(i=_o,t=so(n,r.base)):r.list&&(i=Ao,t=so(n,r.list));var a={attributes:n};if(!i)return a;var s=i(t,r.timeline);if(t.duration){var o=t,l=o.duration,u=o.timescale,d=void 0===u?1:u;t.duration=l/d}else s.length?t.duration=s.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0;return a.attributes=t,a.segments=s,r.base&&t.indexRange&&(a.sidx=s[0],a.segments=[]),a},No=function(e,t){return lo(e.childNodes).filter(function(e){return e.tagName===t})},Lo=function(e){return e.textContent.trim()},Po=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var i=t.slice(1),n=i[0],r=i[1],a=i[2],s=i[3],o=i[4],l=i[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(r||0)+86400*parseFloat(a||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(l||0)},jo={mediaPresentationDuration:function(e){return Po(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return Po(e)},suggestedPresentationDelay:function(e){return Po(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Po(e)},start:function(e){return Po(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Po(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Uo=function(e){return e&&e.attributes?lo(e.attributes).reduce(function(e,t){var i=jo[t.name]||jo.DEFAULT;return e[t.name]=i(t.value),e},{}):{}},Ro={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},zo=function(e,t){return t.length?oo(e.map(function(e){return t.map(function(t){return ba(e,Lo(t))})})):e},Bo=function(e){var t=No(e,"SegmentTemplate")[0],i=No(e,"SegmentList")[0],n=i&&No(i,"SegmentURL").map(function(e){return so({tag:"SegmentURL"},Uo(e))}),r=No(e,"SegmentBase")[0],a=i||t,s=a&&No(a,"SegmentTimeline")[0],o=i||r||t,l=o&&No(o,"Initialization")[0],u=t&&Uo(t);u&&l?u.initialization=l&&Uo(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var d={template:u,timeline:s&&No(s,"S").map(function(e){return Uo(e)}),list:i&&so(Uo(i),{segmentUrls:n,initialization:Uo(l)}),base:r&&so(Uo(r),{initialization:Uo(l)})};return Object.keys(d).forEach(function(e){d[e]||delete d[e]}),d},Fo=function(e,t,i){return function(n){var r=Uo(n),a=zo(t,No(n,"BaseURL")),s=No(n,"Role")[0],o={role:Uo(s)},l=so(e,r,o),u=No(n,"ContentProtection").reduce(function(e,t){var i=Uo(t),n=Ro[i.schemeIdUri];if(n){e[n]={attributes:i};var r=No(t,"cenc:pssh")[0];if(r){var a=Lo(r),s=a&&Sa(a);e[n].pssh=s}}return e},{});Object.keys(u).length&&(l=so(l,{contentProtection:u}));var d=Bo(n),c=No(n,"Representation"),p=so(i,d);return oo(c.map(function(e,t,i){return function(n){var r=No(n,"BaseURL"),a=zo(t,r),s=so(e,Uo(n)),o=Bo(n);return a.map(function(e){return{segmentInfo:so(i,o),attributes:so(s,{baseUrl:e})}})}}(l,a,p)))}},$o=function(t,i){void 0===i&&(i={});var n=i,r=n.manifestUri,a=void 0===r?"":r,s=n.NOW,o=void 0===s?Date.now():s,l=n.clientOffset,u=void 0===l?0:l,d=No(t,"Period");if(!d.length)throw new Error(uo);var c=Uo(t),p=zo([a],No(t,"BaseURL"));return c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=o,c.clientOffset=u,oo(d.map(function(t,i){return function(n,r){var a=zo(i,No(n,"BaseURL")),s=Uo(n),o=parseInt(s.id,10),l=e.isNaN(o)?r:o,u=so(t,{periodIndex:l}),d=No(n,"AdaptationSet"),c=Bo(n);return oo(d.map(Fo(u,a,c)))}}(c,p)))},qo=function(e){if(""===e)throw new Error(co);var t=(new ro).parseFromString(e,"application/xml"),i=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(po);return i},Ho=function(e,t){return void 0===t&&(t={}),xo($o(qo(e),t).map(Oo),t.sidxMapping)},Wo=function(e){return function(e){var t=No(e,"UTCTiming")[0];if(!t)return null;var i=Uo(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(mo)}return i}(qo(e))},Vo=function(e){return e>>>0},Yo=function(e){return("00"+e.toString(16)).slice(-2)},Go=Vo,Qo=function(e){return new Date(1e3*e-20828448e5)},Xo=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Ko=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},Zo=function(e){var t,i,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=i)if(i=n.getUint32(t),t+=4,i<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[t]&31)}return r},Jo={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:Qs(e.subarray(78,e.byteLength))}},avcC:function(e){var t,i,n,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},o=31&e[5];for(n=6,r=0;r<o;r++)i=a.getUint16(n),n+=2,s.sps.push(new Uint8Array(e.subarray(n,n+i))),n+=i;for(t=e[n],n++,r=0;r<t;r++)i=a.getUint16(n),n+=2,s.pps.push(new Uint8Array(e.subarray(n,n+i))),n+=i;return s},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={majorBrand:Ko(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},n=8;n<e.byteLength;)i.compatibleBrands.push(Ko(e.subarray(n,n+4))),n+=4;return i},dinf:function(e){return{boxes:Qs(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:Qs(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:Ko(e.subarray(8,12)),name:""},i=8;for(i=24;i<e.byteLength;i++){if(0===e[i]){i++;break}t.name+=String.fromCharCode(e[i])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:Zo(e)}},mdhd:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(n+=4,r.creationTime=Qo(i.getUint32(n)),n+=8,r.modificationTime=Qo(i.getUint32(n)),n+=4,r.timescale=i.getUint32(n),n+=8,r.duration=i.getUint32(n)):(r.creationTime=Qo(i.getUint32(n)),n+=4,r.modificationTime=Qo(i.getUint32(n)),n+=4,r.timescale=i.getUint32(n),n+=4,r.duration=i.getUint32(n)),n+=4,t=i.getUint16(n),r.language+=String.fromCharCode(96+(t>>10)),r.language+=String.fromCharCode(96+((992&t)>>5)),r.language+=String.fromCharCode(96+(31&t)),r},mdia:function(e){return{boxes:Qs(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:Qs(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(i.streamDescriptor=Qs(e.subarray(28))[0]),i},moof:function(e){return{boxes:Qs(e)}},moov:function(e){return{boxes:Qs(e)}},mvex:function(e){return{boxes:Qs(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=Qo(t.getUint32(i)),i+=8,n.modificationTime=Qo(t.getUint32(i)),i+=4,n.timescale=t.getUint32(i),i+=8,n.duration=t.getUint32(i)):(n.creationTime=Qo(t.getUint32(i)),i+=4,n.modificationTime=Qo(t.getUint32(i)),i+=4,n.timescale=t.getUint32(i),i+=4,n.duration=t.getUint32(i)),i+=4,n.rate=t.getUint16(i)+t.getUint16(i+2)/16,i+=4,n.volume=t.getUint8(i)+t.getUint8(i+1)/8,i+=2,i+=2,i+=8,n.matrix=new Uint32Array(e.subarray(i,i+36)),i+=36,i+=24,n.nextTrackId=t.getUint32(i),n},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)i.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return i},sidx:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8),earliestPresentationTime:i.getUint32(12),firstOffset:i.getUint32(16)},r=i.getUint16(22);for(t=24;r;t+=12,r--)n.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&i.getUint32(t),subsegmentDuration:i.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&i.getUint32(t+8)});return n},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:Qs(e)}},stco:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=i.getUint32(4);for(t=8;r;t+=4,r--)n.chunkOffsets.push(i.getUint32(t));return n},stsc:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=i.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;n;t+=12,n--)r.sampleToChunks.push({firstChunk:i.getUint32(t),samplesPerChunk:i.getUint32(t+4),sampleDescriptionIndex:i.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:Qs(e.subarray(8))}},stsz:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)n.entries.push(i.getUint32(t));return n},stts:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=i.getUint32(4);for(t=8;r;t+=8,r--)n.timeToSamples.push({sampleCount:i.getUint32(t),sampleDelta:i.getUint32(t+4)});return n},styp:function(e){return Jo.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:Go(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=Go(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t},tfhd:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],a=2&n.flags[2],s=8&n.flags[2],o=16&n.flags[2],l=32&n.flags[2],u=65536&n.flags[0],d=131072&n.flags[0];return t=8,r&&(t+=4,n.baseDataOffset=i.getUint32(12),t+=4),a&&(n.sampleDescriptionIndex=i.getUint32(t),t+=4),s&&(n.defaultSampleDuration=i.getUint32(t),t+=4),o&&(n.defaultSampleSize=i.getUint32(t),t+=4),l&&(n.defaultSampleFlags=i.getUint32(t)),u&&(n.durationIsEmpty=!0),!r&&d&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=Qo(t.getUint32(i)),i+=8,n.modificationTime=Qo(t.getUint32(i)),i+=4,n.trackId=t.getUint32(i),i+=4,i+=8,n.duration=t.getUint32(i)):(n.creationTime=Qo(t.getUint32(i)),i+=4,n.modificationTime=Qo(t.getUint32(i)),i+=4,n.trackId=t.getUint32(i),i+=4,i+=4,n.duration=t.getUint32(i)),i+=4,i+=8,n.layer=t.getUint16(i),i+=2,n.alternateGroup=t.getUint16(i),i+=2,n.volume=t.getUint8(i)+t.getUint8(i+1)/8,i+=2,i+=2,n.matrix=new Uint32Array(e.subarray(i,i+36)),i+=36,n.width=t.getUint16(i)+t.getUint16(i+2)/16,i+=4,n.height=t.getUint16(i)+t.getUint16(i+2)/16,n},traf:function(e){return{boxes:Qs(e)}},trak:function(e){return{boxes:Qs(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],a=4&i.flags[2],s=1&i.flags[1],o=2&i.flags[1],l=4&i.flags[1],u=8&i.flags[1],d=n.getUint32(4),c=8;for(r&&(i.dataOffset=n.getInt32(c),c+=4),a&&d&&(t={flags:Xo(e.subarray(c,c+4))},c+=4,s&&(t.duration=n.getUint32(c),c+=4),o&&(t.size=n.getUint32(c),c+=4),u&&(t.compositionTimeOffset=n.getUint32(c),c+=4),i.samples.push(t),d--);d--;)t={},s&&(t.duration=n.getUint32(c),c+=4),o&&(t.size=n.getUint32(c),c+=4),l&&(t.flags=Xo(e.subarray(c,c+4)),c+=4),u&&(t.compositionTimeOffset=n.getUint32(c),c+=4),i.samples.push(t);return i},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},el={inspect:Qs=function(e){for(var t,i,n,r,a,s=0,o=[],l=new ArrayBuffer(e.length),u=new Uint8Array(l),d=0;d<e.length;++d)u[d]=e[d];for(t=new DataView(l);s<e.byteLength;)i=t.getUint32(s),n=Ko(e.subarray(s+4,s+8)),r=i>1?s+i:e.byteLength,(a=(Jo[n]||function(e){return{data:e}})(e.subarray(s+8,r))).size=i,a.type=n,o.push(a),s=r;return o},textify:Xs=function(e,t){var i;return t=t||0,i=new Array(2*t+1).join(" "),e.map(function(e,n){return i+e.type+"\n"+Object.keys(e).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(t){var n=i+"  "+t+": ",r=e[t];if(r instanceof Uint8Array||r instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return a?1===a.length?n+"<"+a.join("").slice(1)+">":n+"<\n"+a.map(function(e){return i+"  "+e}).join("\n")+"\n"+i+"  >":n+"<>"}return n+JSON.stringify(r,null,2).split("\n").map(function(e,t){return 0===t?e:i+"  "+e}).join("\n")}).join("\n")+(e.boxes?"\n"+Xs(e.boxes,t+1):"")}).join("\n")},parseType:Ko,findBox:function e(t,i){var n,r,a,s,o,l=[];if(!i.length)return null;for(n=0;n<t.byteLength;)r=Go(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),a=Ko(t.subarray(n+4,n+8)),s=r>1?n+r:t.byteLength,a===i[0]&&(1===i.length?l.push(t.subarray(n+8,s)):(o=e(t.subarray(n+8,s),i.slice(1))).length&&(l=l.concat(o))),n=s;return l},parseTraf:Jo.traf,parseTfdt:Jo.tfdt,parseHdlr:Jo.hdlr,parseTfhd:Jo.tfhd,parseTrun:Jo.trun,parseSidx:Jo.sidx},tl=Vo,il=Yo;Ks=function(e){return el.findBox(e,["moov","trak"]).reduce(function(e,t){var i,n,r,a,s;return(i=el.findBox(t,["tkhd"])[0])?(n=i[0],a=tl(i[r=0===n?12:20]<<24|i[r+1]<<16|i[r+2]<<8|i[r+3]),(s=el.findBox(t,["mdia","mdhd"])[0])?(r=0===(n=s[0])?12:20,e[a]=tl(s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3]),e):null):null},{})},Zs=function(e,t){var i,n,r;return i=el.findBox(t,["moof","traf"]),n=[].concat.apply([],i.map(function(t){return el.findBox(t,["tfhd"]).map(function(i){var n,r;return n=tl(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),r=e[n]||9e4,(el.findBox(t,["tfdt"]).map(function(e){var t,i;return t=e[0],i=tl(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(i*=Math.pow(2,32),i+=tl(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),i})[0]||1/0)/r})})),r=Math.min.apply(null,n),isFinite(r)?r:0},Js=function(e,t){var i,n=el.findBox(t,["moof","traf"]),r=0,a=0;if(n&&n.length)for(var s=el.parseTraf(n[0]),o=0;o<s.boxes.length;o++)"tfhd"===s.boxes[o].type?i=s.boxes[o].trackId:"tfdt"===s.boxes[o].type?r=s.boxes[o].baseMediaDecodeTime:"trun"===s.boxes[o].type&&s.boxes[o].samples.length&&(a=s.boxes[o].samples[0].compositionTimeOffset||0);return(r+a)/(e[i]||9e4)},eo=function(e){var t=el.findBox(e,["moov","trak"]),i=[];return t.forEach(function(e){var t=el.findBox(e,["mdia","hdlr"]),n=el.findBox(e,["tkhd"]);t.forEach(function(e,t){var r,a,s=el.parseType(e.subarray(8,12)),o=n[t];"vide"===s&&(a=0===(r=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0)?r.getUint32(12):r.getUint32(20),i.push(a))})}),i},to=function(e){var t=el.findBox(e,["moov","trak"]),i=[];return t.forEach(function(e){var t,n,r={},a=el.findBox(e,["tkhd"])[0];a&&(n=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),r.id=0===n?t.getUint32(12):t.getUint32(20));var s=el.findBox(e,["mdia","hdlr"])[0];if(s){var o=el.parseType(s.subarray(8,12));r.type="vide"===o?"video":"soun"===o?"audio":o}var l=el.findBox(e,["mdia","minf","stbl","stsd"])[0];if(l){var u=l.subarray(8);r.codec=el.parseType(u.subarray(4,8));var d,c=el.findBox(u,[r.codec])[0];c&&(/^[a-z]vc[1-9]$/i.test(r.codec)?(d=c.subarray(78),"avcC"===el.parseType(d.subarray(4,8))&&d.length>11?(r.codec+=".",r.codec+=il(d[9]),r.codec+=il(d[10]),r.codec+=il(d[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)&&(d=c.subarray(28),"esds"===el.parseType(d.subarray(4,8))&&d.length>20&&0!==d[19]?(r.codec+="."+il(d[19]),r.codec+="."+il(d[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"))}var p=el.findBox(e,["mdia","mdhd"])[0];if(p&&a){var h=0===n?12:20;r.timescale=tl(p[h]<<24|p[h+1]<<16|p[h+2]<<8|p[h+3])}i.push(r)}),i};var nl={findBox:el.findBox,parseType:el.parseType,timescale:Ks,startTime:Zs,compositionStartTime:Js,videoTrackIds:eo,tracks:to},rl=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}t+=r,n=0,r=0}return i},al=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},sl=function(e,t){var i,n,r,a,s=[];if(!(64&t[0]))return s;for(n=31&t[0],i=0;i<n;i++)a={type:3&t[2+(r=3*i)],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],s.push(a));return s},ol=function(e){for(var t,i,n=e.byteLength,r=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=e[s];return i},ll=4,ul=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var i,n,r,a;if(i=e[t])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,a)}},this.dispose=function(){e={}}}};ul.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},ul.prototype.push=function(e){this.trigger("data",e)},ul.prototype.flush=function(e){this.trigger("done",e)},ul.prototype.partialFlush=function(e){this.trigger("partialdone",e)},ul.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},ul.prototype.reset=function(e){this.trigger("reset",e)};var dl=ul,cl=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new gl(0,0),new gl(0,1),new gl(1,0),new gl(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)};(cl.prototype=new dl).push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&(t=rl(e.escapedRBSP)).payloadType===ll&&(i=al(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=sl(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},cl.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return"flush"===e?t.flush():t.partialFlush()},this)},cl.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},cl.prototype.flush=function(){return this.flushStream("flush")},cl.prototype.partialFlush=function(){return this.flushStream("partialFlush")},cl.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},cl.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},cl.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},cl.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},cl.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var pl={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},hl=function(e){return null===e?"":(e=pl[e]||e,String.fromCharCode(e))},fl=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ml=function(){for(var e=[],t=15;t--;)e.push("");return e},gl=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=ml();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ml();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ml()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,r))a=hl((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=hl((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var s=fl.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),a=hl(n),a+=hl(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};gl.prototype=new dl,gl.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},gl.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ml(),this.nonDisplayed_=ml(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},gl.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},gl.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},gl.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},gl.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},gl.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},gl.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},gl.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},gl.prototype.isNormalChar=function(e){return e>=32&&e<=127},gl.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=ml(),this.displayed_=ml()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},gl.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},gl.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},gl.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},gl.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},gl.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},gl.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var vl=ol,yl=cl,_l=function(e,t){for(var i=e,n=0;n<t.length;n++){var r=t[n];if(i<r.size)return r;i-=r.size}return null},bl=function(e,t){var i=nl.findBox(e,["moof","traf"]),n=nl.findBox(e,["mdat"]),r={},a=[];return n.forEach(function(e,t){var n=i[t];a.push({mdat:e,traf:n})}),a.forEach(function(e){var i,n=e.mdat,a=e.traf,s=nl.findBox(a,["tfhd"]),o=el.parseTfhd(s[0]),l=o.trackId,u=nl.findBox(a,["tfdt"]),d=u.length>0?el.parseTfdt(u[0]).baseMediaDecodeTime:0,c=nl.findBox(a,["trun"]);t===l&&c.length>0&&(i=function(e,t,i){var n,r,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(r=0;r+4<e.length;r+=a)if(a=o.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+a),d=_l(r,t);n={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:vl(u),trackId:i},d?(n.pts=d.pts,n.dts=d.dts,s=d):(n.pts=s.pts,n.dts=s.dts),l.push(n)}return l}(n,function(e,t,i){var n=t,r=i.defaultSampleDuration||0,a=i.defaultSampleSize||0,s=i.trackId,o=[];return e.forEach(function(e){var t=el.parseTrun(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=n+e.compositionTimeOffset,n+=e.duration}),o=o.concat(t)}),o}(c,d,o),l),r[l]||(r[l]=[]),r[l]=r[l].concat(i))}),r},Tl=function(){var e,t,i,n,r,a,s=!1;this.isInitialized=function(){return s},this.init=function(t){e=new yl,s=!0,a=!!t&&t.isPartial,e.on("data",function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,r.captions.push(e),r.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||i===e[0]&&n===t[i])},this.parse=function(e,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))i=a[0],n=s[i];else if(null===i||!n)return t.push(e),null;for(;t.length>0;){var l=t.shift();this.parse(l,a,s)}return null!==(o=function(e,t,i){return null===t?null:{seiNals:bl(e,t)[t],timescale:i}}(e,i,n))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],i=null,n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},wl=27,kl=15,Sl=21,xl=function(e,t){var i=1;for(e>t&&(i=-1);Math.abs(t-e)>4294967296;)e+=8589934592*i;return e},Ml=function e(t){var i,n;e.prototype.init.call(this),this.type_=t||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=xl(e.dts,n),e.pts=xl(e.pts,n),i=e.dts,this.trigger("data",e))},this.flush=function(){n=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ml.prototype=new dl;var Cl,El,Il,Dl,Al=function(e){var t=31&e[1];return t<<=8,t|=e[2]},Ol=function(e){return!!(64&e[1])},Nl=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Ll=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Pl={parseType:function(e,t){var i=Al(e);return 0===i?"pat":i===t?"pmt":t?"pes":null},parsePat:function(e){var t=Ol(e),i=4+Nl(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},parsePmt:function(e){var t={},i=Ol(e),n=4+Nl(e);if(i&&(n+=e[n]+1),1&e[n+5]){var r;r=3+((15&e[n+1])<<8|e[n+2])-4;for(var a=12+((15&e[n+10])<<8|e[n+11]);a<r;){var s=n+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:Ol,parsePesType:function(e,t){switch(t[Al(e)]){case wl:return"video";case kl:return"audio";case Sl:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Ol(e))return null;var t=4+Nl(e);if(t>=e.byteLength)return null;var i,n=null;return 192&(i=e[t+7])&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+Nl(e),i=e.subarray(t),n=0,r=0,a=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===Ll(31&i[r+3])&&(a=!0);do{n++}while(1!==i[n]&&n<i.length);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Ll(31&i[r+3])&&(a=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,i&&i.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Ll(31&i[r+3])&&(a=!0),a}},jl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Ul=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Rl={isLikelyAacData:function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},parseId3TagSize:function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10},parseAdtsSize:function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return jl[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,i,n;t=10,64&e[5]&&(t+=4,t+=Ul(e.subarray(10,14)));do{if((i=Ul(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){n=e.subarray(t+10,t+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,i){var n,r="";for(n=t;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r}(n,0,r))){var a=n.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return s*=4,s+=3&a[7]}break}}t+=10,t+=i}while(t<e.byteLength);return null}};var zl=9e4,Bl=(Cl=function(e){return 9e4*e},El=function(e,t){return e*t},Il=function(e){return e/9e4},Dl=function(e,t){return e/t},xl),Fl={};Fl.ts=Pl,Fl.aac=Rl;var $l=zl,ql=function(e,t,i){for(var n,r,a,s,o=0,l=188,u=!1;l<=e.byteLength;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o++,l++;else{switch(n=e.subarray(o,l),Fl.ts.parseType(n,t.pid)){case"pes":r=Fl.ts.parsePesType(n,t.table),a=Fl.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=Fl.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0)}if(u)break;o+=188,l+=188}for(o=(l=e.byteLength)-188,u=!1;o>=0;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o--,l--;else{switch(n=e.subarray(o,l),Fl.ts.parseType(n,t.pid)){case"pes":r=Fl.ts.parsePesType(n,t.table),a=Fl.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=Fl.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0)}if(u)break;o-=188,l-=188}},Hl=function(e,t,i){for(var n,r,a,s,o,l,u,d=0,c=188,p=!1,h={data:[],size:0};c<e.byteLength;)if(71!==e[d]||71!==e[c])d++,c++;else{switch(n=e.subarray(d,c),Fl.ts.parseType(n,t.pid)){case"pes":if(r=Fl.ts.parsePesType(n,t.table),a=Fl.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(a&&!p&&(s=Fl.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),p=!0),!i.firstKeyFrame)){if(a&&0!==h.size){for(o=new Uint8Array(h.size),l=0;h.data.length;)u=h.data.shift(),o.set(u,l),l+=u.byteLength;if(Fl.ts.videoPacketContainsKeyFrame(o)){var f=Fl.ts.parsePesTime(o);f?(i.firstKeyFrame=f,i.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}h.size=0}h.data.push(n),h.size+=n.byteLength}}if(p&&i.firstKeyFrame)break;d+=188,c+=188}for(d=(c=e.byteLength)-188,p=!1;d>=0;)if(71!==e[d]||71!==e[c])d--,c--;else{switch(n=e.subarray(d,c),Fl.ts.parseType(n,t.pid)){case"pes":r=Fl.ts.parsePesType(n,t.table),a=Fl.ts.parsePayloadUnitStartIndicator(n),"video"===r&&a&&(s=Fl.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),p=!0)}if(p)break;d-=188,c-=188}},Wl=function(e){var t={pid:null,table:null},i={};for(var n in function(e,t){for(var i,n=0,r=188;r<e.byteLength;)if(71!==e[n]||71!==e[r])n++,r++;else{switch(i=e.subarray(n,r),Fl.ts.parseType(i,t.pid)){case"pat":t.pid||(t.pid=Fl.ts.parsePat(i));break;case"pmt":t.table||(t.table=Fl.ts.parsePmt(i))}if(t.pid&&t.table)return;n+=188,r+=188}}(e,t),t.table){if(t.table.hasOwnProperty(n))switch(t.table[n]){case wl:i.video=[],Hl(e,t,i),0===i.video.length&&delete i.video;break;case kl:i.audio=[],ql(e,t,i),0===i.audio.length&&delete i.audio}}return i},Vl=function(e,t){var i;return(i=Fl.aac.isLikelyAacData(e)?function(e){for(var t,i=!1,n=0,r=null,a=null,s=0,o=0;e.length-o>=3;){switch(Fl.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){i=!0;break}if((s=Fl.aac.parseId3TagSize(e,o))>e.length){i=!0;break}null===a&&(t=e.subarray(o,o+s),a=Fl.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){i=!0;break}if((s=Fl.aac.parseAdtsSize(e,o))>e.length){i=!0;break}null===r&&(t=e.subarray(o,o+s),r=Fl.aac.parseSampleRate(t)),n++,o+=s;break;default:o++}if(i)return null}if(null===r||null===a)return null;var l=$l/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*n*l,pts:a+1024*n*l}]}}(e):Wl(e))&&(i.audio||i.video)?(function(e,t){if(e.audio&&e.audio.length){var i=t;void 0===i&&(i=e.audio[0].dts),e.audio.forEach(function(e){e.dts=Bl(e.dts,i),e.pts=Bl(e.pts,i),e.dtsTime=e.dts/$l,e.ptsTime=e.pts/$l})}if(e.video&&e.video.length){var n=t;if(void 0===n&&(n=e.video[0].dts),e.video.forEach(function(e){e.dts=Bl(e.dts,n),e.pts=Bl(e.pts,n),e.dtsTime=e.dts/$l,e.ptsTime=e.pts/$l}),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Bl(r.dts,n),r.pts=Bl(r.pts,n),r.dtsTime=r.dts/$l,r.ptsTime=r.dts/$l}}}(i,t),i):null};var Yl=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Gl=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Ql=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Xl=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],n=t[4],r=i[4],a=void 0,s=void 0,o=void 0,l=[],u=[],d=void 0,c=void 0,p=void 0,h=void 0,f=void 0;for(a=0;a<256;a++)u[(l[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!n[s];s^=d||1,o=u[o]||1)for(p=(p=o^o<<1^o<<2^o<<3^o<<4)>>8^255&p^99,n[s]=p,r[p]=s,f=16843009*l[c=l[d=l[s]]]^65537*c^257*d^16843008*s,h=257*l[p]^16843008*p,a=0;a<4;a++)t[a][s]=h=h<<24^h>>>8,i[a][p]=f=f<<24^f>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),i[a]=i[a].slice(0);return e},Kl=null,Zl=function(){function e(t){Yl(this,e),Kl||(Kl=Xl()),this._tables=[[Kl[0][0].slice(),Kl[0][1].slice(),Kl[0][2].slice(),Kl[0][3].slice(),Kl[0][4].slice()],[Kl[1][0].slice(),Kl[1][1].slice(),Kl[1][2].slice(),Kl[1][3].slice(),Kl[1][4].slice()]];var i=void 0,n=void 0,r=void 0,a=void 0,s=void 0,o=this._tables[0][4],l=this._tables[1],u=t.length,d=1;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size");for(a=t.slice(0),s=[],this._key=[a,s],i=u;i<4*u+28;i++)r=a[i-1],(i%u==0||8===u&&i%u==4)&&(r=o[r>>>24]<<24^o[r>>16&255]<<16^o[r>>8&255]<<8^o[255&r],i%u==0&&(r=r<<8^r>>>24^d<<24,d=d<<1^283*(d>>7))),a[i]=a[i-u]^r;for(n=0;i;n++,i--)r=a[3&n?i:i-4],s[n]=i<=4||n<4?r:l[0][o[r>>>24]]^l[1][o[r>>16&255]]^l[2][o[r>>8&255]]^l[3][o[255&r]]}return e.prototype.decrypt=function(e,t,i,n,r,a){var s=this._key[1],o=e^s[0],l=n^s[1],u=i^s[2],d=t^s[3],c=void 0,p=void 0,h=void 0,f=s.length/4-2,m=void 0,g=4,v=this._tables[1],y=v[0],_=v[1],b=v[2],T=v[3],w=v[4];for(m=0;m<f;m++)c=y[o>>>24]^_[l>>16&255]^b[u>>8&255]^T[255&d]^s[g],p=y[l>>>24]^_[u>>16&255]^b[d>>8&255]^T[255&o]^s[g+1],h=y[u>>>24]^_[d>>16&255]^b[o>>8&255]^T[255&l]^s[g+2],d=y[d>>>24]^_[o>>16&255]^b[l>>8&255]^T[255&u]^s[g+3],g+=4,o=c,l=p,u=h;for(m=0;m<4;m++)r[(3&-m)+a]=w[o>>>24]<<24^w[l>>16&255]<<16^w[u>>8&255]<<8^w[255&d]^s[g++],c=o,o=l,l=u,u=d,d=c},e}(),Jl=function(){function e(){Yl(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),i>-1},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),eu=function(e){function t(){Yl(this,t);var i=Ql(this,e.call(this,Jl));return i.jobs=[],i.delay=1,i.timeout_=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},t.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(Jl),tu=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},iu=function(e,t,i){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new Zl(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),s=new Int32Array(a.buffer),o=void 0,l=void 0,u=void 0,d=void 0,c=void 0,p=void 0,h=void 0,f=void 0,m=void 0;for(o=i[0],l=i[1],u=i[2],d=i[3],m=0;m<n.length;m+=4)c=tu(n[m]),p=tu(n[m+1]),h=tu(n[m+2]),f=tu(n[m+3]),r.decrypt(c,p,h,f,s,m),s[m]=tu(s[m]^o),s[m+1]=tu(s[m+1]^l),s[m+2]=tu(s[m+2]^u),s[m+3]=tu(s[m+3]^d),o=c,l=p,u=h,d=f;return a},nu=function(){function e(t,i,n,r){Yl(this,e);var a=e.STEP,s=new Int32Array(t.buffer),o=new Uint8Array(t.byteLength),l=0;for(this.asyncStream_=new eu,this.asyncStream_.push(this.decryptChunk_(s.subarray(l,l+a),i,n,o)),l=a;l<s.length;l+=a)n=new Uint32Array([tu(s[l-4]),tu(s[l-3]),tu(s[l-2]),tu(s[l-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(l,l+a),i,n,o));this.asyncStream_.push(function(){var e;r(null,(e=o).subarray(0,e.byteLength-e[e.byteLength-1]))})}return e.prototype.decryptChunk_=function(e,t,i,n){return function(){var r=iu(e,t,i);n.set(r,e.byteOffset)}},Gl(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),ru=function(t,i){return/^[a-z]+:/i.test(i)?i:(/\/\//i.test(t)||(t=la.buildAbsoluteURL(e.location.href,t)),la.buildAbsoluteURL(t,i))},au=function(e,t,i){return e&&i.responseURL&&t!==i.responseURL?i.responseURL:t},su=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ou=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),lu=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},uu=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},du=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),cu=aa.mergeOptions,pu=aa.EventTarget,hu=aa.log,fu=function(e,t){["AUDIO","SUBTITLES"].forEach(function(i){for(var n in e.mediaGroups[i])for(var r in e.mediaGroups[i][n]){var a=e.mediaGroups[i][n][r];t(a,i,n,r)}})},mu=function(e,t){var i=cu(e,{}),n=i.playlists[t.id];if(!n)return null;if(n.segments&&t.segments&&n.segments.length===t.segments.length&&n.endList===t.endList&&n.mediaSequence===t.mediaSequence)return null;var r=cu(n,t);n.segments&&(r.segments=function(e,t,i){var n=t.slice();i=i||0;for(var r=Math.min(e.length,t.length+i),a=i;a<r;a++)n[a-i]=cu(e[a],n[a-i]);return n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),r.segments.forEach(function(e){!function(e,t){e.resolvedUri||(e.resolvedUri=ru(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=ru(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=ru(t,e.map.uri))}(e,r.resolvedUri)});for(var a=0;a<i.playlists.length;a++)i.playlists[a].id===t.id&&(i.playlists[a]=r);return i.playlists[t.id]=r,i.playlists[t.uri]=r,i},gu=function(e,t){return e+"-"+t},vu=function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];i.resolvedUri=ru(e.uri,i.uri),i.id=gu(t,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes||(i.attributes={},hu.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},yu=function(e){fu(e,function(t){t.uri&&(t.resolvedUri=ru(e.uri,t.uri))})},_u=function(e,t){var i=e.segments[e.segments.length-1];return t&&i&&i.duration?1e3*i.duration:500*(e.targetDuration||10)},bu=function(t){function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};su(this,i);var r=uu(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),a=n.withCredentials,s=void 0!==a&&a,o=n.handleManifestRedirects,l=void 0!==o&&o;r.srcUrl=e,r.hls_=t,r.withCredentials=s,r.handleManifestRedirects=l;var u=t.options_;if(r.customTagParsers=u&&u.customTagParsers||[],r.customTagMappers=u&&u.customTagMappers||[],!r.srcUrl)throw new Error("A non-empty playlist URL is required");return r.state="HAVE_NOTHING",r.on("mediaupdatetimeout",function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",r.request=r.hls_.xhr({uri:ru(r.master.uri,r.media().uri),withCredentials:r.withCredentials},function(e,t){if(r.request)return e?r.playlistRequestError(r.request,r.media(),"HAVE_METADATA"):void r.haveMetadata(r.request,r.media().uri,r.media().id)}))}),r}return lu(i,pu),ou(i,[{key:"playlistRequestError",value:function(e,t,i){var n=t.uri,r=t.id;this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[r],status:e.status,message:"HLS playlist request error at URL: "+n+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(t,i,n){var r=this;this.request=null,this.state="HAVE_METADATA";var a=new ga;this.customTagParsers.forEach(function(e){return a.addParser(e)}),this.customTagMappers.forEach(function(e){return a.addTagMapper(e)}),a.push(t.responseText),a.end(),a.manifest.uri=i,a.manifest.id=n,a.manifest.attributes=a.manifest.attributes||{};var s=mu(this.master,a.manifest);this.targetDuration=a.manifest.targetDuration,s?(this.master=s,this.media_=this.master.playlists[n]):this.trigger("playlistunchanged"),this.media().endList||(e.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=e.setTimeout(function(){r.trigger("mediaupdatetimeout")},_u(this.media(),!!s))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.trigger("dispose"),this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout),e.clearTimeout(this.finalRenditionTimeout),this.off()}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(t,i){var n=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(e.clearTimeout(this.finalRenditionTimeout),i){var r=t.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=e.setTimeout(this.media.bind(this,t,!1),r)}else{var a=this.state,s=!this.media_||t.id!==this.media_.id;if(this.master.playlists[t.id].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(s&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(s){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},function(e,i){if(n.request){if(t.resolvedUri=au(n.handleManifestRedirects,t.resolvedUri,i),e)return n.playlistRequestError(n.request,t,a);n.haveMetadata(i,t.uri,t.id),"HAVE_MASTER"===a?n.trigger("loadedmetadata"):n.trigger("mediachange")}})}}}},{key:"pause",value:function(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(t){var i=this;e.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(t){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=e.setTimeout(function(){return i.load()},r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var t=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,n){if(t.request){if(t.request=null,i)return t.error={status:n.status,message:"HLS playlist request error at URL: "+t.srcUrl+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");var r=new ga;if(t.customTagParsers.forEach(function(e){return r.addParser(e)}),t.customTagMappers.forEach(function(e){return r.addTagMapper(e)}),r.push(n.responseText),r.end(),t.state="HAVE_MASTER",t.srcUrl=au(t.handleManifestRedirects,t.srcUrl,n),r.manifest.uri=t.srcUrl,r.manifest.playlists)return t.master=r.manifest,vu(t.master),yu(t.master),t.trigger("loadedplaylist"),void(t.request||t.media(r.manifest.playlists[0]));var a=gu(0,t.srcUrl);return t.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:e.location.href,playlists:[{uri:t.srcUrl,id:a,resolvedUri:t.srcUrl,attributes:{}}]},t.master.playlists[a]=t.master.playlists[0],t.master.playlists[t.srcUrl]=t.master.playlists[0],t.haveMetadata(n,t.srcUrl,a),t.trigger("loadedmetadata")}})}}]),i}(),Tu=aa.createTimeRange,wu=function(e,t,i){var n,r;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(n=function(e,t){var i=0,n=t-e.mediaSequence,r=e.segments[n];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if(void 0!==(r=e.segments[n]).end)return{result:i+r.end,precise:!0};if(i+=r.duration,void 0!==r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}}(e,t)).precise?n.result:(r=function(e,t){for(var i=0,n=void 0,r=t-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(n=e.segments[r]).start)return{result:n.start-i,precise:!0};if(i+=n.duration,void 0!==n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(e,t)).precise?r.result:n.result+i},ku=function(t,i,n){if(!t)return 0;if("number"!=typeof n&&(n=0),void 0===i){if(t.totalDuration)return t.totalDuration;if(!t.endList)return e.Infinity}return wu(t,i,n)},Su=function(e,t,i){var n=0;if(t>i){var r=[i,t];t=r[0],i=r[1]}if(t<0){for(var a=t;a<Math.min(0,i);a++)n+=e.targetDuration;t=0}for(var s=t;s<i;s++)n+=e.segments[s].duration;return n},xu=function(e,t){if(!e.segments.length)return 0;var i=e.segments.length,n=e.segments[i-1].duration||e.targetDuration,r="number"==typeof t?t:n+2*e.targetDuration;if(0===r)return i;for(var a=0;i--&&!((a+=e.segments[i].duration)>=r););return Math.max(0,i)},Mu=function(e,t,i,n){if(!e||!e.segments)return null;if(e.endList)return ku(e);if(null===t)return null;t=t||0;var r=i?xu(e,n):e.segments.length;return wu(e,e.mediaSequence+r,t)},Cu=function(e){return e-Math.floor(e)==0},Eu=function(e,t){if(Cu(t))return t+.1*e;for(var i=t.toString().split(".")[1].length,n=1;n<=i;n++){var r=Math.pow(10,n),a=t*r;if(Cu(a)||n===i)return(a+e)/r}},Iu=Eu.bind(null,1),Du=Eu.bind(null,-1),Au=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Ou=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Nu=function(e){var t=Au(e);return!e.disabled&&!t},Lu=function(e,t){return t.attributes&&t.attributes[e]},Pu=function(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!Nu(e)&&(e.attributes.BANDWIDTH||0)<i}).length},ju={duration:ku,seekable:function(e,t,i){var n=t||0,r=Mu(e,t,!0,i);return null===r?Tu():Tu(n,r)},safeLiveIndex:xu,getMediaInfoForTime:function(e,t,i,n){var r=void 0,a=void 0,s=e.segments.length,o=t-n;if(o<0){if(i>0)for(r=i-1;r>=0;r--)if(a=e.segments[r],(o+=Du(a.duration))>0)return{mediaIndex:r,startTime:n-Su(e,i,r)};return{mediaIndex:0,startTime:t}}if(i<0){for(r=i;r<0;r++)if((o-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};i=0}for(r=i;r<s;r++)if(a=e.segments[r],(o-=Iu(a.duration))<0)return{mediaIndex:r,startTime:n+Su(e,i,r)};return{mediaIndex:s-1,startTime:t}},isEnabled:Nu,isDisabled:function(e){return e.disabled},isBlacklisted:Au,isIncompatible:Ou,playlistEnd:Mu,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:Lu,estimateSegmentRequestTime:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Lu("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*n)/t:NaN},isLowestEnabledRendition:Pu},Uu=aa.xhr,Ru=aa.mergeOptions,zu=function(){return function e(t,i){t=Ru({timeout:45e3},t);var n=e.beforeRequest||aa.Hls.xhr.beforeRequest;if(n&&"function"==typeof n){var r=n(t);r&&(t=r)}var a=Uu(t,function(e,t){var n=a.response;!e&&n&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=n.byteLength||n.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),t.headers&&(a.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(a.timedout=!0),e||a.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(a&&(n||a.responseText)))),i(e,a)}),s=a.abort;return a.abort=function(){return a.aborted=!0,s.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a}},Bu=function(e){var t,i,n={};return e.byterange&&(n.Range=(t=e.byterange,i=t.offset+t.length-1,"bytes="+t.offset+"-"+i)),n},Fu=function(e,t){return e.start(t)+"-"+e.end(t)},$u=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},qu=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Hu=function(e){var t={};return Object.keys(e).forEach(function(i){var n=e[i];ArrayBuffer.isView(n)?t[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[i]=n}),t},Wu=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Vu=function(e){return e.resolvedUri},Yu=function(e){for(var t=Array.prototype.slice.call(e),i="",n=0;n<t.length/16;n++)i+=t.slice(16*n,16*n+16).map($u).join("")+" "+t.slice(16*n,16*n+16).map(qu).join("")+"\n";return i},Gu=Object.freeze({createTransferableMessage:Hu,initSegmentId:Wu,segmentKeyId:Vu,hexDump:Yu,tagDump:function(e){var t=e.bytes;return Yu(t)},textRanges:function(e){var t="",i=void 0;for(i=0;i<e.length;i++)t+=Fu(e,i)+" ";return t}}),Qu=function(e){var t=e.playlist,i=e.time,n=void 0===i?void 0:i,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===n)return r({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var i=0,n=void 0,r=0;r<t.segments.length&&!(e<=(i=(n=t.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+.25*a.duration)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(n,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:n},o=function(e,t){if(!t.dateTimeObject)return null;var i=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+i);return new Date(t.dateTimeObject.getTime()+1e3*n)}(n,a.segment);return o&&(s.programDateTime=o.toISOString()),r(null,s)},Xu=function e(t){var i=t.programTime,n=t.playlist,r=t.retryCount,a=void 0===r?2:r,s=t.seekTo,o=t.pauseAfterSeek,l=void 0===o||o,u=t.tech,d=t.callback;if(!d)throw new Error("seekToProgramTime: callback must be provided");if(void 0===i||!n||!s)return d({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!u.hasStarted_)return d({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(n))return d({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var c=function(e,t){var i=void 0;try{i=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var n=t.segments[0];if(i<n.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(n=t.segments[r],!(i<t.segments[r+1].dateTimeObject));r++);var a,s=t.segments[t.segments.length-1],o=s.dateTimeObject,l=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+.25*s.duration;return i>new Date(o.getTime()+1e3*l)?null:(i>o&&(n=s),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:ju.duration(t,t.mediaSequence+t.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})}(i,n);if(!c)return d({message:i+" was not found in the stream"});var p=c.segment,h=function(e,t){var i=void 0,n=void 0;try{i=new Date(e),n=new Date(t)}catch(e){}var r=i.getTime();return(n.getTime()-r)/1e3}(p.dateTimeObject,i);if("estimate"===c.type)return 0===a?d({message:i+" is not buffered yet. Try again"}):(s(c.estimatedStart+h),void u.one("seeked",function(){e({programTime:i,playlist:n,retryCount:a-1,seekTo:s,pauseAfterSeek:l,tech:u,callback:d})}));var f=p.start+h;u.one("seeked",function(){return d(null,u.currentTime())}),l&&u.pause(),s(f)},Ku=function(e,t){var i=[],n=void 0;if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return aa.createTimeRanges(i)},Zu=function(e,t){return Ku(e,function(e,i){return e-.1<=t&&i+.1>=t})},Ju=function(e,t){return Ku(e,function(e){return e-1/30>=t})},ed=function(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},td=function(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t},id=function(e,t,i){var n=void 0,r=void 0;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime<=t&&r.endTime>=e&&i.removeCue(r)},nd=function(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e},rd=function(t,i,n){var r=e.WebKitDataCue||e.VTTCue;if(i&&i.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},t),n){var a=nd(t.mediaSource_.duration);if(n.forEach(function(t){var i=t.cueTime+this.timestampOffset;!("number"!=typeof i||e.isNaN(i)||i<0)&&i<1/0&&t.frames.forEach(function(e){var t=new r(i,i,e.value||e.url||e.data||"");t.frame=e,t.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return aa.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return aa.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return aa.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(t),this.metadataTrack_.addCue(t)},this)},t),t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){for(var s=t.metadataTrack_.cues,o=[],l=0;l<s.length;l++)s[l]&&o.push(s[l]);var u=o.reduce(function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e},{}),d=Object.keys(u).sort(function(e,t){return Number(e)-Number(t)});d.forEach(function(e,t){var i=u[e],n=Number(d[t+1])||a;i.forEach(function(e){e.endTime=n})})}}},ad="undefined"!=typeof window?window:{},sd="undefined"==typeof Symbol?"__target":Symbol(),od="application/javascript",ld=ad.BlobBuilder||ad.WebKitBlobBuilder||ad.MozBlobBuilder||ad.MSBlobBuilder,ud=ad.URL||ad.webkitURL||ud&&ud.msURL,dd=ad.Worker;function cd(e,t){return function(i){var n=this;if(!t)return new dd(e);if(dd&&!i){var r=md(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[sd]=new dd(r),function(e,t){if(!e||!t)return;var i=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&ud.revokeObjectURL(e.objURL),i.call(e)}}(this[sd],r),this[sd]}var a={postMessage:function(e){n.onmessage&&setTimeout(function(){n.onmessage({data:e,target:a})})}};t.call(a),this.postMessage=function(e){setTimeout(function(){a.onmessage({data:e,target:n})})},this.isThisThread=!0}}if(dd){var pd,hd=md("self.onmessage = function () {}"),fd=new Uint8Array(1);try{(pd=new dd(hd)).postMessage(fd,[fd.buffer])}catch(e){dd=null}finally{ud.revokeObjectURL(hd),pd&&pd.terminate()}}function md(e){try{return ud.createObjectURL(new Blob([e],{type:od}))}catch(i){var t=new ld;return t.append(e),ud.createObjectURL(t.getBlob(type))}}var gd=new cd("./transmuxer-worker.worker.js",function(e,t){var i=this;!function(){var e=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var i,n,r,a;if(i=e[t])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,n,r,a,s,o,l,u,d,c,p,h,f,m,g,v,y,_,b,T,w,k,S,x,M,C,E,I,D,A,O,N,L,P,j,U,R,z,B,F,$=e,q=Math.pow(2,32)-1;!function(){var e;if(k={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in k)k.hasOwnProperty(e)&&(k[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),M=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),x=new Uint8Array([0,0,0,1]),C=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),E=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),I={video:C,audio:E},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0]),N=new Uint8Array([0,0,0,0,0,0,0,0]),L=N,P=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),j=N,D=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,i,n=[],r=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)r+=n[t].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(e,4),t=0,r=8;t<n.length;t++)i.set(n[t],r),r+=n[t].byteLength;return i},n=function(){return t(k.dinf,t(k.dref,O))},r=function(e){return t(k.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return t(k.hdlr,I[e])},m=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(i[12]=e.samplerate>>>24&255,i[13]=e.samplerate>>>16&255,i[14]=e.samplerate>>>8&255,i[15]=255&e.samplerate),t(k.mdhd,i)},f=function(e){return t(k.mdia,m(e),g(e.type),o(e))},s=function(e){return t(k.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(e){return t(k.minf,"video"===e.type?t(k.vmhd,D):t(k.smhd,A),n(),y(e))},l=function(e,i){for(var n=[],r=i.length;r--;)n[r]=b(i[r]);return t.apply(null,[k.moof,s(e)].concat(n))},u=function(e){for(var i=e.length,n=[];i--;)n[i]=p(e[i]);return t.apply(null,[k.moov,c(4294967295)].concat(n).concat(d(e)))},d=function(e){for(var i=e.length,n=[];i--;)n[i]=T(e[i]);return t.apply(null,[k.mvex].concat(n))},c=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(k.mvhd,i)},v=function(e){var i,n,r=e.samples||[],a=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,a[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t(k.sdtp,a)},y=function(e){return t(k.stbl,_(e),t(k.stts,j),t(k.stsc,L),t(k.stsz,P),t(k.stco,N))},_=function(e){return t(k.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):R(e))},U=function(e){var i,n,r=e.sps||[],a=e.pps||[],s=[],o=[];for(i=0;i<r.length;i++)s.push((65280&r[i].byteLength)>>>8),s.push(255&r[i].byteLength),s=s.concat(Array.prototype.slice.call(r[i]));for(i=0;i<a.length;i++)o.push((65280&a[i].byteLength)>>>8),o.push(255&a[i].byteLength),o=o.concat(Array.prototype.slice.call(a[i]));if(n=[k.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(k.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],s,[a.length],o))),t(k.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],u=e.sarRatio[1];n.push(t(k.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return t.apply(null,n)},R=function(e){return t(k.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},h=function(e){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(k.tkhd,i)},b=function(e){var i,n,r,a,s,o;return i=t(k.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(q+1)),o=Math.floor(e.baseMediaDecodeTime%(q+1)),n=t(k.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),92,"audio"===e.type?(r=w(e,92),t(k.traf,i,n,r)):(a=v(e),r=w(e,a.length+92),t(k.traf,i,n,r,a))},p=function(e){return e.duration=e.duration||4294967295,t(k.trak,h(e),f(e))},T=function(e){var i=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(i[i.length-1]=0),t(k.trex,i)},F=function(e,t){var i=0,n=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,i|n|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function(e,i){var n,r,a,s;for(i+=20+16*(r=e.samples||[]).length,n=F(r,i),s=0;s<r.length;s++)a=r[s],n=n.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,61440&a.flags.degradationPriority,15&a.flags.degradationPriority,(4278190080&a.compositionTimeOffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return t(k.trun,new Uint8Array(n))},z=function(e,i){var n,r,a,s;for(i+=20+8*(r=e.samples||[]).length,n=F(r,i),s=0;s<r.length;s++)a=r[s],n=n.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return t(k.trun,new Uint8Array(n))},w=function(e,t){return"audio"===e.type?z(e,t):B(e,t)};a=function(){return t(k.ftyp,S,x,S,M)};var H,W,V,Y,G,Q,X,K,Z=function(e){return t(k.mdat,e)},J=l,ee=function(e){var t,i=a(),n=u(e);return(t=new Uint8Array(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t},te=function(e,t){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=4*e.length,i.size+=e.byteLength,e.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},ie=function(e){var t,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,n.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},ne=function(e){var t,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},re=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ae=function(e,t){var i,n,r,a,s,o=t||0,l=[];for(i=0;i<e.length;i++)for(a=e[i],n=0;n<a.length;n++)s=a[n],o+=(r=te(s,o)).size,l.push(r);return l},se=function(e){var t,i,n,r,a,s,o=0,l=e.byteLength,u=e.nalCount,d=new Uint8Array(l+4*u),c=new DataView(d.buffer);for(t=0;t<e.length;t++)for(r=e[t],i=0;i<r.length;i++)for(a=r[i],n=0;n<a.length;n++)s=a[n],c.setUint32(o,s.data.byteLength),o+=4,d.set(s.data,o),o+=s.data.byteLength;return d},oe=[33,16,5,32,164,27],le=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ue=function(e){for(var t=[];e--;)t.push(0);return t},de={96000:[oe,[227,64],ue(154),[56]],88200:[oe,[231],ue(170),[56]],64000:[oe,[248,192],ue(240),[56]],48000:[oe,[255,192],ue(268),[55,148,128],ue(54),[112]],44100:[oe,[255,192],ue(268),[55,163,128],ue(84),[112]],32000:[oe,[255,192],ue(268),[55,234],ue(226),[112]],24000:[oe,[255,192],ue(268),[55,255,128],ue(268),[111,112],ue(126),[224]],16000:[oe,[255,192],ue(268),[55,255,128],ue(268),[111,255],ue(269),[223,108],ue(195),[1,192]],12000:[le,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,253,128],ue(259),[56]],11025:[le,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,255,192],ue(268),[55,175,128],ue(108),[112]],8000:[le,ue(268),[3,121,16],ue(47),[7]]},ce=(H=de,Object.keys(H).reduce(function(e,t){return e[t]=new Uint8Array(H[t].reduce(function(e,t){return e.concat(t)},[])),e},{}));Q=function(e,t){return W(G(e,t))},X=function(e,t){return V(Y(e),t)},K=function(e,t,i){return Y(i?e:e-t)};var pe=9e4,he=(W=function(e){return 9e4*e},V=function(e,t){return e*t},Y=function(e){return e/9e4},G=function(e,t){return e/t},Q),fe=X,me=K,ge=function(e,t,i,n){var r,a,s,o,l,u=0,d=0,c=0;if(t.length&&(r=he(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(pe/(e.samplerate/1024)),i&&n&&(u=r-Math.max(i,n),c=(d=Math.floor(u/a))*a),!(d<1||c>pe/2))){for((s=ce[e.samplerate])||(s=t[0].data),o=0;o<d;o++)l=t[0],t.splice(0,0,{data:s,dts:l.dts-a,pts:l.pts-a});e.baseMediaDecodeTime-=Math.floor(fe(c,e.samplerate))}},ve=function(e,t,i){return t.minSegmentDts>=i?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=i&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},ye=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],n.push({size:i.data.byteLength,duration:1024});return n},_e=function(e){var t,i,n=0,r=new Uint8Array(function(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t].data.byteLength;return i}(e));for(t=0;t<e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;return r},be=pe,Te=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},we=function(e,t){var i,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===e.type&&(i*=e.samplerate/be,i=Math.floor(i)),i},ke=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Se=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}t+=r,n=0,r=0}return i},xe=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Me=function(e,t){var i,n,r,a,s=[];if(!(64&t[0]))return s;for(n=31&t[0],i=0;i<n;i++)a={type:3&t[2+(r=3*i)],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],s.push(a));return s},Ce=4,Ee=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Ne(0,0),new Ne(0,1),new Ne(1,0),new Ne(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)};(Ee.prototype=new $).push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&(t=Se(e.escapedRBSP)).payloadType===Ce&&(i=xe(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=Me(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Ee.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return"flush"===e?t.flush():t.partialFlush()},this)},Ee.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},Ee.prototype.flush=function(){return this.flushStream("flush")},Ee.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ee.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},Ee.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Ee.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},Ee.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},Ee.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var Ie={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},De=function(e){return null===e?"":(e=Ie[e]||e,String.fromCharCode(e))},Ae=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Oe=function(){for(var e=[],t=15;t--;)e.push("");return e},Ne=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Oe();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Oe();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Oe()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,r))a=De((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=De((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var s=Ae.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),a=De(n),a+=De(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Ne.prototype=new $,Ne.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ne.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Oe(),this.nonDisplayed_=Oe(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ne.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ne.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Ne.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Ne.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Ne.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Ne.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Ne.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Ne.prototype.isNormalChar=function(e){return e>=32&&e<=127},Ne.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Oe(),this.displayed_=Oe()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ne.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},Ne.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},Ne.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},Ne.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},Ne.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ne.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var Le={CaptionStream:Ee,Cea608Stream:Ne},Pe={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},je=function(e,t){var i=1;for(e>t&&(i=-1);Math.abs(t-e)>4294967296;)e+=8589934592*i;return e},Ue=function e(t){var i,n;e.prototype.init.call(this),this.type_=t||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=je(e.dts,n),e.pts=je(e.pts,n),i=e.dts,this.trigger("data",e))},this.flush=function(){n=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ue.prototype=new $;var Re,ze=Ue,Be=function(e,t,i){var n,r="";for(n=t;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r},Fe=function(e,t,i){return decodeURIComponent(Be(e,t,i))},$e=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},qe={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Fe(e.data,1,t),e.value=Fe(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Fe(e.data,1,t),e.url=Fe(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,i;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(i=e.data,unescape(Be(i,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(Re=function(e){var t,i={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},n=0,r=[],a=0;if(Re.prototype.init.call(this),this.dispatchType=Pe.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,s,o,l,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))i.debug&&console.log("Skipping unrecognized metadata packet");else if(r.push(e),a+=e.data.byteLength,1===r.length&&(n=$e(e.data.subarray(6,10)),n+=10),!(a<n)){for(t={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},u=0;u<n;)t.data.set(r[0].data.subarray(0,n-u),u),u+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();s=10,64&t.data[5]&&(s+=4,s+=$e(t.data.subarray(10,14)),n-=$e(t.data.subarray(16,20)));do{if((o=$e(t.data.subarray(s+4,s+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((l={id:String.fromCharCode(t.data[s],t.data[s+1],t.data[s+2],t.data[s+3]),data:t.data.subarray(s+10,s+o+10)}).key=l.id,qe[l.id]&&(qe[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var d=l.data,c=(1&d[3])<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;c*=4,c+=3&d[7],l.timeStamp=c,void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),s+=10,s+=o}while(s<n);this.trigger("data",t)}}}).prototype=new $;var He,We,Ve,Ye=Re,Ge=ze;(He=function(){var e=new Uint8Array(188),t=0;He.prototype.init.call(this),this.push=function(i){var n,r=0,a=188;for(t?((n=new Uint8Array(i.byteLength+t)).set(e.subarray(0,t)),n.set(i,t),t=0):n=i;a<n.byteLength;)71!==n[r]||71!==n[a]?(r++,a++):(this.trigger("data",n.subarray(r,a)),r+=188,a+=188);r<n.byteLength&&(e.set(n.subarray(r),0),t=n.byteLength-r)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new $,(We=function(){var e,t,i,n;We.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var r=0;n.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},i=function(e,t){var i,r;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<i;){var a=e[r],s=(31&e[r+1])<<8|e[r+2];a===Pe.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=s:a===Pe.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=s:a===Pe.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][s]=a),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===i.pid)i.type="pat",e(t.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",e(t.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,i]):this.processPes_(t,n,i)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=Pe.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=Pe.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new $,We.STREAM_TYPES={h264:27,adts:15},(Ve=function(){var e,t=this,i={data:[],size:0},n={data:[],size:0},r={data:[],size:0},a=function(e,i,n){var r,a,s=new Uint8Array(e.size),o={type:i},l=0,u=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,l=0;l<e.data.length;l++)a=e.data[l],s.set(a.data,u),u+=a.data.byteLength;var d,c,p;d=s,(c=o).packetLength=6+(d[4]<<8|d[5]),c.dataAlignmentIndicator=0!=(4&d[6]),192&(p=d[7])&&(c.pts=(14&d[9])<<27|(255&d[10])<<20|(254&d[11])<<12|(255&d[12])<<5|(254&d[13])>>>3,c.pts*=4,c.pts+=(6&d[13])>>>1,c.dts=c.pts,64&p&&(c.dts=(14&d[14])<<27|(255&d[15])<<20|(254&d[16])<<12|(255&d[17])<<5|(254&d[18])>>>3,c.dts*=4,c.dts+=(6&d[18])>>>1)),c.data=d.subarray(9+d[8]),r="video"===i||o.packetLength<=e.size,(n||r)&&(e.size=0,e.data.length=0),r&&t.trigger("data",o)}};Ve.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,t;switch(s.streamType){case Pe.H264_STREAM_TYPE:case Pe.H264_STREAM_TYPE:e=i,t="video";break;case Pe.ADTS_STREAM_TYPE:e=n,t="audio";break;case Pe.METADATA_STREAM_TYPE:e=r,t="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&a(e,t,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};null!==(e=s.programMapTable).video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}})[s.type]()},this.reset=function(){i.size=0,i.data.length=0,n.size=0,n.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(i,"video"),a(n,"audio"),a(r,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new $;var Qe={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:He,TransportParseStream:We,ElementaryStream:Ve,TimestampRolloverStream:Ge,CaptionStream:Le.CaptionStream,Cea608Stream:Le.Cea608Stream,MetadataStream:Ye};for(var Xe in Pe)Pe.hasOwnProperty(Xe)&&(Qe[Xe]=Pe[Xe]);var Ke,Ze=Qe,Je=pe,et=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Ke=function(e){var t,i=0;Ke.prototype.init.call(this),this.push=function(n){var r,a,s,o,l,u,d=0;if(e||(i=0),"audio"===n.type)for(t?(o=t,(t=new Uint8Array(o.byteLength+n.data.byteLength)).set(o),t.set(n.data,o.byteLength)):t=n.data;d+5<t.length;)if(255===t[d]&&240==(246&t[d+1])){if(a=2*(1&~t[d+1]),r=(3&t[d+3])<<11|t[d+4]<<3|(224&t[d+5])>>5,u=(l=1024*(1+(3&t[d+6])))*Je/et[(60&t[d+2])>>>2],s=d+r,t.byteLength<s)return;if(this.trigger("data",{pts:n.pts+i*u,dts:n.dts+i*u,sampleCount:l,audioobjecttype:1+(t[d+2]>>>6&3),channelcount:(1&t[d+2])<<2|(192&t[d+3])>>>6,samplerate:et[(60&t[d+2])>>>2],samplingfrequencyindex:(60&t[d+2])>>>2,samplesize:16,data:t.subarray(d+7+a,s)}),i++,t.byteLength===s)return void(t=void 0);t=t.subarray(s)}else d++},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new $;var tt,it,nt,rt=Ke,at=function(e){var t=e.byteLength,i=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(r,r+s)),i=new DataView(a.buffer).getUint32(0),n=8*s,t-=s},this.skipBits=function(e){var r;n>e?(i<<=e,n-=e):(e-=n,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),i<<=e,n-=e)},this.readBits=function(e){var r=Math.min(n,e),a=i>>>32-r;return(n-=r)>0?i<<=r:t>0&&this.loadWord(),(r=e-r)>0?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(0!=(i&2147483648>>>e))return i<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(it=function(){var e,t,i=0;it.prototype.init.call(this),this.push=function(n){var r;t?((r=new Uint8Array(t.byteLength+n.data.byteLength)).set(t),r.set(n.data,t.byteLength),t=r):t=n.data;for(var a=t.byteLength;i<a-3;i++)if(1===t[i+2]){e=i+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}i+3!==e-2&&this.trigger("data",t.subarray(i+3,e-2));do{e++}while(1!==t[e]&&e<a);i=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(i+3,e-2)),i=e-2,e+=3;break;default:e+=3}t=t.subarray(i),e-=i,i=0},this.reset=function(){t=null,i=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(i+3)),t=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new $,nt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(tt=function(){var e,t,i,n,r,a,s,o=new it;tt.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,i=e.pts,n=e.dts,o.push(e))},o.on("data",function(s){var o={trackId:t,pts:i,dts:n,data:s};switch(31&s[0]){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)}),o.on("done",function(){e.trigger("done")}),o.on("partialdone",function(){e.trigger("partialdone")}),o.on("reset",function(){e.trigger("reset")}),o.on("endedtimeline",function(){e.trigger("endedtimeline")}),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},s=function(e,t){var i,n=8,r=8;for(i=0;i<e;i++)0!==r&&(r=(n+t.readExpGolomb()+256)%256),n=0===r?n:r},r=function(e){for(var t,i,n=e.byteLength,r=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=e[s];return i},a=function(e){var t,i,n,r,a,o,l,u,d,c,p,h,f,m=0,g=0,v=0,y=0,_=1;if(i=(t=new at(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),nt[i]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==a?8:12,f=0;f<p;f++)t.readBoolean()&&s(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),f=0;f<l;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),d=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}h&&(_=h[0]/h[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:Math.ceil((16*(u+1)-2*m-2*g)*_),height:(2-c)*(d+1)*16-2*v-2*y,sarRatio:h}}}).prototype=new $;var st,ot={H264Stream:tt,NalByteStream:it},lt=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},ut=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10},dt=function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i};(st=function(){var e=new Uint8Array,t=0;st.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(i){var n,r,a,s,o=0,l=0;for(e.length?(s=e.length,(e=new Uint8Array(i.byteLength+s)).set(e.subarray(0,s)),e.set(i,s)):e=i;e.length-l>=3;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255!=(255&e[l])||240!=(240&e[l+1]))l++;else{if(e.length-l<7)break;if(l+(o=dt(e,l))>e.length)break;a={type:"audio",data:e.subarray(l,l+o),pts:t,dts:t},this.trigger("data",a),l+=o}else{if(e.length-l<10)break;if(l+(o=ut(e,l))>e.length)break;r={type:"timed-metadata",data:e.subarray(l,l+o)},this.trigger("data",r),l+=o}n=e.length-l,e=n>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new $;var ct,pt,ht,ft,mt=st,gt=ot.H264Stream,vt=lt,yt=pe,_t=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],bt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Tt=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},wt=function(e,t,i,n,r,a){return{start:{dts:e,pts:e+(i-t)},end:{dts:e+(n-t),pts:e+(r-i)},prependedContentDuration:a,baseMediaDecodeTime:e}};(pt=function(e,t){var i=[],n=0,r=0,a=0,s=1/0;t=t||{},pt.prototype.init.call(this),this.push=function(t){ke(e,t),e&&_t.forEach(function(i){e[i]=t[i]}),i.push(t)},this.setEarliestDts=function(t){r=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var o,l,u,d,c;0!==i.length?(o=ve(i,e,r),e.baseMediaDecodeTime=we(e,t.keepOriginalTimestamps),ge(e,o,a,s),e.samples=ye(o),u=Z(_e(o)),i=[],l=J(n,[e]),d=new Uint8Array(l.byteLength+u.byteLength),n++,d.set(l),d.set(u,l.byteLength),Te(e),c=Math.ceil(1024*yt/e.samplerate),o.length&&this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+o.length*c}),this.trigger("data",{track:e,boxes:d}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Te(e),i=[],this.trigger("reset")}}).prototype=new $,(ct=function(e,t){var i,n,r=0,a=[],s=[];t=t||{},ct.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){ke(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],bt.forEach(function(t){e[t]=i[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var i,n,o,l,u,d,c,p,h=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=ie(a),(o=ne(i))[0][0].keyFrame||((n=this.getGopForFusion_(a[0],e))?(h=n.duration,o.unshift(n),o.byteLength+=n.byteLength,o.nalCount+=n.nalCount,o.pts=n.pts,o.dts=n.dts,o.duration+=n.duration):o=re(o)),s.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Te(e),o=f}ke(e,o),e.samples=ae(o),u=Z(se(o)),e.baseMediaDecodeTime=we(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),c=o[0],p=o[o.length-1],this.trigger("segmentTimingInfo",wt(e.baseMediaDecodeTime,c.dts,c.pts,p.dts+p.duration,p.pts+p.duration,h)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=J(r,[e]),d=new Uint8Array(l.byteLength+u.byteLength),r++,d.set(l),d.set(u,l.byteLength),this.trigger("data",{track:e,boxes:d}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){Te(e),i=void 0,n=void 0},this.getGopForFusion_=function(t){var i,n,r,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)r=(a=this.gopCache_[s]).gop,e.pps&&Tt(e.pps[0],a.pps[0])&&e.sps&&Tt(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||(i=t.dts-r.dts-r.duration)>=-1e4&&i<=45e3&&(!n||o>i)&&(n=a,o=i));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,i,n,r,a,o,l,u;for(a=e.byteLength,o=e.nalCount,l=e.duration,t=i=0;t<s.length&&i<e.length&&(n=s[t],r=e[i],n.pts!==r.pts);)r.pts>n.pts?t++:(i++,a-=r.byteLength,o-=r.nalCount,l-=r.duration);return 0===i?e:i===e.length?null:((u=e.slice(i)).byteLength=a,u.duration=l,u.nalCount=o,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,i,n,r,a,o,l;for(t=s.length-1,i=e.length-1,a=null,o=!1;t>=0&&i>=0;){if(n=s[t],r=e[i],n.pts===r.pts){o=!0;break}n.pts>r.pts?t--:(t===s.length-1&&(a=i),i--)}if(!o&&null===a)return null;if(0===(l=o?i:a))return e;var u=e.slice(l),d=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=d.byteLength,u.duration=d.duration,u.nalCount=d.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){s=e}}).prototype=new $,(ft=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ft.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new $,ft.prototype.flush=function(e){var t,i,n,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,bt.forEach(function(e){s.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,_t.forEach(function(e){s.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,n=ee(this.pendingTracks),s.initSegment=new Uint8Array(n.byteLength),s.initSegment.set(n),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=me(t.startPts,o,this.keepOriginalTimestamps),t.endTime=me(t.endPts,o,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=me(i.pts,o,this.keepOriginalTimestamps),s.metadata.push(i);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),r=0;r<s.captions.length;r++)t=s.captions[r],this.trigger("caption",t);for(r=0;r<s.metadata.length;r++)i=s.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ft.prototype.setRemux=function(e){this.remuxTracks=e},(ht=function(e){var t,i,n=this,r=!0;ht.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new Ze.MetadataStream,r.aacStream=new mt,r.audioTimestampRolloverStream=new Ze.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Ze.TimestampRolloverStream("timed-metadata"),r.adtsStream=new rt,r.coalesceStream=new ft(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",function(e){r.aacStream.setTimestamp(e.timeStamp)}),r.aacStream.on("data",function(a){"timed-metadata"!==a.type||r.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new pt(i,e),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t})}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new Ze.MetadataStream,r.packetStream=new Ze.TransportPacketStream,r.parseStream=new Ze.TransportParseStream,r.elementaryStream=new Ze.ElementaryStream,r.timestampRolloverStream=new Ze.TimestampRolloverStream,r.adtsStream=new rt,r.h264Stream=new gt,r.captionStream=new Ze.CaptionStream,r.coalesceStream=new ft(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)t||"video"!==a.tracks[s].type?i||"audio"!==a.tracks[s].type||((i=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new ct(t,e),r.videoSegmentStream.on("timelineStartInfo",function(e){i&&(i.timelineStartInfo=e,r.audioSegmentStream.setEarliestDts(e.dts))}),r.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",function(e){i&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),r.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new pt(i,e),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t})}}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",function(e){e.dispatchType=r.metadataStream.dispatchType,n.trigger("id3Frame",e)}),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(n){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,Te(i),e.keepOriginalTimestamps||(i.timelineStartInfo.baseMediaDecodeTime=n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,Te(t),r.captionStream.reset(),e.keepOriginalTimestamps||(t.timelineStartInfo.baseMediaDecodeTime=n)),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var i=this.transmuxPipeline_;e.remux=t,i&&i.coalesceStream&&i.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(r){var t=vt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new $;var kt={Transmuxer:ht,VideoSegmentStream:ct,AudioSegmentStream:pt,AUDIO_PROPERTIES:_t,VIDEO_PROPERTIES:bt,generateVideoSegmentTimingInfo:wt},St=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},xt=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Mt=function(){function e(t,i){St(this,e),this.options=i||{},this.self=t,this.init()}return xt(e,[{key:"init",value:function(){var e,t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new kt.Transmuxer(this.options),e=this.self,(t=this.transmuxer).on("data",function(t){var i=t.initSegment;t.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),t.captionStream&&t.captionStream.on("data",function(t){e.postMessage({action:"caption",data:t})}),t.on("done",function(t){e.postMessage({action:"done"})}),t.on("gopInfo",function(t){e.postMessage({action:"gopInfo",gopInfo:t})}),t.on("videoSegmentTimingInfo",function(t){e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})})}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),e}();new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new Mt(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new Mt(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(i)}()}),vd={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},yd=function(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})})},_d=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i={codecCount:0};return i.codecCount=t.split(",").length,i.codecCount=i.codecCount||2,(e=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(t))&&(i.videoCodec=e[2],i.videoObjectTypeIndicator=e[3]),i.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t),i.audioProfile=i.audioProfile&&i.audioProfile[2],i},bd=function(e,t,i){return e+"/"+t+'; codecs="'+i.filter(function(e){return!!e}).join(", ")+'"'},Td=function(e,t){var i=function(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"}(t),n=function(e){var t=e.attributes||{};return t.CODECS?_d(t.CODECS):vd}(t),r=t.attributes||{},a=!0,s=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&r.AUDIO){var o=e.mediaGroups.AUDIO[r.AUDIO];if(o)for(var l in s=!0,a=!1,o)if(!o[l].uri&&!o[l].playlists){a=!0;break}}s&&!n.audioProfile&&(a||(n.audioProfile=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var r=i[n];if(r.default&&r.playlists)return _d(r.playlists[0].attributes.CODECS).audioProfile}return null}(e,r.AUDIO)),n.audioProfile||(aa.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),n.audioProfile=vd.audioProfile));var u={};n.videoCodec&&(u.video=""+n.videoCodec+n.videoObjectTypeIndicator),n.audioProfile&&(u.audio="mp4a.40."+n.audioProfile);var d=bd("audio",i,[u.audio]),c=bd("video",i,[u.video]),p=bd("video",i,[u.video,u.audio]);return s?!a&&u.video?[c,d]:a||u.video?[p,d]:[d,d]:u.video?[p]:[d]},wd=function(e){var t={type:"",parameters:{}},i=e.trim().split(";");return t.type=i.shift().trim(),i.forEach(function(e){var i=e.trim().split("=");if(i.length>1){var n=i[0].replace(/"/g,"").trim(),r=i[1].replace(/"/g,"").trim();t.parameters[n]=r}}),t},kd=function(e){return/mp4a\.\d+.\d+/i.test(e)},Sd=function(e){return/avc1\.[\da-f]+/i.test(e)},xd=function(e,t,i){if(null==t||!e.length)return[];var n=Math.ceil(9e4*(t-i+3)),r=void 0;for(r=0;r<e.length&&!(e[r].pts>n);r++);return e.slice(r)},Md=function(e,t,i){var n=null,r=null,a=0,s=[],o=[];if(!e&&!t)return aa.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(i)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return aa.createTimeRange();for(var l=e.buffered,u=t.buffered,d=l.length;d--;)s.push({time:l.start(d),type:"start"}),s.push({time:l.end(d),type:"end"});for(d=u.length;d--;)s.push({time:u.start(d),type:"start"}),s.push({time:u.end(d),type:"end"});for(s.sort(function(e,t){return e.time-t.time}),d=0;d<s.length;d++)"start"===s[d].type?2===++a&&(n=s[d].time):"end"===s[d].type&&1===--a&&(r=s[d].time),null!==n&&null!==r&&(o.push([n,r]),n=null,r=null);return aa.createTimeRanges(o)},Cd=function(e){function t(e,i){su(this,t);var n=uu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,aa.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=e,n.codecs_=i,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=aa.browser.IE_VERSION>=11;var r={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach(function(e){kd(e)?n.audioCodec_=e:Sd(e)&&(n.videoCodec_=e)}),n.transmuxer_=new gd,n.transmuxer_.postMessage({action:"init",options:r}),n.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):"videoSegmentTimingInfo"===e.data.action?n.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo):void 0},Object.defineProperty(n,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(n,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(n,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function(){return Md(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}return lu(t,e),ou(t,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),function(e,t,i){var n=t.player_;if(i.captions&&i.captions.length)for(var r in e.inbandTextTracks_||(e.inbandTextTracks_={}),i.captionStreams)if(!e.inbandTextTracks_[r]){n.tech_.trigger({type:"usage",name:"hls-608"});var a=n.textTracks().getTrackById(r);e.inbandTextTracks_[r]=a||n.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}i.metadata&&i.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType)}(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"videoSegmentTimingInfo_",value:function(e){var t={start:{decode:e.start.dts/9e4,presentation:e.start.pts/9e4},end:{decode:e.end.dts/9e4,presentation:e.end.pts/9e4},baseMediaDecodeTime:e.baseMediaDecodeTime/9e4};e.prependedContentDuration&&(t.prependedContentDuration=e.prependedContentDuration/9e4),this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}},{key:"createRealSourceBuffers_",value:function(){var e=this,t=["audio","video"];t.forEach(function(i){if(e[i+"Codec_"]&&!e[i+"Buffer_"]){var n=null;if(e.mediaSource_[i+"Buffer_"])(n=e.mediaSource_[i+"Buffer_"]).updating=!1;else{var r=i+'/mp4;codecs="'+e[i+"Codec_"]+'"';n=function(e,t){var i=e.addSourceBuffer(t),n=Object.create(null);n.updating=!1,n.realBuffer_=i;var r=function(e){"function"==typeof i[e]?n[e]=function(){return i[e].apply(i,arguments)}:void 0===n[e]&&Object.defineProperty(n,e,{get:function(){return i[e]},set:function(t){return i[e]=t}})};for(var a in i)r(a);return n}(e.mediaSource_.nativeMediaSource_,r),e.mediaSource_[i+"Buffer_"]=n}e[i+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(r){n.addEventListener(r,function(){if("audio"!==i||!e.audioDisabled_)return"updateend"===r&&(e[i+"Buffer_"].updating=!1),t.every(function(t){return!("audio"!==t||!e.audioDisabled_)||(i===t||!e[t+"Buffer_"]||!e[t+"Buffer_"].updating)})?e.trigger(r):void 0})})}})}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:xd(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=function(e,t,i){if(!t.length)return e;if(i)return t.slice();for(var n=t[0].pts,r=0;r<e.length&&!(e[r].pts>=n);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=function(e,t,i,n){for(var r=Math.ceil(9e4*(t-n)),a=Math.ceil(9e4*(i-n)),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var l=o+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),s.splice(l,o-l+1),s}(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),id(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)id(e,t,this.inbandTextTracks_[i])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length)return this.trigger("updateend"),void(this.bufferUpdating_=!1);e=this.pendingBuffers_.reduce(function(e,t){var i=t.type,n=t.data,r=t.initSegment;return e[i].segments.push(n),e[i].bytes+=n.byteLength,e[i].initSegment=r,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[i].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),rd(this,e.captions,e.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var i=0,n=void 0;if(e.bytes){n=new Uint8Array(e.bytes),e.segments.forEach(function(e){n.set(e,i),i+=e.byteLength});try{t.updating=!0,t.appendBuffer(n)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}},{key:"dispose",value:function(){this.transmuxer_&&this.transmuxer_.terminate(),this.trigger("dispose"),this.off()}}]),t}(aa.EventTarget),Ed=function(i){function n(){su(this,n);var i=uu(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),r=void 0;for(r in i.nativeMediaSource_=new e.MediaSource,i.nativeMediaSource_)r in n.prototype||"function"!=typeof i.nativeMediaSource_[r]||(i[r]=i.nativeMediaSource_[r].bind(i.nativeMediaSource_));return i.duration_=NaN,Object.defineProperty(i,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){this.duration_=e,e===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(i,"seekable",{get:function(){return this.duration_===1/0?aa.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(i,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(i,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),i.sourceBuffers=[],i.activeSourceBuffers_=[],i.updateActiveSourceBuffers_=function(){if(i.activeSourceBuffers_.length=0,1===i.sourceBuffers.length){var e=i.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void i.activeSourceBuffers_.push(e)}for(var t=!1,n=!0,r=0;r<i.player_.audioTracks().length;r++){var a=i.player_.audioTracks()[r];if(a.enabled&&"main"!==a.kind){t=!0,n=!1;break}}i.sourceBuffers.forEach(function(e,r){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=t;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,n=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=r?n:!n,e.audioDisabled_))return;i.activeSourceBuffers_.push(e)})},i.onPlayerMediachange_=function(){i.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},i.onHlsReset_=function(){i.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},i.onHlsSegmentTimeMapping_=function(e){i.sourceBuffers.forEach(function(t){return t.timeMapping_=e.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},i),i.on("sourceopen",function(e){var n=t.querySelector('[src="'+i.url_+'"]');n&&(i.player_=aa(n.parentNode),i.player_&&(i.player_.tech_.on("hls-reset",i.onHlsReset_),i.player_.tech_.on("hls-segment-time-mapping",i.onHlsSegmentTimeMapping_),i.player_.audioTracks&&i.player_.audioTracks()&&(i.player_.audioTracks().on("change",i.updateActiveSourceBuffers_),i.player_.audioTracks().on("addtrack",i.updateActiveSourceBuffers_),i.player_.audioTracks().on("removetrack",i.updateActiveSourceBuffers_)),i.player_.on("mediachange",i.onPlayerMediachange_)))}),i.on("sourceended",function(e){for(var t=nd(i.duration),n=0;n<i.sourceBuffers.length;n++){var r=i.sourceBuffers[n],a=r.metadataTrack_&&r.metadataTrack_.cues;a&&a.length&&(a[a.length-1].endTime=t)}}),i.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),i}return lu(n,i),ou(n,[{key:"addSeekableRange_",value:function(e,t){var i=void 0;if(this.duration!==1/0)throw(i=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",i.code=11,i;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,i=wd(e);if(/^(video|audio)\/mp2t$/i.test(i.type)){var n=[];i.parameters&&i.parameters.codecs&&(n=i.parameters.codecs.split(","),n=(n=yd(n)).filter(function(e){return kd(e)||Sd(e)})),0===n.length&&(n=["avc1.4d400d","mp4a.40.2"]),t=new Cd(this,n),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}},{key:"dispose",value:function(){this.trigger("dispose"),this.off(),this.sourceBuffers.forEach(function(e){e.dispose&&e.dispose()}),this.sourceBuffers.length=0}}]),n}(aa.EventTarget),Id=0;aa.mediaSources={};var Dd=function(e,t){var i=aa.mediaSources[e];if(!i)throw new Error("Media Source not found (Video.js)");i.trigger({type:"sourceopen",swfId:t})},Ad=function(){return!!e.MediaSource&&!!e.MediaSource.isTypeSupported&&e.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},Od=function(){if(this.MediaSource={open:Dd,supportsNativeMediaSources:Ad},Ad())return new Ed;throw new Error("Cannot use create a virtual MediaSource for this video")};Od.open=Dd,Od.supportsNativeMediaSources=Ad;var Nd={createObjectURL:function(t){var i=void 0;return t instanceof Ed?(i=e.URL.createObjectURL(t.nativeMediaSource_),t.url_=i,i):t instanceof Ed?(i="blob:vjs-media-source/"+Id,Id++,aa.mediaSources[i]=t,i):(i=e.URL.createObjectURL(t),t.url_=i,i)}};aa.MediaSource=Od,aa.URL=Nd;var Ld=aa.EventTarget,Pd=aa.mergeOptions,jd=function(e,t){for(var i=void 0,n=Pd(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),r=0;r<t.playlists.length;r++){var a=mu(n,t.playlists[r]);a?n=a:i=!0}return fu(t,function(e,t,r,a){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id,o=mu(n,e.playlists[0]);o&&((n=o).mediaGroups[t][r][a].playlists[0]=n.playlists[s],i=!1)}}),i?null:n},Ud=function(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+"-"+e.byterange.offset+"-"+t},Rd=function(e,t){var i,n,r={};for(var a in e){var s=e[a].sidx;if(s){var o=Ud(s);if(!t[o])break;var l=t[o].sidxInfo;i=l,n=s,(Boolean(!i.map&&!n.map)||Boolean(i.map&&n.map&&i.map.byterange.offset===n.map.byterange.offset&&i.map.byterange.length===n.map.byterange.length))&&i.uri===n.uri&&i.byterange.offset===n.byterange.offset&&i.byterange.length===n.byterange.length&&(r[o]=t[o])}}return r},zd=function(e,t,i,n,r){var a={uri:au(n.handleManifestRedirects,e.resolvedUri),byterange:e.byterange,playlist:t};return i(aa.mergeOptions(a,{responseType:"arraybuffer",headers:Bu(a)}),r)},Bd=function(t){function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3];su(this,i);var a=uu(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),s=n.withCredentials,o=void 0!==s&&s,l=n.handleManifestRedirects,u=void 0!==l&&l;if(a.hls_=t,a.withCredentials=o,a.handleManifestRedirects=u,!e)throw new Error("A non-empty playlist URL or playlist is required");return a.on("minimumUpdatePeriod",function(){a.refreshXml_()}),a.on("mediaupdatetimeout",function(){a.refreshMedia_(a.media().id)}),a.state="HAVE_NOTHING",a.loadedPlaylists_={},"string"==typeof e?(a.srcUrl=e,a.sidxMapping_={},uu(a)):(a.setupChildLoader(r,e),a)}return lu(i,Ld),ou(i,[{key:"setupChildLoader",value:function(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t}},{key:"dispose",value:function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},e.clearTimeout(this.minimumUpdatePeriodTimeout_),e.clearTimeout(this.mediaRequest_),e.clearTimeout(this.mediaUpdateTimeout),this.off()}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"sidxRequestFinished_",value:function(e,t,i,n){var r=this;return function(a,s){if(r.request){if(r.request=null,a)return r.error={status:s.status,message:"DASH playlist request error at URL: "+e.uri,response:s.response,code:2},i&&(r.state=i),r.trigger("error"),n(t,null);var o=new Uint8Array(s.response),l=el.parseSidx(o.subarray(8));return n(t,l)}}}},{key:"media",value:function(t){var i=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}var r=!this.media_||t.id!==this.media_.id;if(r&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r)if(this.media_&&this.trigger("mediachanging"),t.sidx){var a=void 0,s=void 0;this.masterPlaylistLoader_?(a=this.masterPlaylistLoader_.master,s=this.masterPlaylistLoader_.sidxMapping_):(a=this.master,s=this.sidxMapping_);var o=Ud(t.sidx);s[o]={sidxInfo:t.sidx},this.request=zd(t.sidx,t,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(t,a,n,function(e,r){if(!e||!r)throw new Error("failed to request sidx");s[o].sidx=r,i.haveMetadata({startingState:n,playlist:e.playlists[t.id]})}))}else this.mediaRequest_=e.setTimeout(this.haveMetadata.bind(this,{startingState:n,playlist:t}),0)}},{key:"haveMetadata",value:function(e){var t=e.startingState,i=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,this.mediaRequest_=null,this.refreshMedia_(i.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout),e.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(t){var i=this;e.clearTimeout(this.mediaUpdateTimeout),e.clearTimeout(this.minimumUpdatePeriodTimeout_);var n=this.media();if(t){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=e.setTimeout(function(){return i.load()},r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var e=Ho(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});e.uri=this.srcUrl;for(var t=0;t<e.playlists.length;t++){var i="placeholder-uri-"+t;e.playlists[t].uri=i}return fu(e,function(t,i,n,r){if(t.playlists&&t.playlists.length){var a="placeholder-uri-"+i+"-"+n+"-"+r,s=gu(0,a);t.playlists[0].uri=a,t.playlists[0].id=s,e.playlists[s]=t.playlists[0],e.playlists[a]=t.playlists[0]}}),vu(e),yu(e),e}},{key:"start",value:function(){var t=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=e.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,i){if(t.request){if(t.request=null,e)return t.error={status:i.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:i.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.masterXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?t.masterLoaded_=Date.parse(i.responseHeaders.date):t.masterLoaded_=Date.now(),t.srcUrl=au(t.handleManifestRedirects,t.srcUrl,i),t.syncClientServerClock_(t.onClientServerClockSync_.bind(t))}})}},{key:"syncClientServerClock_",value:function(e){var t=this,i=Wo(this.masterXml_);return null===i?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===i.method?(this.clientOffset_=i.value-Date.now(),e()):void(this.request=this.hls_.xhr({uri:ru(this.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},function(n,r){if(t.request){if(n)return t.clientOffset_=t.masterLoaded_-Date.now(),e();var a=void 0;a="HEAD"===i.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.clientOffset_=a-Date.now(),e()}}))}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var t=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=e.setTimeout(function(){t.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var t=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,n){if(t.request){if(t.request=null,i)return t.error={status:n.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.masterXml_=n.responseText,t.sidxMapping_=function(e,t,i,n){var r=Ho(e,{manifestUri:t,clientOffset:i}),a=Rd(r.playlists,n);return fu(r,function(e,t,i,r){if(e.playlists&&e.playlists.length){var s=e.playlists;a=Pd(a,Rd(s,n))}}),a}(t.masterXml_,t.srcUrl,t.clientOffset_,t.sidxMapping_);var r=t.parseMasterXml(),a=jd(t.master,r),s=t.media().sidx;if(a)if(s){var o=Ud(s);if(!t.sidxMapping_[o]){var l=t.media();t.request=zd(l.sidx,l,t.hls_.xhr,{handleManifestRedirects:t.handleManifestRedirects},t.sidxRequestFinished_(l,r,t.state,function(i,n){if(!i||!n)throw new Error("failed to request sidx on minimumUpdatePeriod");t.sidxMapping_[o].sidx=n,t.minimumUpdatePeriodTimeout_=e.setTimeout(function(){t.trigger("minimumUpdatePeriod")},t.master.minimumUpdatePeriod),t.refreshMedia_(t.media().id)}))}}else t.master=a;t.minimumUpdatePeriodTimeout_=e.setTimeout(function(){t.trigger("minimumUpdatePeriod")},t.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(t){var i=this;if(!t)throw new Error("refreshMedia_ must take a media id");var n=void 0,r=void 0;this.masterPlaylistLoader_?(n=this.masterPlaylistLoader_.master,r=this.masterPlaylistLoader_.parseMasterXml()):(n=this.master,r=this.parseMasterXml());var a=jd(n,r);a?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=a:this.master=a,this.media_=a.playlists[t]):(this.media_=r.playlists[t],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=e.setTimeout(function(){i.trigger("mediaupdatetimeout")},_u(this.media(),!!a))),this.trigger("loadedplaylist")}}]),i}(),Fd=function(e){return aa.log.debug?aa.log.debug.bind(aa,"VHS:",e+" >"):function(){}};function $d(){}var qd=function(){function e(t,i,n,r){su(this,e),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=n,this.mimeType_=i,this.logger_=Fd("SourceUpdater["+n+"]["+i+"]"),"closed"===t.readyState?t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,i,r)):this.createSourceBuffer_(i,r)}return ou(e,[{key:"createSourceBuffer_",value:function(e,t){var i=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",function(){i.start_()}):this.start_()}},{key:"start_",value:function(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.sourceBuffer_.removing=!1,e.logger_("buffered ["+ed(e.buffered())+"]"),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function(e,t){var i=this;this.processedAppend_=!0,this.queueCallback_(function(){e.videoSegmentTimingInfoCallback&&i.sourceBuffer_.addEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),i.sourceBuffer_.appendBuffer(e.bytes)},function(){e.videoSegmentTimingInfoCallback&&i.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),t()})}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:aa.createTimeRanges()}},{key:"remove",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$d;this.processedAppend_&&this.queueCallback_(function(){i.logger_("remove ["+e+" => "+t+"]"),i.sourceBuffer_.removing=!0,i.sourceBuffer_.remove(e,t)},n)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==$d}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e,t.runCallback_()}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){var e=this,t=function t(){e.sourceBuffer_&&"open"===e.mediaSource.readyState&&e.sourceBuffer_.abort(),e.sourceBuffer_.removeEventListener("updateend",t)};this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",t):t()}}]),e}(),Hd={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Wd=2,Vd=-101,Yd=-102,Gd=function(e){e.forEach(function(e){e.abort()})},Qd=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Vd,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Yd,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Wd,xhr:t}:null},Xd=function(e,t,i){var n=0,r=!1;return function(a,s){if(!r)return a?(r=!0,Gd(e),i(a,s)):(n+=1)===e.length?(s.endOfAllRequests=Date.now(),s.encryptedBytes?function(e,t,i){e.addEventListener("message",function n(r){if(r.data.source===t.requestId){e.removeEventListener("message",n);var a=r.data.decrypted;return t.bytes=new Uint8Array(a.bytes,a.byteOffset,a.byteLength),i(null,t)}});var n=void 0;n=t.key.bytes.slice?t.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.key.bytes)),e.postMessage(Hu({source:t.requestId,encrypted:t.encryptedBytes,key:n,iv:t.key.iv}),[t.encryptedBytes.buffer,n.buffer])}(t,s,i):i(null,s)):void 0}},Kd=function(e,t){return function(i){var n,r,a;return e.stats=aa.mergeOptions(e.stats,(r=(n=i).target,(a={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-r.requestTime||0}).bytesReceived=n.loaded,a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3),a)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(i,e)}},Zd=function(e,t,i,n,r,a,s){var o=[],l=Xd(o,i,s);if(r.key&&!r.key.bytes){var u=e(aa.mergeOptions(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),function(e,t){return function(i,n){var r=n.response,a=Qd(i,n);if(a)return t(a,e);if(16!==r.byteLength)return t({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:Wd,xhr:n},e);var s=new DataView(r);return e.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),t(null,e)}}(r,l));o.push(u)}if(r.map&&!r.map.bytes){var d=e(aa.mergeOptions(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Bu(r.map)}),function(e,t,i){return function(n,r){var a=r.response,s=Qd(n,r);return s?i(s,e):0===a.byteLength?i({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Wd,xhr:r},e):(e.map.bytes=new Uint8Array(r.response),t&&!t.isInitialized()&&t.init(),e.map.timescales=nl.timescale(e.map.bytes),e.map.videoTrackIds=nl.videoTrackIds(e.map.bytes),i(null,e))}}(r,n,l));o.push(d)}var c=e(aa.mergeOptions(t,{uri:r.resolvedUri,responseType:"arraybuffer",headers:Bu(r)}),function(e,t,i){return function(n,r){var a=r.response,s=Qd(n,r),o=void 0;return s?i(s,e):0===a.byteLength?i({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Wd,xhr:r},e):(e.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),e.key?e.encryptedBytes=new Uint8Array(r.response):e.bytes=new Uint8Array(r.response),t&&e.map&&e.map.bytes&&(t.isInitialized()||t.init(),(o=t.parse(e.bytes,e.map.videoTrackIds,e.map.timescales))&&o.captions&&(e.captionStreams=o.captionStreams,e.fmp4Captions=o.captions)),i(null,e))}}(r,n,l));return c.addEventListener("progress",Kd(r,a)),o.push(c),function(){return Gd(o)}},Jd=function(t,i){var n;return t&&(n=e.getComputedStyle(t))?n[i]:""},ec=function(e,t){var i=e.slice();e.sort(function(e,n){var r=t(e,n);return 0===r?i.indexOf(e)-i.indexOf(n):r})},tc=function(t,i){var n=void 0,r=void 0;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||e.Number.MAX_VALUE,i.attributes.BANDWIDTH&&(r=i.attributes.BANDWIDTH),n-(r=r||e.Number.MAX_VALUE)},ic=function(e){return"number"==typeof e&&isFinite(e)},nc=function(t){function i(e){su(this,i);var t=uu(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=e.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=void 0,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.inbandTextTracks_=e.inbandTextTracks,t.state_="INIT",t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.mimeType_=null,t.sourceUpdater_=null,t.xhrOptions_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.cacheEncryptionKeys_=e.cacheEncryptionKeys,t.keyCache_={},"main"===t.loaderType_?t.captionParser_=new Tl:t.captionParser_=null,t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={segmentIndex:0,time:0},t.triggerSyncInfoUpdate_=function(){return t.trigger("syncinfoupdate")},t.syncController_.on("syncinfoupdate",t.triggerSyncInfoUpdate_),t.mediaSource_.addEventListener("sourceopen",function(){return t.ended_=!1}),t.fetchAtBuffer_=!1,t.logger_=Fd("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(t,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),t}return lu(i,t),ou(i,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset(),this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():aa.createTimeRanges()}},{key:"initSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=Wu(e),n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),n||e}},{key:"segmentKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=Vu(e),n=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[i]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(n||e).resolvedUri};return n&&(r.bytes=n.bytes),r}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new qd(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(i&&i.uri===e.uri){var a=e.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex&&(this.mediaIndex-=a),n&&(n.mediaIndex-=a,n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,1/0,e),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t,i){if(t===1/0&&(t=this.duration_()),this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,i),id(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)id(e,t,this.inbandTextTracks_[n])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=e.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=e.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(this.isEndOfStream_(e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&(e.timeline!==this.currentTimeline_&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(e)))}}},{key:"isEndOfStream_",value:function(e){return function(e,t,i){if(!e||!t)return!1;var n=i===e.segments.length;return e.endList&&"open"===t.readyState&&n}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.playlist_,this.mediaSource_,e)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(e,t,i,n,r,a){var s=0,o=void 0;e.length&&(s=e.end(e.length-1));var l=Math.max(0,s-r);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!n&&l>=1)return null;if(null===a)return i=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,i,null,!0);if(null!==i){t.segments[i];return o=s,this.generateSegmentInfo_(t,i+1,o,!1)}if(this.fetchAtBuffer_){var u=ju.getMediaInfoForTime(t,s,a.segmentIndex,a.time);i=u.mediaIndex,o=u.startTime}else{var d=ju.getMediaInfoForTime(t,r,a.segmentIndex,a.time);i=d.mediaIndex,o=d.startTime}return this.generateSegmentInfo_(t,i,o,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var i=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return i.length?i[Math.min(i.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,i,n){if(t<0||t>=e.segments.length)return null;var r=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:t,isSyncRequest:n,startOfSegment:i,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,r=ju.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),a=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return((e.length?e.end(e.length-1):0)-t)/i}(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(r<=a)return!1;var s=function(e){var t=e.master,i=e.currentTime,n=e.bandwidth,r=e.duration,a=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,l=e.syncController,u=t.playlists.filter(function(e){return!ju.isIncompatible(e)}),d=u.filter(ju.isEnabled);d.length||(d=u.filter(function(e){return!ju.isDisabled(e)}));var c=d.filter(ju.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=l.getSyncPoint(e,r,o,i)?1:2;return{playlist:e,rebufferingImpact:ju.estimateSegmentRequestTime(a,n,e)*t-s}}),p=c.filter(function(e){return e.rebufferingImpact<=0});return ec(p,function(e,t){return tc(t.playlist,e.playlist)}),p.length?p[0]:(ec(c,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),c[0]||null)}({master:this.hls_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=r-a-s.rebufferingImpact,l=.5;return a<=1/30&&(l=1),!s.playlist||s.playlist.uri===this.playlist_.uri||o<l?!1:(this.bandwidth=s.playlist.attributes.BANDWIDTH*Hd.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Zd(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t=function(e,t,i){var n=t-30;e.length&&(n=Math.max(n,e.start(0)));var r=t-i;return Math.min(r,n)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,i={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=n}return t.map&&(i.map=this.initSegment(t.map)),i}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Yd?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===Vd?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),t.key&&this.segmentKey(t.key,!0),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(!function(e,t,i){for(var n in i)if(!e[n]){t.trigger({type:"usage",name:"hls-608"});var r=t.textTracks().getTrackById(n);e[n]=r||t.addRemoteTextTrack({kind:"captions",id:n,label:n},!1).track}}(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),function(e){var t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;if(i){var r=window.WebKitDataCue||window.VTTCue;i.forEach(function(e){var i=e.stream,a=e.startTime,s=e.endTime;t[i]&&(a+=n,s+=n,t[i].addCue(new r(a,s,e.text)))})}}({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,i=t.segment,n=this.syncController_.probeSegmentInfo(t);void 0===this.startingMedia_&&n&&(n.containsAudio||n.containsVideo)&&(this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo});var r,a,s,o=(r=this.loaderType_,a=this.startingMedia_,s=n,"main"===r&&a&&s?s.containsAudio||s.containsVideo?a.containsVideo&&!s.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!a.containsVideo&&s.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(o)return this.error({message:o,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");if(null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()){if(n&&n.segmentTimestampInfo){var l=n.segmentTimestampInfo[0].ptsTime,u=n.segmentTimestampInfo[0].dtsTime;t.timestampOffset-=l-u}this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset")}var d=this.syncController_.mappingForTimeline(t.timeline);if(null!==d&&this.trigger({type:"segmenttimemapping",mapping:d}),this.state="APPENDING",i.map){var c=Wu(i.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==c){var p=this.initSegment(i.map);this.sourceUpdater_.appendBuffer({bytes:p.bytes},function(){e.activeInitSegmentId_=c})}}t.byteLength=t.bytes.byteLength,"number"==typeof i.start&&"number"==typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration,this.logger_(function(e){var t=e.segment,i=t.start,n=t.end,r=e.playlist,a=r.mediaSequence,s=r.id,o=r.segments,l=void 0===o?[]:o,u=e.mediaIndex,d=e.timeline;return["appending ["+u+"] of ["+a+", "+(a+l.length)+"] from playlist ["+s+"]","["+i+" => "+n+"] in timeline ["+d+"]"].join(" ")}(t)),this.sourceUpdater_.appendBuffer({bytes:t.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,t.requestId)},this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment;i.videoTimingInfo||(i.videoTimingInfo={}),i.videoTimingInfo.transmuxerPrependedSeconds=t.videoSegmentTimingInfo.prependedContentDuration||0,i.videoTimingInfo.transmuxedPresentationStart=t.videoSegmentTimingInfo.start.presentation,i.videoTimingInfo.transmuxedPresentationEnd=t.videoSegmentTimingInfo.end.presentation,i.videoTimingInfo.baseMediaDecodeTime=t.videoSegmentTimingInfo.baseMediaDecodeTime}}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,i=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(i&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(e.mediaIndex+1,e.playlist)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(t){if(this.segmentMetadataTrack_){var i=t.segment,n=i.start,r=i.end;if(ic(n)&&ic(r)){id(n,r,this.segmentMetadataTrack_);var a=e.WebKitDataCue||e.VTTCue,s={custom:i.custom,dateTimeObject:i.dateTimeObject,dateTimeString:i.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:n,end:r},o=new a(n,r,JSON.stringify(s));o.value=s,this.segmentMetadataTrack_.addCue(o)}}}}]),i}(aa.EventTarget),rc=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},ac=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),sc=function(t){function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};su(this,i);var n=uu(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return n.mediaSource_=null,n.subtitlesTrack_=null,n.featuresNativeTextTracks_=e.featuresNativeTextTracks,n}return lu(i,nc),ou(i,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return aa.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return aa.createTimeRanges([[t,i]])}},{key:"initSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=Wu(e),n=this.initSegments_[i];if(t&&!n&&e.bytes){var r=ac.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(ac,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return n||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e?this.subtitlesTrack_:(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}},{key:"remove",value:function(e,t){id(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var i=this.pendingSegment_,n=i.segment;if("function"!=typeof e.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var r=void 0,a=function(){t.subtitlesTrack_.tech_.off("vttjsloaded",r),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")};return r=function(){t.subtitlesTrack_.tech_.off("vttjserror",a),t.handleSegment_()},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",r),void this.subtitlesTrack_.tech_.one("vttjserror",a)}n.requested=!0;try{this.parseVTTCues_(i)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=n.duration,i.cues.length&&this.remove(i.cues[0].endTime,i.cues[i.cues.length-1].endTime),i.cues.forEach(function(i){t.subtitlesTrack_.addCue(t.featuresNativeTextTracks_?new e.VTTCue(i.startTime,i.endTime,i.text):i)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(t){var i=void 0,n=!1;"function"==typeof e.TextDecoder?i=new e.TextDecoder("utf8"):(i=e.WebVTT.StringDecoder(),n=!0);var r=new e.WebVTT.Parser(e,e.vttjs,i);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=t.cues.push.bind(t.cues),r.ontimestampmap=function(e){return t.timestampmap=e},r.onparsingerror=function(e){aa.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map){var a=t.segment.map.bytes;n&&(a=rc(a)),r.parse(a)}var s=t.bytes;n&&(s=rc(s)),r.parse(s),r.flush()}},{key:"updateTimeMapping_",value:function(e,t,i){var n=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/9e4-r.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=a,e.endTime+=a}),!i.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(s,o-n.duration)}}}else n.empty=!0}}]),i}(),oc=function(e,t){for(var i=e.cues,n=0;n<i.length;n++){var r=i[n];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},lc=Vl,uc=[{name:"VOD",run:function(e,t,i,n,r){if(i!==1/0){return{time:0,segmentIndex:0}}return null}},{name:"ProgramDateTime",run:function(e,t,i,n,r){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.dateTimeObject){var d=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,c=Math.abs(r-d);if(null!==o&&(0===c||o<c))break;o=c,s={time:d,segmentIndex:l}}}return s}},{name:"Segment",run:function(e,t,i,n,r){var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.timeline===n&&void 0!==u.start){var d=Math.abs(r-u.start);if(null!==o&&o<d)break;(!s||null===o||o>=d)&&(o=d,s={time:u.start,segmentIndex:l})}}return s}},{name:"Discontinuity",run:function(e,t,i,n,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var l=t.discontinuityStarts[o],u=t.discontinuitySequence+o+1,d=e.discontinuities[u];if(d){var c=Math.abs(r-d.time);if(null!==s&&s<c)break;(!a||null===s||s>=c)&&(s=c,a={time:d.time,segmentIndex:l})}}return a}},{name:"Playlist",run:function(e,t,i,n,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],dc=function(e){function t(){su(this,t);var e=uu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=Fd("SyncController"),e}return lu(t,e),ou(t,[{key:"getSyncPoint",value:function(e,t,i,n){var r=this.runStrategies_(e,t,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+Su(e,n.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,i,n){for(var r=[],a=0;a<uc.length;a++){var s=uc[a],o=s.run(this,e,t,i,n);o&&(o.strategy=s.name,r.push({strategy:s.name,syncPoint:o}))}return r}},{key:"selectSyncPoint_",value:function(e,t){for(var i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<n&&(n=s,i=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+"]"),i}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var i=t.mediaSequence-e.mediaSequence-1;i>=0;i--){var n=e.segments[i];if(n&&void 0!==n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t=e.segment,i=e.playlist,n=void 0;return(n=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,n)&&(this.saveDiscontinuitySyncInfo_(e),i.syncInfo||(i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:t.start})),n}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,i=nl.timescale(t.map.bytes),n=nl.compositionStartTime(i,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=n),{start:n,end:n+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=lc(e.bytes,this.inspectCache_),i=void 0,n=void 0,r=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,i=t.video[0].dtsTime,n=t.video[1].dtsTime,r=t.video):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,i=t.audio[0].dtsTime,n=t.audio[1].dtsTime,r=t.audio),{segmentTimestampInfo:r,start:i,end:n,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var i=e.segment,n=this.timelines[e.timeline];if(null!==e.timestampOffset)n={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=n,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+n.time+"] [mapping: "+n.mapping+"]"),i.start=e.startOfSegment,i.end=t.end+n.mapping;else{if(!n)return!1;i.start=t.start+n.mapping,i.end=t.end+n.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var r=t.discontinuityStarts[n],a=t.discontinuitySequence+n+1,s=r-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>o){var l=void 0;l=s<0?i.start-Su(t,e.mediaIndex,r):i.end+Su(t,e.mediaIndex+1,r),this.discontinuities[a]={time:l,accuracy:o}}}}},{key:"dispose",value:function(){this.trigger("dispose"),this.off()}}]),t}(aa.EventTarget),cc=new cd("./decrypter-worker.worker.js",function(e,t){var i=this;!function(){var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],n=t[4],r=i[4],a=void 0,s=void 0,o=void 0,l=[],u=[],d=void 0,c=void 0,p=void 0,h=void 0,f=void 0;for(a=0;a<256;a++)u[(l[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!n[s];s^=d||1,o=u[o]||1)for(p=(p=o^o<<1^o<<2^o<<3^o<<4)>>8^255&p^99,n[s]=p,r[p]=s,f=16843009*l[c=l[d=l[s]]]^65537*c^257*d^16843008*s,h=257*l[p]^16843008*p,a=0;a<4;a++)t[a][s]=h=h<<24^h>>>8,i[a][p]=f=f<<24^f>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),i[a]=i[a].slice(0);return e},a=null,s=function(){function t(i){e(this,t),a||(a=r()),this._tables=[[a[0][0].slice(),a[0][1].slice(),a[0][2].slice(),a[0][3].slice(),a[0][4].slice()],[a[1][0].slice(),a[1][1].slice(),a[1][2].slice(),a[1][3].slice(),a[1][4].slice()]];var n=void 0,s=void 0,o=void 0,l=void 0,u=void 0,d=this._tables[0][4],c=this._tables[1],p=i.length,h=1;if(4!==p&&6!==p&&8!==p)throw new Error("Invalid aes key size");for(l=i.slice(0),u=[],this._key=[l,u],n=p;n<4*p+28;n++)o=l[n-1],(n%p==0||8===p&&n%p==4)&&(o=d[o>>>24]<<24^d[o>>16&255]<<16^d[o>>8&255]<<8^d[255&o],n%p==0&&(o=o<<8^o>>>24^h<<24,h=h<<1^283*(h>>7))),l[n]=l[n-p]^o;for(s=0;n;s++,n--)o=l[3&s?n:n-4],u[s]=n<=4||s<4?o:c[0][d[o>>>24]]^c[1][d[o>>16&255]]^c[2][d[o>>8&255]]^c[3][d[255&o]]}return t.prototype.decrypt=function(e,t,i,n,r,a){var s=this._key[1],o=e^s[0],l=n^s[1],u=i^s[2],d=t^s[3],c=void 0,p=void 0,h=void 0,f=s.length/4-2,m=void 0,g=4,v=this._tables[1],y=v[0],_=v[1],b=v[2],T=v[3],w=v[4];for(m=0;m<f;m++)c=y[o>>>24]^_[l>>16&255]^b[u>>8&255]^T[255&d]^s[g],p=y[l>>>24]^_[u>>16&255]^b[d>>8&255]^T[255&o]^s[g+1],h=y[u>>>24]^_[d>>16&255]^b[o>>8&255]^T[255&l]^s[g+2],d=y[d>>>24]^_[o>>16&255]^b[l>>8&255]^T[255&u]^s[g+3],g+=4,o=c,l=p,u=h;for(m=0;m<4;m++)r[(3&-m)+a]=w[o>>>24]<<24^w[l>>16&255]<<16^w[u>>8&255]<<8^w[255&d]^s[g++],c=o,o=l,l=u,u=d,d=c},t}(),o=function(){function t(){e(this,t),this.listeners={}}return t.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),i>-1},t.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},t.prototype.dispose=function(){this.listeners={}},t.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},t}(),l=function(t){function i(){e(this,i);var r=n(this,t.call(this,o));return r.jobs=[],r.delay=1,r.timeout_=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),i.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},i}(o),u=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},d=function(){function i(t,n,r,a){e(this,i);var s=i.STEP,o=new Int32Array(t.buffer),d=new Uint8Array(t.byteLength),c=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(o.subarray(c,c+s),n,r,d)),c=s;c<o.length;c+=s)r=new Uint32Array([u(o[c-4]),u(o[c-3]),u(o[c-2]),u(o[c-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(c,c+s),n,r,d));this.asyncStream_.push(function(){var e;a(null,(e=d).subarray(0,e.byteLength-e[e.byteLength-1]))})}return i.prototype.decryptChunk_=function(e,t,i,n){return function(){var r=function(e,t,i){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new s(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),o=new Int32Array(a.buffer),l=void 0,d=void 0,c=void 0,p=void 0,h=void 0,f=void 0,m=void 0,g=void 0,v=void 0;for(l=i[0],d=i[1],c=i[2],p=i[3],v=0;v<n.length;v+=4)h=u(n[v]),f=u(n[v+1]),m=u(n[v+2]),g=u(n[v+3]),r.decrypt(h,f,m,g,o,v),o[v]=u(o[v]^l),o[v+1]=u(o[v+1]^d),o[v+2]=u(o[v+2]^c),o[v+3]=u(o[v+3]^p),l=h,d=f,c=m,p=g;return a}(e,t,i);n.set(r,e.byteOffset)}},t(i,null,[{key:"STEP",get:function(){return 32e3}}]),i}();new function(e){e.onmessage=function(t){var i=t.data,n=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),r=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4),a=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new d(n,r,a,function(t,n){var r,a;e.postMessage((r={source:i.source,decrypted:n},a={},Object.keys(r).forEach(function(e){var t=r[e];ArrayBuffer.isView(t)?a[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:a[e]=t}),a),[n.buffer])})}}(i)}()}),pc=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},hc=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},fc=function(e,t){t.activePlaylistLoader=e,e.load()},mc={AUDIO:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;hc(i,n);var a=n.activeTrack(),s=n.activeGroup(),o=(s.filter(function(e){return e.default})[0]||s[0]).id,l=n.tracks[o];if(a!==l){for(var u in aa.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[u].enabled=n.tracks[u]===l;n.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e];aa.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),hc(i,n);var r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}}},gc={AUDIO:function(e,t,i){if(t){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),n.paused()||a.load()}),t.on("error",mc[e](e,i))}},SUBTITLES:function(e,t,i){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],s=i.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),n.paused()||a.load()}),t.on("error",mc[e](e,i))}},vc={AUDIO:function(e,t){var i=t.hls,n=t.sourceType,r=t.segmentLoaders[e],a=t.requestOptions,s=t.master.mediaGroups,o=t.mediaTypes[e],l=o.groups,u=o.tracks,d=t.masterPlaylistLoader;for(var c in s[e]&&0!==Object.keys(s[e]).length||(s[e]={main:{default:{default:!0}}}),s[e])for(var p in l[c]||(l[c]=[]),s[e][c]){var h=s[e][c][p],f=void 0;if(f=h.resolvedUri?new bu(h.resolvedUri,i,a):h.playlists&&"dash"===n?new Bd(h.playlists[0],i,a,d):null,h=aa.mergeOptions({id:p,playlistLoader:f},h),gc[e](e,h.playlistLoader,t),l[c].push(h),void 0===u[p]){var m=new aa.AudioTrack({id:p,kind:pc(h),enabled:!1,language:h.language,default:h.default,label:p});u[p]=m}}r.on("error",mc[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,n=t.hls,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,d=l.tracks,c=t.masterPlaylistLoader;for(var p in o[e])for(var h in u[p]||(u[p]=[]),o[e][p])if(!o[e][p][h].forced){var f=o[e][p][h],m=void 0;if("hls"===r?m=new bu(f.resolvedUri,n,s):"dash"===r&&(m=new Bd(f.playlists[0],n,s,c)),f=aa.mergeOptions({id:h,playlistLoader:m},f),gc[e](e,f.playlistLoader,t),u[p].push(f),void 0===d[h]){var g=i.addRemoteTextTrack({id:h,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:h},!1).track;d[h]=g}}a.on("error",mc[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,n=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,s=r.tracks;for(var o in n[e])for(var l in a[o]||(a[o]=[]),n[e][o]){var u=n[e][o][l];if(u.instreamId.match(/CC\d/)&&(a[o].push(aa.mergeOptions({id:l},u)),void 0===s[l])){var d=i.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default&&u.autoselect,language:u.language,label:l},!1).track;s[l]=d}}}},yc={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if(i[n].enabled)return i[n];return null}},SUBTITLES:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if("showing"===i[n].mode||"hidden"===i[n].mode)return i[n];return null}}},_c=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){vc[t](t,e)});var t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,r=e.hls;["AUDIO","SUBTITLES"].forEach(function(i){t[i].activeGroup=function(e,t){return function(i){var n=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,a=n.media();if(!a)return null;var s=null;return a.attributes[e]&&(s=r[a.attributes[e]]),s=s||r.main,void 0===i?s:null===i?null:s.filter(function(e){return e.id===i.id})[0]||null}}(i,e),t[i].activeTrack=yc[i](i,e),t[i].onGroupChanged=function(e,t){return function(){var i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),l=a.activePlaylistLoader;hc(n,a),o&&(o.playlistLoader?(n.resyncLoader(),fc(o.playlistLoader,a)):l&&r.resetEverything())}}(i,e),t[i].onTrackChanged=function(e,t){return function(){var i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),l=a.activePlaylistLoader;hc(n,a),o&&(o.playlistLoader?l!==o.playlistLoader?(n.track&&n.track(s),n.resetEverything(),fc(o.playlistLoader,a)):fc(o.playlistLoader,a):r.resetEverything())}}(i,e)});var a=t.AUDIO.activeGroup(),s=(a.filter(function(e){return e.default})[0]||a[0]).id;t.AUDIO.tracks[s].enabled=!0,t.AUDIO.onTrackChanged(),i.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return t[e].onGroupChanged()})});var o=function(){t.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"hls-audio-change"})};for(var l in n.audioTracks().addEventListener("change",o),n.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",function(){n.audioTracks().removeEventListener("change",o),n.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),n.clearTracks("audio"),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[l])},bc=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:$d,activeTrack:$d,onGroupChanged:$d,onTrackChanged:$d}}),e},Tc=void 0,wc=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],kc=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Sc=function(t){function i(e){su(this,i);var t=uu(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),n=e.url,r=e.handleManifestRedirects,a=e.withCredentials,s=e.tech,o=e.bandwidth,l=e.externHls,u=e.useCueTags,d=e.blacklistDuration,c=e.enableLowInitialPlaylist,p=e.cacheEncryptionKeys,h=e.sourceType;if(!n)throw new Error("A non-empty playlist URL is required");Tc=l,t.withCredentials=a,t.tech_=s,t.hls_=s.hls,t.sourceType_=h,t.useCueTags_=u,t.blacklistDuration=d,t.enableLowInitialPlaylist=c,t.useCueTags_&&(t.cueTagsTrack_=t.tech_.addTextTrack("metadata","ad-cues"),t.cueTagsTrack_.inBandMetadataTrackDispatchType=""),t.requestOptions_={withCredentials:a,handleManifestRedirects:r,timeout:null},t.mediaTypes_=bc(),t.mediaSource=new aa.MediaSource,t.mediaSource.addEventListener("sourceopen",t.handleSourceOpen_.bind(t)),t.seekable_=aa.createTimeRanges(),t.hasPlayed_=!1,t.syncController_=new dc(e),t.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,t.decrypter_=new cc,t.inbandTextTracks_={};var f={hls:t.hls_,mediaSource:t.mediaSource,currentTime:t.tech_.currentTime.bind(t.tech_),seekable:function(){return t.seekable()},seeking:function(){return t.tech_.seeking()},duration:function(){return t.mediaSource.duration},hasPlayed:function(){return t.hasPlayed_},goalBufferLength:function(){return t.goalBufferLength()},bandwidth:o,syncController:t.syncController_,decrypter:t.decrypter_,sourceType:t.sourceType_,inbandTextTracks:t.inbandTextTracks_,cacheEncryptionKeys:p};return t.masterPlaylistLoader_="dash"===t.sourceType_?new Bd(n,t.hls_,t.requestOptions_):new bu(n,t.hls_,t.requestOptions_),t.setupMasterPlaylistLoaderListeners_(),t.mainSegmentLoader_=new nc(aa.mergeOptions(f,{segmentMetadataTrack:t.segmentMetadataTrack_,loaderType:"main"}),e),t.audioSegmentLoader_=new nc(aa.mergeOptions(f,{loaderType:"audio"}),e),t.subtitleSegmentLoader_=new sc(aa.mergeOptions(f,{loaderType:"vtt",featuresNativeTextTracks:t.tech_.featuresNativeTextTracks}),e),t.setupSegmentLoaderListeners_(),wc.forEach(function(e){t[e+"_"]=kc.bind(t,e)}),t.logger_=Fd("MPC"),t.masterPlaylistLoader_.load(),t}return lu(i,t),ou(i,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;Pu(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),_c({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,hls:e.hls_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t);try{e.setupSourceBuffers_()}catch(t){return aa.log.warn("Failed to create SourceBuffers",t),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=e.masterPlaylistLoader_.media();if(!t){e.excludeUnsupportedVariants_();var i=void 0;return e.enableLowInitialPlaylist&&(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),e.initialMedia_=i,void e.masterPlaylistLoader_.media(e.initialMedia_)}if(e.useCueTags_&&e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),e.tech_.paused()||(e.mainSegmentLoader_.load(),e.audioSegmentLoader_&&e.audioSegmentLoader_.load()),!t.endList){var n=function(){var t=e.seekable();0!==t.length&&e.mediaSource.addSeekableRange_(t.start(0),t.end(0))};if(e.duration()!==1/0){e.tech_.one("durationchange",function t(){e.duration()===1/0?n():e.tech_.one("durationchange",t)})}else n()}}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;Pu(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(e,t){var i=e.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(var a in i.AUDIO)for(var s in i.AUDIO[a]){i.AUDIO[a][s].uri||(n=!1)}n&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),Tc.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),Tc.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var t=e.selectPlaylist(),i=e.masterPlaylistLoader_.media(),n=e.tech_.buffered();(function(e){var t=e.currentPlaylist,i=e.nextPlaylist,n=e.forwardBuffer,r=e.bufferLowWaterLine,a=e.duration;e.log;return i?!t.endList||a<Hd.MAX_BUFFER_LOW_WATER_LINE||i.attributes.BANDWIDTH<t.attributes.BANDWIDTH||n>=r:(aa.log.warn("We received no playlist to switch to. Please check your stream."),!1)})({currentPlaylist:i,nextPlaylist:t,forwardBuffer:n.length?n.end(n.length-1)-e.tech_.currentTime():0,bufferLowWaterLine:e.bufferLowWaterLine(),duration:e.duration(),log:e.logger_})&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){e.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(t){e.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})}),this.audioSegmentLoader_.on("ended",function(){e.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything(function(){aa.browser.IE_VERSION||aa.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(aa.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(i.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return aa.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e){this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(e){aa.log.warn("Failed to call media source endOfStream",e)}}}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var i=Tc.Playlist.playlistEnd(e,t),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=.1;var a=r.end(r.length-1);return a-n<=.1&&i-a<=.1}},{key:"blacklistCurrentPlaylist",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1],n=void 0;if(n=t.playlist||this.masterPlaylistLoader_.media(),i=i||t.blacklistDuration||this.blacklistDuration,!n){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var r=1===this.masterPlaylistLoader_.master.playlists.filter(Nu).length,a=this.masterPlaylistLoader_.master.playlists;return 1===a.length?(aa.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(r)):(r&&(aa.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),a.forEach(function(e){e.excludeUntil!==1/0&&delete e.excludeUntil}),this.tech_.trigger("retryplaylist")),n.excludeUntil=Date.now()+1e3*i,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),e=this.selectPlaylist(),aa.log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(e,r))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=Zu(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:Tc.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var i=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(null!==i){var n=this.masterPlaylistLoader_.master.suggestedPresentationDelay,r=Tc.Playlist.seekable(t,i,n);if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(t,this.mediaSource.duration)))return;if(0===(e=Tc.Playlist.seekable(t,i,n)).length)return}var a=void 0,s=void 0;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),s=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=aa.createTimeRanges([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===s||(this.logger_("seekable updated ["+ed(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}}},{key:"updateDuration",value:function(){var e=this,t=this.mediaSource.duration,i=Tc.Playlist.duration(this.masterPlaylistLoader_.media()),n=this.tech_.buffered(),r=function t(){e.logger_("Setting duration from "+e.mediaSource.duration+" => "+i);try{e.mediaSource.duration=i}catch(e){aa.log.warn("Failed to set media source duration",e)}e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)};n.length>0&&(i=Math.max(i,n.end(n.length-1))),t!==i&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",r):r())}},{key:"dispose",value:function(){var e=this;this.trigger("dispose"),this.decrypter_&&this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(t){var i=e.mediaTypes_[t].groups;for(var n in i)i[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.off(),this.mediaSource.dispose&&this.mediaSource.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=Td(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}}},{key:"configureLoaderMimeTypes_",value:function(e){var t=e.length>1&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new aa.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(t){var i;t.attributes.CODECS&&e.MediaSource&&e.MediaSource.isTypeSupported&&!e.MediaSource.isTypeSupported('video/mp4; codecs="'+(i=t.attributes.CODECS,i.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return yd([e])[0]}))+'"')&&(t.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(e){var t=2,i=null,n=void 0;e.attributes.CODECS&&(n=_d(e.attributes.CODECS),i=n.videoCodec,t=n.codecCount),this.master().playlists.forEach(function(e){var n={codecCount:2,videoCodec:null};e.attributes.CODECS&&(n=_d(e.attributes.CODECS)),n.codecCount!==t&&(e.excludeUntil=1/0),n.videoCodec!==i&&(e.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(t){var i=0,n=this.seekable();n.length&&(i=n.start(0)),function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t.segments)for(var r=n,a=void 0,s=0;s<t.segments.length;s++){var o=t.segments[s];if(a||(a=oc(i,r+o.duration/2)),a){if("cueIn"in o){a.endTime=r,a.adEndTime=r,r+=o.duration,a=null;continue}if(r<a.endTime){r+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&((a=new e.VTTCue(r,r+o.duration,o.cueOut)).adStartTime=r,a.adEndTime=r+parseFloat(o.cueOut),i.addCue(a)),"cueOutCont"in o){var l,u,d=o.cueOutCont.split("/").map(parseFloat),c=du(d,2);l=c[0],u=c[1],(a=new e.VTTCue(r,r+o.duration,"")).adStartTime=r-l,a.adEndTime=a.adStartTime+u,i.addCue(a)}r+=o.duration}}(t,this.cueTagsTrack_,i)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=Hd.GOAL_BUFFER_LENGTH,i=Hd.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,Hd.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=Hd.BUFFER_LOW_WATER_LINE,i=Hd.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,Hd.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,n)}}]),i}(aa.EventTarget),xc=function e(t,i,n){su(this,e);var r,a,s,o=t.masterPlaylistController_,l=o[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);if(i.attributes.RESOLUTION){var u=i.attributes.RESOLUTION;this.width=u.width,this.height=u.height}this.bandwidth=i.attributes.BANDWIDTH,this.id=n,this.enabled=(r=t.playlists,a=i.id,s=l,function(e){var t=r.master.playlists[a],i=Ou(t),n=Nu(t);return void 0===e?n:(e?delete t.disabled:t.disabled=!0,e===n||i||(s(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})},Mc=["seeking","seeked","pause","playing","error"],Cc=function(){function t(i){var n=this;su(this,t),this.tech_=i.tech,this.seekable=i.seekable,this.allowSeeksWithinUnsafeLiveWindow=i.allowSeeksWithinUnsafeLiveWindow,this.media=i.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Fd("PlaybackWatcher"),this.logger_("initialize");var r=function(){return n.monitorCurrentTime_()},a=function(){return n.techWaiting_()},s=function(){return n.cancelTimer_()},o=function(){return n.fixesBadSeeks_()};this.tech_.on("seekablechanged",o),this.tech_.on("waiting",a),this.tech_.on(Mc,s),this.tech_.on("canplay",r),this.dispose=function(){n.logger_("dispose"),n.tech_.off("seekablechanged",o),n.tech_.off("waiting",a),n.tech_.off(Mc,s),n.tech_.off("canplay",r),n.checkCurrentTimeTimeout_&&e.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}return ou(t,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&e.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=e.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var e=this.seekable(),t=this.tech_.currentTime(),i=void 0;this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(i=e.end(e.length-1));this.beforeSeekableWindow_(e,t)&&(i=e.start(0)+.1);return void 0!==i&&(this.logger_("Trying to seek outside of seekable at time "+t+" with seekable range "+ed(e)+". Seeking to "+i+"."),this.tech_.setCurrentTime(i),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),i=Zu(t,e);return i.length&&e+3<=i.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.buffered(),r=Ju(n,t);if(this.videoUnderflow_(r,n,t))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(r.length>0){var a=r.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.length)return!1;var r=e.end(e.length-1)+.1;return!i.endList&&n&&(r=e.end(e.length-1)+3*i.targetDuration),t>r}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-.1)}},{key:"videoUnderflow_",value:function(e,t,i){if(0===e.length){var n=this.gapFromVideoUnderflow_(t,i);if(n)return this.logger_("Encountered a gap in video from "+n.start+" to "+n.end+". Seeking to current time "+i),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),n=Ju(t,i);this.cancelTimer_(),0!==n.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+1/30),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var i=function(e){if(e.length<2)return aa.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var n=e.end(i-1),r=e.start(i);t.push([n,r])}return aa.createTimeRanges(t)}(e),n=0;n<i.length;n++){var r=i.start(n),a=i.end(n);if(t-r<4&&t-r>2)return{start:r,end:a}}return null}}]),t}(),Ec={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},Ic=function(e){!function e(t,i){var n=0,r=0,a=aa.mergeOptions(Ec,i);t.ready(function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){r&&t.currentTime(r)},o=function(e){null!=e&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(e),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){if(Date.now()-n<1e3*a.errorInterval)t.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(a.getSource&&"function"==typeof a.getSource)return n=Date.now(),a.getSource.call(t,o);aa.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function e(){t.off("loadedmetadata",s),t.off("error",l),t.off("dispose",e)};t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=function(i){u(),e(t,i)}}(this,e)},Dc={PlaylistLoader:bu,Playlist:ju,Decrypter:nu,AsyncStream:eu,decrypt:iu,utils:Gu,STANDARD_PLAYLIST_SELECTOR:function(){var t=this.useDevicePixelRatio&&e.devicePixelRatio||1;return function(t,i,n,r,a){var s=t.playlists.map(function(t){var i,n;return i=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,n=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height,{bandwidth:t.attributes.BANDWIDTH||e.Number.MAX_VALUE,width:i,height:n,playlist:t}});ec(s,function(e,t){return e.bandwidth-t.bandwidth});var o=(s=s.filter(function(e){return!ju.isIncompatible(e.playlist)})).filter(function(e){return ju.isEnabled(e.playlist)});o.length||(o=s.filter(function(e){return!ju.isDisabled(e.playlist)}));var l=o.filter(function(e){return e.bandwidth*Hd.BANDWIDTH_VARIANCE<i}),u=l[l.length-1],d=l.filter(function(e){return e.bandwidth===u.bandwidth})[0];if(!1===a){var c=d||o[0]||s[0];return c?c.playlist:null}var p=l.filter(function(e){return e.width&&e.height});ec(p,function(e,t){return e.width-t.width});var h=p.filter(function(e){return e.width===n&&e.height===r});u=h[h.length-1];var f=h.filter(function(e){return e.bandwidth===u.bandwidth})[0],m=void 0,g=void 0,v=void 0;f||(g=(m=p.filter(function(e){return e.width>n||e.height>r})).filter(function(e){return e.width===m[0].width&&e.height===m[0].height}),u=g[g.length-1],v=g.filter(function(e){return e.bandwidth===u.bandwidth})[0]);var y=v||f||d||o[0]||s[0];return y?y.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Jd(this.tech_.el(),"width"),10)*t,parseInt(Jd(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(ju.isEnabled);return ec(e,function(e,t){return tc(e,t)}),e.filter(function(e){return _d(e.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:tc,comparePlaylistResolution:function(t,i){var n=void 0,r=void 0;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||e.Number.MAX_VALUE,i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(r=i.attributes.RESOLUTION.width),n===(r=r||e.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&i.attributes.BANDWIDTH?t.attributes.BANDWIDTH-i.attributes.BANDWIDTH:n-r},xhr:zu()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(e){Object.defineProperty(Dc,e,{get:function(){return aa.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),Hd[e]},set:function(t){aa.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?aa.log.warn("value of Hls."+e+" must be greater than or equal to 0"):Hd[e]=t}})});var Ac=function(e){if(/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e))return"hls";return/^application\/dash\+xml/i.test(e)?"dash":null},Oc=function(e,t){for(var i=t.media(),n=-1,r=0;r<e.length;r++)if(e[r].id===i.id){n=r;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})};Dc.canPlaySource=function(){return aa.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Nc=function(e){var t=e.masterPlaylistController_.mainSegmentLoader_,i=e.masterPlaylistController_.audioSegmentLoader_,n=aa.players[e.tech_.options_.playerId];if(n.eme){var r=function(e,t,i){if(!e)return e;var n=void 0,r=void 0;if(i.mimeType_)n=t.mimeType_,r=i.mimeType_;else{var a=wd(t.mimeType_),s=a.parameters.codecs.split(","),o=void 0,l=void 0;s.forEach(function(e){e=e.trim(),kd(e)?o=e:Sd(e)&&(l=e)}),n=a.type+'; codecs="'+l+'"',r=a.type.replace("video","audio")+'; codecs="'+o+'"'}var u={},d=t.playlist_;for(var c in e)u[c]={audioContentType:r,videoContentType:n},d.contentProtection&&d.contentProtection[c]&&d.contentProtection[c].pssh&&(u[c].pssh=d.contentProtection[c].pssh),"string"==typeof e[c]&&(u[c].url=e[c]);return aa.mergeOptions(e,u)}(e.source_.keySystems,t,i);r&&(n.currentSource().keySystems=r,11!==aa.browser.IE_VERSION&&n.eme.initializeMediaKeys&&n.eme.initializeMediaKeys())}},Lc=function(){if(!window.localStorage)return null;var e=window.localStorage.getItem("videojs-vhs");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};Dc.supportsNativeHls=function(){var e=t.createElement("video");if(!aa.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),Dc.supportsNativeDash=!!aa.getTech("Html5").isSupported()&&/maybe|probably/i.test(t.createElement("video").canPlayType("application/dash+xml")),Dc.supportsTypeNatively=function(e){return"hls"===e?Dc.supportsNativeHls:"dash"===e&&Dc.supportsNativeDash},Dc.isSupported=function(){return aa.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Pc=aa.getComponent("Component"),jc=function(e){function i(e,n,r){su(this,i);var a=uu(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,r.hls));if(n.options_&&n.options_.playerId){var s=aa(n.options_.playerId);s.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function(){return aa.log.warn("player.hls is deprecated. Use player.tech().hls instead."),n.trigger({type:"usage",name:"hls-player-access"}),a},configurable:!0}),s.vhs=a,s.dash=a,a.player_=s}if(a.tech_=n,a.source_=e,a.stats={},a.ignoreNextSeekingEvent_=!1,a.setOptions_(),a.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(t,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var i=t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement;i&&i.contains(a.tech_.el())&&a.masterPlaylistController_.smoothQualityChange_()}),a.on(a.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),a.on(a.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,"play",a.play),a}return lu(i,Pc),ou(i,[{key:"setOptions_",value:function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Lc();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Hd.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Hd.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach(function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}},{key:"src",value:function(e,t){var i=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Dc,this.options_.sourceType=Ac(t),this.options_.seekTo=function(e){i.tech_.setCurrentTime(e)},this.masterPlaylistController_=new Sc(this.options_),this.playbackWatcher_=new Cc(aa.mergeOptions(this.options_,{seekable:function(){return i.seekable()},media:function(){return i.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){aa.players[i.tech_.options_.playerId].error(i.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Dc.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Dc.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=void 0;return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){aa.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return td(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return td(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){i.options_.useBandwidthFromLocalStorage&&function(e){if(!window.localStorage)return!1;var t=Lc();t=t?aa.mergeOptions(t,e):e;try{window.localStorage.setItem("videojs-vhs",JSON.stringify(t))}catch(e){return!1}}({bandwidth:i.bandwidth,throughput:Math.round(i.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e,t;t=(e=i).playlists,e.representations=function(){return t&&t.master&&t.master.playlists?t.master.playlists.filter(function(e){return!Ou(e)}).map(function(t,i){return new xc(e,t,t.id)}):[]},Nc(i)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&this.tech_.src(aa.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,t=aa.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,i;t=e.qualityLevels_,(i=e).representations().forEach(function(e){t.addQualityLevel(e)}),Oc(t,i.playlists)}),this.playlists.on("mediachange",function(){Oc(e.qualityLevels_,e.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(e,t){return Qu({playlist:this.masterPlaylistController_.media(),time:e,callback:t})}},{key:"seekToProgramTime",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return Xu({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}]),i}(),Uc={name:"videojs-http-streaming",VERSION:"1.13.2",canHandleSource:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=aa.mergeOptions(aa.options,t);return Uc.canPlayType(e.type,i)},handleSource:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=aa.mergeOptions(aa.options,i);return t.hls=new jc(e,t,n),t.hls.xhr=zu(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=aa.mergeOptions(aa.options,t).hls.overrideNative,n=Ac(e);return n&&(!Dc.supportsTypeNatively(n)||i)?"maybe":""}};return void 0!==aa.MediaSource&&void 0!==aa.URL||(aa.MediaSource=Od,aa.URL=Nd),Od.supportsNativeMediaSources()&&aa.getTech("Html5").registerSourceHandler(Uc,0),aa.HlsHandler=jc,aa.HlsSourceHandler=Uc,aa.Hls=Dc,aa.use||aa.registerComponent("Hls",Dc),aa.options.hls=aa.options.hls||{},aa.registerPlugin?aa.registerPlugin("reloadSourceOnError",Ic):aa.plugin("reloadSourceOnError",Ic),aa}),function(){var e,t;e=window,(t=e&&e.videojs)&&(t.CDN_VERSION="7.8.4")}(),function(){return function e(t,i,n){function r(s,o){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){return r(t[s][1][e]||e)},d,d.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}}()({1:[function(e,t,i){!function(){var e=!1,i=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(t){var n=this.prototype;e=!0;var r=new this;for(var a in e=!1,t)r[a]="function"==typeof t[a]&&"function"==typeof n[a]&&i.test(t[a])?function(e,t){return function(){var i=this._super;this._super=n[e];var r=t.apply(this,arguments);return this._super=i,r}}(a,t[a]):t[a];function s(){!e&&this.init&&this.init.apply(this,arguments)}return s.prototype=r,s.prototype.constructor=s,s.extend=arguments.callee,s},t.exports=Class}()},{}],2:[function(e,t,i){var n,r;!function(){window.WebComponents=window.WebComponents||{flags:{}};var e=document.querySelector('script[src*="webcomponents-lite.js"]'),t={};if(!t.noOpts){if(location.search.slice(1).split("&").forEach(function(e){var i,n=e.split("=");n[0]&&(i=n[0].match(/wc-(.+)/))&&(t[i[1]]=n[1]||!0)}),e)for(var i,n=0;i=e.attributes[n];n++)"src"!==i.name&&(t[i.name]=i.value||!0);if(t.log&&t.log.split){var r=t.log.split(",");t.log={},r.forEach(function(e){t.log[e]=!0})}else t.log={}}t.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=t.register),WebComponents.flags=t}(),function(e){"use strict";var t=!1;if(!e.forceJURL)try{var i=new URL("b","http://a");i.pathname="c%20d",t="http://a/c%20d"===i.href}catch(e){}if(!t){var n=Object.create(null);n.ftp=21,n.file=0,n.gopher=70,n.http=80,n.https=443,n.ws=80,n.wss=443;var r=Object.create(null);r["%2e"]=".",r[".%2e"]="..",r["%2e."]="..",r["%2e%2e"]="..";var a=void 0,s=/[a-zA-Z]/,o=/[a-zA-Z0-9\+\-\.]/;g.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var e="";return""==this._username&&null==this._password||(e=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set href(e){m.call(this),f.call(this,e)},get protocol(){return this._scheme+":"},set protocol(e){this._isInvalid||f.call(this,e+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(e){!this._isInvalid&&this._isRelative&&f.call(this,e,"host")},get hostname(){return this._host},set hostname(e){!this._isInvalid&&this._isRelative&&f.call(this,e,"hostname")},get port(){return this._port},set port(e){!this._isInvalid&&this._isRelative&&f.call(this,e,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(e){!this._isInvalid&&this._isRelative&&(this._path=[],f.call(this,e,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(e){!this._isInvalid&&this._isRelative&&(this._query="?","?"==e[0]&&(e=e.slice(1)),f.call(this,e,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(e){this._isInvalid||(this._fragment="#","#"==e[0]&&(e=e.slice(1)),f.call(this,e,"fragment"))},get origin(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return(e=this.host)?this._scheme+"://"+e:""}};var l=e.URL;l&&(g.createObjectURL=function(e){return l.createObjectURL.apply(l,arguments)},g.revokeObjectURL=function(e){l.revokeObjectURL(e)}),e.URL=g}function u(e){return void 0!==n[e]}function d(){m.call(this),this._isInvalid=!0}function c(e){return""==e&&d.call(this),e.toLowerCase()}function p(e){var t=e.charCodeAt(0);return t>32&&t<127&&-1==[34,35,60,62,63,96].indexOf(t)?e:encodeURIComponent(e)}function h(e){var t=e.charCodeAt(0);return t>32&&t<127&&-1==[34,35,60,62,96].indexOf(t)?e:encodeURIComponent(e)}function f(e,t,i){function l(e){_.push(e)}var f=t||"scheme start",m=0,g="",v=!1,y=!1,_=[];e:for(;(e[m-1]!=a||0==m)&&!this._isInvalid;){var b=e[m];switch(f){case"scheme start":if(!b||!s.test(b)){if(t){l("Invalid scheme.");break e}g="",f="no scheme";continue}g+=b.toLowerCase(),f="scheme";break;case"scheme":if(b&&o.test(b))g+=b.toLowerCase();else{if(":"!=b){if(t){if(a==b)break e;l("Code point not allowed in scheme: "+b);break e}g="",m=0,f="no scheme";continue}if(this._scheme=g,g="",t)break e;u(this._scheme)&&(this._isRelative=!0),f="file"==this._scheme?"relative":this._isRelative&&i&&i._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==b?(this._query="?",f="query"):"#"==b?(this._fragment="#",f="fragment"):a!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._schemeData+=p(b));break;case"no scheme":if(i&&u(i._scheme)){f="relative";continue}l("Missing scheme."),d.call(this);break;case"relative or authority":if("/"!=b||"/"!=e[m+1]){l("Expected /, got: "+b),f="relative";continue}f="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=i._scheme),a==b){this._host=i._host,this._port=i._port,this._path=i._path.slice(),this._query=i._query,this._username=i._username,this._password=i._password;break e}if("/"==b||"\\"==b)"\\"==b&&l("\\ is an invalid code point."),f="relative slash";else if("?"==b)this._host=i._host,this._port=i._port,this._path=i._path.slice(),this._query="?",this._username=i._username,this._password=i._password,f="query";else{if("#"!=b){var T=e[m+1],w=e[m+2];("file"!=this._scheme||!s.test(b)||":"!=T&&"|"!=T||a!=w&&"/"!=w&&"\\"!=w&&"?"!=w&&"#"!=w)&&(this._host=i._host,this._port=i._port,this._username=i._username,this._password=i._password,this._path=i._path.slice(),this._path.pop()),f="relative path";continue}this._host=i._host,this._port=i._port,this._path=i._path.slice(),this._query=i._query,this._fragment="#",this._username=i._username,this._password=i._password,f="fragment"}break;case"relative slash":if("/"!=b&&"\\"!=b){"file"!=this._scheme&&(this._host=i._host,this._port=i._port,this._username=i._username,this._password=i._password),f="relative path";continue}"\\"==b&&l("\\ is an invalid code point."),f="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=b){l("Expected '/', got: "+b),f="authority ignore slashes";continue}f="authority second slash";break;case"authority second slash":if(f="authority ignore slashes","/"!=b){l("Expected '/', got: "+b);continue}break;case"authority ignore slashes":if("/"!=b&&"\\"!=b){f="authority";continue}l("Expected authority, got: "+b);break;case"authority":if("@"==b){v&&(l("@ already seen."),g+="%40"),v=!0;for(var k=0;k<g.length;k++){var S=g[k];if("\t"!=S&&"\n"!=S&&"\r"!=S)if(":"!=S||null!==this._password){var x=p(S);null!==this._password?this._password+=x:this._username+=x}else this._password="";else l("Invalid whitespace in authority.")}g=""}else{if(a==b||"/"==b||"\\"==b||"?"==b||"#"==b){m-=g.length,g="",f="host";continue}g+=b}break;case"file host":if(a==b||"/"==b||"\\"==b||"?"==b||"#"==b){2!=g.length||!s.test(g[0])||":"!=g[1]&&"|"!=g[1]?0==g.length?f="relative path start":(this._host=c.call(this,g),g="",f="relative path start"):f="relative path";continue}"\t"==b||"\n"==b||"\r"==b?l("Invalid whitespace in file host."):g+=b;break;case"host":case"hostname":if(":"!=b||y){if(a==b||"/"==b||"\\"==b||"?"==b||"#"==b){if(this._host=c.call(this,g),g="",f="relative path start",t)break e;continue}"\t"!=b&&"\n"!=b&&"\r"!=b?("["==b?y=!0:"]"==b&&(y=!1),g+=b):l("Invalid code point in host/hostname: "+b)}else if(this._host=c.call(this,g),g="",f="port","hostname"==t)break e;break;case"port":if(/[0-9]/.test(b))g+=b;else{if(a==b||"/"==b||"\\"==b||"?"==b||"#"==b||t){if(""!=g){var M=parseInt(g,10);M!=n[this._scheme]&&(this._port=M+""),g=""}if(t)break e;f="relative path start";continue}"\t"==b||"\n"==b||"\r"==b?l("Invalid code point in port: "+b):d.call(this)}break;case"relative path start":if("\\"==b&&l("'\\' not allowed in path."),f="relative path","/"!=b&&"\\"!=b)continue;break;case"relative path":var C;if(a!=b&&"/"!=b&&"\\"!=b&&(t||"?"!=b&&"#"!=b))"\t"!=b&&"\n"!=b&&"\r"!=b&&(g+=p(b));else"\\"==b&&l("\\ not allowed in relative path."),(C=r[g.toLowerCase()])&&(g=C),".."==g?(this._path.pop(),"/"!=b&&"\\"!=b&&this._path.push("")):"."==g&&"/"!=b&&"\\"!=b?this._path.push(""):"."!=g&&("file"==this._scheme&&0==this._path.length&&2==g.length&&s.test(g[0])&&"|"==g[1]&&(g=g[0]+":"),this._path.push(g)),g="","?"==b?(this._query="?",f="query"):"#"==b&&(this._fragment="#",f="fragment");break;case"query":t||"#"!=b?a!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._query+=h(b)):(this._fragment="#",f="fragment");break;case"fragment":a!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._fragment+=b)}m++}}function m(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function g(e,t){void 0===t||t instanceof g||(t=new g(String(t))),this._url=e,m.call(this);var i=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");f.call(this,i,null,t)}}(self),"undefined"==typeof WeakMap&&function(){var e=Object.defineProperty,t=Date.now()%1e9,i=function(){this.name="__st"+(1e9*Math.random()>>>0)+t+++"__"};i.prototype={set:function(t,i){var n=t[this.name];return n&&n[0]===t?n[1]=i:e(t,this.name,{value:[t,i],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e)&&(t[0]=t[1]=void 0,!0)},has:function(e){var t=e[this.name];return!!t&&t[0]===e}},window.WeakMap=i}(),function(e){if(!e.JsMutationObserver){var t,i=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))t=setTimeout;else if(window.setImmediate)t=window.setImmediate;else{var n=[],r=String(Math.random());window.addEventListener("message",function(e){if(e.data===r){var t=n;n=[],t.forEach(function(e){e()})}}),t=function(e){n.push(e),window.postMessage(r,"*")}}var a,s,o=!1,l=[],u=0;p.prototype={observe:function(e,t){var n;if(n=e,e=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(n)||n,!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var r,a=i.get(e);a||i.set(e,a=[]);for(var s=0;s<a.length;s++)if(a[s].observer===this){(r=a[s]).removeListeners(),r.options=t;break}r||(r=new v(this,e,t),a.push(r),this.nodes_.push(e)),r.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=i.get(e),n=0;n<t.length;n++){var r=t[n];if(r.observer===this){r.removeListeners(),t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}},v.prototype={enqueue:function(e){var i,n=this.observer.records_,r=n.length;if(n.length>0){var a=g(n[r-1],e);if(a)return void(n[r-1]=a)}else i=this.observer,l.push(i),o||(o=!0,t(d));n[r]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=i.get(e);t||i.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=i.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,i=e.relatedNode.namespaceURI,n=e.target;(o=new f("attributes",n)).attributeName=t,o.attributeNamespace=i;var r=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;c(n,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(i)))return e.attributeOldValue?m(r):o});break;case"DOMCharacterDataModified":var o=f("characterData",n=e.target);r=e.prevValue;c(n,function(e){if(e.characterData)return e.characterDataOldValue?m(r):o});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var l,u,d=e.target;"DOMNodeInserted"===e.type?(l=[d],u=[]):(l=[],u=[d]);var p=d.previousSibling,h=d.nextSibling;(o=f("childList",e.target.parentNode)).addedNodes=l,o.removedNodes=u,o.previousSibling=p,o.nextSibling=h,c(e.relatedNode,function(e){if(e.childList)return o})}a=s=void 0}},e.JsMutationObserver=p,e.MutationObserver||(e.MutationObserver=p,p._isPolyfilled=!0)}function d(){o=!1;var e=l;l=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var n=e.takeRecords();!function(e){e.nodes_.forEach(function(t){var n=i.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}(e),n.length&&(e.callback_(n,e),t=!0)}),t&&d()}function c(e,t){for(var n=e;n;n=n.parentNode){var r=i.get(n);if(r)for(var a=0;a<r.length;a++){var s=r[a],o=s.options;if(n===e||o.subtree){var l=t(o);l&&s.enqueue(l)}}}}function p(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++u}function h(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function f(e,t){return a=new h(e,t)}function m(e){return s||((i=new h((t=a).type,t.target)).addedNodes=t.addedNodes.slice(),i.removedNodes=t.removedNodes.slice(),i.previousSibling=t.previousSibling,i.nextSibling=t.nextSibling,i.attributeName=t.attributeName,i.attributeNamespace=t.attributeNamespace,i.oldValue=t.oldValue,(s=i).oldValue=e,s);var t,i}function g(e,t){return e===t?e:s&&((i=e)===s||i===a)?s:null;var i}function v(e,t,i){this.observer=e,this.target=t,this.options=i,this.transientObservedNodes=[]}}(self),function(){var e,t="undefined"==typeof HTMLTemplateElement;/Trident/.test(navigator.userAgent)&&(e=document.importNode,document.importNode=function(){var t=e.apply(document,arguments);if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var i=document.createDocumentFragment();return i.appendChild(t),i}return t});var i=function(){if(!t){var e=document.createElement("template"),i=document.createElement("template");i.content.appendChild(document.createElement("div")),e.content.appendChild(i);var n=e.cloneNode(!0);return 0===n.content.childNodes.length||0===n.content.firstChild.content.childNodes.length}}(),n=function(){};if(t){var r=document.implementation.createHTMLDocument("template"),a=!0,s=document.createElement("style");s.textContent="template{display:none;}";var o=document.head;o.insertBefore(s,o.firstElementChild),n.prototype=Object.create(HTMLElement.prototype),n.decorate=function(e){if(!e.content){var t;for(e.content=r.createDocumentFragment();t=e.firstChild;)e.content.appendChild(t);if(e.cloneNode=function(e){return n.cloneNode(this,e)},a)try{Object.defineProperty(e,"innerHTML",{get:function(){for(var e="",t=this.content.firstChild;t;t=t.nextSibling)e+=t.outerHTML||t.data.replace(u,d);return e},set:function(e){for(r.body.innerHTML=e,n.bootstrap(r);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;r.body.firstChild;)this.content.appendChild(r.body.firstChild)},configurable:!0})}catch(e){a=!1}n.bootstrap(e.content)}},n.bootstrap=function(e){for(var t,i=e.querySelectorAll("template"),r=0,a=i.length;r<a&&(t=i[r]);r++)n.decorate(t)},document.addEventListener("DOMContentLoaded",function(){n.bootstrap(document)});var l=document.createElement;document.createElement=function(){"use strict";var e=l.apply(document,arguments);return"template"===e.localName&&n.decorate(e),e};var u=/[&\u00A0<>]/g;function d(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;"}}}if(t||i){var c=Node.prototype.cloneNode;n.cloneNode=function(e,t){var i=c.call(e,!1);return this.decorate&&this.decorate(i),t&&(i.content.appendChild(c.call(e.content,!0)),this.fixClonedDom(i.content,e.content)),i},n.fixClonedDom=function(e,t){if(t.querySelectorAll)for(var i,n,r=t.querySelectorAll("template"),a=e.querySelectorAll("template"),s=0,o=a.length;s<o;s++)n=r[s],i=a[s],this.decorate&&this.decorate(n),i.parentNode.replaceChild(n.cloneNode(!0),i)};var p=document.importNode;Node.prototype.cloneNode=function(e){var t=c.call(this,e);return e&&n.fixClonedDom(t,this),t},document.importNode=function(e,t){if("template"===e.localName)return n.cloneNode(e,t);var i=p.call(document,e,t);return t&&n.fixClonedDom(i,e),i},i&&(HTMLTemplateElement.prototype.cloneNode=function(e){return n.cloneNode(this,e)})}t&&(window.HTMLTemplateElement=n)}(),function(e){"use strict";if(!window.performance||!window.performance.now){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}var i,n;if(window.requestAnimationFrame||(window.requestAnimationFrame=(i=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)?function(e){return i(function(){e(performance.now())})}:function(e){return window.setTimeout(e,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}),!((n=document.createEvent("Event")).initEvent("foo",!0,!0),n.preventDefault(),n.defaultPrevented)){var r=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(r.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var a=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||a&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),i},window.CustomEvent.prototype=window.Event.prototype),!window.Event||a&&"function"!=typeof window.Event){var s=window.Event;window.Event=function(e,t){t=t||{};var i=document.createEvent("Event");return i.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),i},window.Event.prototype=s.prototype}}(window.WebComponents),window.HTMLImports=window.HTMLImports||{flags:{}},function(e){var t=Boolean("import"in document.createElement("link")),i=Boolean(window.ShadowDOMPolyfill),n=function(e){return i?window.ShadowDOMPolyfill.wrapIfNeeded(e):e},r=n(document),a={get:function(){var e=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null);return n(e)},configurable:!0};Object.defineProperty(document,"_currentScript",a),Object.defineProperty(r,"_currentScript",a);var s=/Trident/.test(navigator.userAgent);function o(e,i){(function e(t,i){if(function(e){return"complete"===e.readyState||e.readyState===l}(i))t&&t();else{var n=function(){"complete"!==i.readyState&&i.readyState!==l||(i.removeEventListener(u,n),e(t,i))};i.addEventListener(u,n)}})(function(){!function(e,i){var n=i.querySelectorAll("link[rel=import]"),r=0,a=n.length,s=[],o=[];function l(){r==a&&e&&e({allImports:n,loadedImports:s,errorImports:o})}function u(e){d(e),s.push(this),r++,l()}function c(e){o.push(this),r++,l()}if(a)for(var p,h=0;h<a&&(p=n[h]);h++)f=p,(t?f.__loaded||f.import&&"loading"!==f.import.readyState:f.__importParsed)?(s.push(this),r++,l()):(p.addEventListener("load",u),p.addEventListener("error",c));else l();var f}(e,i)},i=i||r)}var l=s?"complete":"interactive",u="readystatechange";function d(e){e.target.__loaded=!0}if(t){function c(e){for(var t,i=0,n=e.length;i<n&&(t=e[i]);i++)"link"===(r=t).localName&&"import"===r.rel&&p(t);var r}function p(e){e.import?d({target:e}):(e.addEventListener("load",d),e.addEventListener("error",d))}new MutationObserver(function(e){for(var t,i=0,n=e.length;i<n&&(t=e[i]);i++)t.addedNodes&&c(t.addedNodes)}).observe(document.head,{childList:!0}),function(){if("loading"===document.readyState)for(var e,t=document.querySelectorAll("link[rel=import]"),i=0,n=t.length;i<n&&(e=t[i]);i++)p(e)}()}o(function(e){window.HTMLImports.ready=!0,window.HTMLImports.readyTime=(new Date).getTime();var t=r.createEvent("CustomEvent");t.initCustomEvent("HTMLImportsLoaded",!0,!0,e),r.dispatchEvent(t)}),e.IMPORT_LINK_TYPE="import",e.useNative=t,e.rootDocument=r,e.whenReady=o,e.isIE=s}(window.HTMLImports),n=window.HTMLImports,r=[],n.addModule=function(e){r.push(e)},n.initializeModules=function(){r.forEach(function(e){e(n)})},window.HTMLImports.addModule(function(e){var t=/(url\()([^)]*)(\))/g,i=/(@import[\s]+(?!url\())([^;]*)(;)/g,n={resolveUrlsInStyle:function(e,t){var i=e.ownerDocument.createElement("a");return e.textContent=this.resolveUrlsInCssText(e.textContent,t,i),e},resolveUrlsInCssText:function(e,n,r){var a=this.replaceUrls(e,r,n,t);return a=this.replaceUrls(a,r,n,i)},replaceUrls:function(e,t,i,n){return e.replace(n,function(e,n,r,a){var s=r.replace(/["']/g,"");return i&&(s=new URL(s,i).href),t.href=s,n+"'"+(s=t.href)+"'"+a})}};e.path=n}),window.HTMLImports.addModule(function(e){var t={async:!0,ok:function(e){return e.status>=200&&e.status<300||304===e.status||0===e.status},load:function(i,n,r){var a=new XMLHttpRequest;return(e.flags.debug||e.flags.bust)&&(i+="?"+Math.random()),a.open("GET",i,t.async),a.addEventListener("readystatechange",function(e){if(4===a.readyState){var i=null;try{var s=a.getResponseHeader("Location");s&&(i="/"===s.substr(0,1)?location.origin+s:s)}catch(e){console.error(e.message)}n.call(r,!t.ok(a)&&a,a.response||a.responseText,i)}}),a.send(),a},loadDocument:function(e,t,i){this.load(e,t,i).responseType="document"}};e.xhr=t}),window.HTMLImports.addModule(function(e){var t=e.xhr,i=e.flags,n=function(e,t){this.cache={},this.onload=e,this.oncomplete=t,this.inflight=0,this.pending={}};n.prototype={addNodes:function(e){this.inflight+=e.length;for(var t,i=0,n=e.length;i<n&&(t=e[i]);i++)this.require(t);this.checkDone()},addNode:function(e){this.inflight++,this.require(e),this.checkDone()},require:function(e){var t=e.src||e.href;e.__nodeUrl=t,this.dedupe(t,e)||this.fetch(t,e)},dedupe:function(e,t){return this.pending[e]?(this.pending[e].push(t),!0):this.cache[e]?(this.onload(e,t,this.cache[e]),this.tail(),!0):(this.pending[e]=[t],!1)},fetch:function(e,n){if(i.load&&console.log("fetch",e,n),e)if(e.match(/^data:/)){var r=e.split(","),a=r[0],s=r[1];s=a.indexOf(";base64")>-1?atob(s):decodeURIComponent(s),setTimeout(function(){this.receive(e,n,null,s)}.bind(this),0)}else{var o=function(t,i,r){this.receive(e,n,t,i,r)}.bind(this);t.load(e,o)}else setTimeout(function(){this.receive(e,n,{error:"href must be specified"},null)}.bind(this),0)},receive:function(e,t,i,n,r){this.cache[e]=n;for(var a,s=this.pending[e],o=0,l=s.length;o<l&&(a=s[o]);o++)this.onload(e,a,n,i,r),this.tail();this.pending[e]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},e.Loader=n}),window.HTMLImports.addModule(function(e){var t=function(e){this.addCallback=e,this.mo=new MutationObserver(this.handler.bind(this))};t.prototype={handler:function(e){for(var t,i=0,n=e.length;i<n&&(t=e[i]);i++)"childList"===t.type&&t.addedNodes.length&&this.addedNodes(t.addedNodes)},addedNodes:function(e){this.addCallback&&this.addCallback(e);for(var t,i=0,n=e.length;i<n&&(t=e[i]);i++)t.children&&t.children.length&&this.addedNodes(t.children)},observe:function(e){this.mo.observe(e,{childList:!0,subtree:!0})}},e.Observer=t}),window.HTMLImports.addModule(function(e){var t=e.path,i=e.rootDocument,n=e.flags,r=e.isIE,a=e.IMPORT_LINK_TYPE,s="link[rel="+a+"]",o={documentSelectors:s,importsSelectors:[s,"link[rel=stylesheet]:not([type])","style:not([type])","script:not([type])",'script[type="application/javascript"]','script[type="text/javascript"]'].join(","),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var e=this.nextToParse();e&&this.parse(e)},parse:function(e){if(this.isParsed(e))n.parse&&console.log("[%s] is already parsed",e.localName);else{var t=this[this.map[e.localName]];t&&(this.markParsing(e),t.call(this,e))}},parseDynamic:function(e,t){this.dynamicElements.push(e),t||this.parseNext()},markParsing:function(e){n.parse&&console.log("parsing",e),this.parsingElement=e},markParsingComplete:function(e){e.__importParsed=!0,this.markDynamicParsingComplete(e),e.__importElement&&(e.__importElement.__importParsed=!0,this.markDynamicParsingComplete(e.__importElement)),this.parsingElement=null,n.parse&&console.log("completed",e)},markDynamicParsingComplete:function(e){var t=this.dynamicElements.indexOf(e);t>=0&&this.dynamicElements.splice(t,1)},parseImport:function(e){if(e.import=e.__doc,window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(e),e.import&&(e.import.__importParsed=!0),this.markParsingComplete(e),e.__resource&&!e.__error?e.dispatchEvent(new CustomEvent("load",{bubbles:!1})):e.dispatchEvent(new CustomEvent("error",{bubbles:!1})),e.__pending)for(var t;e.__pending.length;)(t=e.__pending.shift())&&t({target:e});this.parseNext()},parseLink:function(e){l(e)?this.parseImport(e):(e.href=e.href,this.parseGeneric(e))},parseStyle:function(e){var i,n,r=e;(n=(i=e).ownerDocument.createElement("style")).textContent=i.textContent,t.resolveUrlsInStyle(n),e=n,r.__appliedElement=e,e.__importElement=r,this.parseGeneric(e)},parseGeneric:function(e){this.trackElement(e),this.addElementToDocument(e)},rootImportForElement:function(e){for(var t=e;t.ownerDocument.__importLink;)t=t.ownerDocument.__importLink;return t},addElementToDocument:function(e){var t=this.rootImportForElement(e.__importElement||e);t.parentNode.insertBefore(e,t)},trackElement:function(e,t){var i=this,n=function(r){e.removeEventListener("load",n),e.removeEventListener("error",n),t&&t(r),i.markParsingComplete(e),i.parseNext()};if(e.addEventListener("load",n),e.addEventListener("error",n),r&&"style"===e.localName){var a=!1;if(-1==e.textContent.indexOf("@import"))a=!0;else if(e.sheet){a=!0;for(var s,o=e.sheet.cssRules,l=o?o.length:0,u=0;u<l&&(s=o[u]);u++)s.type===CSSRule.IMPORT_RULE&&(a=a&&Boolean(s.styleSheet))}a&&setTimeout(function(){e.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(t){var i=document.createElement("script");i.__importElement=t,i.src=t.src?t.src:function(e){var t=function(e){return e.textContent+function(e){var t=e.ownerDocument;t.__importedScripts=t.__importedScripts||0;var i=e.ownerDocument.baseURI,n=t.__importedScripts?"-"+t.__importedScripts:"";return t.__importedScripts++,"\n//# sourceURL="+i+n+".js\n"}(e)}(e);return"data:text/javascript;charset=utf-8,"+encodeURIComponent(t)}(t),e.currentScript=t,this.trackElement(i,function(t){i.parentNode&&i.parentNode.removeChild(i),e.currentScript=null}),this.addElementToDocument(i)},nextToParse:function(){return this._mayParse=[],!this.parsingElement&&(this.nextToParseInDoc(i)||this.nextToParseDynamic())},nextToParseInDoc:function(e,t){if(e&&this._mayParse.indexOf(e)<0){this._mayParse.push(e);for(var i,n=e.querySelectorAll(this.parseSelectorsForNode(e)),r=0,a=n.length;r<a&&(i=n[r]);r++)if(!this.isParsed(i))return this.hasResource(i)?l(i)?this.nextToParseInDoc(i.__doc,i):i:void 0}return t},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(e){return(e.ownerDocument||e)===i?this.documentSelectors:this.importsSelectors},isParsed:function(e){return e.__importParsed},needsDynamicParsing:function(e){return this.dynamicElements.indexOf(e)>=0},hasResource:function(e){return!l(e)||void 0!==e.__doc}};function l(e){return"link"===e.localName&&e.rel===a}e.parser=o,e.IMPORT_SELECTOR=s}),window.HTMLImports.addModule(function(e){var t=e.flags,i=e.IMPORT_LINK_TYPE,n=e.IMPORT_SELECTOR,r=e.rootDocument,a=e.Loader,s=e.Observer,o=e.parser,l={documents:{},documentPreloadSelectors:n,importsPreloadSelectors:[n].join(","),loadNode:function(e){u.addNode(e)},loadSubtree:function(e){var t=this.marshalNodes(e);u.addNodes(t)},marshalNodes:function(e){return e.querySelectorAll(this.loadSelectorsForNode(e))},loadSelectorsForNode:function(e){return(e.ownerDocument||e)===r?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(e,n,r,a,s){if(t.load&&console.log("loaded",e,n),n.__resource=r,n.__error=a,function(e){return function(e,t){return"link"===e.localName&&e.getAttribute("rel")===t}(e,i)}(n)){var l=this.documents[e];void 0===l&&((l=a?null:function(e,t){var n=document.implementation.createHTMLDocument(i);n._URL=t;var r=n.createElement("base");r.setAttribute("href",t),n.baseURI||function(e){return!!Object.getOwnPropertyDescriptor(e,"baseURI")}(n)||Object.defineProperty(n,"baseURI",{value:t});var a=n.createElement("meta");a.setAttribute("charset","utf-8"),n.head.appendChild(a),n.head.appendChild(r),n.body.innerHTML=e,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(n);return n}(r,s||e))&&(l.__importLink=n,this.bootDocument(l)),this.documents[e]=l),n.__doc=l}o.parseNext()},bootDocument:function(e){this.loadSubtree(e),this.observer.observe(e),o.parseNext()},loadedAll:function(){o.parseNext()}},u=new a(l.loaded.bind(l),l.loadedAll.bind(l));if(l.observer=new s,!document.baseURI){var d={get:function(){var e=document.querySelector("base");return e?e.href:window.location.href},configurable:!0};Object.defineProperty(document,"baseURI",d),Object.defineProperty(r,"baseURI",d)}e.importer=l,e.importLoader=u}),window.HTMLImports.addModule(function(e){var t=e.parser,i=e.importer,n={added:function(e){for(var n,r,a,s,o=0,l=e.length;o<l&&(s=e[o]);o++)n||(n=s.ownerDocument,r=t.isParsed(n)),(a=this.shouldLoadNode(s))&&i.loadNode(s),this.shouldParseNode(s)&&r&&t.parseDynamic(s,a)},shouldLoadNode:function(e){return 1===e.nodeType&&r.call(e,i.loadSelectorsForNode(e))},shouldParseNode:function(e){return 1===e.nodeType&&r.call(e,t.parseSelectorsForNode(e))}};i.observer.addCallback=n.added.bind(n);var r=HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector}),function(e){var t=e.initializeModules;e.isIE;if(!e.useNative){t();var i=e.rootDocument;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?n():document.addEventListener("DOMContentLoaded",n)}function n(){window.HTMLImports.importer.bootDocument(i)}}(window.HTMLImports),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,i=[];e.addModule=function(e){i.push(e)},e.initializeModules=function(){i.forEach(function(t){t(e)})},e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(e){var t=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";function i(e,t){!function e(t,i,n){var r=t.firstElementChild;if(!r)for(r=t.firstChild;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.nextSibling;for(;r;)!0!==i(r,n)&&e(r,i,n),r=r.nextElementSibling;return null}(e,function(e){if(t(e))return!0;n(e,t)}),n(e,t)}function n(e,t){for(var n=e.shadowRoot;n;)i(n,t),n=n.olderShadowRoot}e.forDocumentTree=function(e,i){!function e(i,n,r){if(i=window.wrap(i),!(r.indexOf(i)>=0)){r.push(i);for(var a,s=i.querySelectorAll("link[rel="+t+"]"),o=0,l=s.length;o<l&&(a=s[o]);o++)a.import&&e(a.import,n,r);n(i)}}(e,i,[])},e.forSubtree=i}),window.CustomElements.addModule(function(e){var t=e.flags,i=e.forSubtree,n=e.forDocumentTree;function r(e,t){return a(e,t)||s(e,t)}function a(t,i){if(e.upgrade(t,i))return!0;i&&p(t)}function s(e,t){i(e,function(e){if(a(e,t))return!0})}var o=window.MutationObserver._isPolyfilled&&t["throttle-attached"];e.hasPolyfillMutations=o,e.hasThrottledAttached=o;var l=!1,u=[];function d(e){u.push(e),l||(l=!0,setTimeout(c))}function c(){l=!1;for(var e,t=u,i=0,n=t.length;i<n&&(e=t[i]);i++)e();u=[]}function p(e){o?d(function(){h(e)}):h(e)}function h(e){e.__upgraded__&&!e.__attached&&(e.__attached=!0,e.attachedCallback&&e.attachedCallback())}function f(e){o?d(function(){m(e)}):m(e)}function m(e){e.__upgraded__&&e.__attached&&(e.__attached=!1,e.detachedCallback&&e.detachedCallback())}function g(e,n){if(t.dom){var a=n[0];if(a&&"childList"===a.type&&a.addedNodes&&a.addedNodes){for(var s=a.addedNodes[0];s&&s!==document&&!s.host;)s=s.parentNode;var o=s&&(s.URL||s._URL||s.host&&s.host.localName)||"";o=o.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,o||"")}var l=function(e){for(var t=e,i=window.wrap(document);t;){if(t==i)return!0;t=t.parentNode||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host}}(e);n.forEach(function(e){"childList"===e.type&&(v(e.addedNodes,function(e){e.localName&&r(e,l)}),v(e.removedNodes,function(e){var t;e.localName&&(f(t=e),i(t,function(e){f(e)}))}))}),t.dom&&console.groupEnd()}var v=Array.prototype.forEach.call.bind(Array.prototype.forEach);function y(e){if(!e.__observer){var t=new MutationObserver(g.bind(this,e));t.observe(e,{childList:!0,subtree:!0}),e.__observer=t}}function _(e){e=window.wrap(e),t.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop()),r(e,e===window.wrap(document)),y(e),t.dom&&console.groupEnd()}var b=Element.prototype.createShadowRoot;b&&(Element.prototype.createShadowRoot=function(){var e=b.call(this);return window.CustomElements.watchShadow(this),e}),e.watchShadow=function(e){if(e.shadowRoot&&!e.shadowRoot.__watched){t.dom&&console.log("watching shadow-root for: ",e.localName);for(var i=e.shadowRoot;i;)y(i),i=i.olderShadowRoot}},e.upgradeDocumentTree=function(e){n(e,_)},e.upgradeDocument=_,e.upgradeSubtree=s,e.upgradeAll=r,e.attached=p,e.takeRecords=function(e){for((e=window.wrap(e))||(e=window.wrap(document));e.parentNode;)e=e.parentNode;var t=e.__observer;t&&(g(e,t.takeRecords()),c())}}),window.CustomElements.addModule(function(e){var t=e.flags;function i(i,r,a){return t.upgrade&&console.group("upgrade:",i.localName),r.is&&i.setAttribute("is",r.is),n(i,r),i.__upgraded__=!0,function(e){e.createdCallback&&e.createdCallback()}(i),a&&e.attached(i),e.upgradeSubtree(i,a),t.upgrade&&console.groupEnd(),i}function n(e,t){Object.__proto__?e.__proto__=t.prototype:(!function(e,t,i){var n={},r=t;for(;r!==i&&r!==HTMLElement.prototype;){for(var a,s=Object.getOwnPropertyNames(r),o=0;a=s[o];o++)n[a]||(Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a)),n[a]=1);r=Object.getPrototypeOf(r)}}(e,t.prototype,t.native),e.__proto__=t.prototype)}e.upgrade=function(t,n){if("template"===t.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var r=t.getAttribute("is"),a=e.getRegisteredDefinition(t.localName)||e.getRegisteredDefinition(r);if(a&&(r&&a.tag==t.localName||!r&&!a.extends))return i(t,a,n)}},e.upgradeWithDefinition=i,e.implementPrototype=n}),window.CustomElements.addModule(function(e){e.isIE;var t=e.upgradeDocumentTree,i=e.upgradeAll,n=e.upgradeWithDefinition,r=e.implementPrototype,a=e.useNative;function s(e,t,i){e=e.toLowerCase();var n=this.getAttribute(e);i.apply(this,arguments);var r=this.getAttribute(e);this.attributeChangedCallback&&r!==n&&this.attributeChangedCallback(e,n,r)}var o=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var l={};function u(e){if(e)return l[e.toLowerCase()]}var d="http://www.w3.org/1999/xhtml";function c(e,t){e&&(e=e.toLowerCase()),t&&(t=t.toLowerCase());var i,n=u(t||e);if(n){if(e==n.tag&&t==n.is)return new n.ctor;if(!t&&!n.is)return new n.ctor}return t?((i=c(e)).setAttribute("is",t),i):(i=h(e),e.indexOf("-")>=0&&r(i,HTMLElement),i)}var p,h=document.createElement.bind(document),f=document.createElementNS.bind(document);function m(e,t){var n=e[t];e[t]=function(){var e=n.apply(this,arguments);return i(e),e}}p=Object.__proto__||a?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;for(var i=e;i;){if(i===t.prototype)return!0;i=i.__proto__}return!1},m(Node.prototype,"cloneNode"),m(document,"importNode"),document.registerElement=function(i,r){var a=r||{};if(!i)throw new Error("document.registerElement: first argument `name` must not be empty");if(i.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(i)+"'.");if(function(e){for(var t=0;t<o.length;t++)if(e===o[t])return!0}(i))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(i)+"'. The type name is invalid.");if(u(i))throw new Error("DuplicateDefinitionError: a type with name '"+String(i)+"' is already registered");return a.prototype||(a.prototype=Object.create(HTMLElement.prototype)),a.__name=i.toLowerCase(),a.extends&&(a.extends=a.extends.toLowerCase()),a.lifecycle=a.lifecycle||{},a.ancestry=function e(t){var i=u(t);return i?e(i.extends).concat([i]):[]}(a.extends),function(e){for(var t,i=e.extends,n=0;t=e.ancestry[n];n++)i=t.is&&t.tag;e.tag=i||e.__name,i&&(e.is=e.__name)}(a),function(e){if(!Object.__proto__){var t=HTMLElement.prototype;if(e.is){var i=document.createElement(e.tag);t=Object.getPrototypeOf(i)}for(var n,r=e.prototype,a=!1;r;)r==t&&(a=!0),(n=Object.getPrototypeOf(r))&&(r.__proto__=n),r=n;a||console.warn(e.tag+" prototype not found in prototype chain for "+e.is),e.native=t}}(a),function(e){if(!e.setAttribute._polyfilled){var t=e.setAttribute;e.setAttribute=function(e,i){s.call(this,e,i,t)};var i=e.removeAttribute;e.removeAttribute=function(e){s.call(this,e,null,i)},e.setAttribute._polyfilled=!0}}(a.prototype),function(e,t){l[e]=t}(a.__name,a),a.ctor=function(e){return function(){return function(e){return n(h(e.tag),e)}(e)}}(a),a.ctor.prototype=a.prototype,a.prototype.constructor=a.ctor,e.ready&&t(document),a.ctor},document.createElement=c,document.createElementNS=function(e,t,i){return e===d?c(t,i):f(e,t)},e.registry=l,e.instanceof=p,e.reservedTagList=o,e.getRegisteredDefinition=u,document.register=document.registerElement}),function(e){var t=e.useNative,i=e.initializeModules;e.isIE;if(t){var n=function(){};e.watchShadow=n,e.upgrade=n,e.upgradeAll=n,e.upgradeDocumentTree=n,e.upgradeSubtree=n,e.takeRecords=n,e.instanceof=function(e,t){return e instanceof t}}else i();var r=e.upgradeDocumentTree,a=e.upgradeDocument;function s(){r(window.wrap(document)),window.CustomElements.ready=!0,(window.requestAnimationFrame||function(e){setTimeout(e,16)})(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(e){e.import&&a(wrap(e.import))}),"complete"===document.readyState||e.flags.eager)s();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var o=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(o,s)}else s()}(window.CustomElements),function(e){var t=document.createElement("style");t.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var i=document.querySelector("head");i.insertBefore(t,i.firstChild)}(window.WebComponents)},{}],3:[function(e,t,i){"use strict";var n,r=e("class.extend"),a=!1;function s(){return cast.framework.CastContext.getInstance()}(n=r.extend({init:function(e){this.player=e,this._sessionListener=this._onSessionStateChange.bind(this),this._castListener=this._onCastStateChange.bind(this),this._addCastContextEventListeners(),this.player.on("dispose",this._removeCastContextEventListeners.bind(this)),this._notifyPlayerOfDevicesAvailabilityChange(this.getCastContext().getCastState()),this.remotePlayer=new cast.framework.RemotePlayer,this.remotePlayerController=new cast.framework.RemotePlayerController(this.remotePlayer)},_addCastContextEventListeners:function(){var e=cast.framework.CastContextEventType.SESSION_STATE_CHANGED,t=cast.framework.CastContextEventType.CAST_STATE_CHANGED;this.getCastContext().addEventListener(e,this._sessionListener),this.getCastContext().addEventListener(t,this._castListener)},_removeCastContextEventListeners:function(){var e=cast.framework.CastContextEventType.SESSION_STATE_CHANGED,t=cast.framework.CastContextEventType.CAST_STATE_CHANGED;this.getCastContext().removeEventListener(e,this._sessionListener),this.getCastContext().removeEventListener(t,this._castListener)},_onSessionStateChange:function(e){e.sessionState===cast.framework.SessionState.SESSION_ENDED&&(this.player.trigger("chromecastDisconnected"),this._reloadTech())},_onCastStateChange:function(e){this._notifyPlayerOfDevicesAvailabilityChange(e.castState)},_notifyPlayerOfDevicesAvailabilityChange:function(e){this.hasAvailableDevices(e)?this.player.trigger("chromecastDevicesAvailable"):this.player.trigger("chromecastDevicesUnavailable")},hasAvailableDevices:function(e){return(e=e||this.getCastContext().getCastState())===cast.framework.CastState.NOT_CONNECTED||e===cast.framework.CastState.CONNECTING||e===cast.framework.CastState.CONNECTED},openCastMenu:function(){var e;this.player.currentSource()&&(e=function(){a=!0,this.player.trigger("chromecastConnected"),this._reloadTech()}.bind(this),this.getCastContext().requestSession().then(e,function(){}))},_reloadTech:function(){var e=this.player,t=e.currentTime(),i=e.paused(),n=e.currentSources();e.src(n),e.ready(function(){i?e.pause():e.play(),e.currentTime(t||0)})},getCastContext:s,getRemotePlayer:function(){return this.remotePlayer},getRemotePlayerController:function(){return this.remotePlayerController}})).isChromecastAPIAvailable=function(){return window.chrome&&window.chrome.cast&&window.cast},n.isChromecastConnected=function(){return n.isChromecastAPIAvailable()&&s().getCastState()===cast.framework.CastState.CONNECTED&&a},t.exports=n},{"class.extend":1}],4:[function(e,t,i){"use strict";var n;n={constructor:function(e){this.constructor.super_.apply(this,arguments),e.on("chromecastConnected",this._onChromecastConnected.bind(this)),e.on("chromecastDisconnected",this._onChromecastDisconnected.bind(this)),e.on("chromecastDevicesAvailable",this._onChromecastDevicesAvailable.bind(this)),e.on("chromecastDevicesUnavailable",this._onChromecastDevicesUnavailable.bind(this)),this.controlText("Open Chromecast menu"),e.chromecastSessionManager&&e.chromecastSessionManager.hasAvailableDevices()?this._onChromecastDevicesAvailable():this._onChromecastDevicesUnavailable()},buildCSSClass:function(){return"vjs-chromecast-button "+(this._isChromecastConnected?"vjs-chromecast-casting-state ":"")+this.constructor.super_.prototype.buildCSSClass()},handleClick:function(){this.player().trigger("chromecastRequested")},_onChromecastConnected:function(){this._isChromecastConnected=!0,this._reloadCSSClasses()},_onChromecastDisconnected:function(){this._isChromecastConnected=!1,this._reloadCSSClasses()},_onChromecastDevicesAvailable:function(){this.show()},_onChromecastDevicesUnavailable:function(){this.hide()},_reloadCSSClasses:function(){this.el_&&(this.el_.className=this.buildCSSClass())}},t.exports=function(e){var t;t=e.extend(e.getComponent("Button"),n),e.registerComponent("chromecastButton",t)}},{}],5:[function(e,t,i){"use strict";var n=e("./chromecast/ChromecastSessionManager"),r=1e3,a=3e4;function s(e,t){!function(e){cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:e.receiverAppID||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}(t),function(e){e.chromecastSessionManager||(e.chromecastSessionManager=new n(e))}(e),function(e,t){var i;t.addButtonToControlBar&&!e.controlBar.getChild("chromecastButton")&&(i=e.controlBar.children().length,void 0!==t.buttonPositionIndex&&(i=t.buttonPositionIndex>=0?t.buttonPositionIndex:e.controlBar.children().length+t.buttonPositionIndex),e.controlBar.addChild("chromecastButton",t,i)),e.on("chromecastRequested",function(e){e.chromecastSessionManager.openCastMenu()}.bind(null,e))}(e,t)}t.exports=function(e){e.registerPlugin("chromecast",function(e){var t=Object.assign({addButtonToControlBar:!0},e||{});this.ready(function(){var e,i,o,l,u;this.controlBar&&(n.isChromecastAPIAvailable()?s(this,t):(e=this,i=t,l=a/r,u=1,o=setInterval(function(){u>l?clearInterval(o):(n.isChromecastAPIAvailable()&&(clearInterval(o),s(e,i)),u+=1)},r)))}.bind(this))})}},{"./chromecast/ChromecastSessionManager":3}],6:[function(e,t,i){"use strict";var n=e("./preloadWebComponents"),r=e("./components/ChromecastButton"),a=e("./tech/ChromecastTech"),s=e("./enableChromecast");t.exports=function(e,t){Object.assign({preloadWebComponents:!1},t).preloadWebComponents&&n(),e=e||window.videojs,r(e),a(e),s(e)}},{"./components/ChromecastButton":4,"./enableChromecast":5,"./preloadWebComponents":7,"./tech/ChromecastTech":9}],7:[function(e,t,i){"use strict";function n(e){return"string"==typeof window.navigator.userAgent&&window.navigator.userAgent.indexOf(e)>=0}t.exports=function(){var t=!document.registerElement,i=n("CriOS");(n("Android")&&n("Chrome/")&&window.navigator.presentation||i)&&t&&e("webcomponents.js/webcomponents-lite.js")}},{"webcomponents.js/webcomponents-lite.js":2}],8:[function(e,t,i){"use strict";e("./index")(void 0,window.SILVERMINE_VIDEOJS_CHROMECAST_CONFIG)},{"./index":6}],9:[function(e,t,i){"use strict";var n,r=e("../chromecast/ChromecastSessionManager"),a=e("./ChromecastTechUI");n={constructor:function(e){var t;return this._eventListeners=[],this.videojsPlayer=this.videojs(e.playerId),this._chromecastSessionManager=this.videojsPlayer.chromecastSessionManager,this._ui=new a,this._ui.updatePoster(this.videojsPlayer.poster()),t=this.constructor.super_.apply(this,arguments),this._remotePlayer=this._chromecastSessionManager.getRemotePlayer(),this._remotePlayerController=this._chromecastSessionManager.getRemotePlayerController(),this._listenToPlayerControllerEvents(),this.on("dispose",this._removeAllEventListeners.bind(this)),this._hasPlayedAnyItem=!1,this._requestTitle=e.requestTitleFn||function(){},this._requestSubtitle=e.requestSubtitleFn||function(){},this._requestCustomData=e.requestCustomDataFn||function(){},this._initialStartTime=e.startTime||0,this._playSource(e.source,this._initialStartTime),this.ready(function(){this.setMuted(e.muted)}.bind(this)),t},createEl:function(){return this._ui.getDOMElement()},play:function(){this.paused()&&(this.ended()&&!this._isMediaLoading?this._playSource({src:this.videojsPlayer.src()},0):this._remotePlayerController.playOrPause())},pause:function(){!this.paused()&&this._remotePlayer.canPause&&this._remotePlayerController.playOrPause()},paused:function(){return this._remotePlayer.isPaused||this.ended()||null===this._remotePlayer.playerState},setSource:function(e){this._currentSource&&this._currentSource.src===e.src&&this._currentSource.type===e.type||(this._currentSource=e,this._playSource(e,0))},_playSource:function(e,t){var i,n=this._getCastSession(),r=new chrome.cast.media.MediaInfo(e.src,e.type),a=this._requestTitle(e),s=this._requestSubtitle(e),o=this._requestCustomData(e);this.trigger("waiting"),this._clearSessionTimeout(),r.metadata=new chrome.cast.media.GenericMediaMetadata,r.metadata.metadataType=chrome.cast.media.MetadataType.GENERIC,r.metadata.title=a,r.metadata.subtitle=s,r.streamType=this.videojsPlayer.liveTracker&&this.videojsPlayer.liveTracker.isLive()?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,o&&(r.customData=o),this._ui.updateTitle(a),this._ui.updateSubtitle(s),(i=new chrome.cast.media.LoadRequest(r)).autoplay=!0,i.currentTime=t,this._isMediaLoading=!0,this._hasPlayedCurrentItem=!1,n.loadMedia(i).then(function(){this._hasPlayedAnyItem||this.triggerReady(),this.trigger("loadstart"),this.trigger("loadeddata"),this.trigger("play"),this.trigger("playing"),this._hasPlayedAnyItem=!0,this._isMediaLoading=!1,this._getMediaSession().addUpdateListener(this._onMediaSessionStatusChanged.bind(this))}.bind(this),this._triggerErrorEvent.bind(this))},setCurrentTime:function(e){var t=this.duration();e>t||!this._remotePlayer.canSeek||(this._remotePlayer.currentTime=Math.min(t-1,e),this._remotePlayerController.seek(),this._triggerTimeUpdateEvent())},currentTime:function(){return this._hasPlayedAnyItem?this._remotePlayer.currentTime:this._initialStartTime},duration:function(){return this._hasPlayedAnyItem?this._remotePlayer.duration:this.videojsPlayer.duration()},ended:function(){var e=this._getMediaSession();return!(e||!this._hasMediaSessionEnded)||!!e&&e.idleReason===chrome.cast.media.IdleReason.FINISHED},volume:function(){return this._remotePlayer.volumeLevel},setVolume:function(e){this._remotePlayer.volumeLevel=e,this._remotePlayerController.setVolumeLevel(),this._triggerVolumeChangeEvent()},muted:function(){return this._remotePlayer.isMuted},setMuted:function(e){(this._remotePlayer.isMuted&&!e||!this._remotePlayer.isMuted&&e)&&this._remotePlayerController.muteOrUnmute()},poster:function(){return this._ui.getPoster()},setPoster:function(e){this._ui.updatePoster(e)},buffered:function(){},seekable:function(){return this.videojs.createTimeRange(0,this.duration())},controls:function(){return!1},playsinline:function(){return!0},supportsFullScreen:function(){return!0},setAutoplay:function(){},playbackRate:function(){var e=this._getMediaSession();return e?e.playbackRate:1},setPlaybackRate:function(){},preload:function(){},load:function(){},readyState:function(){return"IDLE"===this._remotePlayer.playerState||"BUFFERING"===this._remotePlayer.playerState?0:4},_listenToPlayerControllerEvents:function(){var e=cast.framework.RemotePlayerEventType;this._addEventListener(this._remotePlayerController,e.PLAYER_STATE_CHANGED,this._onPlayerStateChanged,this),this._addEventListener(this._remotePlayerController,e.VOLUME_LEVEL_CHANGED,this._triggerVolumeChangeEvent,this),this._addEventListener(this._remotePlayerController,e.IS_MUTED_CHANGED,this._triggerVolumeChangeEvent,this),this._addEventListener(this._remotePlayerController,e.CURRENT_TIME_CHANGED,this._triggerTimeUpdateEvent,this),this._addEventListener(this._remotePlayerController,e.DURATION_CHANGED,this._triggerDurationChangeEvent,this)},_addEventListener:function(e,t,i,n){var r;r={target:e,type:t,callback:i,context:n,listener:i.bind(n)},e.addEventListener(t,r.listener),this._eventListeners.push(r)},_removeAllEventListeners:function(){for(;this._eventListeners.length>0;)this._removeEventListener(this._eventListeners[0]);this._eventListeners=[]},_removeEventListener:function(e){var t,i=-1;for(e.target.removeEventListener(e.type,e.listener),t=0;t<this._eventListeners.length;t++)if(this._eventListeners[t].target===e.target&&this._eventListeners[t].type===e.type&&this._eventListeners[t].callback===e.callback&&this._eventListeners[t].context===e.context){i=t;break}-1!==i&&this._eventListeners.splice(i,1)},_onPlayerStateChanged:function(){var e=chrome.cast.media.PlayerState,t=this._remotePlayer.playerState;t===e.PLAYING?(this._hasPlayedCurrentItem=!0,this.trigger("play"),this.trigger("playing")):t===e.PAUSED?this.trigger("pause"):t===e.IDLE&&this.ended()||null===t&&this._hasPlayedCurrentItem?(this._hasPlayedCurrentItem=!1,this._closeSessionOnTimeout(),this.trigger("ended"),this._triggerTimeUpdateEvent()):t===e.BUFFERING&&this.trigger("waiting")},_onMediaSessionStatusChanged:function(e){this._hasMediaSessionEnded=!!e},_closeSessionOnTimeout:function(){this._clearSessionTimeout(),this._sessionTimeoutID=setTimeout(function(){var e=this._getCastSession();e&&e.endSession(!0),this._clearSessionTimeout()}.bind(this),1e4)},_clearSessionTimeout:function(){this._sessionTimeoutID&&(clearTimeout(this._sessionTimeoutID),this._sessionTimeoutID=!1)},_getCastContext:function(){return this._chromecastSessionManager.getCastContext()},_getCastSession:function(){return this._getCastContext().getCurrentSession()},_getMediaSession:function(){var e=this._getCastSession();return e?e.getMediaSession():null},_triggerVolumeChangeEvent:function(){this.trigger("volumechange")},_triggerTimeUpdateEvent:function(){this.trigger("timeupdate")},_triggerDurationChangeEvent:function(){this.trigger("durationchange")},_triggerErrorEvent:function(){this.trigger("error")}},t.exports=function(e){var t,i=e.getComponent("Tech");(t=e.extend(i,n)).canPlaySource=r.isChromecastConnected.bind(r),t.isSupported=r.isChromecastConnected.bind(r),t.prototype.featuresVolumeControl=!0,t.prototype.featuresPlaybackRate=!1,t.prototype.movingMediaElementInDOM=!1,t.prototype.featuresFullscreenResize=!0,t.prototype.featuresTimeupdateEvents=!0,t.prototype.featuresProgressEvents=!1,t.prototype.featuresNativeTextTracks=!1,t.prototype.featuresNativeAudioTracks=!1,t.prototype.featuresNativeVideoTracks=!1,t.prototype.videojs=e,e.registerTech("chromecast",t)}},{"../chromecast/ChromecastSessionManager":3,"./ChromecastTechUI":10}],10:[function(e,t,i){"use strict";var n;n=e("class.extend").extend({init:function(){this._el=this._createDOMElement()},_createDOMElement:function(){var e=this._createElement("div","vjs-tech vjs-tech-chromecast"),t=this._createElement("div","vjs-tech-chromecast-poster"),i=this._createElement("img","vjs-tech-chromecast-poster-img"),n=this._createElement("div","vjs-tech-chromecast-title"),r=this._createElement("div","vjs-tech-chromecast-subtitle"),a=this._createElement("div","vjs-tech-chromecast-title-container");return t.appendChild(i),a.appendChild(n),a.appendChild(r),e.appendChild(a),e.appendChild(t),e},_createElement:function(e,t){var i=document.createElement(e);return i.className=t,i},getDOMElement:function(){return this._el},_findPosterEl:function(){return this._el.querySelector(".vjs-tech-chromecast-poster")},_findPosterImageEl:function(){return this._el.querySelector(".vjs-tech-chromecast-poster-img")},_findTitleEl:function(){return this._el.querySelector(".vjs-tech-chromecast-title")},_findSubtitleEl:function(){return this._el.querySelector(".vjs-tech-chromecast-subtitle")},updatePoster:function(e){var t=this._findPosterImageEl();this._poster=e||null,e?(t.setAttribute("src",e),t.classList.remove("vjs-tech-chromecast-poster-img-empty")):(t.removeAttribute("src"),t.classList.add("vjs-tech-chromecast-poster-img-empty"))},getPoster:function(){return this._poster},updateTitle:function(e){var t=this._findTitleEl();this._title=e,e?(t.innerHTML=e,t.classList.remove("vjs-tech-chromecast-title-empty")):t.classList.add("vjs-tech-chromecast-title-empty")},updateSubtitle:function(e){var t=this._findSubtitleEl();this._subtitle=e,e?(t.innerHTML=e,t.classList.remove("vjs-tech-chromecast-subtitle-empty")):t.classList.add("vjs-tech-chromecast-subtitle-empty")}}),t.exports=n},{"class.extend":1}]},{},[8]),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("global/document"),require("global/window"),require("video.js"),require("xmldom")):"function"==typeof define&&define.amd?define(["exports","global/document","global/window","video.js","xmldom"],t):t((e=e||self).httpStreaming={},e.document,e.window,e.videojs,e.window)}(this,function(e,t,i,n,r){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var a=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},s=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function l(e,t){return e(t={exports:{}},t.exports),t.exports}function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=u(l(function(e,t){var i,n,r,a,s;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,n=/^([^\/?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=n.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var d=o.path,c=d.substring(0,d.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(c)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s})),c=u(i),p=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=d.default.buildAbsoluteURL(c.default.location&&c.default.location.href||"",e)),d.default.buildAbsoluteURL(e,t))},h=p,f=function(e,t,i){return e&&i&&i.responseURL&&t!==i.responseURL?i.responseURL:t},m=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(i,1),i>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),g=l(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},t.apply(this,arguments)}e.exports=t});var v=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i),y=function(e){for(var t,i=(t=e,v.default.atob?v.default.atob(t):Buffer.from(t,"base64").toString("binary")),n=new Uint8Array(i.length),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n},_=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return s(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(m),b=function(e){for(var t,i=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=i.length;r--;)""!==i[r]&&((t=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n},T=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}s(t,e);var i=t.prototype;return i.push=function(e){var t,i,n=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce(function(t,i){var n=i(e);return n===e?t:t.concat([n])},[e]).forEach(function(e){for(var r=0;r<n.customParsers.length;r++)if(n.customParsers[r].call(n,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),void n.trigger("data",i);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"totalduration"},t[1]&&(i.duration=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),void n.trigger("data",i);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"byterange"},t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),void n.trigger("data",i);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"map"},t[1]){var a=b(t[1]);if(a.URI&&(i.uri=a.URI),a.BYTERANGE){var s=a.BYTERANGE.split("@"),o=s[0],l=s[1];i.byterange={},o&&(i.byterange.length=parseInt(o,10)),l&&(i.byterange.offset=parseInt(l,10))}}n.trigger("data",i)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=b(t[1]),i.attributes.RESOLUTION){var u=i.attributes.RESOLUTION.split("x"),d={};u[0]&&(d.width=parseInt(u[0],10)),u[1]&&(d.height=parseInt(u[1],10)),i.attributes.RESOLUTION=d}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}n.trigger("data",i)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return i={type:"tag",tagType:"media"},t[1]&&(i.attributes=b(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-ENDLIST/.exec(e))n.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return i={type:"tag",tagType:"key"},t[1]&&(i.attributes=b(t[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void n.trigger("data",i);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return i={type:"tag",tagType:"start"},t[1]&&(i.attributes=b(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void n.trigger("data",i);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);n.trigger("data",{type:"tag",data:e.slice(4)})}}}else n.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:e}))},i.addParser=function(e){var t=this,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){if(i.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:n,segment:a}),!0})},i.addTagMapper=function(e){var t=e.expression,i=e.map;this.tagMappers.push(function(e){return t.test(e)?i(e):e})},t}(m),w=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new _,t.parseStream=new T,t.lineStream.pipe(t.parseStream);var i,n,r=a(t),s=[],o={},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var d=0;return t.parseStream.on("data",function(e){var t,a;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(o.byterange=t,t.length=e.length,"offset"in e||(e.offset=d)),"offset"in e&&(o.byterange=t,t.offset=e.offset),d=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(o.duration=e.duration),0===e.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:y(e.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(n.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,u=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){i={},e.uri&&(i.uri=e.uri),e.byterange&&(i.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(o.attributes||(o.attributes={}),g(o.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var i=this.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes["GROUP-ID"]]=i[e.attributes["GROUP-ID"]]||{},t=i[e.attributes["GROUP-ID"]],(a={default:/yes/i.test(e.attributes.DEFAULT)}).default?a.autoselect=!0:a.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(a.language=e.attributes.LANGUAGE),e.attributes.URI&&(a.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(a.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(a.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(a.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=a}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),o.dateTimeString=e.dateTimeString,o.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=e.data},"cue-out-cont":function(){o.cueOutCont=e.data},"cue-in":function(){o.cueIn=e.data}}[e.tagType]||function(){}).call(r)},uri:function(){o.uri=e.uri,s.push(o),this.manifest.targetDuration&&!("duration"in o)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),n&&(o.key=n),o.timeline=u,i&&(o.map=i),o={}},comment:function(){},custom:function(){e.segment?(o.custom=o.custom||{},o.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)}),t}s(t,e);var i=t.prototype;return i.push=function(e){this.lineStream.push(e)},i.end=function(){this.lineStream.push("\n")},i.addParser=function(e){this.parseStream.addParser(e)},i.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(m),k=n.log,S=function(e,t){return e+"-"+t},x=function(e){var t=e.manifestString,i=e.customTagParsers,n=void 0===i?[]:i,r=e.customTagMappers,a=void 0===r?[]:r,s=new w;return n.forEach(function(e){return s.addParser(e)}),a.forEach(function(e){return s.addTagMapper(e)}),s.push(t),s.end(),s.manifest},M=function(e,t){["AUDIO","SUBTITLES"].forEach(function(i){for(var n in e.mediaGroups[i])for(var r in e.mediaGroups[i][n]){var a=e.mediaGroups[i][n][r];t(a,i,n,r)}})},C=function(e){var t=e.playlist,i=e.uri,n=e.id;t.id=n,i&&(t.uri=i),t.attributes=t.attributes||{}},E=function(e,t){e.uri=t;for(var i=0;i<e.playlists.length;i++)if(!e.playlists[i].uri){var n="placeholder-uri-"+i;e.playlists[i].uri=n}M(e,function(t,i,n,r){if(t.playlists&&t.playlists.length&&!t.playlists[0].uri){var a="placeholder-uri-"+i+"-"+n+"-"+r,s=S(0,a);t.playlists[0].uri=a,t.playlists[0].id=s,e.playlists[s]=t.playlists[0],e.playlists[a]=t.playlists[0]}}),function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];C({playlist:i,id:S(t,i.uri)}),i.resolvedUri=h(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||k.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){M(e,function(t){t.uri&&(t.resolvedUri=h(e.uri,t.uri))})}(e)},I=n.mergeOptions,D=n.EventTarget,A=function(e,t){e.resolvedUri||(e.resolvedUri=h(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=h(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=h(t,e.map.uri))},O=function(e,t){var i=I(e,{}),n=i.playlists[t.id];if(!n)return null;if(n.segments&&t.segments&&n.segments.length===t.segments.length&&n.endList===t.endList&&n.mediaSequence===t.mediaSequence)return null;var r=I(n,t);n.segments&&(r.segments=function(e,t,i){var n=t.slice();i=i||0;for(var r=Math.min(e.length,t.length+i),a=i;a<r;a++)n[a-i]=I(e[a],n[a-i]);return n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),r.segments.forEach(function(e){A(e,r.resolvedUri)});for(var a=0;a<i.playlists.length;a++)i.playlists[a].id===t.id&&(i.playlists[a]=r);return i.playlists[t.id]=r,i.playlists[t.uri]=r,i},N=function(e,t){var i=e.segments[e.segments.length-1];return t&&i&&i.duration?1e3*i.duration:500*(e.targetDuration||10)},L=function(e){function t(t,i,n){var r;if(void 0===n&&(n={}),r=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");var a=n,s=a.withCredentials,o=void 0!==s&&s,l=a.handleManifestRedirects,u=void 0!==l&&l;r.src=t,r.vhs_=i,r.withCredentials=o,r.handleManifestRedirects=u;var d=i.options_;return r.customTagParsers=d&&d.customTagParsers||[],r.customTagMappers=d&&d.customTagMappers||[],r.state="HAVE_NOTHING",r.on("mediaupdatetimeout",function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",r.request=r.vhs_.xhr({uri:h(r.master.uri,r.media().uri),withCredentials:r.withCredentials},function(e,t){if(r.request)return e?r.playlistRequestError(r.request,r.media(),"HAVE_METADATA"):void r.haveMetadata({playlistString:r.request.responseText,url:r.media().uri,id:r.media().id})}))}),r}s(t,e);var n=t.prototype;return n.playlistRequestError=function(e,t,i){var n=t.uri,r=t.id;this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[r],status:e.status,message:"HLS playlist request error at URL: "+n+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},n.haveMetadata=function(e){var t=this,n=e.playlistString,r=e.playlistObject,a=e.url,s=e.id;this.request=null,this.state="HAVE_METADATA";var o=r||x({manifestString:n,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers});C({playlist:o,uri:a,id:s});var l=O(this.master,o);this.targetDuration=o.targetDuration,l?(this.master=l,this.media_=this.master.playlists[s]):this.trigger("playlistunchanged"),this.media().endList||(i.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=i.setTimeout(function(){t.trigger("mediaupdatetimeout")},N(this.media(),!!l))),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),i.clearTimeout(this.mediaUpdateTimeout),i.clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(i.clearTimeout(this.finalRenditionTimeout),t){var r=e.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=i.setTimeout(this.media.bind(this,e,!1),r)}else{var a=this.state,s=!this.media_||e.id!==this.media_.id;if(this.master.playlists[e.id].endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(s&&(this.trigger("mediachanging"),"HAVE_MASTER"===a?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(s){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(t,i){if(n.request){if(e.resolvedUri=f(n.handleManifestRedirects,e.resolvedUri,i),t)return n.playlistRequestError(n.request,e,a);n.haveMetadata({playlistString:i.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===a?n.trigger("loadedmetadata"):n.trigger("mediachange")}})}}},n.pause=function(){this.stopRequest(),i.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;i.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=i.setTimeout(function(){return t.load()},r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=i.location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){e.setupInitialPlaylist(e.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=f(e.handleManifestRedirects,e.src,i);var n=x({manifestString:i.responseText,customTagParsers:e.customTagParsers,customTagMappers:e.customTagMappers});e.setupInitialPlaylist(n)}})},n.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,E(this.master,this.srcUri()),e.playlists.forEach(function(e){e.segments&&e.segments.forEach(function(t){A(t,e.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||i.location.href;this.master=function(e,t){var n=S(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:i.location.href,resolvedUri:i.location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return r.playlists[n]=r.playlists[0],r.playlists[t]=r.playlists[0],r}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(D),P=function(e,t){var i,r=[];if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&r.push([e.start(i),e.end(i)]);return n.createTimeRanges(r)},j=function(e,t){return P(e,function(e,i){return e-.1<=t&&i+.1>=t})},U=function(e,t){return P(e,function(e){return e-1/30>=t})},R=function(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},z=function(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t},B=n.createTimeRange,F=function(e,t,i){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var n=function(e,t){var i=0,n=t-e.mediaSequence,r=e.segments[n];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if(void 0!==(r=e.segments[n]).end)return{result:i+r.end,precise:!0};if(i+=r.duration,void 0!==r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}}(e,t);if(n.precise)return n.result;var r=function(e,t){for(var i,n=0,r=t-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(i=e.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=i.duration,void 0!==i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t);return r.precise?r.result:n.result+i},$=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return i.Infinity}return F(e,t,n)},q=function(e,t,i){var n=0;if(t>i){var r=[i,t];t=r[0],i=r[1]}if(t<0){for(var a=t;a<Math.min(0,i);a++)n+=e.targetDuration;t=0}for(var s=t;s<i;s++)n+=e.segments[s].duration;return n},H=function(e,t){if(!e.segments.length)return 0;var i=e.segments.length,n=e.segments[i-1].duration||e.targetDuration,r="number"==typeof t?t:n+2*e.targetDuration;if(0===r)return i;for(var a=0;i--&&!((a+=e.segments[i].duration)>=r););return Math.max(0,i)},W=function(e,t,i,n){if(!e||!e.segments)return null;if(e.endList)return $(e);if(null===t)return null;t=t||0;var r=i?H(e,n):e.segments.length;return F(e,e.mediaSequence+r,t)},V=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Y=function(e){return e.excludeUntil&&e.excludeUntil===1/0},G=function(e){var t=V(e);return!e.disabled&&!t},Q=function(e,t){return t.attributes&&t.attributes[e]},X=function(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!G(e)&&(e.attributes.BANDWIDTH||0)<i}).length},K={duration:$,seekable:function(e,t,i){var n=t||0,r=W(e,t,!0,i);return null===r?B():B(n,r)},safeLiveIndex:H,getMediaInfoForTime:function(e,t,i,n){var r,a=e.segments.length,s=t-n;if(s<0){if(i>0)for(r=i-1;r>=0;r--)if((s+=e.segments[r].duration+1/30)>0)return{mediaIndex:r,startTime:n-q(e,i,r)};return{mediaIndex:0,startTime:t}}if(i<0){for(r=i;r<0;r++)if((s-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};i=0}for(r=i;r<a;r++)if((s-=e.segments[r].duration+1/30)<0)return{mediaIndex:r,startTime:n+q(e,i,r)};return{mediaIndex:a-1,startTime:t}},isEnabled:G,isDisabled:function(e){return e.disabled},isBlacklisted:V,isIncompatible:Y,playlistEnd:W,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:Q,estimateSegmentRequestTime:function(e,t,i,n){return void 0===n&&(n=0),Q("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*n)/t:NaN},isLowestEnabledRendition:X},Z=n.xhr,J=n.mergeOptions,ee=function(e,t,i,n){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),i.headers&&(e.responseHeaders=i.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===i.statusCode||206===i.statusCode||0===i.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),n(t,e)},te=function(){return function e(t,i){t=J({timeout:45e3},t);var r=e.beforeRequest||n.Vhs.xhr.beforeRequest;if(r&&"function"==typeof r){var a=r(t);a&&(t=a)}var s=Z(t,function(e,t){return ee(s,e,t,i)}),o=s.abort;return s.abort=function(){return s.aborted=!0,o.apply(s,arguments)},s.uri=t.uri,s.requestTime=Date.now(),s}},ie=function(e){var t,i,n={};return e.byterange&&(n.Range=(i=(t=e.byterange).offset+t.length-1,"bytes="+t.offset+"-"+i)),n},ne=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,n=/^application\/dash\+xml/i;t.simpleTypeFromSourceType=function(e){return i.test(e)?"hls":n.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null}});o(ne);var re=ne.simpleTypeFromSourceType,ae=function(e,t){return e.start(t)+"-"+e.end(t)},se=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},oe=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},le=function(e){var t={};return Object.keys(e).forEach(function(i){var n=e[i];ArrayBuffer.isView(n)?t[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[i]=n}),t},ue=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},de=function(e){return e.resolvedUri},ce=function(e){for(var t=Array.prototype.slice.call(e),i="",n=0;n<t.length/16;n++)i+=t.slice(16*n,16*n+16).map(se).join("")+" "+t.slice(16*n,16*n+16).map(oe).join("")+"\n";return i},pe=Object.freeze({__proto__:null,createTransferableMessage:le,initSegmentId:ue,segmentKeyId:de,hexDump:ce,tagDump:function(e){var t=e.bytes;return ce(t)},textRanges:function(e){var t,i="";for(t=0;t<e.length;t++)i+=ae(e,t)+" ";return i}}),he=function(e){return!!e&&"object"==typeof e},fe=function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.reduce(function(t,i){return Object.keys(i).forEach(function(n){Array.isArray(t[n])&&Array.isArray(i[n])?t[n]=t[n].concat(i[n]):he(t[n])&&he(i[n])?t[n]=e(t[n],i[n]):t[n]=i[n]}),t},{})},me=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},ge=function(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},ve=function(e){var t=e.baseUrl,i=void 0===t?"":t,n=e.source,r=void 0===n?"":n,a=e.range,s=void 0===a?"":a,o=e.indexRange,l=void 0===o?"":o,u={uri:r,resolvedUri:p(i||"",r)};if(s||l){var d=(s||l).split("-"),c=parseInt(d[0],10),h=parseInt(d[1],10);u.byterange={length:h-c+1,offset:c}}return u},ye={static:function(e){var t=e.duration,i=e.timescale,n=void 0===i?1:i,r=e.sourceDuration;return{start:0,end:Math.ceil(r/(t/n))}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,s=e.duration,o=e.start,l=void 0===o?0:o,u=e.minimumUpdatePeriod,d=void 0===u?0:u,c=e.timeShiftBufferDepth,p=void 0===c?1/0:c,h=(t+i)/1e3,f=n+l,m=h+d-f,g=Math.ceil(m*a/s),v=Math.floor((h-f-p)*a/s),y=Math.floor((h-f)*a/s);return{start:Math.max(0,v),end:Math.min(g,y)}}},_e=function(e){var t=e.type,i=void 0===t?"static":t,n=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.sourceDuration,o=ye[i](e),l=function(e,t){for(var i=[],n=e;n<t;n++)i.push(n);return i}(o.start,o.end).map(function(e){return function(t,i){var n=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.periodIndex,o=e.startNumber;return{number:(void 0===o?1:o)+t,duration:n/a,timeline:s,time:i*n}}}(e));if("static"===i){var u=l.length-1;l[u].duration=s-n/a*u}return l},be=function(e){var t=e.baseUrl,i=e.initialization,n=void 0===i?{}:i,r=e.sourceDuration,a=e.indexRange,s=void 0===a?"":a,o=e.duration;if(!t)throw new Error("NO_BASE_URL");var l=ve({baseUrl:t,source:n.sourceURL,range:n.range}),u=ve({baseUrl:t,source:t,indexRange:s});if(u.map=l,o){var d=_e(e);d.length&&(u.duration=d[0].duration,u.timeline=d[0].timeline)}else r&&(u.duration=r,u.timeline=0);return u.number=0,[u]},Te=function(e,t,i){for(var n=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,a=e.timeline||0,s=e.sidx.byterange,o=s.offset+s.length,l=t.timescale,u=t.references.filter(function(e){return 1!==e.referenceType}),d=[],c=o+t.firstOffset,p=0;p<u.length;p++){var h=t.references[p],f=h.referencedSize,m=h.subsegmentDuration,g=be({baseUrl:i,timescale:l,timeline:a,periodIndex:a,duration:m,sourceDuration:r,indexRange:c+"-"+(c+f-1)})[0];n&&(g.map=n),d.push(g),c+=f}return e.segments=d,e},we=function(e){var t;return(t=e.reduce(function(e,t){var i,n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t,e},{}),Object.keys(t).map(function(e){return t[e]})).map(function(e){return e.discontinuityStarts=e.segments.reduce(function(e,t,i){return t.discontinuity&&e.push(i),e},[]),e})},ke=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var i in e){var n=e[i];if(n.sidx){var r=n.sidx.uri+"-"+(o=(s=n.sidx.byterange).offset+s.length-1,s.offset+"-"+o),a=t[r]&&t[r].sidx;n.sidx&&a&&Te(n,a,n.sidx.resolvedUri)}}var s,o;return e},Se=function(e){var t,i=e.attributes,n=e.segments,r=e.sidx,a={attributes:(t={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),r&&(a.sidx=r),a},xe=function(e){var t,i=e.attributes,n=e.segments;void 0===n&&(n=[{uri:i.baseUrl,timeline:i.periodIndex,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var r=((t={NAME:i.id,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,t);return i.codecs&&(r.CODECS=i.codecs),{attributes:r,uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:i.baseUrl||"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1}},Me=function(e){var t,i=e.attributes,n=e.segments,r=e.sidx,a={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),r&&(a.sidx=r),a},Ce=function(e,t,i){var n=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=void 0===s?1:s,l=e.start,u=void 0===l?0:l,d=e.minimumUpdatePeriod,c=(n+r)/1e3+(void 0===d?0:d)-(a+u);return Math.ceil((c*o-t)/i)},Ee=function(e,t){for(var i=e.type,n=void 0===i?"static":i,r=e.minimumUpdatePeriod,a=void 0===r?0:r,s=e.media,o=void 0===s?"":s,l=e.sourceDuration,u=e.timescale,d=void 0===u?1:u,c=e.startNumber,p=void 0===c?1:c,h=e.periodIndex,f=[],m=-1,g=0;g<t.length;g++){var v=t[g],y=v.d,_=v.r||0,b=v.t||0;m<0&&(m=b),b&&b>m&&(m=b);var T=void 0;if(_<0){var w=g+1;T=w===t.length?"dynamic"===n&&a>0&&o.indexOf("$Number$")>0?Ce(e,m,y):(l*d-m)/y:(t[w].t-m)/y}else T=_+1;for(var k=p+f.length+T,S=p+f.length;S<k;)f.push({number:S,duration:y/d,time:m,timeline:h}),m+=y,S++}return f},Ie=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,De=function(e,t){return e.replace(Ie,function(e){return function(t,i,n,r){if("$$"===t)return"$";if(void 0===e[i])return t;var a=""+e[i];return"RepresentationID"===i?a:(r=n?parseInt(r,10):1,a.length>=r?a:""+new Array(r-a.length+1).join("0")+a)}}(t))},Ae=function(e,t){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},n=e.initialization,r=void 0===n?{sourceURL:"",range:""}:n,a=ve({baseUrl:e.baseUrl,source:De(r.sourceURL,i),range:r.range});return function(e,t){return e.duration||t?e.duration?_e(e):Ee(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t).map(function(t){i.Number=t.number,i.Time=t.time;var n=De(e.media||"",i);return{uri:n,timeline:t.timeline,duration:t.duration,resolvedUri:p(e.baseUrl||"",n),map:a,number:t.number}})},Oe=function(e,t){var i=e.duration,n=e.segmentUrls,r=void 0===n?[]:n;if(!i&&!t||i&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");var a,s=r.map(function(t){return function(e,t){var i=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,a=ve({baseUrl:i,source:r.sourceURL,range:r.range}),s=ve({baseUrl:i,source:t.media,range:t.mediaRange});return s.map=a,s}(e,t)});return i&&(a=_e(e)),t&&(a=Ee(e,t)),a.map(function(e,t){if(s[t]){var i=s[t];return i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}}).filter(function(e){return e})},Ne=function(e){var t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=Ae,t=fe(n,r.template)):r.base?(i=be,t=fe(n,r.base)):r.list&&(i=Oe,t=fe(n,r.list));var a={attributes:n};if(!i)return a;var s=i(t,r.timeline);if(t.duration){var o=t,l=o.duration,u=o.timescale,d=void 0===u?1:u;t.duration=l/d}else s.length?t.duration=s.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0;return a.attributes=t,a.segments=s,r.base&&t.indexRange&&(a.sidx=s[0],a.segments=[]),a},Le=function(e,t){return ge(e.childNodes).filter(function(e){return e.tagName===t})},Pe=function(e){return e.textContent.trim()},je=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var i=t.slice(1),n=i[0],r=i[1],a=i[2],s=i[3],o=i[4],l=i[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(r||0)+86400*parseFloat(a||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(l||0)},Ue={mediaPresentationDuration:function(e){return je(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return je(e)},suggestedPresentationDelay:function(e){return je(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return je(e)},start:function(e){return je(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?je(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Re=function(e){return e&&e.attributes?ge(e.attributes).reduce(function(e,t){var i=Ue[t.name]||Ue.DEFAULT;return e[t.name]=i(t.value),e},{}):{}},ze={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Be=function(e,t){return t.length?me(e.map(function(e){return t.map(function(t){return p(e,Pe(t))})})):e},Fe=function(e){var t=Le(e,"SegmentTemplate")[0],i=Le(e,"SegmentList")[0],n=i&&Le(i,"SegmentURL").map(function(e){return fe({tag:"SegmentURL"},Re(e))}),r=Le(e,"SegmentBase")[0],a=i||t,s=a&&Le(a,"SegmentTimeline")[0],o=i||r||t,l=o&&Le(o,"Initialization")[0],u=t&&Re(t);u&&l?u.initialization=l&&Re(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var d={template:u,timeline:s&&Le(s,"S").map(function(e){return Re(e)}),list:i&&fe(Re(i),{segmentUrls:n,initialization:Re(l)}),base:r&&fe(Re(r),{initialization:Re(l)})};return Object.keys(d).forEach(function(e){d[e]||delete d[e]}),d},$e=function(e,t){return function(n,r){var a=Be(t,Le(n,"BaseURL")),s=Re(n),o=parseInt(s.id,10),l=i.isNaN(o)?r:o,u=fe(e,{periodIndex:l}),d=Le(n,"AdaptationSet"),c=Fe(n);return me(d.map(function(e,t,i){return function(n){var r=Re(n),a=Be(t,Le(n,"BaseURL")),s=Le(n,"Role")[0],o={role:Re(s)},l=fe(e,r,o),u=Le(n,"ContentProtection").reduce(function(e,t){var i=Re(t),n=ze[i.schemeIdUri];if(n){e[n]={attributes:i};var r=Le(t,"cenc:pssh")[0];if(r){var a=Pe(r),s=a&&y(a);e[n].pssh=s}}return e},{});Object.keys(u).length&&(l=fe(l,{contentProtection:u}));var d=Fe(n),c=Le(n,"Representation"),p=fe(i,d);return me(c.map(function(e,t,i){return function(n){var r=Le(n,"BaseURL"),a=Be(t,r),s=fe(e,Re(n)),o=Fe(n);return a.map(function(e){return{segmentInfo:fe(i,o),attributes:fe(s,{baseUrl:e})}})}}(l,a,p)))}}(u,a,c)))}},qe=function(e){if(""===e)throw new Error("DASH_EMPTY_MANIFEST");var t=(new r.DOMParser).parseFromString(e,"application/xml"),i=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return i},He=function(e,t){void 0===t&&(t={});var i=function(e,t){void 0===t&&(t={});var i=t,n=i.manifestUri,r=void 0===n?"":n,a=i.NOW,s=void 0===a?Date.now():a,o=i.clientOffset,l=void 0===o?0:o,u=Le(e,"Period");if(!u.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var d=Le(e,"Location"),c=Re(e),p=Be([r],Le(e,"BaseURL"));return c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=s,c.clientOffset=l,d.length&&(c.locations=d.map(Pe)),{locations:c.locations,representationInfo:me(u.map($e(c,p)))}}(qe(e),t);return function(e,t,i){var n;if(void 0===i&&(i={}),!e.length)return{};var r=e[0].attributes,a=r.sourceDuration,s=r.type,o=void 0===s?"static":s,l=r.suggestedPresentationDelay,u=r.minimumUpdatePeriod,d=we(e.filter(function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType})).map(Me),c=we(e.filter(function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType})),p=e.filter(function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType}),h={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:a,playlists:ke(d,i)};return u>=0&&(h.minimumUpdatePeriod=1e3*u),t&&(h.locations=t),"dynamic"===o&&(h.suggestedPresentationDelay=l),c.length&&(h.mediaGroups.AUDIO.audio=function(e,t){var i;void 0===t&&(t={});var n=c.reduce(function(e,n){var r=n.attributes.role&&n.attributes.role.value||"",a=n.attributes.lang||"",s="main";if(a){var o=r?" ("+r+")":"";s=""+n.attributes.lang+o}return e[s]&&e[s].playlists[0].attributes.BANDWIDTH>n.attributes.bandwidth||(e[s]={language:a,autoselect:!0,default:"main"===r,playlists:ke([Se(n)],t),uri:""},void 0===i&&"main"===r&&((i=n).default=!0)),e},{});return i||(n[Object.keys(n)[0]].default=!0),n}(0,i)),p.length&&(h.mediaGroups.SUBTITLES.subs=function(e,t){return void 0===t&&(t={}),p.reduce(function(e,i){var n=i.attributes.lang||"text";return e[n]||(e[n]={language:n,default:!1,autoselect:!1,playlists:ke([xe(i)],t),uri:""}),e},{})}(0,i)),h}(i.representationInfo.map(Ne),i.locations,t.sidxMapping)},We=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e instanceof Uint8Array?e:new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0)},n=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,i(e));try{return decodeURIComponent(escape(t))}catch(e){}return t},r=function(e,t){void 0===t&&(t=0);var n=(e=i(e))[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},a=function e(t,a){return void 0===a&&(a=0),(t=i(t)).length-a<10||"ID3"!==n(t.subarray(a,a+3))?a:e(t,a+=r(t,a))},s={aac:function(e){var t=a(e);return e.length>=t+2&&255==(255&e[t])&&224==(224&e[t+1])&&16==(22&e[t+1])},mp3:function(e){var t=a(e);return e.length>=t+2&&255==(255&e[t])&&224==(224&e[t+1])&&2==(6&e[t+1])},webm:function(e){return e.length>=4&&26==(255&e[0])&&69==(255&e[1])&&223==(255&e[2])&&163==(255&e[3])},mp4:function(e){return e.length>=8&&/^(f|s)typ$/.test(n(e.subarray(4,8)))&&!/^ftyp3g$/.test(n(e.subarray(4,10)))},"3gp":function(e){return e.length>=10&&/^ftyp3g$/.test(n(e.subarray(4,10)))},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){return e.length>=4&&/^fLaC$/.test(n(e.subarray(0,4)))},ogg:function(e){return e.length>=4&&/^OggS$/.test(n(e.subarray(0,4)))}},o=Object.keys(s).filter(function(e){return"ts"!==e}).concat("ts");o.forEach(function(e){var t=s[e];s[e]=function(e){return t(i(e))}}),t.detectContainerForBytes=function(e){e=i(e);for(var t=0;t<o.length;t++){var n=o[t];if(s[n](e))return n}return""},t.getId3Offset=a,t.id3Size=r,t.isLikely=s,t.isLikelyFmp4MediaSegment=function(e){e=i(e);for(var t=0;t<e.length;){var r=(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0;if("moof"===n(e.subarray(t+4,t+8)))return!0;0===r||r+t>e.length?t=e.length:t+=r}return!1}});o(We);var Ve=We.detectContainerForBytes,Ye=We.getId3Offset,Ge=(We.id3Size,We.isLikely,We.isLikelyFmp4MediaSegment),Qe=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e instanceof Uint8Array?e:new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0)};t.bytesToString=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,i(e));try{return decodeURIComponent(escape(t))}catch(e){}return t},t.concatTypedArrays=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce(function(e,t){return e+(t&&(t.byteLength||t.length)||0)},0),a=new Uint8Array(r),s=0;return t.forEach(function(e){e=i(e),a.set(e,s),s+=e.byteLength}),a},t.isTypedArray=function(e){return ArrayBuffer.isView(e)},t.stringToBytes=function(e,t){return void 0===t&&(t=!1),"string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e?[]:(t||(e=unescape(encodeURIComponent(e))),e.split("").map(function(e){return 255&e.charCodeAt(0)}))},t.toUint8=i});o(Qe),Qe.bytesToString;var Xe,Ke=Qe.concatTypedArrays,Ze=(Qe.isTypedArray,Qe.stringToBytes),Je=Qe.toUint8,et=function(e,t){if(4===e.readyState)return t()},tt=n.EventTarget,it=n.mergeOptions,nt=function(e){var t=e.masterXml,i=e.srcUrl,n=e.clientOffset,r=e.sidxMapping,a=He(t,{manifestUri:i,clientOffset:n,sidxMapping:r});return E(a,i),a},rt=function(e,t){for(var i=!0,n=it(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),r=0;r<t.playlists.length;r++){var a=O(n,t.playlists[r]);a&&(n=a,i=!1)}return M(t,function(e,t,r,a){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id,o=O(n,e.playlists[0]);o&&((n=o).mediaGroups[t][r][a].playlists[0]=n.playlists[s],i=!1)}}),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:n},at=function(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+"-"+e.byterange.offset+"-"+t},st=function(e,t){var i,n,r={};for(var a in e){var s=e[a].sidx;if(s){var o=at(s);if(!t[o])break;i=t[o].sidxInfo,n=s,(Boolean(!i.map&&!n.map)||Boolean(i.map&&n.map&&i.map.byterange.offset===n.map.byterange.offset&&i.map.byterange.length===n.map.byterange.length))&&i.uri===n.uri&&i.byterange.offset===n.byterange.offset&&i.byterange.length===n.byterange.length&&(r[o]=t[o])}}return r},ot=function(e,t,i,r,a,s){var o={uri:f(a.handleManifestRedirects,t.resolvedUri),byterange:t.byterange,playlist:i},l=n.mergeOptions(o,{responseType:"arraybuffer",headers:ie(o)});return function(e,t,i){var n,r=[],a=!1,s=function(e,t,n,r){return t.abort(),a=!0,i(e,t,n,r)},o=function(e,t){if(!a){if(e)return s(e,t,"",r);var i=t.responseText.substring(r&&r.byteLength||0,t.responseText.length);if(r=Ke(r,Ze(i,!0)),n=n||Ye(r),r.length<10||n&&r.length<n+2)return et(t,function(){return s(e,t,"",r)});var o=Ve(r);return"ts"===o&&r.length<188||!o&&r.length<376?et(t,function(){return s(e,t,"",r)}):s(null,t,o,r)}},l=t({uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",function(t){return t.total,t.loaded,ee(e,null,{statusCode:e.status},o)})}},function(e,t){return ee(l,e,t,o)});return l}(o.uri,r,function(t,n,a,u){if(t)return s(t,n);if(!a||"mp4"!==a)return s({status:n.status,message:"Unsupported "+(a||"unknown")+" container type for sidx segment at URL: "+o.uri,response:"",playlist:i,internal:!0,blacklistDuration:1/0,code:2},n);var d=o.byterange,c=d.offset,p=d.length;if(u.length>=p+c)return s(t,{response:u.subarray(c,c+p),status:n.status,uri:n.uri});e.request=r(l,s)})},lt=function(e){function t(t,i,n,r){var s;void 0===n&&(n={}),s=e.call(this)||this;var o=n,l=o.withCredentials,u=void 0!==l&&l,d=o.handleManifestRedirects,c=void 0!==d&&d;if(s.vhs_=i,s.withCredentials=u,s.handleManifestRedirects=c,!t)throw new Error("A non-empty playlist URL or object is required");return s.on("minimumUpdatePeriod",function(){s.refreshXml_()}),s.on("mediaupdatetimeout",function(){s.refreshMedia_(s.media().id)}),s.state="HAVE_NOTHING",s.loadedPlaylists_={},"string"==typeof t?(s.srcUrl=t,s.sidxMapping_={},a(s)):(s.setupChildLoader(r,t),s)}s(t,e);var n=t.prototype;return n.setupChildLoader=function(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},i.clearTimeout(this.minimumUpdatePeriodTimeout_),i.clearTimeout(this.mediaRequest_),i.clearTimeout(this.mediaUpdateTimeout),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.sidxRequestFinished_=function(e,t,i,n){var r=this;return function(a,s){if(r.request){if(r.request=null,a)return r.error="object"==typeof a?a:{status:s.status,message:"DASH playlist request error at URL: "+e.uri,response:s.response,code:2},i&&(r.state=i),void r.trigger("error");var o=function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8),earliestPresentationTime:i.getUint32(12),firstOffset:i.getUint32(16)},r=i.getUint16(22);for(t=24;r;t+=12,r--)n.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&i.getUint32(t),subsegmentDuration:i.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&i.getUint32(t+8)});return n}(Je(s.response).subarray(8));return n(t,o)}}},n.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r)if(this.media_&&this.trigger("mediachanging"),e.sidx){var a,s;this.masterPlaylistLoader_?(a=this.masterPlaylistLoader_.master,s=this.masterPlaylistLoader_.sidxMapping_):(a=this.master,s=this.sidxMapping_);var o=at(e.sidx);s[o]={sidxInfo:e.sidx},this.request=ot(this,e.sidx,e,this.vhs_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(e,a,n,function(i,r){if(!i||!r)throw new Error("failed to request sidx");s[o].sidx=r,t.haveMetadata({startingState:n,playlist:i.playlists[e.id]})}))}else this.mediaRequest_=i.setTimeout(this.haveMetadata.bind(this,{startingState:n,playlist:e}),0)},n.haveMetadata=function(e){var t=e.startingState,i=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,this.mediaRequest_=null,this.refreshMedia_(i.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.stopRequest(),i.clearTimeout(this.mediaUpdateTimeout),i.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(e){var t=this;i.clearTimeout(this.mediaUpdateTimeout),i.clearTimeout(this.minimumUpdatePeriodTimeout_);var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=i.setTimeout(function(){return t.load()},r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=i.setTimeout(this.haveMaster_.bind(this),0):this.request=this.vhs_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?e.masterLoaded_=Date.parse(i.responseHeaders.date):e.masterLoaded_=Date.now(),e.srcUrl=f(e.handleManifestRedirects,e.srcUrl,i),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))}})},n.syncClientServerClock_=function(e){var t,i=this,n=(t=this.masterXml_,function(e){var t=Le(e,"UTCTiming")[0];if(!t)return null;var i=Re(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return i}(qe(t)));return null===n?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.clientOffset_=n.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:h(this.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},function(t,r){if(i.request){if(t)return i.clientOffset_=i.masterLoaded_-Date.now(),e();var a;a="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):i.masterLoaded_:Date.parse(r.responseText),i.clientOffset_=a-Date.now(),e()}}))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.updateMainManifest_(nt({masterXml:this.masterXml_,srcUrl:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_})),this.trigger("loadedplaylist"))},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this;i.clearTimeout(this.minimumUpdatePeriodTimeout_);var t=function(t){e.minimumUpdatePeriodTimeout_=i.setTimeout(function(){e.trigger("minimumUpdatePeriod")},t)},n=this.master&&this.master.minimumUpdatePeriod;n>0?t(n):0===n&&(this.media()?t(1e3*this.media().targetDuration):this.one("loadedplaylist",function(){t(1e3*e.media().targetDuration)}))},n.onClientServerClockSync_=function(){this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.updateMinimumUpdatePeriodTimeout_()},n.updateMainManifest_=function(e){if(this.master=e,this.master.locations&&this.master.locations.length){var t=this.master.locations[0];t!==this.srcUrl&&(this.srcUrl=t)}},n.refreshXml_=function(){var e=this;this.request=this.vhs_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=i.responseText,e.sidxMapping_=function(e,t,i,n){var r=He(e,{manifestUri:t,clientOffset:i}),a=st(r.playlists,n);return M(r,function(e,t,i,r){if(e.playlists&&e.playlists.length){var s=e.playlists;a=it(a,st(s,n))}}),a}(e.masterXml_,e.srcUrl,e.clientOffset_,e.sidxMapping_);var n=nt({masterXml:e.masterXml_,srcUrl:e.srcUrl,clientOffset:e.clientOffset_,sidxMapping:e.sidxMapping_}),r=rt(e.master,n),a=e.media().sidx;if(r)if(a){var s=at(a);if(!e.sidxMapping_[s]){var o=e.media();e.request=ot(e,o.sidx,o,e.vhs_.xhr,{handleManifestRedirects:e.handleManifestRedirects},e.sidxRequestFinished_(o,n,e.state,function(t,i){if(!t||!i)throw new Error("failed to request sidx on minimumUpdatePeriod");e.sidxMapping_[s].sidx=i,e.updateMinimumUpdatePeriodTimeout_(),e.refreshMedia_(e.media().id)}))}}else e.updateMainManifest_(r),e.media_&&(e.media_=e.master.playlists[e.media_.id]);e.updateMinimumUpdatePeriodTimeout_()}})},n.refreshMedia_=function(e){var t,n,r=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.masterPlaylistLoader_?(t=this.masterPlaylistLoader_.master,n=nt({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_})):(t=this.master,n=nt({masterXml:this.masterXml_,srcUrl:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_}));var a=rt(t,n);a?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=a:this.master=a,this.media_=a.playlists[e]):(this.media_=t.playlists[e],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=i.setTimeout(function(){r.trigger("mediaupdatetimeout")},N(this.media(),!!a))),this.trigger("loadedplaylist")},t}(tt),ut={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},dt=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t.buffer},ct=[],pt=function(e){var t=e.transmuxer,i=e.bytes,n=e.audioAppendStart,r=e.gopsToAlignWith,a=e.isPartial,s=e.remux,o=e.onData,l=e.onTrackInfo,u=e.onAudioTimingInfo,d=e.onVideoTimingInfo,c=e.onVideoSegmentTimingInfo,p=e.onId3,h=e.onCaptions,f=e.onDone,m={isPartial:a,buffer:[]};if(t.onmessage=function(e){Xe&&("data"===e.data.action&&function(e,t,i){var n=e.data.segment,r=n.type,a=n.initSegment,s=n.captions,o=n.captionStreams,l=n.metadata,u=n.videoFrameDtsTime,d=n.videoFramePtsTime;t.buffer.push({captions:s,captionStreams:o,metadata:l});var c=e.data.segment.boxes||{data:e.data.segment.data},p={type:r,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};void 0!==u&&(p.videoFrameDtsTime=u),void 0!==d&&(p.videoFramePtsTime=d),i(p)}(e,m,o),"trackinfo"===e.data.action&&l(e.data.trackInfo),"gopInfo"===e.data.action&&function(e,t){m.gopInfo=e.data.gopInfo}(e),"audioTimingInfo"===e.data.action&&u(e.data.audioTimingInfo),"videoTimingInfo"===e.data.action&&d(e.data.videoTimingInfo),"videoSegmentTimingInfo"===e.data.action&&c(e.data.videoSegmentTimingInfo),"id3Frame"===e.data.action&&p([e.data.id3Frame],e.data.id3Frame.dispatchType),"caption"===e.data.action&&h(e.data.caption),"transmuxed"===e.data.type&&(t.onmessage=null,function(e){var t=e.transmuxedData,i=e.callback;t.buffer=[],i(t)}({transmuxedData:m,callback:f}),ht()))},n&&t.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==s&&t.postMessage({action:"setRemux",remux:s}),i.byteLength){var g=i instanceof ArrayBuffer?i:i.buffer,v=i instanceof ArrayBuffer?0:i.byteOffset;t.postMessage({action:"push",data:g,byteOffset:v,byteLength:i.byteLength},[g])}t.postMessage({action:a?"partialFlush":"flush"})},ht=function(){Xe=null,ct.length&&("function"==typeof(Xe=ct.shift())?Xe():pt(Xe))},ft=function(e,t){e.postMessage({action:t}),ht()},mt=function(e,t){if(!Xe)return Xe=e,void ft(t,e);ct.push(ft.bind(null,t,e))},gt=function(e){mt("reset",e)},vt=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var i,n,r,a;if(i=e[t])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,a)}},this.dispose=function(){e={}}}};vt.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},vt.prototype.push=function(e){this.trigger("data",e)},vt.prototype.flush=function(e){this.trigger("done",e)},vt.prototype.partialFlush=function(e){this.trigger("partialdone",e)},vt.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},vt.prototype.reset=function(e){this.trigger("reset",e)};var yt=vt,_t=function(e,t){var i=1;for(e>t&&(i=-1);Math.abs(t-e)>4294967296;)e+=8589934592*i;return e},bt=function(e){var t,i;bt.prototype.init.call(this),this.type_=e||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=_t(e.dts,i),e.pts=_t(e.pts,i),t=e.dts,this.trigger("data",e))},this.flush=function(){i=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};bt.prototype=new yt;var Tt=function(e){var t=31&e[1];return(t<<=8)|e[2]},wt=function(e){return!!(64&e[1])},kt=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},St=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},xt={parseType:function(e,t){var i=Tt(e);return 0===i?"pat":i===t?"pmt":t?"pes":null},parsePat:function(e){var t=wt(e),i=4+kt(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},parsePmt:function(e){var t={},i=wt(e),n=4+kt(e);if(i&&(n+=e[n]+1),1&e[n+5]){var r;r=3+((15&e[n+1])<<8|e[n+2])-4;for(var a=12+((15&e[n+10])<<8|e[n+11]);a<r;){var s=n+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:wt,parsePesType:function(e,t){switch(t[Tt(e)]){case 27:return"video";case 15:return"audio";case 21:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!wt(e))return null;var t=4+kt(e);if(t>=e.byteLength)return null;var i,n=null;return 192&(i=e[t+7])&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+kt(e),i=e.subarray(t),n=0,r=0,a=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===St(31&i[r+3])&&(a=!0);do{n++}while(1!==i[n]&&n<i.length);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===St(31&i[r+3])&&(a=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,i&&i.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===St(31&i[r+3])&&(a=!0),a}},Mt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Ct=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return i=i>=0?i:0,(16&e[t+5])>>4?i+20:i+10},Et=function(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:(t+=Ct(e,t),Et(e,t))},It=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Dt={isLikelyAacData:function(e){var t=Et(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:Ct,parseAdtsSize:function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return Mt[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,i,n;t=10,64&e[5]&&(t+=4,t+=It(e.subarray(10,14)));do{if((i=It(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){n=e.subarray(t+10,t+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,i){var n,r="";for(n=0;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r}(n,0,r))){var a=n.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(s*=4)+(3&a[7])}break}}t+=10,t+=i}while(t<e.byteLength);return null}},At=_t,Ot={};Ot.ts=xt,Ot.aac=Dt;var Nt,Lt=function(e,t,i){for(var n,r,a,s,o=0,l=188,u=!1;l<=e.byteLength;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o++,l++;else{switch(n=e.subarray(o,l),Ot.ts.parseType(n,t.pid)){case"pes":r=Ot.ts.parsePesType(n,t.table),a=Ot.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=Ot.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0)}if(u)break;o+=188,l+=188}for(o=(l=e.byteLength)-188,u=!1;o>=0;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o--,l--;else{switch(n=e.subarray(o,l),Ot.ts.parseType(n,t.pid)){case"pes":r=Ot.ts.parsePesType(n,t.table),a=Ot.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=Ot.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0)}if(u)break;o-=188,l-=188}},Pt=function(e,t,i){for(var n,r,a,s,o,l,u,d=0,c=188,p=!1,h={data:[],size:0};c<e.byteLength;)if(71!==e[d]||71!==e[c])d++,c++;else{switch(n=e.subarray(d,c),Ot.ts.parseType(n,t.pid)){case"pes":if(r=Ot.ts.parsePesType(n,t.table),a=Ot.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(a&&!p&&(s=Ot.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),p=!0),!i.firstKeyFrame)){if(a&&0!==h.size){for(o=new Uint8Array(h.size),l=0;h.data.length;)u=h.data.shift(),o.set(u,l),l+=u.byteLength;if(Ot.ts.videoPacketContainsKeyFrame(o)){var f=Ot.ts.parsePesTime(o);f?(i.firstKeyFrame=f,i.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}h.size=0}h.data.push(n),h.size+=n.byteLength}}if(p&&i.firstKeyFrame)break;d+=188,c+=188}for(d=(c=e.byteLength)-188,p=!1;d>=0;)if(71!==e[d]||71!==e[c])d--,c--;else{switch(n=e.subarray(d,c),Ot.ts.parseType(n,t.pid)){case"pes":r=Ot.ts.parsePesType(n,t.table),a=Ot.ts.parsePayloadUnitStartIndicator(n),"video"===r&&a&&(s=Ot.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),p=!0)}if(p)break;d-=188,c-=188}},jt=function(e){return e>>>0},Ut=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},Rt=jt,zt=function(e,t){var i,n,r,a,s,o=[];if(!t.length)return null;for(i=0;i<e.byteLength;)n=Rt(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),r=Ut(e.subarray(i+4,i+8)),a=n>1?i+n:e.byteLength,r===t[0]&&(1===t.length?o.push(e.subarray(i+8,a)):(s=zt(e.subarray(i+8,a),t.slice(1))).length&&(o=o.concat(s))),i=a;return o},Bt=zt,Ft=jt,$t=function(e){return("00"+e.toString(16)).slice(-2)},qt=(Nt=function(e){var t=0===e[0]?12:20;return Ft(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},2),Ht=function(e){e.forEach(function(e){e.abort()})},Wt=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:-101,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:-102,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:qt,xhr:t}:null},Vt=function(e){var t=e.segment,i=e.bytes,n=e.isPartial,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.dataFn,d=e.doneFn,c=t.map&&t.map.tracks||{},p=Boolean(c.audio&&c.video),h=a.bind(null,t,"audio","start"),f=a.bind(null,t,"audio","end"),m=a.bind(null,t,"video","start"),g=a.bind(null,t,"video","end");if(!n&&!t.lastReachedChar){var v=function(e,t){var i=function(e,t){var i;return(i=Ot.aac.isLikelyAacData(e)?function(e){for(var t,i=!1,n=0,r=null,a=null,s=0,o=0;e.length-o>=3;){switch(Ot.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){i=!0;break}if((s=Ot.aac.parseId3TagSize(e,o))>e.length){i=!0;break}null===a&&(t=e.subarray(o,o+s),a=Ot.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){i=!0;break}if((s=Ot.aac.parseAdtsSize(e,o))>e.length){i=!0;break}null===r&&(t=e.subarray(o,o+s),r=Ot.aac.parseSampleRate(t)),n++,o+=s;break;default:o++}if(i)return null}if(null===r||null===a)return null;var l=9e4/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*n*l,pts:a+1024*n*l}]}}(e):function(e){var t={pid:null,table:null},i={};for(var n in function(e,t){for(var i,n=0,r=188;r<e.byteLength;)if(71!==e[n]||71!==e[r])n++,r++;else{switch(i=e.subarray(n,r),Ot.ts.parseType(i,t.pid)){case"pat":t.pid||(t.pid=Ot.ts.parsePat(i));break;case"pmt":t.table||(t.table=Ot.ts.parsePmt(i))}if(t.pid&&t.table)return;n+=188,r+=188}}(e,t),t.table)if(t.table.hasOwnProperty(n))switch(t.table[n]){case 27:i.video=[],Pt(e,t,i),0===i.video.length&&delete i.video;break;case 15:i.audio=[],Lt(e,t,i),0===i.audio.length&&delete i.audio}return i}(e))&&(i.audio||i.video)?(function(e,t){if(e.audio&&e.audio.length){var i=t;void 0===i&&(i=e.audio[0].dts),e.audio.forEach(function(e){e.dts=At(e.dts,i),e.pts=At(e.pts,i),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})}if(e.video&&e.video.length){var n=t;if(void 0===n&&(n=e.video[0].dts),e.video.forEach(function(e){e.dts=At(e.dts,n),e.pts=At(e.pts,n),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=At(r.dts,n),r.pts=At(r.pts,n),r.dtsTime=r.dts/9e4,r.ptsTime=r.dts/9e4}}}(i,t),i):null}(e,9e4*t);if(!i)return null;var n={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1};return n.hasVideo&&(n.videoStart=i.video[0].ptsTime),n.hasAudio&&(n.audioStart=i.audio[0].ptsTime),n}(i,t.baseStartTime);v&&(r(t,{hasAudio:v.hasAudio,hasVideo:v.hasVideo,isMuxed:p}),r=null,v.hasAudio&&!p&&h(v.audioStart),v.hasVideo&&m(v.videoStart),h=null,m=null)}!function(e){if(!Xe)return Xe=e,void pt(e);ct.push(e)}({bytes:i,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,isPartial:n,remux:p,onData:function(e){e.type="combined"===e.type?"video":e.type,u(t,e)},onTrackInfo:function(e){r&&(p&&(e.isMuxed=!0),r(t,e))},onAudioTimingInfo:function(e){h&&void 0!==e.start&&(h(e.start),h=null),f&&void 0!==e.end&&f(e.end)},onVideoTimingInfo:function(e){m&&void 0!==e.start&&(m(e.start),m=null),g&&void 0!==e.end&&g(e.end)},onVideoSegmentTimingInfo:function(e){s(e)},onId3:function(e,i){o(t,e,i)},onCaptions:function(e){l(t,[e])},onDone:function(e){d&&!n&&(e.type="combined"===e.type?"video":e.type,d(null,t,e))}})},Yt=function(e){var t=e.segment,i=e.bytes,n=e.isPartial,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.dataFn,d=e.doneFn,c=new Uint8Array(i);if(Ge(c)){t.isFmp4=!0;var p=t.map.tracks,h={isFmp4:!0,hasVideo:!!p.video,hasAudio:!!p.audio};p.audio&&p.audio.codec&&"enca"!==p.audio.codec&&(h.audioCodec=p.audio.codec),p.video&&p.video.codec&&"encv"!==p.video.codec&&(h.videoCodec=p.video.codec),p.video&&p.audio&&(h.isMuxed=!0),r(t,h);var f=function(e,t){var i,n,r;return i=Bt(t,["moof","traf"]),n=[].concat.apply([],i.map(function(t){return Bt(t,["tfhd"]).map(function(i){var n,r;return n=Ft(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),r=e[n]||9e4,(Bt(t,["tfdt"]).map(function(e){var t,i;return t=e[0],i=Ft(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(i*=Math.pow(2,32),i+=Ft(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),i})[0]||1/0)/r})})),r=Math.min.apply(null,n),isFinite(r)?r:0}(t.map.timescales,c);h.hasAudio&&!h.isMuxed&&a(t,"audio","start",f),h.hasVideo&&a(t,"video","start",f);var m=function(e){u(t,{data:i,type:h.hasAudio&&!h.isMuxed?"audio":"video"}),e&&e.length&&l(t,e),d(null,t,{})};if(!p.video||!i.byteLength||!t.transmuxer)return void m();var g=i instanceof ArrayBuffer?i:i.buffer,v=i instanceof ArrayBuffer?0:i.byteOffset;return t.transmuxer.addEventListener("message",function e(n){if("mp4Captions"===n.data.action){t.transmuxer.removeEventListener("message",e);var r=n.data.data;t.bytes=i=new Uint8Array(r,r.byteOffset||0,r.byteLength),m(n.data.captions)}}),void t.transmuxer.postMessage({action:"pushMp4Captions",timescales:t.map.timescales,trackIds:[p.video.id],data:g,byteOffset:v,byteLength:i.byteLength},[g])}if(t.transmuxer){if(void 0===t.container&&(t.container=Ve(c)),"ts"!==t.container&&"aac"!==t.container)return r(t,{hasAudio:!1,hasVideo:!1}),void d(null,t,{});Vt({segment:t,bytes:i,isPartial:n,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,dataFn:u,doneFn:d})}else d(null,t,{})},Gt=function(e){var t=e.xhr,i=e.xhrOptions,r=e.decryptionWorker,a=e.segment,s=e.abortFn,o=e.progressFn,l=e.trackInfoFn,u=e.timingInfoFn,d=e.videoSegmentTimingInfoFn,c=e.id3Fn,p=e.captionsFn,h=e.dataFn,f=e.doneFn,m=e.handlePartialData,g=[],v=function(e){var t=e.activeXhrs,i=e.decryptionWorker,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.id3Fn,o=e.captionsFn,l=e.dataFn,u=e.doneFn,d=0,c=!1;return function(e,p){if(!c){if(e)return c=!0,Ht(t),u(e,p);if((d+=1)===t.length){if(p.endOfAllRequests=Date.now(),p.encryptedBytes)return function(e){var t,i=e.decryptionWorker,n=e.segment,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.dataFn,d=e.doneFn;i.addEventListener("message",function e(t){if(t.data.source===n.requestId){i.removeEventListener("message",e);var c=t.data.decrypted;n.bytes=new Uint8Array(c.bytes,c.byteOffset,c.byteLength),Yt({segment:n,bytes:n.bytes,isPartial:!1,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,dataFn:u,doneFn:d})}}),t=n.key.bytes.slice?n.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(n.key.bytes)),i.postMessage(le({source:n.requestId,encrypted:n.encryptedBytes,key:t,iv:n.key.iv}),[n.encryptedBytes.buffer,t.buffer])}({decryptionWorker:i,segment:p,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,dataFn:l,doneFn:u});Yt({segment:p,bytes:p.bytes,isPartial:!1,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,dataFn:l,doneFn:u})}}}}({activeXhrs:g,decryptionWorker:r,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:d,id3Fn:c,captionsFn:p,dataFn:h,doneFn:f});if(a.key&&!a.key.bytes){var y=t(n.mergeOptions(i,{uri:a.key.resolvedUri,responseType:"arraybuffer"}),function(e,t){return function(i,n){var r=n.response,a=Wt(i,n);if(a)return t(a,e);if(16!==r.byteLength)return t({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:qt,xhr:n},e);var s=new DataView(r);return e.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),t(null,e)}}(a,v));g.push(y)}if(a.map&&!a.map.bytes){var _=t(n.mergeOptions(i,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:ie(a.map)}),function(e){var t=e.segment,i=e.finishProcessingFn;return function(e,n){var r=n.response,a=Wt(e,n);if(a)return i(a,t);if(0===r.byteLength)return i({status:n.status,message:"Empty HLS segment content at URL: "+n.uri,code:qt,xhr:n},t);t.map.bytes=new Uint8Array(n.response);var s=Ve(t.map.bytes);return"mp4"!==s?i({status:n.status,message:"Found unsupported "+(s||"unknown")+" container for initialization segment at URL: "+n.uri,code:qt,internal:!0,xhr:n},t):(function(e){var t=Bt(e,["moov","trak"]),i=[];return t.forEach(function(e){var t,n,r={},a=Bt(e,["tkhd"])[0];a&&(n=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),r.id=0===n?t.getUint32(12):t.getUint32(20));var s=Bt(e,["mdia","hdlr"])[0];if(s){var o=Ut(s.subarray(8,12));r.type="vide"===o?"video":"soun"===o?"audio":o}var l=Bt(e,["mdia","minf","stbl","stsd"])[0];if(l){var u=l.subarray(8);r.codec=Ut(u.subarray(4,8));var d,c=Bt(u,[r.codec])[0];c&&(/^[a-z]vc[1-9]$/i.test(r.codec)?(d=c.subarray(78),"avcC"===Ut(d.subarray(4,8))&&d.length>11?(r.codec+=".",r.codec+=$t(d[9]),r.codec+=$t(d[10]),r.codec+=$t(d[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)&&(d=c.subarray(28),"esds"===Ut(d.subarray(4,8))&&d.length>20&&0!==d[19]?(r.codec+="."+$t(d[19]),r.codec+="."+$t(d[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"))}var p=Bt(e,["mdia","mdhd"])[0];p&&(r.timescale=Nt(p)),i.push(r)}),i}(t.map.bytes).forEach(function(e){t.map.tracks=t.map.tracks||{},t.map.tracks[e.type]||(t.map.tracks[e.type]=e,e.id&&e.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[e.id]=e.timescale))}),i(null,t))}}({segment:a,finishProcessingFn:v}));g.push(_)}var b=n.mergeOptions(i,{uri:a.resolvedUri,responseType:"arraybuffer",headers:ie(a)});m&&(b.responseType="text",b.beforeSend=function(e){e.overrideMimeType("text/plain; charset=x-user-defined")});var T=t(b,function(e){var t=e.segment,i=e.finishProcessingFn,n=e.responseType;return function(e,r){var a=r.response,s=Wt(e,r);if(s)return i(s,t);var o="arraybuffer"!==n&&r.responseText?dt(r.responseText.substring(t.lastReachedChar||0)):r.response;return 0===a.byteLength?i({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:qt,xhr:r},t):(t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),t.key?t.encryptedBytes=new Uint8Array(o):t.bytes=new Uint8Array(o),i(null,t))}}({segment:a,finishProcessingFn:v,responseType:b.responseType}));T.addEventListener("progress",function(e){var t=e.segment,i=e.progressFn,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.dataFn,d=e.handlePartialData;return function(e){var c=e.target;if(!c.aborted){if(d&&!t.key&&c.responseText&&c.responseText.length>=8){var p=dt(c.responseText.substring(t.lastReachedChar||0));!t.lastReachedChar&&Ge(new Uint8Array(p))||(t.lastReachedChar=c.responseText.length,Yt({segment:t,bytes:p,isPartial:!0,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,dataFn:u}))}return t.stats=n.mergeOptions(t.stats,function(e){var t=e.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),i(e,t)}}}({segment:a,progressFn:o,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:d,id3Fn:c,captionsFn:p,dataFn:h,handlePartialData:m})),g.push(T);var w={};return g.forEach(function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,i=e.abortFn;return function(e){e.target.aborted&&i&&!t.calledAbortFn&&(i(),t.calledAbortFn=!0)}}({loadendState:w,abortFn:s}))}),function(){return Ht(g)}},Qt="undefined"!=typeof window?window:{},Xt="undefined"==typeof Symbol?"__target":Symbol(),Kt=Qt.BlobBuilder||Qt.WebKitBlobBuilder||Qt.MozBlobBuilder||Qt.MSBlobBuilder,Zt=Qt.URL||Qt.webkitURL||Zt&&Zt.msURL,Jt=Qt.Worker;function ei(e,t){return function(i){var n=this;if(!t)return new Jt(e);if(Jt&&!i){var r=ri(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[Xt]=new Jt(r),function(e,t){if(e&&t){var i=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&Zt.revokeObjectURL(e.objURL),i.call(e)}}}(this[Xt],r),this[Xt]}var a={postMessage:function(e){n.onmessage&&setTimeout(function(){n.onmessage({data:e,target:a})})}};t.call(a),this.postMessage=function(e){setTimeout(function(){a.onmessage({data:e,target:n})})},this.isThisThread=!0}}if(Jt){var ti,ii=ri("self.onmessage = function () {}"),ni=new Uint8Array(1);try{(ti=new Jt(ii)).postMessage(ni,[ni.buffer])}catch(e){Jt=null}finally{Zt.revokeObjectURL(ii),ti&&ti.terminate()}}function ri(e){try{return Zt.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(i){var t=new Kt;return t.append(e),Zt.createObjectURL(t.getBlob(type))}}var ai=new ei("./transmuxer-worker.worker.js",function(e,t){var i=this;!function(){var e=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var i,n,r,a;if(i=e[t])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,n,r,a,s,o,l,u,d,c,p,h,f,m,g,v,y,_,b,T,w,k,S,x,M,C,E,I,D,A,O,N,L,P,j,U,R,z,B,F,$=e,q=Math.pow(2,32)-1;!function(){var e;if(k={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in k)k.hasOwnProperty(e)&&(k[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),M=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),x=new Uint8Array([0,0,0,1]),C=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),E=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),I={video:C,audio:E},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0]),N=new Uint8Array([0,0,0,0,0,0,0,0]),L=N,P=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),j=N,D=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,i,n=[],r=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)r+=n[t].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(e,4),t=0,r=8;t<n.length;t++)i.set(n[t],r),r+=n[t].byteLength;return i},n=function(){return t(k.dinf,t(k.dref,O))},r=function(e){return t(k.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return t(k.hdlr,I[e])},m=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(i[12]=e.samplerate>>>24&255,i[13]=e.samplerate>>>16&255,i[14]=e.samplerate>>>8&255,i[15]=255&e.samplerate),t(k.mdhd,i)},f=function(e){return t(k.mdia,m(e),g(e.type),o(e))},s=function(e){return t(k.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(e){return t(k.minf,"video"===e.type?t(k.vmhd,D):t(k.smhd,A),n(),y(e))},l=function(e,i){for(var n=[],r=i.length;r--;)n[r]=b(i[r]);return t.apply(null,[k.moof,s(e)].concat(n))},u=function(e){for(var i=e.length,n=[];i--;)n[i]=p(e[i]);return t.apply(null,[k.moov,c(4294967295)].concat(n).concat(d(e)))},d=function(e){for(var i=e.length,n=[];i--;)n[i]=T(e[i]);return t.apply(null,[k.mvex].concat(n))},c=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(k.mvhd,i)},v=function(e){var i,n,r=e.samples||[],a=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,a[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t(k.sdtp,a)},y=function(e){return t(k.stbl,_(e),t(k.stts,j),t(k.stsc,L),t(k.stsz,P),t(k.stco,N))},_=function(e){return t(k.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):R(e))},U=function(e){var i,n,r=e.sps||[],a=e.pps||[],s=[],o=[];for(i=0;i<r.length;i++)s.push((65280&r[i].byteLength)>>>8),s.push(255&r[i].byteLength),s=s.concat(Array.prototype.slice.call(r[i]));for(i=0;i<a.length;i++)o.push((65280&a[i].byteLength)>>>8),o.push(255&a[i].byteLength),o=o.concat(Array.prototype.slice.call(a[i]));if(n=[k.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(k.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],s,[a.length],o))),t(k.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],u=e.sarRatio[1];n.push(t(k.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return t.apply(null,n)},R=function(e){return t(k.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},h=function(e){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(k.tkhd,i)},b=function(e){var i,n,r,a,s,o;return i=t(k.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(q+1)),o=Math.floor(e.baseMediaDecodeTime%(q+1)),n=t(k.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===e.type?(r=w(e,92),t(k.traf,i,n,r)):(a=v(e),r=w(e,a.length+92),t(k.traf,i,n,r,a))},p=function(e){return e.duration=e.duration||4294967295,t(k.trak,h(e),f(e))},T=function(e){var i=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(i[i.length-1]=0),t(k.trex,i)},F=function(e,t){var i=0,n=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,i|n|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function(e,i){var n,r,a,s,o,l;for(i+=20+16*(s=e.samples||[]).length,a=F(s,i),(r=new Uint8Array(a.length+16*s.length)).set(a),n=a.length,l=0;l<s.length;l++)o=s[l],r[n++]=(4278190080&o.duration)>>>24,r[n++]=(16711680&o.duration)>>>16,r[n++]=(65280&o.duration)>>>8,r[n++]=255&o.duration,r[n++]=(4278190080&o.size)>>>24,r[n++]=(16711680&o.size)>>>16,r[n++]=(65280&o.size)>>>8,r[n++]=255&o.size,r[n++]=o.flags.isLeading<<2|o.flags.dependsOn,r[n++]=o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,r[n++]=61440&o.flags.degradationPriority,r[n++]=15&o.flags.degradationPriority,r[n++]=(4278190080&o.compositionTimeOffset)>>>24,r[n++]=(16711680&o.compositionTimeOffset)>>>16,r[n++]=(65280&o.compositionTimeOffset)>>>8,r[n++]=255&o.compositionTimeOffset;return t(k.trun,r)},z=function(e,i){var n,r,a,s,o,l;for(i+=20+8*(s=e.samples||[]).length,a=F(s,i),(n=new Uint8Array(a.length+8*s.length)).set(a),r=a.length,l=0;l<s.length;l++)o=s[l],n[r++]=(4278190080&o.duration)>>>24,n[r++]=(16711680&o.duration)>>>16,n[r++]=(65280&o.duration)>>>8,n[r++]=255&o.duration,n[r++]=(4278190080&o.size)>>>24,n[r++]=(16711680&o.size)>>>16,n[r++]=(65280&o.size)>>>8,n[r++]=255&o.size;return t(k.trun,n)},w=function(e,t){return"audio"===e.type?z(e,t):B(e,t)},a=function(){return t(k.ftyp,S,x,S,M)};var H,W,V,Y,G,Q,X,K,Z=function(e){return t(k.mdat,e)},J=l,ee=function(e){var t,i=a(),n=u(e);return(t=new Uint8Array(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t},te=function(e,t){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=4*e.length,i.size+=e.byteLength,e.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},ie=function(e){var t,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,n.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},ne=function(e){var t,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},re=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ae=function(e,t){var i,n=[];return i=te(e,t||0),n.push(i),n},se=function(e){var t,i,n=0,r=e.byteLength,a=e.length,s=new Uint8Array(r+4*a),o=new DataView(s.buffer);for(t=0;t<e.length;t++)i=e[t],o.setUint32(n,i.data.byteLength),n+=4,s.set(i.data,n),n+=i.data.byteLength;return s},oe=[33,16,5,32,164,27],le=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ue=function(e){for(var t=[];e--;)t.push(0);return t};Q=function(e,t){return W(G(e,t))},X=function(e,t){return V(Y(e),t)},K=function(e,t,i){return Y(i?e:e-t)};var de=(V=function(e,t){return e*t},Y=function(e){return e/9e4}),ce=(G=function(e,t){return e/t},Q),pe=X,he=K,fe=W=function(e){return 9e4*e},me=de,ge=function(e,t,i,n){var r,a,s,o,l,u=0,d=0,c=0;if(t.length&&(r=ce(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(9e4/(e.samplerate/1024)),i&&n&&(u=r-Math.max(i,n),c=(d=Math.floor(u/a))*a),!(d<1||c>45e3))){for((s=function(){if(!H){var e={96000:[oe,[227,64],ue(154),[56]],88200:[oe,[231],ue(170),[56]],64000:[oe,[248,192],ue(240),[56]],48000:[oe,[255,192],ue(268),[55,148,128],ue(54),[112]],44100:[oe,[255,192],ue(268),[55,163,128],ue(84),[112]],32000:[oe,[255,192],ue(268),[55,234],ue(226),[112]],24000:[oe,[255,192],ue(268),[55,255,128],ue(268),[111,112],ue(126),[224]],16000:[oe,[255,192],ue(268),[55,255,128],ue(268),[111,255],ue(269),[223,108],ue(195),[1,192]],12000:[le,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,253,128],ue(259),[56]],11025:[le,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,255,192],ue(268),[55,175,128],ue(108),[112]],8000:[le,ue(268),[3,121,16],ue(47),[7]]};t=e,H=Object.keys(t).reduce(function(e,i){return e[i]=new Uint8Array(t[i].reduce(function(e,t){return e.concat(t)},[])),e},{})}var t;return H}()[e.samplerate])||(s=t[0].data),o=0;o<d;o++)l=t[0],t.splice(0,0,{data:s,dts:l.dts-a,pts:l.pts-a});e.baseMediaDecodeTime-=Math.floor(pe(c,e.samplerate))}},ve=function(e,t,i){return t.minSegmentDts>=i?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=i&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},ye=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],n.push({size:i.data.byteLength,duration:1024});return n},_e=function(e){var t,i,n=0,r=new Uint8Array(function(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t].data.byteLength;return i}(e));for(t=0;t<e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;return r},be=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Te=function(e,t){var i,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===e.type&&(i*=e.samplerate/9e4,i=Math.floor(i)),i},we=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},ke=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Ee(0,0),new Ee(0,1),new Ee(1,0),new Ee(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)};(ke.prototype=new $).push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}i.payload=void 0}t+=r,n=0,r=0}return i}(e.escapedRBSP)).payloadType&&(i=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=function(e,t){var i,n,r,a,s=[];if(!(64&t[0]))return s;for(n=31&t[0],i=0;i<n;i++)a={type:3&t[2+(r=3*i)],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],s.push(a));return s}(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ke.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return"flush"===e?t.flush():t.partialFlush()},this)},ke.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},ke.prototype.flush=function(){return this.flushStream("flush")},ke.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ke.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},ke.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ke.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ke.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},ke.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var Se={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},xe=function(e){return null===e?"":(e=Se[e]||e,String.fromCharCode(e))},Me=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ce=function(){for(var e=[],t=15;t--;)e.push("");return e},Ee=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ce();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ce();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ce()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,r))a=xe((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=xe((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var s=Me.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),a=xe(n),a+=xe(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Ee.prototype=new $,Ee.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ee.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ce(),this.nonDisplayed_=Ce(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ee.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ee.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Ee.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Ee.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Ee.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Ee.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Ee.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Ee.prototype.isNormalChar=function(e){return e>=32&&e<=127},Ee.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ce(),this.displayed_=Ce()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ee.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},Ee.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},Ee.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},Ee.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},Ee.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ee.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var Ie={CaptionStream:ke,Cea608Stream:Ee},De={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ae=function(e,t){var i=1;for(e>t&&(i=-1);Math.abs(t-e)>4294967296;)e+=8589934592*i;return e},Oe=function e(t){var i,n;e.prototype.init.call(this),this.type_=t||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=Ae(e.dts,n),e.pts=Ae(e.pts,n),i=e.dts,this.trigger("data",e))},this.flush=function(){n=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Oe.prototype=new $;var Ne,Le=Oe,Pe=function(e,t,i){var n,r="";for(n=t;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r},je=function(e,t,i){return decodeURIComponent(Pe(e,t,i))},Ue=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Re={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=je(e.data,1,t),e.value=je(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=je(e.data,1,t),e.url=je(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,i;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(i=e.data,unescape(Pe(i,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(Ne=function(e){var t,i={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},n=0,r=[],a=0;if(Ne.prototype.init.call(this),this.dispatchType=De.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,s,o,l,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))i.debug&&console.log("Skipping unrecognized metadata packet");else if(r.push(e),a+=e.data.byteLength,1===r.length&&(n=Ue(e.data.subarray(6,10)),n+=10),!(a<n)){for(t={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},u=0;u<n;)t.data.set(r[0].data.subarray(0,n-u),u),u+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();s=10,64&t.data[5]&&(s+=4,s+=Ue(t.data.subarray(10,14)),n-=Ue(t.data.subarray(16,20)));do{if((o=Ue(t.data.subarray(s+4,s+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((l={id:String.fromCharCode(t.data[s],t.data[s+1],t.data[s+2],t.data[s+3]),data:t.data.subarray(s+10,s+o+10)}).key=l.id,Re[l.id]&&(Re[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var d=l.data,c=(1&d[3])<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;c*=4,c+=3&d[7],l.timeStamp=c,void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),s+=10,s+=o}while(s<n);this.trigger("data",t)}}}).prototype=new $;var ze,Be,Fe,$e=Ne,qe=Le;(ze=function(){var e=new Uint8Array(188),t=0;ze.prototype.init.call(this),this.push=function(i){var n,r=0,a=188;for(t?((n=new Uint8Array(i.byteLength+t)).set(e.subarray(0,t)),n.set(i,t),t=0):n=i;a<n.byteLength;)71!==n[r]||71!==n[a]?(r++,a++):(this.trigger("data",n.subarray(r,a)),r+=188,a+=188);r<n.byteLength&&(e.set(n.subarray(r),0),t=n.byteLength-r)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new $,(Be=function(){var e,t,i,n;Be.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var r=0;n.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},i=function(e,t){var i,r;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<i;){var a=e[r],s=(31&e[r+1])<<8|e[r+2];a===De.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=s:a===De.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=s:a===De.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][s]=a),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===i.pid)i.type="pat",e(t.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",e(t.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,i]):this.processPes_(t,n,i)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=De.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=De.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new $,Be.STREAM_TYPES={h264:27,adts:15},(Fe=function(){var e,t=this,i={data:[],size:0},n={data:[],size:0},r={data:[],size:0},a=function(e,i,n){var r,a,s=new Uint8Array(e.size),o={type:i},l=0,u=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,l=0;l<e.data.length;l++)a=e.data[l],s.set(a.data,u),u+=a.data.byteLength;var d,c,p;d=s,(c=o).packetLength=6+(d[4]<<8|d[5]),c.dataAlignmentIndicator=0!=(4&d[6]),192&(p=d[7])&&(c.pts=(14&d[9])<<27|(255&d[10])<<20|(254&d[11])<<12|(255&d[12])<<5|(254&d[13])>>>3,c.pts*=4,c.pts+=(6&d[13])>>>1,c.dts=c.pts,64&p&&(c.dts=(14&d[14])<<27|(255&d[15])<<20|(254&d[16])<<12|(255&d[17])<<5|(254&d[18])>>>3,c.dts*=4,c.dts+=(6&d[18])>>>1)),c.data=d.subarray(9+d[8]),r="video"===i||o.packetLength<=e.size,(n||r)&&(e.size=0,e.data.length=0),r&&t.trigger("data",o)}};Fe.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,t;switch(s.streamType){case De.H264_STREAM_TYPE:e=i,t="video";break;case De.ADTS_STREAM_TYPE:e=n,t="audio";break;case De.METADATA_STREAM_TYPE:e=r,t="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&a(e,t,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};null!==(e=s.programMapTable).video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}})[s.type]()},this.reset=function(){i.size=0,i.data.length=0,n.size=0,n.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(i,"video"),a(n,"audio"),a(r,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new $;var He={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:ze,TransportParseStream:Be,ElementaryStream:Fe,TimestampRolloverStream:qe,CaptionStream:Ie.CaptionStream,Cea608Stream:Ie.Cea608Stream,MetadataStream:$e};for(var We in De)De.hasOwnProperty(We)&&(He[We]=De[We]);var Ve,Ye=He,Ge=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Ve=function(e){var t,i=0;Ve.prototype.init.call(this),this.push=function(n){var r,a,s,o,l,u,d=0;if(e||(i=0),"audio"===n.type)for(t?(o=t,(t=new Uint8Array(o.byteLength+n.data.byteLength)).set(o),t.set(n.data,o.byteLength)):t=n.data;d+5<t.length;)if(255===t[d]&&240==(246&t[d+1])){if(a=2*(1&~t[d+1]),r=(3&t[d+3])<<11|t[d+4]<<3|(224&t[d+5])>>5,u=9e4*(l=1024*(1+(3&t[d+6])))/Ge[(60&t[d+2])>>>2],s=d+r,t.byteLength<s)return;if(this.trigger("data",{pts:n.pts+i*u,dts:n.dts+i*u,sampleCount:l,audioobjecttype:1+(t[d+2]>>>6&3),channelcount:(1&t[d+2])<<2|(192&t[d+3])>>>6,samplerate:Ge[(60&t[d+2])>>>2],samplingfrequencyindex:(60&t[d+2])>>>2,samplesize:16,data:t.subarray(d+7+a,s)}),i++,t.byteLength===s)return void(t=void 0);t=t.subarray(s)}else d++},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new $;var Qe,Xe,Ke,Ze=Ve,Je=function(e){var t=e.byteLength,i=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(r,r+s)),i=new DataView(a.buffer).getUint32(0),n=8*s,t-=s},this.skipBits=function(e){var r;n>e?(i<<=e,n-=e):(e-=n,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),i<<=e,n-=e)},this.readBits=function(e){var r=Math.min(n,e),a=i>>>32-r;return(n-=r)>0?i<<=r:t>0&&this.loadWord(),(r=e-r)>0?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(0!=(i&2147483648>>>e))return i<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(Xe=function(){var e,t,i=0;Xe.prototype.init.call(this),this.push=function(n){var r;t?((r=new Uint8Array(t.byteLength+n.data.byteLength)).set(t),r.set(n.data,t.byteLength),t=r):t=n.data;for(var a=t.byteLength;i<a-3;i++)if(1===t[i+2]){e=i+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}i+3!==e-2&&this.trigger("data",t.subarray(i+3,e-2));do{e++}while(1!==t[e]&&e<a);i=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(i+3,e-2)),i=e-2,e+=3;break;default:e+=3}t=t.subarray(i),e-=i,i=0},this.reset=function(){t=null,i=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(i+3)),t=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new $,Ke={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Qe=function(){var e,t,i,n,r,a,s,o=new Xe;Qe.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,i=e.pts,n=e.dts,o.push(e))},o.on("data",function(s){var o={trackId:t,pts:i,dts:n,data:s};switch(31&s[0]){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)}),o.on("done",function(){e.trigger("done")}),o.on("partialdone",function(){e.trigger("partialdone")}),o.on("reset",function(){e.trigger("reset")}),o.on("endedtimeline",function(){e.trigger("endedtimeline")}),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},s=function(e,t){var i,n=8,r=8;for(i=0;i<e;i++)0!==r&&(r=(n+t.readExpGolomb()+256)%256),n=0===r?n:r},r=function(e){for(var t,i,n=e.byteLength,r=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=e[s];return i},a=function(e){var t,i,n,r,a,o,l,u,d,c,p,h,f,m=0,g=0,v=0,y=0,_=1;if(i=(t=new Je(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),Ke[i]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==a?8:12,f=0;f<p;f++)t.readBoolean()&&s(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),f=0;f<l;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),d=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}h&&(_=h[0]/h[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:Math.ceil((16*(u+1)-2*m-2*g)*_),height:(2-c)*(d+1)*16-2*v-2*y,sarRatio:h}}}).prototype=new $;var et,tt={H264Stream:Qe,NalByteStream:Xe},it=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return i=i>=0?i:0,(16&e[t+5])>>4?i+20:i+10},nt=function(e){var t=function e(t,i){return t.length-i<10||t[i]!=="I".charCodeAt(0)||t[i+1]!=="D".charCodeAt(0)||t[i+2]!=="3".charCodeAt(0)?i:e(t,i+=it(t,i))}(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},rt=it,at=function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i};(et=function(){var e=new Uint8Array,t=0;et.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(i){var n,r,a,s,o=0,l=0;for(e.length?(s=e.length,(e=new Uint8Array(i.byteLength+s)).set(e.subarray(0,s)),e.set(i,s)):e=i;e.length-l>=3;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255!=(255&e[l])||240!=(240&e[l+1]))l++;else{if(e.length-l<7)break;if(l+(o=at(e,l))>e.length)break;a={type:"audio",data:e.subarray(l,l+o),pts:t,dts:t},this.trigger("data",a),l+=o}else{if(e.length-l<10)break;if(l+(o=rt(e,l))>e.length)break;r={type:"timed-metadata",data:e.subarray(l,l+o)},this.trigger("data",r),l+=o}n=e.length-l,e=n>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new $;var st,ot,lt,ut,dt=et,ct=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],pt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],ht=tt.H264Stream,ft=nt,mt=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},gt=function(e,t,i,n,r,a){return{start:{dts:e,pts:e+(i-t)},end:{dts:e+(n-t),pts:e+(r-i)},prependedContentDuration:a,baseMediaDecodeTime:e}};(ot=function(e,t){var i=[],n=0,r=0,a=0,s=1/0;t=t||{},ot.prototype.init.call(this),this.push=function(t){we(e,t),e&&ct.forEach(function(i){e[i]=t[i]}),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var o,l,u,d,c;0!==i.length?(o=ve(i,e,r),e.baseMediaDecodeTime=Te(e,t.keepOriginalTimestamps),ge(e,o,a,s),e.samples=ye(o),u=Z(_e(o)),i=[],l=J(n,[e]),d=new Uint8Array(l.byteLength+u.byteLength),n++,d.set(l),d.set(u,l.byteLength),be(e),c=Math.ceil(9216e4/e.samplerate),o.length&&this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+o.length*c}),this.trigger("data",{track:e,boxes:d}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){be(e),i=[],this.trigger("reset")}}).prototype=new $,(st=function(e,t){var i,n,r=0,a=[],s=[];t=t||{},st.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){we(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],pt.forEach(function(t){e[t]=i[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var i,n,o,l,u,d,c,p,h=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=ie(a),(o=ne(i))[0][0].keyFrame||((n=this.getGopForFusion_(a[0],e))?(h=n.duration,o.unshift(n),o.byteLength+=n.byteLength,o.nalCount+=n.nalCount,o.pts=n.pts,o.dts=n.dts,o.duration+=n.duration):o=re(o)),s.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");be(e),o=f}we(e,o),e.samples=function(e,t){var i,n,r,a,s,o=0,l=[];for(i=0;i<e.length;i++)for(a=e[i],n=0;n<a.length;n++)s=a[n],o+=(r=te(s,o)).size,l.push(r);return l}(o),u=Z(function(e){var t,i,n,r,a,s,o=0,l=e.byteLength,u=e.nalCount,d=new Uint8Array(l+4*u),c=new DataView(d.buffer);for(t=0;t<e.length;t++)for(r=e[t],i=0;i<r.length;i++)for(a=r[i],n=0;n<a.length;n++)s=a[n],c.setUint32(o,s.data.byteLength),o+=4,d.set(s.data,o),o+=s.data.byteLength;return d}(o)),e.baseMediaDecodeTime=Te(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),c=o[0],p=o[o.length-1],this.trigger("segmentTimingInfo",gt(e.baseMediaDecodeTime,c.dts,c.pts,p.dts+p.duration,p.pts+p.duration,h)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=J(r,[e]),d=new Uint8Array(l.byteLength+u.byteLength),r++,d.set(l),d.set(u,l.byteLength),this.trigger("data",{track:e,boxes:d}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){be(e),i=void 0,n=void 0},this.getGopForFusion_=function(t){var i,n,r,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)r=(a=this.gopCache_[s]).gop,e.pps&&mt(e.pps[0],a.pps[0])&&e.sps&&mt(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||(i=t.dts-r.dts-r.duration)>=-1e4&&i<=45e3&&(!n||o>i)&&(n=a,o=i));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,i,n,r,a,o,l,u;for(a=e.byteLength,o=e.nalCount,l=e.duration,t=i=0;t<s.length&&i<e.length&&(n=s[t],r=e[i],n.pts!==r.pts);)r.pts>n.pts?t++:(i++,a-=r.byteLength,o-=r.nalCount,l-=r.duration);return 0===i?e:i===e.length?null:((u=e.slice(i)).byteLength=a,u.duration=l,u.nalCount=o,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,i,n,r,a,o,l;for(t=s.length-1,i=e.length-1,a=null,o=!1;t>=0&&i>=0;){if(n=s[t],r=e[i],n.pts===r.pts){o=!0;break}n.pts>r.pts?t--:(t===s.length-1&&(a=i),i--)}if(!o&&null===a)return null;if(0===(l=o?i:a))return e;var u=e.slice(l),d=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=d.byteLength,u.duration=d.duration,u.nalCount=d.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){s=e}}).prototype=new $,(ut=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ut.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new $,ut.prototype.flush=function(e){var t,i,n,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,pt.forEach(function(e){s.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,ct.forEach(function(e){s.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,n=ee(this.pendingTracks),s.initSegment=new Uint8Array(n.byteLength),s.initSegment.set(n),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=he(t.startPts,o,this.keepOriginalTimestamps),t.endTime=he(t.endPts,o,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=he(i.pts,o,this.keepOriginalTimestamps),s.metadata.push(i);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),r=0;r<s.captions.length;r++)t=s.captions[r],this.trigger("caption",t);for(r=0;r<s.metadata.length;r++)i=s.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ut.prototype.setRemux=function(e){this.remuxTracks=e},(lt=function(e){var t,i,n=this,r=!0;lt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new Ye.MetadataStream,r.aacStream=new dt,r.audioTimestampRolloverStream=new Ye.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Ye.TimestampRolloverStream("timed-metadata"),r.adtsStream=new Ze,r.coalesceStream=new ut(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",function(e){r.aacStream.setTimestamp(e.timeStamp)}),r.aacStream.on("data",function(a){"timed-metadata"!==a.type&&"audio"!==a.type||r.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ot(i,e),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t}))}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new Ye.MetadataStream,r.packetStream=new Ye.TransportPacketStream,r.parseStream=new Ye.TransportParseStream,r.elementaryStream=new Ye.ElementaryStream,r.timestampRolloverStream=new Ye.TimestampRolloverStream,r.adtsStream=new Ze,r.h264Stream=new ht,r.captionStream=new Ye.CaptionStream,r.coalesceStream=new ut(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)t||"video"!==a.tracks[s].type?i||"audio"!==a.tracks[s].type||((i=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new st(t,e),r.videoSegmentStream.on("timelineStartInfo",function(t){i&&!e.keepOriginalTimestamps&&(i.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-n.baseMediaDecodeTime))}),r.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",function(e){i&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),r.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ot(i,e),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t})}}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",function(e){e.dispatchType=r.metadataStream.dispatchType,n.trigger("id3Frame",e)}),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(n){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,be(i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,be(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var i=this.transmuxPipeline_;e.remux=t,i&&i.coalesceStream&&i.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(r){var t=ft(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new $;var vt={Transmuxer:lt,VideoSegmentStream:st,AudioSegmentStream:ot,AUDIO_PROPERTIES:ct,VIDEO_PROPERTIES:pt,generateVideoSegmentTimingInfo:gt}.Transmuxer,yt={Adts:Ze,h264:tt},_t=function e(t,i){var n=[],r=0,a=0,s=0,o=1/0,l=null,u=null;i=i||{},e.prototype.init.call(this),this.push=function(e){we(t,e),t&&ct.forEach(function(i){t[i]=e[i]}),n.push(e)},this.setEarliestDts=function(e){a=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){s=e},this.processFrames_=function(){var e,d,c,p,h;0!==n.length&&0!==(e=ve(n,t,a)).length&&(t.baseMediaDecodeTime=Te(t,i.keepOriginalTimestamps),ge(t,e,s,o),t.samples=ye(e),c=Z(_e(e)),n=[],d=J(r,[t]),r++,t.initSegment=ee([t]),(p=new Uint8Array(d.byteLength+c.byteLength)).set(d),p.set(c,d.byteLength),be(t),null===l&&(u=l=e[0].pts),u+=e.length*(9216e4/t.samplerate),h={start:l},this.trigger("timingInfo",h),this.trigger("data",{track:t,boxes:p}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:l,end:u}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){be(t),l=null,u=null},this.reset=function(){this.resetTiming_(),n=[],this.trigger("reset")}};_t.prototype=new $;var bt=_t,Tt=function e(t,i){var n,r,a,s=0,o=[],l=[],u=null,d=null,c=!0;i=i||{},e.prototype.init.call(this),this.push=function(e){we(t,e),void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),"seq_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],pt.forEach(function(e){t[e]=n[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.data,t.pps=[e.data]),o.push(e)},this.processNals_=function(e){var n;for(o=l.concat(o);o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0!==o.length){var r=ie(o);if(r.length)if(l=r[r.length-1],e&&(r.pop(),r.duration-=l.duration,r.nalCount-=l.length,r.byteLength-=l.byteLength),r.length){if(this.trigger("timelineStartInfo",t.timelineStartInfo),c){if(!(a=ne(r))[0][0].keyFrame){if(!(a=re(a))[0][0].keyFrame)return o=[].concat.apply([],r).concat(l),void(l=[]);(r=[].concat.apply([],a)).duration=a.duration}c=!1}for(null===u&&(u=r[0].pts,d=u),d+=r.duration,this.trigger("timingInfo",{start:u,end:d}),n=0;n<r.length;n++){var p=r[n];t.samples=ae(p);var h=Z(se(p));be(t),we(t,p),t.baseMediaDecodeTime=Te(t,i.keepOriginalTimestamps);var f=J(s,[t]);s++,t.initSegment=ee([t]);var m=new Uint8Array(f.byteLength+h.byteLength);m.set(f),m.set(h,f.byteLength),this.trigger("data",{track:t,boxes:m,sequence:s,videoFrameDts:p.dts,videoFramePts:p.pts})}o=[]}else o=[]}},this.resetTimingAndConfig_=function(){n=void 0,r=void 0,u=null,d=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),l=[],o=[],c=!0,this.trigger("reset")}};Tt.prototype=new $;var wt=Tt,kt=nt,St=function(e){return e.prototype=new $,e.prototype.init.call(e),e},xt=function(e,t){e.on("data",t.trigger.bind(t,"data")),e.on("done",t.trigger.bind(t,"done")),e.on("partialdone",t.trigger.bind(t,"partialdone")),e.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),e.on("audioTimingInfo",t.trigger.bind(t,"audioTimingInfo")),e.on("videoTimingInfo",t.trigger.bind(t,"videoTimingInfo")),e.on("trackinfo",t.trigger.bind(t,"trackinfo")),e.on("id3Frame",function(i){i.dispatchType=e.metadataStream.dispatchType,i.cueTime=de(i.pts),t.trigger("id3Frame",i)}),e.on("caption",function(e){t.trigger("caption",e)})},Mt=function e(t){var i=null,n=!0;t=t||{},e.prototype.init.call(this),t.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.push=function(e){if(n){var r=kt(e);!r||i&&"aac"===i.type?r||i&&"ts"===i.type||(i=function(e){var t={type:"ts",tracks:{audio:null,video:null},packet:new Ye.TransportPacketStream,parse:new Ye.TransportParseStream,elementary:new Ye.ElementaryStream,timestampRollover:new Ye.TimestampRolloverStream,adts:new yt.Adts,h264:new yt.h264.H264Stream,captionStream:new Ye.CaptionStream,metadataStream:new Ye.MetadataStream};return t.headOfPipeline=t.packet,t.packet.pipe(t.parse).pipe(t.elementary).pipe(t.timestampRollover),t.timestampRollover.pipe(t.h264),t.h264.pipe(t.captionStream),t.timestampRollover.pipe(t.metadataStream),t.timestampRollover.pipe(t.adts),t.elementary.on("data",function(i){if("metadata"===i.type){for(var n=0;n<i.tracks.length;n++)t.tracks[i.tracks[n].type]||(t.tracks[i.tracks[n].type]=i.tracks[n],t.tracks[i.tracks[n].type].timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime);t.tracks.video&&!t.videoSegmentStream&&(t.videoSegmentStream=new wt(t.tracks.video,e),t.videoSegmentStream.on("timelineStartInfo",function(i){t.tracks.audio&&!e.keepOriginalTimestamps&&t.audioSegmentStream.setEarliestDts(i.dts-e.baseMediaDecodeTime)}),t.videoSegmentStream.on("timingInfo",t.trigger.bind(t,"videoTimingInfo")),t.videoSegmentStream.on("data",function(e){t.trigger("data",{type:"video",data:e})}),t.videoSegmentStream.on("done",t.trigger.bind(t,"done")),t.videoSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.videoSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.h264.pipe(t.videoSegmentStream)),t.tracks.audio&&!t.audioSegmentStream&&(t.audioSegmentStream=new bt(t.tracks.audio,e),t.audioSegmentStream.on("data",function(e){t.trigger("data",{type:"audio",data:e})}),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adts.pipe(t.audioSegmentStream)),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video})}}),t.captionStream.on("data",function(i){var n;n=t.tracks.video&&t.tracks.video.timelineStartInfo.pts||0,i.startTime=he(i.startPts,n,e.keepOriginalTimestamps),i.endTime=he(i.endPts,n,e.keepOriginalTimestamps),t.trigger("caption",i)}),(t=St(t)).metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t}(t),xt(i,this)):(i=function(e){var t={type:"aac",tracks:{audio:null},metadataStream:new Ye.MetadataStream,aacStream:new dt,audioRollover:new Ye.TimestampRolloverStream("audio"),timedMetadataRollover:new Ye.TimestampRolloverStream("timed-metadata"),adtsStream:new Ze(!0)};return t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioRollover).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataRollover).pipe(t.metadataStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(i){"timed-metadata"!==i.type&&"audio"!==i.type||t.audioSegmentStream||(t.tracks.audio=t.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:e.baseMediaDecodeTime},codec:"adts",type:"audio"},t.audioSegmentStream=new bt(t.tracks.audio,e),t.audioSegmentStream.on("data",function(e){t.trigger("data",{type:"audio",data:e})}),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video}))}),(t=St(t)).metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t}(t),xt(i,this)),n=!1}i.headOfPipeline.push(e)},this.flush=function(){i&&(n=!0,i.headOfPipeline.flush())},this.partialFlush=function(){i&&i.headOfPipeline.partialFlush()},this.endTimeline=function(){i&&i.headOfPipeline.endTimeline()},this.reset=function(){i&&i.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(e){t.keepOriginalTimestamps||(t.baseMediaDecodeTime=e),i&&(i.tracks.audio&&(i.tracks.audio.timelineStartInfo.dts=void 0,i.tracks.audio.timelineStartInfo.pts=void 0,be(i.tracks.audio),i.audioRollover&&i.audioRollover.discontinuity()),i.tracks.video&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),i.tracks.video.timelineStartInfo.dts=void 0,i.tracks.video.timelineStartInfo.pts=void 0,be(i.tracks.video)),i.timestampRollover&&i.timestampRollover.discontinuity())},this.setRemux=function(e){t.remux=e,i&&i.coalesceStream&&i.coalesceStream.setRemux(e)},this.setAudioAppendStart=function(e){i&&i.tracks.audio&&i.audioSegmentStream&&i.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){}};Mt.prototype=new $;var Ct=Mt,Et=function(e){return e>>>0},It=Et,Dt=function e(t,i){var n,r,a,s,o,l,u,d=[];if(!i.length)return null;for(n=0;n<t.byteLength;)r=It(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),l=t.subarray(n+4,n+8),u=void 0,u="",u+=String.fromCharCode(l[0]),u+=String.fromCharCode(l[1]),a=(u+=String.fromCharCode(l[2]))+String.fromCharCode(l[3]),s=r>1?n+r:t.byteLength,a===i[0]&&(1===i.length?d.push(t.subarray(n+8,s)):(o=e(t.subarray(n+8,s),i.slice(1))).length&&(d=d.concat(o))),n=s;return d},At=Et,Ot=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Nt=function(e){for(var t,i,n=e.byteLength,r=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=e[s];return i},Lt=Ie.CaptionStream,Pt=function(e,t){for(var i=e,n=0;n<t.length;n++){var r=t[n];if(i<r.size)return r;i-=r.size}return null},jt=function(e,t){var i=Dt(e,["moof","traf"]),n=Dt(e,["mdat"]),r={},a=[];return n.forEach(function(e,t){var n=i[t];a.push({mdat:e,traf:n})}),a.forEach(function(e){var i,n,a,s,o,l,u,d,c,p,h,f,m=e.mdat,g=e.traf,v=(n=Dt(g,["tfhd"])[0],s=new DataView(n.buffer,n.byteOffset,n.byteLength),l=1&(o={version:n[0],flags:new Uint8Array(n.subarray(1,4)),trackId:s.getUint32(4)}).flags[2],u=2&o.flags[2],d=8&o.flags[2],c=16&o.flags[2],p=32&o.flags[2],h=65536&o.flags[0],f=131072&o.flags[0],a=8,l&&(a+=4,o.baseDataOffset=s.getUint32(12),a+=4),u&&(o.sampleDescriptionIndex=s.getUint32(a),a+=4),d&&(o.defaultSampleDuration=s.getUint32(a),a+=4),c&&(o.defaultSampleSize=s.getUint32(a),a+=4),p&&(o.defaultSampleFlags=s.getUint32(a)),h&&(o.durationIsEmpty=!0),!l&&f&&(o.baseDataOffsetIsMoof=!0),o),y=v.trackId,_=Dt(g,["tfdt"]),b=_.length>0?function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:At(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=At(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t}(_[0]).baseMediaDecodeTime:0,T=Dt(g,["trun"]);t===y&&T.length>0&&(i=function(e,t,i){var n,r,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(r=0;r+4<e.length;r+=a)if(a=o.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+a),d=Pt(r,t);if(n={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:Nt(u),trackId:i},d)n.pts=d.pts,n.dts=d.dts,s=d;else{if(!s){console.log("We've encountered a nal unit without data. See mux.js#233.");break}n.pts=s.pts,n.dts=s.dts}l.push(n)}return l}(m,function(e,t,i){var n=b,r=i.defaultSampleDuration||0,a=i.defaultSampleSize||0,s=i.trackId,o=[];return e.forEach(function(e){var t=function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],a=4&i.flags[2],s=1&i.flags[1],o=2&i.flags[1],l=4&i.flags[1],u=8&i.flags[1],d=n.getUint32(4),c=8;for(r&&(i.dataOffset=n.getInt32(c),c+=4),a&&d&&(t={flags:Ot(e.subarray(c,c+4))},c+=4,s&&(t.duration=n.getUint32(c),c+=4),o&&(t.size=n.getUint32(c),c+=4),u&&(1===i.version?t.compositionTimeOffset=n.getInt32(c):t.compositionTimeOffset=n.getUint32(c),c+=4),i.samples.push(t),d--);d--;)t={},s&&(t.duration=n.getUint32(c),c+=4),o&&(t.size=n.getUint32(c),c+=4),l&&(t.flags=Ot(e.subarray(c,c+4)),c+=4),u&&(1===i.version?t.compositionTimeOffset=n.getInt32(c):t.compositionTimeOffset=n.getUint32(c),c+=4),i.samples.push(t);return i}(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=n+e.compositionTimeOffset,n+=e.duration}),o=o.concat(t)}),o}(T,0,v),y),r[y]||(r[y]=[]),r[y]=r[y].concat(i))}),r},Ut=function(){var e,t,i,n,r,a,s=!1;this.isInitialized=function(){return s},this.init=function(t){e=new Lt,s=!0,a=!!t&&t.isPartial,e.on("data",function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,r.captions.push(e),r.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||i===e[0]&&n===t[i])},this.parse=function(e,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))i=a[0],n=s[i];else if(null===i||!n)return t.push(e),null;for(;t.length>0;){var l=t.shift();this.parse(l,a,s)}return null!==(o=function(e,t,i){return null===t?null:{seiNals:jt(e,t)[t],timescale:i}}(e,i,n))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],i=null,n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},Rt=function(e){return"AudioSegmentStream"===e?"audio":"VideoSegmentStream"===e?"video":""},zt=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){var e,t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=this.options.handlePartialData?new Ct(this.options):new vt(this.options),this.options.handlePartialData?(e=this.self,(t=this.transmuxer).on("data",function(t){var i={data:t.data.track.initSegment.buffer,byteOffset:t.data.track.initSegment.byteOffset,byteLength:t.data.track.initSegment.byteLength},n={boxes:{data:t.data.boxes.buffer,byteOffset:t.data.boxes.byteOffset,byteLength:t.data.boxes.byteLength},initSegment:i,type:t.type,sequence:t.data.sequence};void 0!==t.data.videoFrameDts&&(n.videoFrameDtsTime=me(t.data.videoFrameDts)),void 0!==t.data.videoFramePts&&(n.videoFramePtsTime=me(t.data.videoFramePts)),e.postMessage({action:"data",segment:n},[n.boxes.data,n.initSegment.data])}),t.on("id3Frame",function(t){e.postMessage({action:"id3Frame",id3Frame:t})}),t.on("caption",function(t){e.postMessage({action:"caption",caption:t})}),t.on("done",function(t){e.postMessage({action:"done",type:Rt(t)})}),t.on("partialdone",function(t){e.postMessage({action:"partialdone",type:Rt(t)})}),t.on("endedsegment",function(t){e.postMessage({action:"endedSegment",type:Rt(t)})}),t.on("trackinfo",function(t){e.postMessage({action:"trackinfo",trackInfo:t})}),t.on("audioTimingInfo",function(t){if(null!==t.start){var i={start:me(t.start)};t.end&&(i.end=me(t.end)),e.postMessage({action:"audioTimingInfo",audioTimingInfo:i})}else e.postMessage({action:"audioTimingInfo",audioTimingInfo:t})}),t.on("videoTimingInfo",function(t){var i={start:me(t.start)};t.end&&(i.end=me(t.end)),e.postMessage({action:"videoTimingInfo",videoTimingInfo:i})})):function(e,t){t.on("data",function(t){var i=t.initSegment;t.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),t.on("done",function(t){e.postMessage({action:"done"})}),t.on("gopInfo",function(t){e.postMessage({action:"gopInfo",gopInfo:t})}),t.on("videoSegmentTimingInfo",function(t){var i={start:{decode:me(t.start.dts),presentation:me(t.start.pts)},end:{decode:me(t.end.dts),presentation:me(t.end.pts)},baseMediaDecodeTime:me(t.baseMediaDecodeTime)};t.prependedContentDuration&&(i.prependedContentDuration=me(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})}),t.on("id3Frame",function(t){e.postMessage({action:"id3Frame",id3Frame:t})}),t.on("caption",function(t){e.postMessage({action:"caption",caption:t})}),t.on("trackinfo",function(t){e.postMessage({action:"trackinfo",trackInfo:t})}),t.on("audioTimingInfo",function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:me(t.start),end:me(t.end)}})}),t.on("videoTimingInfo",function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:me(t.start),end:me(t.end)}})})}(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new Ut,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),i=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:i&&i.captions||[],data:t.buffer},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(fe(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(fe(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),i.postMessage({action:"done",type:"transmuxed"})},t.partialFlush=function(e){this.transmuxer.partialFlush(),i.postMessage({action:"partialdone",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),i.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new zt(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new zt(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(i)}()}),si=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i),r={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/},a=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)}):e},s=function(e){return e.map(a)},o=function(e){void 0===e&&(e="");var t=e.split(","),i={};return t.forEach(function(e){e=e.trim(),["video","audio"].forEach(function(t){var n=r[t].exec(e.toLowerCase());if(n&&!(n.length<=1)){var a=e.substring(0,n[1].length),s=e.replace(a,"");i[t]={type:a,details:s}}})}),i},l=function(e){return void 0===e&&(e=""),r.audio.test(e.trim().toLowerCase())},u=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map(function(e){return a(e.trim())}),i="video";1===t.length&&l(t[0])&&(i="audio");var n="mp4";return t.every(function(e){return r.mp4.test(e)})?n="mp4":t.every(function(e){return r.webm.test(e)})?n="webm":t.every(function(e){return r.ogg.test(e)})&&(n="ogg"),i+"/"+n+';codecs="'+e+'"'}};t.DEFAULT_AUDIO_CODEC="mp4a.40.2",t.DEFAULT_VIDEO_CODEC="avc1.4d400d",t.browserSupportsCodec=function(e){return void 0===e&&(e=""),n.default.MediaSource&&n.default.MediaSource.isTypeSupported&&n.default.MediaSource.isTypeSupported(u(e))||!1},t.codecsFromDefault=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var r=i[n];if(r.default&&r.playlists)return o(r.playlists[0].attributes.CODECS)}return null},t.getMimeForCodec=u,t.isAudioCodec=l,t.isVideoCodec=function(e){return void 0===e&&(e=""),r.video.test(e.trim().toLowerCase())},t.mapLegacyAvcCodecs=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return s([e])[0]})},t.muxerSupportsCodec=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every(function(e){return e=e.trim(),r.muxerVideo.test(e)||r.muxerAudio.test(e)})},t.parseCodecs=o,t.translateLegacyCodec=a,t.translateLegacyCodecs=s});o(si);var oi=si.DEFAULT_AUDIO_CODEC,li=si.DEFAULT_VIDEO_CODEC,ui=si.browserSupportsCodec,di=si.codecsFromDefault,ci=si.getMimeForCodec,pi=si.isAudioCodec,hi=si.isVideoCodec,fi=(si.mapLegacyAvcCodecs,si.muxerSupportsCodec),mi=si.parseCodecs,gi=si.translateLegacyCodec,vi=(si.translateLegacyCodecs,function(e,t){var i=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&i.AUDIO&&e.mediaGroups.AUDIO[i.AUDIO]}),yi=function(e,t){var i=t.attributes||{},n=function(e){var t=e.attributes||{};if(t.CODECS)return mi(t.CODECS)}(t)||{};if(vi(e,t)&&!n.audio&&!function(e,t){if(!vi(e,t))return!0;var i=t.attributes||{},n=e.mediaGroups.AUDIO[i.AUDIO];for(var r in n)if(!n[r].uri&&!n[r].playlists)return!0;return!1}(e,t)){var r=di(e,i.AUDIO);r&&(n.audio=r.audio)}var a={};return n.video&&(a.video=gi(""+n.video.type+n.video.details)),n.audio&&(a.audio=gi(""+n.audio.type+n.audio.details)),a},_i=function(e){return n.log.debug?n.log.debug.bind(n,"VHS:",e+" >"):function(){}},bi=_i("PlaylistSelector"),Ti=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},wi=function(e,t){if(!e)return"";var n=i.getComputedStyle(e);return n?n[t]:""},ki=function(e,t){var i=e.slice();e.sort(function(e,n){var r=t(e,n);return 0===r?i.indexOf(e)-i.indexOf(n):r})},Si=function(e,t){var n,r;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||i.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),n-(r||i.Number.MAX_VALUE)},xi=function(e,t,n,r,a){var s={bandwidth:t,width:n,height:r,limitRenditionByPlayerDimensions:a},o=e.playlists.map(function(e){var t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes.BANDWIDTH||i.Number.MAX_VALUE,width:t,height:n,playlist:e}});ki(o,function(e,t){return e.bandwidth-t.bandwidth});var l=(o=o.filter(function(e){return!K.isIncompatible(e.playlist)})).filter(function(e){return K.isEnabled(e.playlist)});l.length||(l=o.filter(function(e){return!K.isDisabled(e.playlist)}));var u=l.filter(function(e){return e.bandwidth*ut.BANDWIDTH_VARIANCE<t}),d=u[u.length-1],c=u.filter(function(e){return e.bandwidth===d.bandwidth})[0];if(!1===a){var p=c||l[0]||o[0];if(p&&p.playlist){var h="sortedPlaylistReps";return c&&(h="bandwidthBestRep"),l[0]&&(h="enabledPlaylistReps"),bi("choosing "+Ti(p)+" using "+h+" with options",s),p.playlist}return bi("could not choose a playlist with options",s),null}var f=u.filter(function(e){return e.width&&e.height});ki(f,function(e,t){return e.width-t.width});var m=f.filter(function(e){return e.width===n&&e.height===r});d=m[m.length-1];var g,v,y,_=m.filter(function(e){return e.bandwidth===d.bandwidth})[0];_||(v=(g=f.filter(function(e){return e.width>n||e.height>r})).filter(function(e){return e.width===g[0].width&&e.height===g[0].height}),d=v[v.length-1],y=v.filter(function(e){return e.bandwidth===d.bandwidth})[0]);var b=y||_||c||l[0]||o[0];if(b&&b.playlist){var T="sortedPlaylistReps";return y?T="resolutionPlusOneRep":_?T="resolutionBestRep":c?T="bandwidthBestRep":l[0]&&(T="enabledPlaylistReps"),bi("choosing "+Ti(b)+" using "+T+" with options",s),b.playlist}return bi("could not choose a playlist with options",s),null},Mi=function(){var e=this.useDevicePixelRatio&&i.devicePixelRatio||1;return xi(this.playlists.master,this.systemBandwidth,parseInt(wi(this.tech_.el(),"width"),10)*e,parseInt(wi(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions)},Ci=function(e,t,i){var n,r;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime>=e&&r.endTime<=t&&i.removeCue(r)},Ei=function(e){return"number"==typeof e&&isFinite(e)},Ii=function(e){return e+"TimingInfo"},Di=function(e){var t=e.segmentTimeline,i=e.currentTimeline,n=e.startOfSegment,r=e.buffered;return e.overrideCheck||t!==i?r.length?r.end(r.length-1):n:null},Ai=function(e){var t=e.timelineChangeController,i=e.currentTimeline,n=e.segmentTimeline,r=e.loaderType,a=e.audioDisabled;if(i===n)return!1;if("audio"===r){var s=t.lastTimelineChange({type:"main"});return!s||s.to!==n}if("main"===r&&a){var o=t.pendingTimelineChange({type:"audio"});return!o||o.to!==n}return!1},Oi=function(e){function t(t,i){var r;if(r=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return r.bandwidth=t.bandwidth,r.throughput={rate:0,count:0},r.roundTrip=NaN,r.resetStats_(),r.mediaIndex=null,r.hasPlayed_=t.hasPlayed,r.currentTime_=t.currentTime,r.seekable_=t.seekable,r.seeking_=t.seeking,r.duration_=t.duration,r.mediaSource_=t.mediaSource,r.vhs_=t.vhs,r.loaderType_=t.loaderType,r.currentMediaInfo_=void 0,r.startingMediaInfo_=void 0,r.segmentMetadataTrack_=t.segmentMetadataTrack,r.goalBufferLength_=t.goalBufferLength,r.sourceType_=t.sourceType,r.sourceUpdater_=t.sourceUpdater,r.inbandTextTracks_=t.inbandTextTracks,r.state_="INIT",r.handlePartialData_=t.handlePartialData,r.timelineChangeController_=t.timelineChangeController,r.shouldSaveSegmentTimingInfo_=!0,r.checkBufferTimeout_=null,r.error_=void 0,r.currentTimeline_=-1,r.pendingSegment_=null,r.xhrOptions_=null,r.pendingSegments_=[],r.audioDisabled_=!1,r.isPendingTimestampOffset_=!1,r.gopBuffer_=[],r.timeMapping_=0,r.safeAppend_=n.browser.IE_VERSION>=11,r.appendInitSegment_={audio:!0,video:!0},r.playlistOfLastInitSegment_={audio:null,video:null},r.callQueue_=[],r.loadQueue_=[],r.metadataQueue_={id3:[],caption:[]},r.activeInitSegmentId_=null,r.initSegments_={},r.cacheEncryptionKeys_=t.cacheEncryptionKeys,r.keyCache_={},r.decrypter_=t.decrypter,r.syncController_=t.syncController,r.syncPoint_={segmentIndex:0,time:0},r.transmuxer_=r.createTransmuxer_(),r.triggerSyncInfoUpdate_=function(){return r.trigger("syncinfoupdate")},r.syncController_.on("syncinfoupdate",r.triggerSyncInfoUpdate_),r.mediaSource_.addEventListener("sourceopen",function(){r.isEndOfStream_()||(r.ended_=!1)}),r.fetchAtBuffer_=!1,r.logger_=_i("SegmentLoader["+r.loaderType_+"]"),Object.defineProperty(a(r),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),r.sourceUpdater_.on("ready",function(){r.hasEnoughInfoToAppend_()&&r.processCallQueue_()}),"main"===r.loaderType_&&r.timelineChangeController_.on("pendingtimelinechange",function(){r.hasEnoughInfoToAppend_()&&r.processCallQueue_()}),"audio"===r.loaderType_&&r.timelineChangeController_.on("timelinechange",function(){r.hasEnoughInfoToLoad_()&&r.processLoadQueue_(),r.hasEnoughInfoToAppend_()&&r.processCallQueue_()}),r}s(t,e);var r=t.prototype;return r.createTransmuxer_=function(){var e=new ai;return e.postMessage({action:"init",options:{remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,handlePartialData:this.handlePartialData_}}),e},r.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0},r.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&(this.transmuxer_.terminate(),Xe=null,ct.length=0),this.resetStats_(),this.checkBufferTimeout_&&i.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},r.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},r.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},r.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_)},r.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},r.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},r.endOfStream=function(){this.ended_=!0,this.transmuxer_&&gt(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},r.buffered_=function(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return n.createTimeRanges();if("main"===this.loaderType_){var e=this.startingMediaInfo_,t=e.hasAudio,i=e.hasVideo,r=e.isMuxed;if(i&&t&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},r.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=ue(e),n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e},r.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=de(e),n=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[i]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(n||e).resolvedUri};return n&&(r.bytes=n.bytes),r},r.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},r.load=function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.playlist=function(e,t){if(void 0===t&&(t={}),e){var i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri)return(null!==this.mediaIndex||this.handlePartialData_)&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var a=e.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex&&(this.mediaIndex-=a),n&&(n.mediaIndex-=a,n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}},r.pause=function(){this.checkBufferTimeout_&&(i.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},r.paused=function(){return null===this.checkBufferTimeout_},r.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},r.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},r.resyncLoader=function(){this.transmuxer_&&gt(this.transmuxer_),this.mediaIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},r.remove=function(e,t,i){if(void 0===i&&(i=function(){}),t===1/0&&(t=this.duration_()),this.sourceUpdater_&&this.currentMediaInfo_){var n=1,r=function(){0==--n&&i()};for(var a in this.audioDisabled_||(n++,this.sourceUpdater_.removeAudio(e,t,r)),"main"===this.loaderType_&&this.currentMediaInfo_&&this.currentMediaInfo_.hasVideo&&(this.gopBuffer_=function(e,t,i,n){for(var r=Math.ceil(9e4*(t-n)),a=Math.ceil(9e4*(i-n)),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var l=o+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),s.splice(l,o-l+1),s}(this.gopBuffer_,e,t,this.timeMapping_),n++,this.sourceUpdater_.removeVideo(e,t,r)),this.inbandTextTracks_)Ci(e,t,this.inbandTextTracks_[a]);Ci(e,t,this.segmentMetadataTrack_),r()}},r.monitorBuffer_=function(){this.checkBufferTimeout_&&i.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=i.setTimeout(this.monitorBufferTick_.bind(this),1)},r.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&i.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=i.setTimeout(this.monitorBufferTick_.bind(this),500)},r.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.buffered_(),t=this.checkBuffer_(e,this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);t&&(t.timestampOffset=Di({segmentTimeline:t.timeline,currentTimeline:this.currentTimeline_,startOfSegment:t.startOfSegment,buffered:e,overrideCheck:this.isPendingTimestampOffset_}),this.isPendingTimestampOffset_=!1,"number"==typeof t.timestampOffset&&this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loadSegment_(t))}},r.isEndOfStream_=function(e,t){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),!t||!this.mediaSource_)return!1;var i=e+1===t.segments.length;return t.endList&&"open"===this.mediaSource_.readyState&&i},r.checkBuffer_=function(e,t,i,n,r,a){var s=0;e.length&&(s=e.end(e.length-1));var o=Math.max(0,s-r);if(!t.segments.length)return null;if(o>=this.goalBufferLength_())return null;if(!n&&o>=1)return null;var l,u=null,d=!1;if(null===a)u=this.getSyncSegmentCandidate_(t),d=!0;else if(null!==i){var c=t.segments[i];l=c&&c.end?c.end:s,u=i+1}else if(this.fetchAtBuffer_){var p=K.getMediaInfoForTime(t,s,a.segmentIndex,a.time);u=p.mediaIndex,l=p.startTime}else{var h=K.getMediaInfoForTime(t,r,a.segmentIndex,a.time);u=h.mediaIndex,l=h.startTime}var f=this.generateSegmentInfo_(t,u,l,d);return!f||this.mediaSource_&&this.playlist_&&f.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?void 0:(this.logger_("checkBuffer_ returning "+f.uri,{segmentInfo:f,playlist:t,currentMediaIndex:i,nextMediaIndex:u,startOfSegment:l,isSyncRequest:d}),f)},r.getSyncSegmentCandidate_=function(e){var t=this;if(-1===this.currentTimeline_)return 0;var i=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return i.length?i[Math.min(i.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)},r.generateSegmentInfo_=function(e,t,i,n){if(t<0||t>=e.segments.length)return null;var r,a,s=e.segments[t],o=this.sourceUpdater_.audioBuffered(),l=this.sourceUpdater_.videoBuffered();return o.length&&(r=o.end(o.length-1)-this.sourceUpdater_.audioTimestampOffset()),l.length&&(a=function(e,t,i){if(null==t||!e.length)return[];var n,r=Math.ceil(9e4*(t-i+3));for(n=0;n<e.length&&!(e[n].pts>r);n++);return e.slice(n)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),{requestId:"segment-loader-"+Math.random(),uri:s.resolvedUri,mediaIndex:t,isSyncRequest:n,startOfSegment:i,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:s.timeline,duration:s.duration,segment:s,byteLength:0,transmuxer:this.transmuxer_,audioAppendStart:r,gopsToAlignWith:a}},r.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,r=K.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),a=function(e,t,i){return void 0===i&&(i=1),((e.length?e.end(e.length-1):0)-t)/i}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(r<=a)){var s=function(e){var t=e.currentTime,i=e.bandwidth,n=e.duration,r=e.segmentDuration,a=e.timeUntilRebuffer,s=e.currentTimeline,o=e.syncController,l=e.master.playlists.filter(function(e){return!K.isIncompatible(e)}),u=l.filter(K.isEnabled);u.length||(u=l.filter(function(e){return!K.isDisabled(e)}));var d=u.filter(K.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var l=o.getSyncPoint(e,n,s,t)?1:2;return{playlist:e,rebufferingImpact:K.estimateSegmentRequestTime(r,i,e)*l-a}}),c=d.filter(function(e){return e.rebufferingImpact<=0});return ki(c,function(e,t){return Si(t.playlist,e.playlist)}),c.length?c[0]:(ki(d,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),d[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=r-a-s.rebufferingImpact,l=.5;a<=1/30&&(l=1),!s.playlist||s.playlist.uri===this.playlist_.uri||o<l||(this.bandwidth=s.playlist.attributes.BANDWIDTH*ut.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},r.handleAbort_=function(){this.mediaRequestsAborted+=1},r.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},r.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var i=Object.keys(e).sort(),n=Object.keys(t).sort();if(i.length!==n.length)return!1;for(var r=0;r<i.length;r++){var a=i[r];if(a!==n[r])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},r.handleTimingInfo_=function(e,t,i,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var r=this.pendingSegment_,a=Ii(t);r[a]=r[a]||{},r[a][i]=n,this.logger_("timinginfo: "+t+" - "+i+" - "+n),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},r.handleCaptions_=function(e,t){var n=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),a={};t.forEach(function(e){a[e.stream]=a[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=a[e.stream];t.startTime=Math.min(t.startTime,e.startTime+r),t.endTime=Math.max(t.endTime,e.endTime+r),t.captions.push(e)}),Object.keys(a).forEach(function(e){var t=a[e],s=t.startTime,o=t.endTime,l=t.captions,u=n.inbandTextTracks_;n.logger_("adding cues from "+s+" -> "+o+" for "+e),function(e,t,i){if(!e[i]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var n=t.textTracks().getTrackById(i);e[i]=n||t.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}}(u,n.vhs_.tech_,e),Ci(s,o,u[e]),function(e){var t=e.inbandTextTracks,n=e.captionArray,r=e.timestampOffset;if(n){var a=i.WebKitDataCue||i.VTTCue;n.forEach(function(e){var i=e.stream;t[i].addCue(new a(e.startTime+r,e.endTime+r,e.text))})}}({captionArray:l,inbandTextTracks:u,timestampOffset:r})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},r.handleId3_=function(e,t,r){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){var a=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,i){e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,r,this.vhs_.tech_),function(e){var t=e.inbandTextTracks,r=e.metadataArray,a=e.timestampOffset,s=e.videoDuration;if(r){var o=i.WebKitDataCue||i.VTTCue,l=t.metadataTrack_;if(l&&(r.forEach(function(e){var t=e.cueTime+a;!("number"!=typeof t||i.isNaN(t)||t<0)&&t<1/0&&e.frames.forEach(function(e){var i=new o(t,t,e.value||e.url||e.data||"");i.frame=e,i.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return n.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return n.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return n.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(i),l.addCue(i)})}),l.cues&&l.cues.length)){for(var u=l.cues,d=[],c=0;c<u.length;c++)u[c]&&d.push(u[c]);var p=d.reduce(function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e},{}),h=Object.keys(p).sort(function(e,t){return Number(e)-Number(t)});h.forEach(function(e,t){var i=p[e],n=Number(h[t+1])||s;i.forEach(function(e){e.endTime=n})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:a,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,r))},r.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},r.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(e){return e()})},r.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(e){return e()})},r.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.currentMediaInfo_&&Ai({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},r.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;var e=this.pendingSegment_;if(!e||!e.trackInfo)return!1;if(!this.handlePartialData_){var t=this.currentMediaInfo_,i=t.hasAudio,n=t.hasVideo,r=t.isMuxed;if(n&&!e.videoTimingInfo)return!1;if(i&&!this.audioDisabled_&&!r&&!e.audioTimingInfo)return!1}return!Ai({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})},r.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[Ii(t.type)].start;else{var n,r="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;r&&(n=this.handlePartialData_?t.videoFramePtsTime:i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:n,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},r.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},r.getInitSegmentAndUpdateState_=function(e){var t=e.type,i=e.initSegment,n=e.map,r=e.playlist;if(n){var a=ue(n);if(this.activeInitSegmentId_===a)return null;i=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=a}return i&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!!n,this.activeInitSegmentId_=null,i):null},r.appendToSourceBuffer_=function(e){var t=this,i=e.segmentInfo,n=e.type,r=e.initSegment,a=e.data,s=[a],o=a.byteLength;r&&(s.unshift(r),o+=r.byteLength);var l,u,d,c=(d=0,(l={bytes:o,segments:s}).bytes&&(u=new Uint8Array(l.bytes),l.segments.forEach(function(e){u.set(e,d),d+=e.byteLength})),u);this.sourceUpdater_.appendBuffer({segmentInfo:i,type:n,bytes:c},function(e){e&&(t.error(n+" append of "+c.length+"b failed for segment #"+i.mediaIndex+" in playlist "+i.playlist.id),t.trigger("appenderror"))})},r.handleVideoSegmentTimingInfo_=function(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment;i.videoTimingInfo||(i.videoTimingInfo={}),i.videoTimingInfo.transmuxerPrependedSeconds=t.prependedContentDuration||0,i.videoTimingInfo.transmuxedPresentationStart=t.start.presentation,i.videoTimingInfo.transmuxedPresentationEnd=t.end.presentation,i.videoTimingInfo.baseMediaDecodeTime=t.baseMediaDecodeTime}},r.appendData_=function(e,t){var i=t.type,n=t.data;if(n&&n.byteLength&&("audio"!==i||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:r,data:n})}},r.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push(function(){var i=t.buffered_();"number"==typeof e.timestampOffset&&(e.timestampOffset=Di({segmentTimeline:e.timeline,currentTimeline:t.currentTimeline_,startOfSegment:e.startOfSegment,buffered:i,overrideCheck:!0})),delete e.audioAppendStart;var n=t.sourceUpdater_.audioBuffered();n.length&&(e.audioAppendStart=n.end(n.length-1)-t.sourceUpdater_.audioTimestampOffset()),t.updateTransmuxerAndRequestSegment_(e)})},r.updateTransmuxerAndRequestSegment_=function(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var t=this.createSimplifiedSegmentObj_(e);e.abortRequests=Gt({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,handlePartialData:this.handlePartialData_,abortFn:this.handleAbort_.bind(this),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleVideoSegmentTimingInfo_.bind(this,e.requestId),captionsFn:this.handleCaptions_.bind(this),id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})},r.trimBackBuffer_=function(e){var t=function(e,t,i){var n=t-ut.BACK_BUFFER_LENGTH;e.length&&(n=Math.max(n,e.start(0)));var r=t-i;return Math.min(r,n)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},r.createSimplifiedSegmentObj_=function(e){var t=e.segment,i={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith},n=e.playlist.segments[e.mediaIndex];if(n&&n.end&&n.timeline===t.timeline&&(i.baseStartTime=n.end+e.timestampOffset),t.key){var r=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=r}return t.map&&(i.map=this.initSegmentForMap(t.map)),i},r.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},r.saveBandwidthRelatedStats_=function(e){this.bandwidth=e.bandwidth,this.roundTrip=e.roundTripTime,this.pendingSegment_.byteLength=e.bytesReceived},r.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},r.segmentRequestFinished_=function(e,t,i){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",-102===e.code)return;return this.pause(),-101===e.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}this.saveBandwidthRelatedStats_(t.stats);var n=this.pendingSegment_;n.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=function(e,t,i){if(!t.length)return e;if(i)return t.slice();for(var n=t[0].pts,r=0;r<e.length&&!(e[r].pts>=n);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING";var r=this.isEndOfStream_(n.mediaIndex,n.playlist),a=null!==this.mediaIndex,s=n.timeline!==this.currentTimeline_&&n.timeline>0;!n.isFmp4&&(r||a&&s)&&(o=this.transmuxer_,mt("endTimeline",o)),this.trigger("appending"),this.waitForAppendsToComplete_(n)}var o},r.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},r.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},r.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},r.trueSegmentStart_=function(e){var t=e.currentStart,i=e.playlist,n=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo,l=e.audioTimingInfo;if(void 0!==t)return t;if(!s)return l.start;var u=i.segments[n-1];return 0!==n&&u&&void 0!==u.start&&u.end===r+a?o.start:r},r.waitForAppendsToComplete_=function(e){if(!this.currentMediaInfo_)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var t=this.currentMediaInfo_,i=t.hasAudio,n=t.hasVideo,r=t.isMuxed,a="main"===this.loaderType_&&n,s=!this.audioDisabled_&&i&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,s&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),s&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},r.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},r.checkForIllegalMediaSwitch=function(e){var t=function(e,t,i){return"main"===e&&t&&i?i.hasAudio||i.hasVideo?t.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.currentMediaInfo_,e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},r.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=e.timingInfo.start,e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},r.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;t&&(e.timingInfo.end="number"==typeof t.end?t.end:t.start+e.duration)},r.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;if(this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_}),this.logger_(function(e){var t=e.segment,i=t.start,n=t.end,r=e.playlist,a=r.mediaSequence,s=r.id,o=r.segments,l=void 0===o?[]:o,u=e.mediaIndex,d=e.timeline;return["appending ["+u+"] of ["+a+", "+(a+l.length)+"] from playlist ["+s+"]","["+i+" => "+n+"] in timeline ["+d+"]"].join(" ")}(e)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest)this.trigger("syncinfoupdate");else{this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var t=e.segment;t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.isEndOfStream_(e.mediaIndex,e.playlist)&&this.endOfStream(),this.trigger("appended"),this.paused()||this.monitorBuffer_())}},r.recordThroughput_=function(e){var t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count},r.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,r=t.end;if(Ei(n)&&Ei(r)){Ci(n,r,this.segmentMetadataTrack_);var a=i.WebKitDataCue||i.VTTCue,s={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:r},o=new a(n,r,JSON.stringify(s));o.value=s,this.segmentMetadataTrack_.addCue(o)}}},t}(n.EventTarget);function Ni(){}var Li,Pi=function(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})},ji=["video","audio"],Ui=function(e,t){var i=t[e+"Buffer"];return i&&i.updating||t.queuePending[e]},Ri=function e(t,i){if(0!==i.queue.length){var n=0,r=i.queue[n];if("mediaSource"!==r.type){if("mediaSource"!==t&&i.started_&&"closed"!==i.mediaSource.readyState&&!Ui(t,i)){if(r.type!==t){if(null===(n=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if("mediaSource"===n.type)return null;if(n.type===e)return i}return null}(t,i.queue)))return;r=i.queue[n]}i.queue.splice(n,1),r.action(t,i),r.doneFn?i.queuePending[t]=r:e(t,i)}}else i.updating()||"closed"===i.mediaSource.readyState||(i.queue.shift(),r.action(i),r.doneFn&&r.doneFn(),e("audio",i),e("video",i))}},zi=function(e,t){var i=t[e+"Buffer"],n=Pi(e);i&&(i.removeEventListener("updateend",t["on"+n+"UpdateEnd_"]),i.removeEventListener("error",t["on"+n+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},Bi=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},Fi=function(e,t){return function(i,n){var r=n[i+"Buffer"];Bi(n.mediaSource,r)&&(n.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer"),r.appendBuffer(e))}},$i=function(e,t){return function(i,n){var r=n[i+"Buffer"];Bi(n.mediaSource,r)&&(n.logger_("Removing "+e+" to "+t+" from "+i+"Buffer"),r.remove(e,t))}},qi=function(e){return function(t,i){var n=i[t+"Buffer"];Bi(i.mediaSource,n)&&(i.logger_("Setting "+t+"timestampOffset to "+e),n.timestampOffset=e)}},Hi=function(e){return function(t,i){e()}},Wi=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(e){n.log.warn("Failed to call media source endOfStream",e)}}}},Vi=function(e,t){return function(i){var n=Pi(e),r=ci(t);i.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=i.mediaSource.addSourceBuffer(r);a.addEventListener("updateend",i["on"+n+"UpdateEnd_"]),a.addEventListener("error",i["on"+n+"Error_"]),i.codecs[e]=t,i[e+"Buffer"]=a}},Yi=function(e){return function(t){var i=t[e+"Buffer"];if(zi(e,t),Bi(t.mediaSource,i)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(i)}catch(t){n.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},Gi=function(e){return function(t,i){var n=i[t+"Buffer"],r=ci(e);Bi(i.mediaSource,n)&&i.codecs[t]!==e&&(i.logger_("changing "+t+"Buffer codec from "+i.codecs[t]+" to "+e),n.changeType(r),i.codecs[t]=e)}},Qi=function(e){var t=e.type,i=e.sourceUpdater,n=e.action,r=e.doneFn,a=e.name;i.queue.push({type:t,action:n,doneFn:r,name:a}),Ri(t,i)},Xi=function(e,t){return function(i){if(t.queuePending[e]){var n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[e+"Error_"])}Ri(e,t)}},Ki=function(e){function t(t){var i;return(i=e.call(this)||this).mediaSource=t,i.sourceopenListener_=function(){return Ri("mediaSource",a(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=_i("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=Xi("video",a(i)),i.onAudioUpdateEnd_=Xi("audio",a(i)),i.onVideoError_=function(e){i.videoError_=e},i.onAudioError_=function(e){i.audioError_=e},i.started_=!1,i}s(t,e);var r=t.prototype;return r.ready=function(){return this.started_},r.createSourceBuffers=function(e){this.ready()||(this.addOrChangeSourceBuffers(e),this.started_=!0,this.trigger("ready"))},r.addSourceBuffer=function(e,t){Qi({type:"mediaSource",sourceUpdater:this,action:Vi(e,t),name:"addSourceBuffer"})},r.abort=function(e){Qi({type:e,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var i=t[e+"Buffer"];if(Bi(t.mediaSource,i)){t.logger_("calling abort on "+e+"Buffer");try{i.abort()}catch(t){n.log.warn("Failed to abort on "+e+"Buffer",t)}}}},name:"abort"})},r.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?Qi({type:"mediaSource",sourceUpdater:this,action:Yi(e),name:"removeSourceBuffer"}):n.log.error("removeSourceBuffer is not supported!")},r.canRemoveSourceBuffer=function(){return!n.browser.IE_VERSION&&i.MediaSource&&i.MediaSource.prototype&&"function"==typeof i.MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return i.SourceBuffer&&i.SourceBuffer.prototype&&"function"==typeof i.SourceBuffer.prototype.changeType},r.canChangeType=function(){return this.constructor.canChangeType()},r.changeType=function(e,t){this.canChangeType()?Qi({type:e,sourceUpdater:this,action:Gi(t),name:"changeType"}):n.log.error("changeType is not supported!")},r.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(i){var n=e[i];if(!t.ready())return t.addSourceBuffer(i,n);t.canChangeType()&&t.changeType(i,n)})},r.appendBuffer=function(e,t){var i=this,n=e.segmentInfo,r=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");if(Qi({type:r,sourceUpdater:this,action:Fi(a,n||{mediaIndex:-1}),doneFn:t,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var s=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+s.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,s.forEach(function(e){i.appendBuffer.apply(i,e)})}},r.audioBuffered=function(){return Bi(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:n.createTimeRange()},r.videoBuffered=function(){return Bi(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:n.createTimeRange()},r.buffered=function(){var e=Bi(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Bi(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var i=null,r=null,a=0,s=[],o=[];if(!(e&&e.length&&t&&t.length))return n.createTimeRange();for(var l=e.length;l--;)s.push({time:e.start(l),type:"start"}),s.push({time:e.end(l),type:"end"});for(l=t.length;l--;)s.push({time:t.start(l),type:"start"}),s.push({time:t.end(l),type:"end"});for(s.sort(function(e,t){return e.time-t.time}),l=0;l<s.length;l++)"start"===s[l].type?2==++a&&(i=s[l].time):"end"===s[l].type&&1==--a&&(r=s[l].time),null!==i&&null!==r&&(o.push([i,r]),i=null,r=null);return n.createTimeRanges(o)}(this.audioBuffered(),this.videoBuffered())},r.setDuration=function(e,t){var i;void 0===t&&(t=Ni),Qi({type:"mediaSource",sourceUpdater:this,action:(i=e,function(e){e.logger_("Setting mediaSource duration to "+i);try{e.mediaSource.duration=i}catch(e){n.log.warn("Failed to set media source duration",e)}}),name:"duration",doneFn:t})},r.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=Ni),"string"!=typeof e&&(e=void 0),Qi({type:"mediaSource",sourceUpdater:this,action:Wi(e),name:"endOfStream",doneFn:t})},r.removeAudio=function(e,t,i){void 0===i&&(i=Ni),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Qi({type:"audio",sourceUpdater:this,action:$i(e,t),doneFn:i,name:"remove"}):i()},r.removeVideo=function(e,t,i){void 0===i&&(i=Ni),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Qi({type:"video",sourceUpdater:this,action:$i(e,t),doneFn:i,name:"remove"}):i()},r.updating=function(){return!(!Ui("audio",this)&&!Ui("video",this))},r.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Qi({type:"audio",sourceUpdater:this,action:qi(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},r.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Qi({type:"video",sourceUpdater:this,action:qi(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},r.audioQueueCallback=function(e){this.audioBuffer&&Qi({type:"audio",sourceUpdater:this,action:Hi(e),name:"callback"})},r.videoQueueCallback=function(e){this.videoBuffer&&Qi({type:"video",sourceUpdater:this,action:Hi(e),name:"callback"})},r.dispose=function(){var e=this;this.trigger("dispose"),ji.forEach(function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"](function(){return zi(t,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(n.EventTarget),Zi=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},Ji=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),en=function(e){function t(t,i){var n;return void 0===i&&(i={}),(n=e.call(this,t,i)||this).handlePartialData_=!1,n.mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.shouldSaveSegmentTimingInfo_=!1,n}s(t,e);var r=t.prototype;return r.createTransmuxer_=function(){return null},r.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return n.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return n.createTimeRanges([[t,i]])},r.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=ue(e),n=this.initSegments_[i];if(t&&!n&&e.bytes){var r=Ji.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(Ji,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return n||e},r.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},r.remove=function(e,t){Ci(e,t,this.subtitlesTrack_)},r.fillBuffer_=function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},r.skipEmptySegments_=function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e},r.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},r.segmentRequestFinished_=function(e,t,n){var r=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return-101===e.code&&this.handleTimeout_(),-102===e.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);this.saveBandwidthRelatedStats_(t.stats),this.state="APPENDING",this.trigger("appending");var a=this.pendingSegment_,s=a.segment;if(s.map&&(s.map.bytes=t.map.bytes),a.bytes=t.bytes,"function"!=typeof i.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var o,l=function(){r.subtitlesTrack_.tech_.off("vttjsloaded",o),r.stopForError({message:"Error loading vtt.js"})};return o=function(){r.subtitlesTrack_.tech_.off("vttjserror",l),r.segmentRequestFinished_(e,t,n)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",o),void this.subtitlesTrack_.tech_.one("vttjserror",l)}s.requested=!0;try{this.parseVTTCues_(a)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(a,this.syncController_.timelines[a.timeline],this.playlist_),a.cues.length?a.timingInfo={start:a.cues[0].startTime,end:a.cues[a.cues.length-1].endTime}:a.timingInfo={start:a.startOfSegment,end:a.startOfSegment+a.duration},a.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");a.byteLength=a.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,a.cues.forEach(function(e){r.subtitlesTrack_.addCue(r.featuresNativeTextTracks_?new i.VTTCue(e.startTime,e.endTime,e.text):e)}),function(e){var t=e.cues;if(t)for(var i=0;i<t.length;i++){for(var n=[],r=0,a=0;a<t.length;a++)t[i].startTime===t[a].startTime&&t[i].endTime===t[a].endTime&&t[i].text===t[a].text&&++r>1&&n.push(t[a]);n.length&&n.forEach(function(t){return e.removeCue(t)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},r.handleData_=function(){},r.updateTimingInfoEnd_=function(){},r.parseVTTCues_=function(e){var t,r=!1;"function"==typeof i.TextDecoder?t=new i.TextDecoder("utf8"):(t=i.WebVTT.StringDecoder(),r=!0);var a=new i.WebVTT.Parser(i,i.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},a.oncue=e.cues.push.bind(e.cues),a.ontimestampmap=function(t){e.timestampmap=t},a.onparsingerror=function(e){n.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var s=e.segment.map.bytes;r&&(s=Zi(s)),a.parse(s)}var o=e.bytes;r&&(o=Zi(o)),a.parse(o),a.flush()},r.updateTimeMapping_=function(e,t,i){var n=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/9e4-r.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=a,e.endTime+=a}),!i.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(s,o-n.duration)}}}else n.empty=!0},t}(Oi),tn=function(e,t){for(var i=e.cues,n=0;n<i.length;n++){var r=i[n];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},nn=[{name:"VOD",run:function(e,t,i,n,r){return i!==1/0?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(e,t,i,n,r){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.dateTimeObject){var d=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,c=Math.abs(r-d);if(null!==o&&(0===c||o<c))break;o=c,s={time:d,segmentIndex:l}}}return s}},{name:"Segment",run:function(e,t,i,n,r){var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.timeline===n&&void 0!==u.start){var d=Math.abs(r-u.start);if(null!==o&&o<d)break;(!s||null===o||o>=d)&&(o=d,s={time:u.start,segmentIndex:l})}}return s}},{name:"Discontinuity",run:function(e,t,i,n,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var l=t.discontinuityStarts[o],u=t.discontinuitySequence+o+1,d=e.discontinuities[u];if(d){var c=Math.abs(r-d.time);if(null!==s&&s<c)break;(!a||null===s||s>=c)&&(s=c,a={time:d.time,segmentIndex:l})}}return a}},{name:"Playlist",run:function(e,t,i,n,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],rn=function(e){function t(t){var i;return(i=e.call(this)||this).timelines=[],i.discontinuities=[],i.datetimeToDisplayTime=null,i.logger_=_i("SyncController"),i}s(t,e);var i=t.prototype;return i.getSyncPoint=function(e,t,i,n){var r=this.runStrategies_(e,t,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null},i.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+q(e,n.segmentIndex,0))},i.runStrategies_=function(e,t,i,n){for(var r=[],a=0;a<nn.length;a++){var s=nn[a],o=s.run(this,e,t,i,n);o&&(o.strategy=s.name,r.push({strategy:s.name,syncPoint:o}))}return r},i.selectSyncPoint_=function(e,t){for(var i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<n&&(n=s,i=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+"]"),i},i.saveExpiredSegmentInfo=function(e,t){for(var i=t.mediaSequence-e.mediaSequence-1;i>=0;i--){var n=e.segments[i];if(n&&void 0!==n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},i.setDateTimeMapping=function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}},i.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,i=e.shouldSaveTimelineMapping;this.calculateSegmentTimeMapping_(t,t.timingInfo,i)&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:t.segment.start}))},i.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},i.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},i.calculateSegmentTimeMapping_=function(e,t,i){var n=e.segment,r=this.timelines[e.timeline];if(null!==e.timestampOffset)r={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=r,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+r.time+"] [mapping: "+r.mapping+"]")),n.start=e.startOfSegment,n.end=t.end+r.mapping;else{if(!r)return!1;n.start=t.start+r.mapping,n.end=t.end+r.mapping}return!0},i.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var r,a=t.discontinuityStarts[n],s=t.discontinuitySequence+n+1,o=a-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>l)r=o<0?i.start-q(t,e.mediaIndex,a):i.end+q(t,e.mediaIndex+1,a),this.discontinuities[s]={time:r,accuracy:l}}},i.dispose=function(){this.trigger("dispose"),this.off()},t}(n.EventTarget),an=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}s(t,e);var i=t.prototype;return i.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(e){var t=e.type,i=e.from,n=e.to;return"number"==typeof i&&"number"==typeof n&&(this.pendingTimelineChanges_[t]={type:t,from:i,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},i.lastTimelineChange=function(e){var t=e.type,i=e.from,n=e.to;return"number"==typeof i&&"number"==typeof n&&(this.lastTimelineChanges_[t]={type:t,from:i,to:n},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(n.EventTarget),sn=new ei("./decrypter-worker.worker.js",function(e,t){var i=this;!function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(i,1),i>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),n=null,r=function(){function e(e){var t,i,r;n||(n=function(){var e,t,i,n,r,a,s,o,l=[[[],[],[],[],[]],[[],[],[],[],[]]],u=l[0],d=l[1],c=u[4],p=d[4],h=[],f=[];for(e=0;e<256;e++)f[(h[e]=e<<1^283*(e>>7))^e]=e;for(t=i=0;!c[t];t^=n||1,i=f[i]||1)for(a=(a=i^i<<1^i<<2^i<<3^i<<4)>>8^255&a^99,c[t]=a,p[a]=t,o=16843009*h[r=h[n=h[t]]]^65537*r^257*n^16843008*t,s=257*h[a]^16843008*a,e=0;e<4;e++)u[e][t]=s=s<<24^s>>>8,d[e][a]=o=o<<24^o>>>8;for(e=0;e<5;e++)u[e]=u[e].slice(0),d[e]=d[e].slice(0);return l}()),this._tables=[[n[0][0].slice(),n[0][1].slice(),n[0][2].slice(),n[0][3].slice(),n[0][4].slice()],[n[1][0].slice(),n[1][1].slice(),n[1][2].slice(),n[1][3].slice(),n[1][4].slice()]];var a=this._tables[0][4],s=this._tables[1],o=e.length,l=1;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size");var u=e.slice(0),d=[];for(this._key=[u,d],t=o;t<4*o+28;t++)r=u[t-1],(t%o==0||8===o&&t%o==4)&&(r=a[r>>>24]<<24^a[r>>16&255]<<16^a[r>>8&255]<<8^a[255&r],t%o==0&&(r=r<<8^r>>>24^l<<24,l=l<<1^283*(l>>7))),u[t]=u[t-o]^r;for(i=0;t;i++,t--)r=u[3&i?t:t-4],d[i]=t<=4||i<4?r:s[0][a[r>>>24]]^s[1][a[r>>16&255]]^s[2][a[r>>8&255]]^s[3][a[255&r]]}return e.prototype.decrypt=function(e,t,i,n,r,a){var s,o,l,u,d=this._key[1],c=e^d[0],p=n^d[1],h=i^d[2],f=t^d[3],m=d.length/4-2,g=4,v=this._tables[1],y=v[0],_=v[1],b=v[2],T=v[3],w=v[4];for(u=0;u<m;u++)s=y[c>>>24]^_[p>>16&255]^b[h>>8&255]^T[255&f]^d[g],o=y[p>>>24]^_[h>>16&255]^b[f>>8&255]^T[255&c]^d[g+1],l=y[h>>>24]^_[f>>16&255]^b[c>>8&255]^T[255&p]^d[g+2],f=y[f>>>24]^_[c>>16&255]^b[p>>8&255]^T[255&h]^d[g+3],g+=4,c=s,p=o,h=l;for(u=0;u<4;u++)r[(3&-u)+a]=w[c>>>24]<<24^w[p>>16&255]<<16^w[h>>8&255]<<8^w[255&f]^d[g++],s=c,c=p,p=h,h=f,f=s},e}(),a=function(e){function i(){var i;return(i=e.call(this,t)||this).jobs=[],i.delay=1,i.timeout_=null,i}var n,r;r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var a=i.prototype;return a.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},a.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},i}(t),s=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},o=function(){function t(e,i,n,r){var o=t.STEP,l=new Int32Array(e.buffer),u=new Uint8Array(e.byteLength),d=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(l.subarray(d,d+o),i,n,u)),d=o;d<l.length;d+=o)n=new Uint32Array([s(l[d-4]),s(l[d-3]),s(l[d-2]),s(l[d-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(d,d+o),i,n,u));this.asyncStream_.push(function(){var e;r(null,(e=u).subarray(0,e.byteLength-e[e.byteLength-1]))})}return t.prototype.decryptChunk_=function(e,t,i,n){return function(){var a=function(e,t,i){var n,a,o,l,u,d,c,p,h,f=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),m=new r(Array.prototype.slice.call(t)),g=new Uint8Array(e.byteLength),v=new Int32Array(g.buffer);for(n=i[0],a=i[1],o=i[2],l=i[3],h=0;h<f.length;h+=4)u=s(f[h]),d=s(f[h+1]),c=s(f[h+2]),p=s(f[h+3]),m.decrypt(u,d,c,p,v,h),v[h]=s(v[h]^n),v[h+1]=s(v[h+1]^a),v[h+2]=s(v[h+2]^o),v[h+3]=s(v[h+3]^l),n=u,a=d,o=c,l=p;return g}(e,t,i);n.set(a,e.byteOffset)}},i=t,n=[{key:"STEP",get:function(){return 32e3}}],null&&e(i.prototype,null),n&&e(i,n),t;var i,n}();new function(e){e.onmessage=function(t){var i=t.data,n=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),r=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4),a=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new o(n,r,a,function(t,n){var r,a;e.postMessage((r={source:i.source,decrypted:n},a={},Object.keys(r).forEach(function(e){var t=r[e];ArrayBuffer.isView(t)?a[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:a[e]=t}),a),[n.buffer])})}}(i)}()}),on=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},ln=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},un=function(e,t){t.activePlaylistLoader=e,e.load()},dn={AUDIO:function(e,t){return function(){var i=t.segmentLoaders[e],r=t.mediaTypes[e],a=t.blacklistCurrentPlaylist;ln(i,r);var s=r.activeTrack(),o=r.activeGroup(),l=(o.filter(function(e){return e.default})[0]||o[0]).id,u=r.tracks[l];if(s!==u){for(var d in n.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),r.tracks)r.tracks[d].enabled=r.tracks[d]===u;r.onTrackChanged()}else a({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var i=t.segmentLoaders[e],r=t.mediaTypes[e];n.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),ln(i,r);var a=r.activeTrack();a&&(a.mode="disabled"),r.onTrackChanged()}}},cn={AUDIO:function(e,t,i){if(t){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),n.paused()||a.load()}),t.on("error",dn[e](e,i))}},SUBTITLES:function(e,t,i){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],s=i.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),n.paused()||a.load()}),t.on("error",dn[e](e,i))}},pn={AUDIO:function(e,t){var i=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master,l=o.mediaGroups,u=o.playlists,d=t.mediaTypes[e],c=d.groups,p=d.tracks,h=t.masterPlaylistLoader;l[e]&&0!==Object.keys(l[e]).length||(l[e]={main:{default:{default:!0}}});var f=function(a){c[a]||(c[a]=[]);var o=u.filter(function(t){return t.attributes[e]===a}),d=function(u){var d,f=l[e][a][u];if(!o.filter(function(e){return e.resolvedUri!==f.resolvedUri}).length&&o.length&&delete f.resolvedUri,d="vhs-json"===r&&f.playlists?new L(f.playlists[0],i,s):f.resolvedUri?new L(f.resolvedUri,i,s):f.playlists&&"dash"===r?new lt(f.playlists[0],i,s,h):null,f=n.mergeOptions({id:u,playlistLoader:d},f),cn[e](e,f.playlistLoader,t),c[a].push(f),void 0===p[u]){var m=new n.AudioTrack({id:u,kind:on(f),enabled:!1,language:f.language,default:f.default,label:u});p[u]=m}};for(var f in l[e][a])d(f)};for(var m in l[e])f(m);a.on("error",dn[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,r=t.vhs,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,l=t.master.mediaGroups,u=t.mediaTypes[e],d=u.groups,c=u.tracks,p=t.masterPlaylistLoader;for(var h in l[e])for(var f in d[h]||(d[h]=[]),l[e][h])if(!l[e][h][f].forced){var m=l[e][h][f],g=void 0;if("hls"===a?g=new L(m.resolvedUri,r,o):"dash"===a?g=new lt(m.playlists[0],r,o,p):"vhs-json"===a&&(g=new L(m.playlists?m.playlists[0]:m.resolvedUri,r,o)),m=n.mergeOptions({id:f,playlistLoader:g},m),cn[e](e,m.playlistLoader,t),d[h].push(m),void 0===c[f]){var v=i.addRemoteTextTrack({id:f,kind:"subtitles",default:m.default&&m.autoselect,language:m.language,label:f},!1).track;c[f]=v}}s.on("error",dn[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,r=t.master.mediaGroups,a=t.mediaTypes[e],s=a.groups,o=a.tracks;for(var l in r[e])for(var u in s[l]||(s[l]=[]),r[e][l]){var d=r[e][l][u];if(d.instreamId.match(/CC\d/)&&(s[l].push(n.mergeOptions({id:u},d)),void 0===o[u])){var c=i.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default&&d.autoselect,language:d.language,label:u},!1).track;o[u]=c}}}},hn={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if(i[n].enabled)return i[n];return null}},SUBTITLES:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if("showing"===i[n].mode||"hidden"===i[n].mode)return i[n];return null}}},fn=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],mn=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},gn=function(e){function t(t){var r;r=e.call(this)||this;var s=t.src,o=t.handleManifestRedirects,l=t.withCredentials,u=t.tech,d=t.bandwidth,c=t.externVhs,p=t.useCueTags,h=t.blacklistDuration,f=t.enableLowInitialPlaylist,m=t.sourceType,g=t.cacheEncryptionKeys,v=t.handlePartialData,y=t.experimentalBufferBasedABR;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");Li=c,r.experimentalBufferBasedABR=Boolean(y),r.withCredentials=l,r.tech_=u,r.vhs_=u.vhs,r.sourceType_=m,r.useCueTags_=p,r.blacklistDuration=h,r.enableLowInitialPlaylist=f,r.useCueTags_&&(r.cueTagsTrack_=r.tech_.addTextTrack("metadata","ad-cues"),r.cueTagsTrack_.inBandMetadataTrackDispatchType=""),r.requestOptions_={withCredentials:l,handleManifestRedirects:o,timeout:null},r.on("error",r.pauseLoading),r.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ni,activeTrack:Ni,onGroupChanged:Ni,onTrackChanged:Ni}}),e}(),r.mediaSource=new i.MediaSource,r.handleDurationChange_=r.handleDurationChange_.bind(a(r)),r.handleSourceOpen_=r.handleSourceOpen_.bind(a(r)),r.handleSourceEnded_=r.handleSourceEnded_.bind(a(r)),r.mediaSource.addEventListener("durationchange",r.handleDurationChange_),r.mediaSource.addEventListener("sourceopen",r.handleSourceOpen_),r.mediaSource.addEventListener("sourceended",r.handleSourceEnded_),r.seekable_=n.createTimeRanges(),r.hasPlayed_=!1,r.syncController_=new rn(t),r.segmentMetadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,r.decrypter_=new sn,r.sourceUpdater_=new Ki(r.mediaSource),r.inbandTextTracks_={},r.timelineChangeController_=new an;var _={vhs:r.vhs_,mediaSource:r.mediaSource,currentTime:r.tech_.currentTime.bind(r.tech_),seekable:function(){return r.seekable()},seeking:function(){return r.tech_.seeking()},duration:function(){return r.duration()},hasPlayed:function(){return r.hasPlayed_},goalBufferLength:function(){return r.goalBufferLength()},bandwidth:d,syncController:r.syncController_,decrypter:r.decrypter_,sourceType:r.sourceType_,inbandTextTracks:r.inbandTextTracks_,cacheEncryptionKeys:g,handlePartialData:v,sourceUpdater:r.sourceUpdater_,timelineChangeController:r.timelineChangeController_};return r.masterPlaylistLoader_="dash"===r.sourceType_?new lt(s,r.vhs_,r.requestOptions_):new L(s,r.vhs_,r.requestOptions_),r.setupMasterPlaylistLoaderListeners_(),r.mainSegmentLoader_=new Oi(n.mergeOptions(_,{segmentMetadataTrack:r.segmentMetadataTrack_,loaderType:"main"}),t),r.audioSegmentLoader_=new Oi(n.mergeOptions(_,{loaderType:"audio"}),t),r.subtitleSegmentLoader_=new en(n.mergeOptions(_,{loaderType:"vtt",featuresNativeTextTracks:r.tech_.featuresNativeTextTracks}),t),r.setupSegmentLoaderListeners_(),r.experimentalBufferBasedABR&&(r.startABRTimer_(),r.tech_.on("pause",function(){return r.stopABRTimer_()}),r.tech_.on("play",function(){return r.startABRTimer_()})),fn.forEach(function(e){r[e+"_"]=mn.bind(a(r),e)}),r.logger_=_i("MPC"),r.triggeredFmp4Usage=!1,r.masterPlaylistLoader_.load(),r}s(t,e);var r=t.prototype;return r.checkABR_=function(){var e=this.selectPlaylist();this.shouldSwitchToMedia_(e)&&this.masterPlaylistLoader_.media(e)},r.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=i.setInterval(function(){return e.checkABR_()},250)},r.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(i.clearInterval(this.abrTimer_),this.abrTimer_=null)},r.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;X(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){pn[t](t,e)});var t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,r=e.vhs;["AUDIO","SUBTITLES"].forEach(function(i){t[i].activeGroup=function(e,t){return function(i){var n=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,a=n.media();if(!a)return null;var s=null;return a.attributes[e]&&(s=r[a.attributes[e]]),s=s||r.main,void 0===i?s:null===i?null:s.filter(function(e){return e.id===i.id})[0]||null}}(i,e),t[i].activeTrack=hn[i](i,e),t[i].onGroupChanged=function(e,t){return function(){var i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),l=a.activePlaylistLoader;ln(n,a),o&&(o.playlistLoader?(n.resyncLoader(),un(o.playlistLoader,a)):l&&r.resetEverything())}}(i,e),t[i].onGroupChanging=function(e,t){return function(){var i=t.segmentLoaders[e];i.abort(),i.pause()}}(i,e),t[i].onTrackChanged=function(e,t){return function(){var i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),l=a.activePlaylistLoader;if(ln(n,a),o){if("AUDIO"===e){if(!o.playlistLoader)return r.setAudio(!0),void r.resetEverything();n.setAudio(!0),r.setAudio(!1)}l!==o.playlistLoader?(n.track&&n.track(s),n.resetEverything(),un(o.playlistLoader,a)):un(o.playlistLoader,a)}}}(i,e)});var a=t.AUDIO.activeGroup();if(a){var s=(a.filter(function(e){return e.default})[0]||a[0]).id;t.AUDIO.tracks[s].enabled=!0,t.AUDIO.onTrackChanged()}i.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return t[e].onGroupChanged()})}),i.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(e){return t[e].onGroupChanging()})});var o=function(){t.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"}),n.trigger({type:"usage",name:"hls-audio-change"})};for(var l in n.audioTracks().addEventListener("change",o),n.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",function(){n.audioTracks().removeEventListener("change",o),n.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),n.clearTracks("audio"),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[l])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=e.masterPlaylistLoader_.media();if(!t){var i;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),!i||!e.shouldSwitchToMedia_(i))return;if(e.initialMedia_=i,e.masterPlaylistLoader_.media(e.initialMedia_),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;X(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},r.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},r.triggerPresenceUsage_=function(e,t){var i=e.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(var a in i.AUDIO)for(var s in i.AUDIO[a])i.AUDIO[a][s].uri||(n=!1);n&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(i.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Li.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},r.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media(),i=this.tech_.buffered();return function(e){var t=e.currentPlaylist,i=e.nextPlaylist,r=e.forwardBuffer,a=e.bufferLowWaterLine,s=e.bufferHighWaterLine,o=e.duration,l=e.experimentalBufferBasedABR,u=e.log;if(!i)return n.log.warn("We received no playlist to switch to. Please check your stream."),!1;var d="allowing switch "+(t&&t.id||"null")+" -> "+i.id;if(!t||!t.endList)return u(d+" as current playlist "+(t?"is live":"is not set")),!0;if(i.id===t.id)return!1;var c=l?ut.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:ut.MAX_BUFFER_LOW_WATER_LINE;if(o<c)return u(d+" as duration < max low water line ("+o+" < "+c+")"),!0;var p=i.attributes.BANDWIDTH,h=t.attributes.BANDWIDTH;if(p<h&&(!l||r<s)){var f=d+" as next bandwidth < current bandwidth ("+p+" < "+h+")";return l&&(f+=" and forwardBuffer < bufferHighWaterLine ("+r+" < "+s+")"),u(f),!0}if((!l||p>h)&&r>=a){var m=d+" as forwardBuffer >= bufferLowWaterLine ("+r+" >= "+a+")";return l&&(m+=" and next bandwidth > current bandwidth ("+p+" > "+h+")"),u(m),!0}return u("not "+d+" as no switching criteria met"),!1}({currentPlaylist:t,nextPlaylist:e,forwardBuffer:i.length?i.end(i.length-1)-this.tech_.currentTime():0,bufferLowWaterLine:this.bufferLowWaterLine(),bufferHighWaterLine:this.bufferHighWaterLine(),duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},r.setupSegmentLoaderListeners_=function(){var e=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){e.logger_("main segment loader ended"),e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(t){e.experimentalBufferBasedABR||e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)});var t=function(){if(!e.sourceUpdater_.ready())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()})},r.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},r.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},r.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())},r.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetEverything(function(){n.browser.IE_VERSION||n.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))},r.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},r.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(n.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(i.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0},r.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")},r.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},r.handleDurationChange_=function(){this.tech_.trigger("durationchange")},r.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},r.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var i=Li.Playlist.playlistEnd(e,t),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=.1;var a=r.end(r.length-1);return a-n<=.1&&i-a<=.1},r.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var i=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!i)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));var r=this.masterPlaylistLoader_.master.playlists,a=r.filter(G),s=1===a.length&&a[0]===i;if(1===r.length&&t!==1/0)return n.log.warn("Problem encountered with playlist "+i.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s);if(s){var o=!1;r.forEach(function(e){if(e!==i){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(o=!0,delete e.excludeUntil)}}),o&&(n.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}i.excludeUntil=Date.now()+1e3*t,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var l=this.selectPlaylist();if(!l)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var u=e.internal?this.logger_:n.log.warn,d=e.message?" "+e.message:"";return u((e.internal?"Internal problem":"Problem")+" encountered with playlist "+i.id+"."+d+" Switching to playlist "+l.id+"."),l.attributes.AUDIO!==i.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==i.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),this.masterPlaylistLoader_.media(l,s)},r.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},r.delegateLoaders_=function(e,t){var i=this,n=[],r="all"===e;(r||"main"===e)&&n.push(this.masterPlaylistLoader_);var a=[];(r||"audio"===e)&&a.push("AUDIO"),(r||"subtitle"===e)&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach(function(e){var t=i.mediaTypes_[e]&&i.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)}),["main","audio","subtitle"].forEach(function(t){var r=i[t+"SegmentLoader_"];!r||e!==t&&"all"!==e||n.push(r)}),n.forEach(function(e){return t.forEach(function(t){"function"==typeof e[t]&&e[t]()})})},r.setCurrentTime=function(e){var t=j(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},r.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Li.Playlist.duration(e):1/0:0},r.seekable=function(){return this.seekable_},r.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var i=this.syncController_.getExpiredTime(t,this.duration());if(null!==i){var r=this.masterPlaylistLoader_.master.suggestedPresentationDelay,a=Li.Playlist.seekable(t,i,r);if(0!==a.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=Li.Playlist.seekable(t,i,r)).length)return}var s,o;this.seekable_&&this.seekable_.length&&(s=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>a.end(0)||a.start(0)>e.end(0)?this.seekable_=a:this.seekable_=n.createTimeRanges([[e.start(0)>a.start(0)?e.start(0):a.start(0),e.end(0)<a.end(0)?e.end(0):a.end(0)]]):this.seekable_=a,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===s&&this.seekable_.start(0)===o||(this.logger_("seekable updated ["+R(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},r.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var i=this.tech_.buffered(),n=Li.Playlist.duration(this.masterPlaylistLoader_.media());i.length>0&&(n=Math.max(n,i.end(i.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}},r.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(t){var i=e.mediaTypes_[t].groups;for(var n in i)i[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},r.master=function(){return this.masterPlaylistLoader_.master},r.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},r.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!(!this.mainSegmentLoader_.currentMediaInfo_||e&&!this.audioSegmentLoader_.currentMediaInfo_)},r.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};t.video=t.main;var i=yi(this.master(),this.media()),n={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(n.video=i.video||t.main.videoCodec||li),t.main.isMuxed&&(n.video+=","+(i.audio||t.main.audioCodec||oi)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||r)&&(n.audio=i.audio||t.main.audioCodec||t.audio.audioCodec||oi,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),n.audio||n.video){var a,s={};if(["video","audio"].forEach(function(e){if(n.hasOwnProperty(e)&&(r=t[e].isFmp4,o=n[e],!(r?ui(o):fi(o)))){var i=t[e].isFmp4?"browser":"muxer";s[i]=s[i]||[],s[i].push(n[e]),"audio"===e&&(a=i)}var r,o}),r&&a&&this.media().attributes.AUDIO){var o=this.media().attributes.AUDIO;this.master().playlists.forEach(function(t){(t.attributes&&t.attributes.AUDIO)===o&&t!==e.media()&&(t.excludeUntil=1/0)}),this.logger_("excluding audio group "+o+" as "+a+' does not support codec(s): "'+n.audio+'"')}if(!Object.keys(s).length){if(this.sourceUpdater_.ready()&&!this.sourceUpdater_.canChangeType()){var l=[];if(["video","audio"].forEach(function(t){var i=(mi(e.sourceUpdater_.codecs[t]||"")[t]||{}).type,r=(mi(n[t]||"")[t]||{}).type;i&&r&&i.toLowerCase()!==r.toLowerCase()&&l.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+n[t]+'"')}),l.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+l.join(", ")+".",blacklistDuration:1/0,internal:!0})}return n}var u=Object.keys(s).reduce(function(e,t){return e&&(e+=", "),e+(t+' does not support codec(s): "')+s[t].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:u,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},r.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.ready()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},r.excludeUnsupportedVariants_=function(){var e=this;this.master().playlists.forEach(function(t){var i=yi(e.master,t);!i.audio||fi(i.audio)||ui(i.audio)||(t.excludeUntil=1/0),!i.video||fi(i.video)||ui(i.video)||(t.excludeUntil=1/0)})},r.excludeIncompatibleVariants_=function(e){var t=this,i=mi(e),n=Object.keys(i).length;this.master().playlists.forEach(function(e){if(e.excludeUntil!==1/0){var r={},a=2,s=[],o=yi(t.masterPlaylistLoader_.master,e);if(o.audio||o.video){var l=[o.video,o.audio].filter(Boolean).join(",");r=mi(l),a=Object.keys(r).length}a!==n&&(s.push('codec count "'+a+'" !== "'+n+'"'),e.excludeUntil=1/0),t.sourceUpdater_.canChangeType()||(r.video&&i.video&&r.video.type.toLowerCase()!==i.video.type.toLowerCase()&&(s.push('video codec "'+r.video.type+'" !== "'+i.video.type+'"'),e.excludeUntil=1/0),r.audio&&i.audio&&r.audio.type.toLowerCase()!==i.audio.type.toLowerCase()&&(e.excludeUntil=1/0,s.push('audio codec "'+r.audio.type+'" !== "'+i.audio.type+'"'))),s.length&&t.logger_("blacklisting "+e.id+": "+s.join(" && "))}})},r.updateAdCues_=function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var r,a=n,s=0;s<e.segments.length;s++){var o=e.segments[s];if(r||(r=tn(t,a+o.duration/2)),r){if("cueIn"in o){r.endTime=a,r.adEndTime=a,a+=o.duration,r=null;continue}if(a<r.endTime){a+=o.duration;continue}r.endTime+=o.duration}else if("cueOut"in o&&((r=new i.VTTCue(a,a+o.duration,o.cueOut)).adStartTime=a,r.adEndTime=a+parseFloat(o.cueOut),t.addCue(r)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),u=l[0],d=l[1];(r=new i.VTTCue(a,a+o.duration,"")).adStartTime=a-u,r.adEndTime=r.adStartTime+d,t.addCue(r)}a+=o.duration}}(e,this.cueTagsTrack_,t)},r.goalBufferLength=function(){var e=this.tech_.currentTime(),t=ut.GOAL_BUFFER_LENGTH,i=ut.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,ut.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)},r.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=ut.BUFFER_LOW_WATER_LINE,i=ut.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,ut.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,ut.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.experimentalBufferBasedABR?r:n)},r.bufferHighWaterLine=function(){return ut.BUFFER_HIGH_WATER_LINE},t}(n.EventTarget),vn=function(e,t,i){var n,r,a,s=e.masterPlaylistController_,o=s[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(s);if(t.attributes.RESOLUTION){var l=t.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=t.attributes.BANDWIDTH,this.codecs=yi(s.master(),t),this.playlist=t,this.id=i,this.enabled=(n=e.playlists,r=t.id,a=o,function(e){var t=n.master.playlists[r],i=Y(t),s=G(t);return void 0===e?s:(e?delete t.disabled:t.disabled=!0,e===s||i||(a(),e?n.trigger("renditionenabled"):n.trigger("renditiondisabled")),e)})},yn=["seeking","seeked","pause","playing","error"],_n=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=_i("PlaybackWatcher"),this.logger_("initialize");var n=function(){return t.monitorCurrentTime_()},r=function(){return t.techWaiting_()},a=function(){return t.cancelTimer_()},s=function(){return t.fixesBadSeeks_()},o=this.masterPlaylistController_,l=["main","subtitle","audio"],u={};l.forEach(function(e){u[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},o[e+"SegmentLoader_"].on("appendsdone",u[e].updateend),o[e+"SegmentLoader_"].on("playlistupdate",u[e].reset),t.tech_.on(["seeked","seeking"],u[e].reset)}),this.tech_.on("seekablechanged",s),this.tech_.on("waiting",r),this.tech_.on(yn,a),this.tech_.on("canplay",n),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",s),t.tech_.off("waiting",r),t.tech_.off(yn,a),t.tech_.off("canplay",n),l.forEach(function(e){o[e+"SegmentLoader_"].off("appendsdone",u[e].updateend),o[e+"SegmentLoader_"].off("playlistupdate",u[e].reset),t.tech_.off(["seeked","seeking"],u[e].reset)}),t.checkCurrentTimeTimeout_&&i.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&i.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=i.setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,i=t[e+"SegmentLoader_"],n=i.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))return!0;return!1}(this[e+"Buffered_"],n);this[e+"Buffered_"]=n,r?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:i.playlist_&&i.playlist_.id,buffered:z(n)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),i=this.tech_.currentTime();if(this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),this.beforeSeekableWindow_(t,i)){var n=t.start(0);e=n+(n===t.end(0)?0:.1)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+R(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;var r=this.tech_.buffered();return!!function(e){var t=e.buffered,i=e.targetDuration,n=e.currentTime;return!(!t.length||t.end(0)-t.start(0)<2*i||n>t.start(0)||!(t.start(0)-n<i))}({buffered:r,targetDuration:this.media().targetDuration,currentTime:i})&&(e=r.start(0)+.1,this.logger_("Buffered region starts ("+r.start(0)+")  just beyond seek point ("+i+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),i=j(t,e);return i.length&&e+3<=i.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var a=U(r,t);if(a.length>0){var s=a.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+s+", seeking to "+a.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,t),!0}return!1},t.afterSeekableWindow_=function(e,t,i,n){if(void 0===n&&(n=!1),!e.length)return!1;var r=e.end(e.length-1)+.1;return!i.endList&&n&&(r=e.end(e.length-1)+3*i.targetDuration),t>r},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-.1)},t.videoUnderflow_=function(e){var t=e.videoBuffered,i=e.audioBuffered,n=e.currentTime;if(t){var r;if(t.length&&i.length){var a=j(t,n-3),s=j(t,n),o=j(i,n);o.length&&!s.length&&a.length&&(r={start:a.end(0),end:o.end(0)})}else U(t,n).length||(r=this.gapFromVideoUnderflow_(t,n));return!!r&&(this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),n=U(t,i);this.cancelTimer_(),0!==n.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+1/30),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var i=function(e){if(e.length<2)return n.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var r=e.end(i-1),a=e.start(i);t.push([r,a])}return n.createTimeRanges(t)}(e),r=0;r<i.length;r++){var a=i.start(r),s=i.end(r);if(t-a<4&&t-a>2)return{start:a,end:s}}return null},e}(),bn={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Tn=function(e){!function e(t,i){var r=0,a=0,s=n.mergeOptions(bn,i);t.ready(function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var o=function(){a&&t.currentTime(a)},l=function(e){null!=e&&(a=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",o),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},u=function(){return Date.now()-r<1e3*s.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):s.getSource&&"function"==typeof s.getSource?(r=Date.now(),s.getSource.call(t,l)):void n.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},d=function e(){t.off("loadedmetadata",o),t.off("error",u),t.off("dispose",e)};t.on("error",u),t.on("dispose",d),t.reloadSourceOnError=function(i){d(),e(t,i)}}(this,e)},wn={PlaylistLoader:L,Playlist:K,utils:pe,STANDARD_PLAYLIST_SELECTOR:Mi,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(K.isEnabled);return ki(t,function(e,t){return Si(e,t)}),t.filter(function(t){return!!yi(e.playlists.master,t).video})[0]||null},lastBandwidthSelector:Mi,movingAverageBandwidthSelector:function(e){var t=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var n=this.useDevicePixelRatio&&i.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth),t=e*this.systemBandwidth+(1-e)*t,xi(this.playlists.master,t,parseInt(wi(this.tech_.el(),"width"),10)*n,parseInt(wi(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions)}},comparePlaylistBandwidth:Si,comparePlaylistResolution:function(e,t){var n,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||i.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),n===(r=r||i.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r},xhr:te()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","BACK_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(e){Object.defineProperty(wn,e,{get:function(){return n.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),ut[e]},set:function(t){n.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?n.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):ut[e]=t}})});var kn=function(e,t){for(var i=t.media(),n=-1,r=0;r<e.length;r++)if(e[r].id===i.id){n=r;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})};wn.canPlaySource=function(){return n.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Sn=function(e,t,i){if(!e)return e;var r={video:t&&t.attributes&&t.attributes.CODECS,audio:i&&i.attributes&&i.attributes.CODECS};!r.audio&&r.video&&r.video.split(",").length>1&&r.video.split(",").forEach(function(e){e=e.trim(),pi(e)?r.audio=e:hi(e)&&(r.video=e)});var a=r.video?'video/mp4;codecs="'+r.video+'"':null,s=r.audio?'audio/mp4;codecs="'+r.audio+'"':null,o={};for(var l in e)o[l]={audioContentType:s,videoContentType:a},t.contentProtection&&t.contentProtection[l]&&t.contentProtection[l].pssh&&(o[l].pssh=t.contentProtection[l].pssh),"string"==typeof e[l]&&(o[l].url=e[l]);return n.mergeOptions(e,o)},xn=function(e,t){return e.reduce(function(e,i){if(!i.contentProtection)return e;var n=t.reduce(function(e,t){var n=i.contentProtection[t];return n&&n.pssh&&(e[t]={pssh:n.pssh}),e},{});return Object.keys(n).length&&e.push(n),e},[])},Mn=function(e){var t=e.player,i=e.sourceKeySystems,r=e.media,a=e.audioMedia,s=e.mainPlaylists,o=Sn(i,r,a);if(o)if(t.currentSource().keySystems=o,!o||t.eme){if(11!==n.browser.IE_VERSION&&t.eme.initializeMediaKeys){var l=a?s.concat([a]):s;xn(l,Object.keys(i)).forEach(function(e){t.eme.initializeMediaKeys({keySystems:e})})}}else n.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin")},Cn=function(){if(!i.localStorage)return null;var e=i.localStorage.getItem("videojs-vhs");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},En=function(e){return 0===e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e};wn.supportsNativeHls=function(){if(!t||!t.createElement)return!1;var e=t.createElement("video");return!!n.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),wn.supportsNativeDash=!!(t&&t.createElement&&n.getTech("Html5").isSupported())&&/maybe|probably/i.test(t.createElement("video").canPlayType("application/dash+xml")),wn.supportsTypeNatively=function(e){return"hls"===e?wn.supportsNativeHls:"dash"===e&&wn.supportsNativeDash},wn.isSupported=function(){return n.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var In=function(e){function r(i,r,s){var o;if(o=e.call(this,r,n.mergeOptions(s.hls,s.vhs))||this,s.hls&&Object.keys(s.hls).length&&n.log.warn("Using hls options is deprecated. Use vhs instead."),r.options_&&r.options_.playerId){var l=n(r.options_.playerId);l.hasOwnProperty("hls")||Object.defineProperty(l,"hls",{get:function(){return n.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),r.trigger({type:"usage",name:"hls-player-access"}),a(o)},configurable:!0}),l.hasOwnProperty("vhs")||Object.defineProperty(l,"vhs",{get:function(){return n.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),r.trigger({type:"usage",name:"vhs-player-access"}),a(o)},configurable:!0}),l.hasOwnProperty("dash")||Object.defineProperty(l,"dash",{get:function(){return n.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),a(o)},configurable:!0}),o.player_=l}if(o.tech_=r,o.source_=i,o.stats={},o.ignoreNextSeekingEvent_=!1,o.setOptions_(),o.options_.overrideNative&&r.overrideNativeAudioTracks&&r.overrideNativeVideoTracks)r.overrideNativeAudioTracks(!0),r.overrideNativeVideoTracks(!0);else if(o.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return o.on(t,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var i=t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement;i&&i.contains(o.tech_.el())&&o.masterPlaylistController_.smoothQualityChange_()}),o.on(o.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),o.on(o.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),o.on(o.tech_,"play",o.play),o}s(r,e);var o=r.prototype;return o.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.handlePartialData=this.options_.handlePartialData||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Cn();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=ut.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===ut.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","handlePartialData","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR"].forEach(function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},o.src=function(e,t){var r=this;if(e){this.setOptions_(),this.options_.src=En(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=wn,this.options_.sourceType=re(t),this.options_.seekTo=function(e){r.tech_.setCurrentTime(e)},this.masterPlaylistController_=new gn(this.options_),this.playbackWatcher_=new _n(n.mergeOptions(this.options_,{seekable:function(){return r.seekable()},media:function(){return r.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_})),this.masterPlaylistController_.on("error",function(){var e=n.players[r.tech_.options_.playerId],t=r.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)});var a=this.options_.experimentalBufferBasedABR?wn.movingAverageBandwidthSelector(.55):wn.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):a.bind(this),this.masterPlaylistController_.selectInitialPlaylist=wn.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){n.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return r.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return r.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return r.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return r.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return r.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return r.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return r.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return r.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return z(r.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return r.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return r.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return r.tech_.name_},enumerable:!0},duration:{get:function(){return r.tech_.duration()},enumerable:!0},master:{get:function(){return r.playlists.master},enumerable:!0},playerDimensions:{get:function(){return r.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return z(r.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return r.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){r.options_.useBandwidthFromLocalStorage&&function(e){if(!i.localStorage)return!1;var t=Cn();t=t?n.mergeOptions(t,e):e;try{i.localStorage.setItem("videojs-vhs",JSON.stringify(t))}catch(e){return!1}}({bandwidth:r.bandwidth,throughput:Math.round(r.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e,t;t=(e=r).playlists,e.representations=function(){return t&&t.master&&t.master.playlists?t.master.playlists.filter(function(e){return!Y(e)}).map(function(t,i){return new vn(e,t,t.id)}):[]}}),this.masterPlaylistController_.sourceUpdater_.on("ready",function(){var e=r.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;Mn({player:r.player_,sourceKeySystems:r.source_.keySystems,media:r.playlists.media(),audioMedia:e&&e.media(),mainPlaylists:r.playlists.master.playlists})}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=i.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},o.setupQualityLevels_=function(){var e=this,t=n.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,i;t=e.qualityLevels_,(i=e).representations().forEach(function(e){t.addQualityLevel(e)}),kn(t,i.playlists)}),this.playlists.on("mediachange",function(){kn(e.qualityLevels_,e.playlists)}))},r.version=function(){return{"@videojs/http-streaming":"2.3.1","mux.js":"5.6.7","mpd-parser":"0.14.0","m3u8-parser":"4.5.0","aes-decrypter":"3.1.0"}},o.version=function(){return this.constructor.version()},o.canChangeType=function(){return Ki.canChangeType()},o.play=function(){this.masterPlaylistController_.play()},o.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},o.duration=function(){return this.masterPlaylistController_.duration()},o.seekable=function(){return this.masterPlaylistController_.seekable()},o.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&i.URL.revokeObjectURL&&(i.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),e.prototype.dispose.call(this)},o.convertToProgramTime=function(e,t){return function(e){var t=e.playlist,i=e.time,n=void 0===i?void 0:i,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===n)return r({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var i,n=0,r=0;r<t.segments.length&&!(e<=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+.25*a.duration)return null;i=a}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(n,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:n},o=function(e,t){if(!t.dateTimeObject)return null;var i=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+i);return new Date(t.dateTimeObject.getTime()+1e3*n)}(n,a.segment);return o&&(s.programDateTime=o.toISOString()),r(null,s)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},o.seekToProgramTime=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=2),function e(t){var i=t.programTime,n=t.playlist,r=t.retryCount,a=void 0===r?2:r,s=t.seekTo,o=t.pauseAfterSeek,l=void 0===o||o,u=t.tech,d=t.callback;if(!d)throw new Error("seekToProgramTime: callback must be provided");if(void 0===i||!n||!s)return d({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!u.hasStarted_)return d({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(n))return d({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var c=function(e,t){var i;try{i=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var n=t.segments[0];if(i<n.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(n=t.segments[r],!(i<t.segments[r+1].dateTimeObject));r++);var a,s=t.segments[t.segments.length-1],o=s.dateTimeObject,l=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+.25*s.duration;return i>new Date(o.getTime()+1e3*l)?null:(i>o&&(n=s),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:K.duration(t,t.mediaSequence+t.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})}(i,n);if(!c)return d({message:i+" was not found in the stream"});var p=c.segment,h=function(e,t){var i,n;try{i=new Date(e),n=new Date(t)}catch(e){}var r=i.getTime();return(n.getTime()-r)/1e3}(p.dateTimeObject,i);if("estimate"===c.type)return 0===a?d({message:i+" is not buffered yet. Try again"}):(s(c.estimatedStart+h),void u.one("seeked",function(){e({programTime:i,playlist:n,retryCount:a-1,seekTo:s,pauseAfterSeek:l,tech:u,callback:d})}));var f=p.start+h;u.one("seeked",function(){return d(null,u.currentTime())}),l&&u.pause(),s(f)}({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},r}(n.getComponent("Component")),Dn={name:"videojs-http-streaming",VERSION:"2.3.1",canHandleSource:function(e,t){void 0===t&&(t={});var i=n.mergeOptions(n.options,t);return Dn.canPlayType(e.type,i)},handleSource:function(e,t,i){void 0===i&&(i={});var r=n.mergeOptions(n.options,i);return t.vhs=new In(e,t,r),n.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return n.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=te(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var i=n.mergeOptions(n.options,t).vhs.overrideNative,r=void 0===i?!n.browser.IS_ANY_SAFARI:i,a=re(e);return!a||wn.supportsTypeNatively(a)&&!r?"":"maybe"}};ui("avc1.4d400d,mp4a.40.2")&&n.getTech("Html5").registerSourceHandler(Dn,0),n.VhsHandler=In,Object.defineProperty(n,"HlsHandler",{get:function(){return n.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),In},configurable:!0}),n.VhsSourceHandler=Dn,Object.defineProperty(n,"HlsSourceHandler",{get:function(){return n.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Dn},configurable:!0}),n.Vhs=wn,Object.defineProperty(n,"Hls",{get:function(){return n.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),wn},configurable:!0}),n.use||(n.registerComponent("Hls",wn),n.registerComponent("Vhs",wn)),n.options.vhs=n.options.vhs||{},n.options.hls=n.options.hls||{},n.registerPlugin?n.registerPlugin("reloadSourceOnError",Tn):n.plugin("reloadSourceOnError",Tn),e.LOCAL_STORAGE_KEY="videojs-vhs",e.Vhs=wn,e.VhsHandler=In,e.VhsSourceHandler=Dn,e.emeKeySystems=Sn,e.expandDataUri=En,e.getAllPsshKeySystemsOptions=xn,e.setupEmeOptions=Mn,e.simpleTypeFromSourceType=re,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("global/document"),require("video.js"),require("global/window")):"function"==typeof define&&define.amd?define(["exports","global/document","video.js","global/window"],t):t(e.videojsContribEme={},e.document,e.videojs,e.window)}(this,function(e,t,i,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}t=t&&t.hasOwnProperty("default")?t.default:t,i=i&&i.hasOwnProperty("default")?i.default:i,n=n&&n.hasOwnProperty("default")?n.default:n;var a=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var i=new DataView(e),n=new DataView(t),r=0;r<i.byteLength;r++)if(i.getUint8(r)!==n.getUint8(r))return!1;return!0},s=function(e){return e instanceof Uint8Array||e instanceof Uint16Array?e.buffer:e},o=function(){var e=i.mergeOptions.apply(i,arguments);return Object.keys(e).forEach(function(t){null===e[t]&&delete e[t]}),e},l=function(e,t,r,a){var s=function(e){var t=(new n.DOMParser).parseFromString(String.fromCharCode.apply(null,new Uint16Array(e)),"application/xml"),i=t.getElementsByTagName("HttpHeaders")[0],r={};if(i)for(var a=i.getElementsByTagName("name"),s=i.getElementsByTagName("value"),o=0;o<a.length;o++)r[a[o].childNodes[0].nodeValue]=s[o].childNodes[0].nodeValue;var l,u=t.getElementsByTagName("Challenge")[0];return u&&(l=n.atob(u.childNodes[0].nodeValue)),{headers:r,message:l}}(t),l=s.message,u=o(s.headers,r.emeHeaders,e.licenseHeaders);i.xhr({uri:e.url,method:"post",headers:u,body:l,responseType:"arraybuffer"},function(e,t,i){e?a(e):t.statusCode>=400&&t.statusCode<=599?a({}):a(null,i)})},u=function(e){var t;return Object.keys(e).forEach(function(i){var a=function(e){if(e.supportedConfigurations)return e.supportedConfigurations;var t={},i=e.audioContentType,n=e.audioRobustness,a=e.videoContentType,s=e.videoRobustness,o=e.persistentState;return(i||n)&&(t.audioCapabilities=[r({},i?{contentType:i}:{},n?{robustness:n}:{})]),(a||s)&&(t.videoCapabilities=[r({},a?{contentType:a}:{},s?{robustness:s}:{})]),o&&(t.persistentState=o),[t]}(e[i]);t=t?t.catch(function(e){return n.navigator.requestMediaKeySystemAccess(i,a)}):n.navigator.requestMediaKeySystemAccess(i,a)}),t},d=function e(t){var n=t.mediaKeys,r=t.initDataType,a=t.initData,s=t.options,o=t.getLicense,l=t.removeSession,u=t.eventBus,d=n.createSession();return u.trigger("keysessioncreated"),new Promise(function(n,c){d.addEventListener("message",function(e){"license-request"!==e.messageType&&"license-renewal"!==e.messageType||o(s,e.message).then(function(e){n(d.update(e))}).catch(function(e){c(e)})},!1),d.addEventListener("keystatuseschange",function(n){var r=!1;d.keyStatuses.forEach(function(e,t){switch(u.trigger({keyId:t,status:e,target:d,type:"keystatuschange"}),e){case"expired":r=!0;break;case"internal-error":i.log.warn('Key status reported as "internal-error." Leaving the session open since we don\'t have enough details to know if this error is fatal.',n)}}),r&&d.close().then(function(){l(a),e(t)})},!1),d.generateRequest(r,a).catch(function(){c("Unable to create or initialize key session")})})},c=function(e,t){return function(i,n){return new Promise(function(r,a){e(i,n,function(e,i){t&&t.trigger("licenserequestattempted"),e?a(e):r(i)})})}},p=function(e,t){if("string"==typeof t&&(t={url:t}),!t.url&&!t.getLicense)throw new Error("Neither URL nor getLicense function provided to get license");return t.url&&!t.getLicense&&(t.getLicense="com.microsoft.playready"===e?function(e){return function(t,i,n){l(e,i,t,n)}}(t):function(e){return function(t,n,r){var a=o({"Content-type":"application/octet-stream"},t.emeHeaders,e.licenseHeaders);i.xhr({uri:e.url,method:"POST",responseType:"arraybuffer",body:n,headers:a},function(e,t,i){e?r(e):t.statusCode>=400&&t.statusCode<=599?r({}):r(null,i)})}}(t)),t},h=function(e){var t,i,n=e.video,r=e.initDataType,a=e.initData,s=e.keySystemAccess,o=e.options,l=e.removeSession,u=e.eventBus,h=Promise.resolve();void 0===n.mediaKeysObject&&(n.mediaKeysObject=null,n.pendingSessionData=[],h=new Promise(function(e,r){n.keySystem=s.keySystem,(i=p(s.keySystem,o.keySystems[s.keySystem])).getCertificate?i.getCertificate(o,function(i,n){i?r(i):(t=n,e())}):e(s)}).then(function(){return s.createMediaKeys()}).then(function(e){return function(e){var t=e.video,i=e.certificate,n=e.createdMediaKeys;t.mediaKeysObject=n;var r=[];i&&r.push(n.setServerCertificate(i));for(var a=0;a<t.pendingSessionData.length;a++){var s=t.pendingSessionData[a];r.push(d({mediaKeys:t.mediaKeysObject,initDataType:s.initDataType,initData:s.initData,options:s.options,getLicense:s.getLicense,removeSession:s.removeSession,eventBus:s.eventBus}))}return t.pendingSessionData=[],r.push(t.setMediaKeys(n)),Promise.all(r)}({video:n,certificate:t,createdMediaKeys:e})}).catch(function(e){return e?Promise.reject(e):Promise.reject("Failed to create and initialize a MediaKeys object")}));return h.then(function(){return function(e){var t=e.video,i=e.initDataType,n=e.initData,r=e.options,a=e.getLicense,s=e.removeSession,o=e.eventBus;return t.mediaKeysObject?d({mediaKeys:t.mediaKeysObject,initDataType:i,initData:n,options:r,getLicense:a,removeSession:s,eventBus:o}):(t.pendingSessionData.push({initDataType:i,initData:n,options:r,getLicense:a,removeSession:s,eventBus:o}),Promise.resolve())}({video:n,initDataType:r,initData:a,options:o,getLicense:n.keySystem?c(p(n.keySystem,o.keySystems[n.keySystem]).getLicense,u):null,removeSession:l,eventBus:u})})},f=function(e){var t=e.initData,i=e.id,n=e.cert;"string"==typeof i&&(i=function(e){for(var t=new ArrayBuffer(2*e.length),i=new Uint16Array(t),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}(i));var r=0,a=new ArrayBuffer(t.byteLength+4+i.byteLength+4+n.byteLength),s=new DataView(a);new Uint8Array(a,r,t.byteLength).set(t),r+=t.byteLength,s.setUint32(r,i.byteLength,!0),r+=4;var o=new Uint16Array(a,r,i.length);return o.set(i),r+=o.byteLength,s.setUint32(r,n.byteLength,!0),r+=4,new Uint8Array(a,r,n.byteLength).set(n),new Uint8Array(a,0,a.byteLength)},m=function(e,i){return a=i,n=String.fromCharCode.apply(null,new Uint16Array(a.buffer)),(r=t.createElement("a")).href=n,r.hostname;var n,r,a},g=function(e){var t=e.video,r=e.initData,a=e.options,s=e.eventBus,l=a.keySystems["com.apple.fps.1_0"],u=l.getCertificate||function(e){return function(t,n){var r=o(t.emeHeaders,e.certificateHeaders);i.xhr({uri:e.certificateUri,responseType:"arraybuffer",headers:r},function(e,t,i){e?n(e):n(null,new Uint8Array(i))})}}(l),d=l.getContentId||m,c=l.getLicense||function(e){return function(t,n,r,a){var s=o({"Content-type":"application/octet-stream"},t.emeHeaders,e.licenseHeaders);i.xhr({uri:e.licenseUri,method:"POST",responseType:"arraybuffer",body:r,headers:s},function(e,t,i){e?a(e):t.statusCode>=400&&t.statusCode<=599?a({}):a(null,i)})}}(l);return new Promise(function(e,t){u(a,function(i,n){i?t(i):e(n)})}).then(function(e){return function(e){var t=e.video,i=e.contentId,r=e.initData,a=e.cert,s=e.options,o=e.getLicense,l=e.eventBus;return new Promise(function(e,u){if(!t.webkitKeys)try{t.webkitSetMediaKeys(new n.WebKitMediaKeys("com.apple.fps.1_0"))}catch(e){return void u("Could not create MediaKeys")}var d;try{d=t.webkitKeys.createSession("video/mp4",f({id:i,initData:r,cert:a}))}catch(e){return void u("Could not create key session")}l.trigger("keysessioncreated"),d.contentId=i,d.addEventListener("webkitkeymessage",function(e){o(s,i,e.message,function(e,t){l&&l.trigger("licenserequestattempted"),e?u(e):d.update(new Uint8Array(t))})}),d.addEventListener("webkitkeyadded",function(){e()}),d.addEventListener("webkitkeyerror",function(){var e=d.error;u("KeySession error: code "+e.code+", systemCode "+e.systemCode)})})}({video:t,cert:e,initData:r,getLicense:c,options:a,contentId:d(a,r),eventBus:s})})},v=function(e,t,i,n){var r=e.msKeys.createSession("video/mp4",t);if(!r)throw new Error("Could not create key session.");n.trigger("keysessioncreated"),r.addEventListener("mskeymessage",function(e){!function(e,t,i,n){var r=e.keySystems["com.microsoft.playready"];if("function"!=typeof r.getKey){"string"==typeof r?r={url:r}:"boolean"==typeof r&&(r={}),r.url||(r.url=i.destinationURL);var a=function(e,i){n&&n.trigger("licenserequestattempted"),e?n.trigger({message:"Unable to request key from url: "+r.url,target:t,type:"mskeyerror"}):t.update(new Uint8Array(i))};r.getLicense?r.getLicense(e,i.message.buffer,a):l(r,i.message.buffer,e,a)}else r.getKey(e,i.destinationURL,i.message.buffer,function(e,i){e?n.trigger({message:"Unable to get key: "+e,target:t,type:"mskeyerror"}):t.update(i)})}(i,r,e,n)}),r.addEventListener("mskeyerror",function(e){n.trigger({message:"Unexpected key error from key session with code: "+r.error.code+" and systemCode: "+r.error.systemCode,target:r,type:"mskeyerror"})}),r.addEventListener("mskeyadded",function(){n.trigger({target:r,type:"mskeyadded"})})},y=function(e,t){for(var i=0;i<e.length;i++)if(e[i].initData){var n=s(e[i].initData),r=s(t);if(a(n,r))return!0}return!1},_=function(e,t){for(var i=0;i<e.length;i++)if(e[i].initData===t)return void e.splice(i,1)},b=function(e,t,i,n){if(!t||!t.keySystems)return Promise.resolve();var r=e.initData;return u(t.keySystems).then(function(a){var s=a.keySystem;return t.keySystems[s]&&t.keySystems[s].pssh&&(r=t.keySystems[s].pssh),y(i,r)||!r?Promise.resolve():(i.push({initData:r}),h({video:e.target,initDataType:e.initDataType,initData:r,keySystemAccess:a,options:t,removeSession:_.bind(null,i),eventBus:n}))})},T=function(e,t,i){return t.keySystems&&t.keySystems["com.apple.fps.1_0"]&&e.initData?g({video:e.target,initData:e.initData,options:t,eventBus:i}):Promise.resolve()},w=function(e,t,i,r){if(t.keySystems&&t.keySystems["com.microsoft.playready"]&&!i.reduce(function(e,t){return e||t.playready},!1)){var a=e.initData;t.keySystems["com.microsoft.playready"]&&t.keySystems["com.microsoft.playready"].pssh&&(a=t.keySystems["com.microsoft.playready"].pssh),a&&(i.push({playready:!0,initData:a}),function(e){var t=e.video,i=e.initData,r=e.options,a=e.eventBus;t.msKeys&&delete t.msKeys;try{t.msSetMediaKeys(new n.MSMediaKeys("com.microsoft.playready"))}catch(e){throw new Error("Unable to create media keys for PlayReady key system. Error: "+e.message)}v(t,i,r,a)}({video:e.target,initData:a,options:t,eventBus:r}))}},k=function(e){return i.mergeOptions(e.currentSource(),e.eme.options)},S=function(e){var t=e.src();t!==e.eme.activeSrc&&(e.eme.activeSrc=t,e.eme.sessions=[])},x=function(e){return function(t){var i="string"==typeof t?t:t&&t.message||null;e.error({code:5,message:i})}},M=function(e){void 0===e&&(e={}),console.log("options",e);var t=this,r=x(t);t.ready(function(){return function(e,t){"video"===e.$(".vjs-tech").tagName.toLowerCase()&&(S(e),n.WebKitMediaKeys?e.tech_.el_.addEventListener("webkitneedkey",function(i){S(e),T(i,k(e),e.tech_).catch(t)}):n.MediaKeys?e.tech_.el_.addEventListener("encrypted",function(i){S(e),b(i,k(e),e.eme.sessions,e.tech_).catch(t)}):n.MSMediaKeys&&(e.tech_.el_.addEventListener("msneedkey",function(i){S(e);try{w(i,k(e),e.eme.sessions,e.tech_)}catch(e){t(e)}}),e.tech_.on("mskeyerror",t),e.on("dispose",function(){e.tech_.off("mskeyerror",t)})))}(t,r)}),t.eme={initializeMediaKeys:function(n,a,s){void 0===n&&(n={}),void 0===a&&(a=function(){}),void 0===s&&(s=!1);var o=i.mergeOptions(t.currentSource(),e,n),l={initDataType:"cenc",initData:null,target:t.tech_.el_};if(S(t),t.tech_.el_.setMediaKeys)b(l,o,t.eme.sessions,t.tech_).then(function(){return a()}).catch(function(e){a(e),s||r(e)});else if(t.tech_.el_.msSetMediaKeys){var u=function e(i){t.tech_.off("mskeyadded",e),t.tech_.off("mskeyerror",e),"mskeyerror"===i.type?(a(i.target.error),s||r(i.message)):a()};t.tech_.one("mskeyadded",u),t.tech_.one("mskeyerror",u);try{w(l,o,t.eme.sessions,t.tech_)}catch(e){t.tech_.off("mskeyadded",u),t.tech_.off("mskeyerror",u),a(e),s||r(e)}}},options:e}};(i.registerPlugin||i.plugin)("eme",M),e.hasSession=y,e.removeSession=_,e.handleEncryptedEvent=b,e.handleWebKitNeedKeyEvent=T,e.handleMsNeedKeyEvent=w,e.getOptions=k,e.setupSessions=S,e.emeErrorHandler=x,e.default=M,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js"),require("global/document")):"function"==typeof define&&define.amd?define(["video.js","global/document"],t):e.videojsContribQualityLevels=t(e.videojs,e.document)}(this,function(e,t){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var n=function i(n){var r=this;if(e.browser.IS_IE8)for(var a in r=t.createElement("custom"),i.prototype)"constructor"!==a&&(r[a]=i.prototype[a]);return r.id=n.id,r.label=r.id,r.width=n.width,r.height=n.height,r.bitrate=n.bandwidth,r.enabled_=n.enabled,Object.defineProperty(r,"enabled",{get:function(){return r.enabled_()},set:function(e){r.enabled_(e)}}),r},r=function(r){var a,s;function o(){var n,a=i(i(n=r.call(this)||this));if(e.browser.IS_IE8)for(var s in a=t.createElement("custom"),o.prototype)"constructor"!==s&&(a[s]=o.prototype[s]);return a.levels_=[],a.selectedIndex_=-1,Object.defineProperty(a,"selectedIndex",{get:function(){return a.selectedIndex_}}),Object.defineProperty(a,"length",{get:function(){return a.levels_.length}}),a||i(n)}s=r,(a=o).prototype=Object.create(s.prototype),a.prototype.constructor=a,a.__proto__=s;var l=o.prototype;return l.addQualityLevel=function(e){var t=this.getQualityLevelById(e.id);if(t)return t;var i=this.levels_.length;return t=new n(e),""+i in this||Object.defineProperty(this,i,{get:function(){return this.levels_[i]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t},l.removeQualityLevel=function(e){for(var t=null,i=0,n=this.length;i<n;i++)if(this[i]===e){t=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t},l.getQualityLevelById=function(e){for(var t=0,i=this.length;t<i;t++){var n=this[t];if(n.id===e)return n}return null},l.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},o}(e.EventTarget);for(var a in r.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},r.prototype.allowedEvents_)r.prototype["on"+a]=null;var s=e.registerPlugin||e.plugin,o=function(t){return i=this,e.mergeOptions({},t),n=i.qualityLevels,a=new r,i.on("dispose",function e(){a.dispose(),i.qualityLevels=n,i.off("dispose",e)}),i.qualityLevels=function(){return a},i.qualityLevels.VERSION="2.0.9",a;var i,n,a};return s("qualityLevels",o),o.VERSION="2.0.9",o}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsHlsQualitySelector=t(e.videojs)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(function(){function e(e){var t,i;function n(t,i){try{var a=e[t](i),s=a.value;s instanceof function(e){this.value=e}?Promise.resolve(s.value).then(function(e){n("next",e)},function(e){n("throw",e)}):r(a.done?"return":"normal",a.value)}catch(t){r("throw",t)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?n(t.key,t.arg):i=null}this._invoke=function(e,r){return new Promise(function(a,s){var o={key:e,arg:r,resolve:a,reject:s,next:null};i?i=i.next=o:(t=i=o,n(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(e){return this._invoke("next",e)},e.prototype.throw=function(e){return this._invoke("throw",e)},e.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),n=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},a=e.getComponent("MenuButton"),s=e.getComponent("Menu"),o=e.getComponent("Component"),l=e.dom,u=function(e){function t(n){return i(this,t),r(this,e.call(this,n,{title:n.localize("Quality"),name:"QualityButton"}))}return n(t,e),t.prototype.createItems=function(){return[]},t.prototype.createMenu=function(){var e,t=new s(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var i=l.createEl("li",{className:"vjs-menu-title",innerHTML:(e=this.options_.title,"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)),tabIndex:-1}),n=new o(this.player_,{el:i});this.hideThreshold_+=1,t.addItem(n)}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)t.addItem(this.items[r]);return t},t}(a),d=function(e){function t(n,a,s,o){i(this,t);var l=r(this,e.call(this,n,{label:a.label,selectable:!0,selected:a.selected||!1}));return l.item=a,l.qualityButton=s,l.plugin=o,l}return n(t,e),t.prototype.handleClick=function(){for(var e=0;e<this.qualityButton.items.length;++e)this.qualityButton.items[e].selected(!1);this.plugin.setQuality(this.item.value),this.selected(!0)},t}(e.getComponent("MenuItem")),c={},p=e.registerPlugin||e.plugin,h=function(){function e(t,n){i(this,e),this.player=t,this.config=n,this.player.qualityLevels&&this.getHls()&&(this.createQualityButton(),this.bindPlayerEvents())}return e.prototype.getHls=function(){return this.player.tech({IWillNotUseThisInPlugins:!0}).hls},e.prototype.bindPlayerEvents=function(){this.player.qualityLevels().on("addqualitylevel",this.onAddQualityLevel.bind(this))},e.prototype.createQualityButton=function(){var e=this.player;this._qualityButton=new u(e);var t=e.controlBar.children().length-2,i=e.controlBar.addChild(this._qualityButton,{componentClass:"qualitySelector"},this.config.placementIndex||t);if(i.addClass("vjs-quality-selector"),this.config.displayCurrentQuality)this.setButtonInnerText("auto");else{var n=" "+(this.config.vjsIconClass||"vjs-icon-hd");i.menuButton_.$(".vjs-icon-placeholder").className+=n}i.removeClass("vjs-hidden")},e.prototype.setButtonInnerText=function(e){this._qualityButton.menuButton_.$(".vjs-icon-placeholder").innerHTML=e},e.prototype.getQualityMenuItem=function(e){var t=this.player;return new d(t,e,this._qualityButton,this)},e.prototype.onAddQualityLevel=function(){for(var e=this,i=this.player,n=i.qualityLevels().levels_||[],r=[],a=function(t){if(!r.filter(function(e){return e.item&&e.item.value===n[t].height}).length){var i=e.getQualityMenuItem.call(e,{label:n[t].height+"p",value:n[t].height});r.push(i)}},s=0;s<n.length;++s)a(s);r.sort(function(e,i){return"object"!==(void 0===e?"undefined":t(e))||"object"!==(void 0===i?"undefined":t(i))?-1:e.item.value<i.item.value?-1:e.item.value>i.item.value?1:0}),r.push(this.getQualityMenuItem.call(this,{label:i.localize("Auto"),value:"auto",selected:!0})),this._qualityButton&&(this._qualityButton.createItems=function(){return r},this._qualityButton.update())},e.prototype.setQuality=function(e){var t=this.player.qualityLevels();this._currentQuality=e,this.config.displayCurrentQuality&&this.setButtonInnerText("auto"===e?e:e+"p");for(var i=0;i<t.length;++i){var n=t[i];n.enabled=n.height===e||"auto"===e}this._qualityButton.unpressButton()},e.prototype.getCurrentQuality=function(){return this._currentQuality||"auto"},e}(),f=function(t){var i=this;this.ready(function(){var n,r;n=i,r=e.mergeOptions(c,t),n.addClass("vjs-hls-quality-selector"),n.hlsQualitySelector=new h(n,r)})};return p("hlsQualitySelector",f),f.VERSION="1.1.4",f}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsVttThumbnails=t(e.videojs)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,function(){function e(e){var t,i;function n(t,i){try{var a=e[t](i),s=a.value;s instanceof function(e){this.value=e}?Promise.resolve(s.value).then(function(e){n("next",e)},function(e){n("throw",e)}):r(a.done?"return":"normal",a.value)}catch(t){r("throw",t)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?n(t.key,t.arg):i=null}this._invoke=function(e,r){return new Promise(function(a,s){var o={key:e,arg:r,resolve:a,reject:s,next:null};i?i=i.next=o:(t=i=o,n(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(e){return this._invoke("next",e)},e.prototype.throw=function(e){return this._invoke("throw",e)},e.prototype.return=function(e){return this._invoke("return",e)}}();var t={},i=e.registerPlugin||e.plugin,n=function(i){var n=this;this.ready(function(){var a,s;a=n,s=e.mergeOptions(t,i),a.addClass("vjs-vtt-thumbnails"),a.vttThumbnails=new r(a,s)})},r=function(){function e(t,i){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.player=t,this.options=i,this.listenForDurationChange(),this.initializeThumbnails(),this.registeredEvents={},this}return e.prototype.src=function(e){this.resetPlugin(),this.options.src=e,this.initializeThumbnails()},e.prototype.detach=function(){this.resetPlugin()},e.prototype.resetPlugin=function(){this.thumbnailHolder&&this.thumbnailHolder.parentNode.removeChild(this.thumbnailHolder),this.progressBar&&this.progressBar.removeEventListener("mouseenter",this.registeredEvents.progressBarMouseEnter),this.progressBar&&this.progressBar.removeEventListener("mouseleave",this.registeredEvents.progressBarMouseLeave),this.progressBar&&this.progressBar.removeEventListener("mousemove",this.registeredEvents.progressBarMouseMove),delete this.registeredEvents.progressBarMouseEnter,delete this.registeredEvents.progressBarMouseLeave,delete this.registeredEvents.progressBarMouseMove,delete this.progressBar,delete this.vttData,delete this.thumbnailHolder,delete this.lastStyle},e.prototype.listenForDurationChange=function(){this.player.on("durationchange",function(){})},e.prototype.initializeThumbnails=function(){var e=this;if(this.options.src){var t=this.getBaseUrl(),i=this.getFullyQualifiedUrl(this.options.src,t);this.getVttFile(i).then(function(t){e.vttData=e.processVtt(t),e.setupThumbnailElement()})}},e.prototype.getBaseUrl=function(){return[window.location.protocol,"//",window.location.hostname,window.location.port?":"+window.location.port:"",window.location.pathname].join("").split(/([^\/]*)$/gi).shift()},e.prototype.getVttFile=function(e){var t=this;return new Promise(function(i,n){var r=new XMLHttpRequest;r.data={resolve:i},r.addEventListener("load",t.vttFileLoaded),r.open("GET",e),r.send()})},e.prototype.vttFileLoaded=function(){this.data.resolve(this.responseText)},e.prototype.setupThumbnailElement=function(e){var t=this,i=this.player.$(".vjs-mouse-display");this.progressBar=this.player.$(".vjs-progress-control");var n=document.createElement("div");n.setAttribute("class","vjs-vtt-thumbnail-display"),this.progressBar.appendChild(n),this.thumbnailHolder=n,i&&i.classList.add("vjs-hidden"),this.registeredEvents.progressBarMouseEnter=function(){return t.onBarMouseenter()},this.registeredEvents.progressBarMouseLeave=function(){return t.onBarMouseleave()},this.progressBar.addEventListener("mouseenter",this.registeredEvents.progressBarMouseEnter),this.progressBar.addEventListener("mouseleave",this.registeredEvents.progressBarMouseLeave)},e.prototype.onBarMouseenter=function(){var e=this;this.mouseMoveCallback=function(t){e.onBarMousemove(t)},this.registeredEvents.progressBarMouseMove=this.mouseMoveCallback,this.progressBar.addEventListener("mousemove",this.registeredEvents.progressBarMouseMove),this.showThumbnailHolder()},e.prototype.onBarMouseleave=function(){this.registeredEvents.progressBarMouseMove&&this.progressBar.removeEventListener("mousemove",this.registeredEvents.progressBarMouseMove),this.hideThumbnailHolder()},e.prototype.getXCoord=function(e,t){var i=e.getBoundingClientRect(),n=document.documentElement;return t-(i.left+(window.pageXOffset||n.scrollLeft||0))},e.prototype.onBarMousemove=function(e){this.updateThumbnailStyle(this.getXCoord(this.progressBar,e.clientX),this.progressBar.offsetWidth)},e.prototype.getStyleForTime=function(e){for(var t=0;t<this.vttData.length;++t){var i=this.vttData[t];if(e>=i.start&&e<i.end)return i.css}},e.prototype.showThumbnailHolder=function(){this.thumbnailHolder.style.opacity="1"},e.prototype.hideThumbnailHolder=function(){this.thumbnailHolder.style.opacity="0"},e.prototype.updateThumbnailStyle=function(e,t){var i=(1-(t-e)/t)*this.player.duration(),n=this.getStyleForTime(i);if(!n)return this.hideThumbnailHolder();var r=(1-(t-e)/t)*t;if(this.thumbnailHolder.style.transform="translateX("+r+"px)",this.thumbnailHolder.style.marginLeft="-"+parseInt(n.width)/2+"px",!this.lastStyle||this.lastStyle!==n)for(var a in this.lastStyle=n)n.hasOwnProperty(a)&&(this.thumbnailHolder.style[a]=n[a])},e.prototype.processVtt=function(e){var t=this,i=[];return e.split(/[\r\n][\r\n]/i).forEach(function(e){if(e.match(/([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?( ?--> ?)([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?[\r\n]{1}.*/gi)){var n=e.split(/[\r\n]/i),r=n[0].split(/ ?--> ?/i),a=r[0],s=r[1],o=n[1],l=t.getVttCss(o);i.push({start:t.getSecondsFromTimestamp(a),end:t.getSecondsFromTimestamp(s),css:l})}}),i},e.prototype.getFullyQualifiedUrl=function(e,t){return 0<=e.indexOf("//")?e:0===t.indexOf("//")?[t.replace(/\/$/gi,""),this.trim(e,"/")].join("/"):0<t.indexOf("//")?[this.trim(t,"/"),this.trim(e,"/")].join("/"):e},e.prototype.getPropsFromDef=function(e){var t=e.split(/#xywh=/i),i=t[0],n=t[1].match(/[0-9]+/gi);return{x:n[0],y:n[1],w:n[2],h:n[3],image:i}},e.prototype.getVttCss=function(e){var t,i={};if(t=0<=this.options.src.indexOf("//")?this.options.src.split(/([^\/]*)$/gi).shift():this.getBaseUrl()+this.options.src.split(/([^\/]*)$/gi).shift(),!(e=this.getFullyQualifiedUrl(e,t)).match(/#xywh=/i))return i.background='url("'+e+'")',i;var n=this.getPropsFromDef(e);return i.background='url("'+n.image+'") no-repeat -'+n.x+"px -"+n.y+"px",i.width=n.w+"px",i.height=n.h+"px",i},e.prototype.doconstructTimestamp=function(e){var t=e.split("."),i=t[0].split(":");return{milliseconds:parseInt(t[1])||0,seconds:parseInt(i.pop())||0,minutes:parseInt(i.pop())||0,hours:parseInt(i.pop())||0}},e.prototype.getSecondsFromTimestamp=function(e){var t=this.doconstructTimestamp(e);return parseInt(3600*t.hours+60*t.minutes+t.seconds+t.milliseconds/1e3)},e.prototype.trim=function(e,t){var i=[" ","\n","\r","\t","\f","\v","Â ","â","â","â","â","â","â","â","â","â","â","â","â","\u2028","\u2029","ã"].join(""),n=0,r=0;for(e+="",t&&(i=(t+"").replace(/([[\]().?/*{}+$^:])/g,"$1")),n=e.length,r=0;r<n;r++)if(-1===i.indexOf(e.charAt(r))){e=e.substring(r);break}for(r=(n=e.length)-1;0<=r;r--)if(-1===i.indexOf(e.charAt(r))){e=e.substring(0,r+1);break}return-1===i.indexOf(e.charAt(0))?e:""},e}();return i("vttThumbnails",n),n.VERSION="0.0.13",n}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("WaveSurfer",[],t):"object"==typeof exports?exports.WaveSurfer=t():e.WaveSurfer=t()}(this,function(){return(()=>{var e={"./src/drawer.canvasentry.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("./src/util/style.js")),r=a(i("./src/util/get-id.js"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,r.default)(void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}var t,i,a;return t=e,(i=[{key:"initWave",value:function(e){this.wave=e,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(e){this.progress=e,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(e,t,i,r){this.start=this.wave.offsetLeft/t||0,this.end=this.start+e/t,this.wave.width=i,this.wave.height=r;var a={width:e+"px"};(0,n.default)(this.wave,a),this.hasProgressCanvas&&(this.progress.width=i,this.progress.height=r,(0,n.default)(this.progress,a))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(e,t){this.waveCtx.fillStyle=e,this.hasProgressCanvas&&(this.progressCtx.fillStyle=t)}},{key:"fillRects",value:function(e,t,i,n,r){this.fillRectToContext(this.waveCtx,e,t,i,n,r),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,e,t,i,n,r)}},{key:"fillRectToContext",value:function(e,t,i,n,r,a){e&&(a?this.drawRoundedRect(e,t,i,n,r,a):e.fillRect(t,i,n,r))}},{key:"drawRoundedRect",value:function(e,t,i,n,r,a){0!==r&&(r<0&&(i-=r*=-1),e.beginPath(),e.moveTo(t+a,i),e.lineTo(t+n-a,i),e.quadraticCurveTo(t+n,i,t+n,i+a),e.lineTo(t+n,i+r-a),e.quadraticCurveTo(t+n,i+r,t+n-a,i+r),e.lineTo(t+a,i+r),e.quadraticCurveTo(t,i+r,t,i+r-a),e.lineTo(t,i+a),e.quadraticCurveTo(t,i,t+a,i),e.closePath(),e.fill())}},{key:"drawLines",value:function(e,t,i,n,r,a){this.drawLineToContext(this.waveCtx,e,t,i,n,r,a),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,e,t,i,n,r,a)}},{key:"drawLineToContext",value:function(e,t,i,n,r,a,s){if(e){var o,l,u,d=t.length/2,c=Math.round(d*this.start),p=c,h=Math.round(d*this.end)+1,f=this.wave.width/(h-p-1),m=n+r,g=i/n;for(e.beginPath(),e.moveTo((p-c)*f,m),e.lineTo((p-c)*f,m-Math.round((t[2*p]||0)/g)),o=p;o<h;o++)l=t[2*o]||0,u=Math.round(l/g),e.lineTo((o-c)*f+this.halfPixel,m-u);for(var v=h-1;v>=p;v--)l=t[2*v+1]||0,u=Math.round(l/g),e.lineTo((v-c)*f+this.halfPixel,m-u);e.lineTo((p-c)*f,m-Math.round((t[2*p+1]||0)/g)),e.closePath(),e.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(e,t,i){var n=this;return"blob"===i?new Promise(function(i){n.wave.toBlob(i,e,t)}):"dataURL"===i?this.wave.toDataURL(e,t):void 0}}])&&s(t.prototype,i),a&&s(t,a),e}();t.default=o,e.exports=t.default},"./src/drawer.js":(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=e[s]}i.default=e,t&&t.set(e,i);return i}(i("./src/util/index.js"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,r=u(e);if(t){var a=u(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,r.Observer);var t,i,n,a=l(u);function u(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=a.call(this)).container=e,i.params=t,i.width=0,i.height=t.height*i.params.pixelRatio,i.lastPos=0,i.wrapper=null,i}return t=u,(i=[{key:"style",value:function(e,t){return r.style(e,t)}},{key:"createWrapper",value:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(e,t){!t&&e.preventDefault();var i,n=e.targetTouches?e.targetTouches[0].clientX:e.clientX,a=this.wrapper.getBoundingClientRect(),s=this.width,o=this.getWidth();return i=!this.params.fillParent&&s<o?(this.params.rtl?a.right-n:n-a.left)*(this.params.pixelRatio/s)||0:((this.params.rtl?a.right-n:n-a.left)+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,r.clamp(i,0,1)}},{key:"setupWrapperEvents",value:function(){var e=this;this.wrapper.addEventListener("click",function(t){var i=e.wrapper.offsetHeight-e.wrapper.clientHeight;if(0!==i){var n=e.wrapper.getBoundingClientRect();if(t.clientY>=n.bottom-i)return}e.params.interact&&e.fireEvent("click",t,e.handleEvent(t))}),this.wrapper.addEventListener("dblclick",function(t){e.params.interact&&e.fireEvent("dblclick",t,e.handleEvent(t))}),this.wrapper.addEventListener("scroll",function(t){return e.fireEvent("scroll",t)})}},{key:"drawPeaks",value:function(e,t,i,n){this.setWidth(t)||this.clearWave(),this.params.barWidth?this.drawBars(e,0,i,n):this.drawWave(e,0,i,n)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(e){var t=this.wrapper.scrollWidth*e;this.recenterOnPosition(t,!0)}},{key:"recenterOnPosition",value:function(e,t){var i=this.wrapper.scrollLeft,n=~~(this.wrapper.clientWidth/2),r=this.wrapper.scrollWidth-this.wrapper.clientWidth,a=e-n,s=a-i;if(0!=r){if(!t&&-n<=s&&s<n){var o=this.params.autoCenterRate;o/=n,o*=r,a=i+(s=Math.max(-o,Math.min(o,s)))}(a=Math.max(0,Math.min(r,a)))!=i&&(this.wrapper.scrollLeft=a)}}},{key:"getScrollX",value:function(){var e=0;if(this.wrapper){var t=this.params.pixelRatio;if(e=Math.round(this.wrapper.scrollLeft*t),this.params.scrollParent){var i=~~(this.wrapper.scrollWidth*t-this.getWidth());e=Math.min(i,Math.max(0,e))}}return e}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(e){return this.width!=e&&(this.width=e,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"setHeight",value:function(e){return e!=this.height&&(this.height=e,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(e){var t=1/this.params.pixelRatio,i=Math.round(e*this.width)*t;if(i<this.lastPos||i-this.lastPos>=t){if(this.lastPos=i,this.params.scrollParent&&this.params.autoCenter){var n=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(n,this.params.autoCenterImmediately)}this.updateProgress(i)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container&&this.container.removeChild(this.wrapper),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(e,t,i,n){}},{key:"drawWave",value:function(e,t,i,n){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(e){}}])&&s(t.prototype,i),n&&s(t,n),u}();t.default=d,e.exports=t.default},"./src/drawer.multicanvas.js":(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(i("./src/drawer.js")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=r?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,t&&t.set(e,i);return i}(i("./src/util/index.js")),s=l(i("./src/drawer.canvasentry.js"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,r=p(e);if(t){var a=p(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,r.default);var t,i,n,o=c(l);function l(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(i=o.call(this,e,t)).maxCanvasWidth=t.maxCanvasWidth,i.maxCanvasElementWidth=Math.round(t.maxCanvasWidth/t.pixelRatio),i.hasProgressCanvas=t.waveColor!=t.progressColor,i.halfPixel=.5/t.pixelRatio,i.canvases=[],i.progressWave=null,i.EntryClass=s.default,i.canvasContextAttributes=t.drawingContextAttributes,i.overlap=2*Math.ceil(t.pixelRatio/2),i.barRadius=t.barRadius||0,i}return t=l,(i=[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"})),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var e=this,t=Math.round(this.width/this.params.pixelRatio),i=Math.ceil(t/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<i;)this.addCanvas();for(;this.canvases.length>i;)this.removeCanvas();var n=this.maxCanvasWidth+this.overlap,r=this.canvases.length-1;this.canvases.forEach(function(t,i){i==r&&(n=e.width-e.maxCanvasWidth*r),e.updateDimensions(t,n,e.height),t.clearWave()})}},{key:"addCanvas",value:function(){var e=new this.EntryClass;e.canvasContextAttributes=this.canvasContextAttributes,e.hasProgressCanvas=this.hasProgressCanvas,e.halfPixel=this.halfPixel;var t=this.maxCanvasElementWidth*this.canvases.length;e.initWave(this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:2,left:t+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}))),this.hasProgressCanvas&&e.initProgress(this.progressWave.appendChild(this.style(document.createElement("canvas"),{position:"absolute",left:t+"px",top:0,bottom:0,height:"100%"}))),this.canvases.push(e)}},{key:"removeCanvas",value:function(){var e=this.canvases[this.canvases.length-1];e.wave.parentElement.removeChild(e.wave),this.hasProgressCanvas&&e.progress.parentElement.removeChild(e.progress),e&&(e.destroy(),e=null),this.canvases.pop()}},{key:"updateDimensions",value:function(e,t,i){var n=Math.round(t/this.params.pixelRatio),r=Math.round(this.width/this.params.pixelRatio);e.updateDimensions(n,r,t,i),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var e=this;a.frame(function(){e.canvases.forEach(function(e){return e.clearWave()})})()}},{key:"drawBars",value:function(e,t,i,n){var r=this;return this.prepareDraw(e,t,i,n,function(e){var t=e.absmax,a=e.hasMinVals,s=(e.height,e.offsetY),o=e.halfH,l=e.peaks,u=e.channelIndex;if(void 0!==i)for(var d=a?2:1,c=l.length/d,p=r.params.barWidth*r.params.pixelRatio,h=p+(null===r.params.barGap?Math.max(r.params.pixelRatio,~~(p/2)):Math.max(r.params.pixelRatio,r.params.barGap*r.params.pixelRatio)),f=c/r.width,m=n,g=i;g<m;g+=h){var v=l[Math.floor(g*f*d)]||0,y=Math.round(v/t*o);0==y&&r.params.barMinHeight&&(y=r.params.barMinHeight),r.fillRect(g+r.halfPixel,o-y+s,p+r.halfPixel,2*y,r.barRadius,u)}})}},{key:"drawWave",value:function(e,t,i,n){var r=this;return this.prepareDraw(e,t,i,n,function(e){var t=e.absmax,a=e.hasMinVals,s=(e.height,e.offsetY),o=e.halfH,l=e.peaks,u=e.channelIndex;if(!a){for(var d=[],c=l.length,p=0;p<c;p++)d[2*p]=l[p],d[2*p+1]=-l[p];l=d}void 0!==i&&r.drawLine(l,t,o,s,i,n,u),r.fillRect(0,o+s-r.halfPixel,r.width,r.halfPixel,r.barRadius,u)})}},{key:"drawLine",value:function(e,t,i,n,r,a,s){var o=this,l=this.params.splitChannelsOptions.channelColors[s]||{},u=l.waveColor,d=l.progressColor;this.canvases.forEach(function(s,l){o.setFillStyles(s,u,d),s.drawLines(e,t,i,n,r,a)})}},{key:"fillRect",value:function(e,t,i,n,r,a){for(var s=Math.floor(e/this.maxCanvasWidth),o=Math.min(Math.ceil((e+i)/this.maxCanvasWidth)+1,this.canvases.length),l=s;l<o;l++){var u=this.canvases[l],d=l*this.maxCanvasWidth,c={x1:Math.max(e,l*this.maxCanvasWidth),y1:t,x2:Math.min(e+i,l*this.maxCanvasWidth+u.wave.width),y2:t+n};if(c.x1<c.x2){var p=this.params.splitChannelsOptions.channelColors[a]||{},h=p.waveColor,f=p.progressColor;this.setFillStyles(u,h,f),u.fillRects(c.x1-d,c.y1,c.x2-c.x1,c.y2-c.y1,r)}}}},{key:"hideChannel",value:function(e){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(e)}},{key:"prepareDraw",value:function(e,t,i,n,r,s,o){var l=this;return a.frame(function(){if(e[0]instanceof Array){var u=e;if(l.params.splitChannels){var d,c=u.filter(function(e,t){return!l.hideChannel(t)});return l.params.splitChannelsOptions.overlay||l.setHeight(Math.max(c.length,1)*l.params.height*l.params.pixelRatio),l.params.splitChannelsOptions&&l.params.splitChannelsOptions.relativeNormalization&&(d=a.max(u.map(function(e){return a.absMax(e)}))),u.forEach(function(e,t){return l.prepareDraw(e,t,i,n,r,c.indexOf(e),d)})}e=u[0]}if(!l.hideChannel(t)){var p=1/l.params.barHeight;l.params.normalize&&(p=void 0===o?a.absMax(e):o);var h=[].some.call(e,function(e){return e<0}),f=l.params.height*l.params.pixelRatio;return r({absmax:p,hasMinVals:h,height:f,offsetY:f*s||0,halfH:f/2,peaks:e,channelIndex:t})}})()}},{key:"setFillStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;e.setFillStyles(t,i)}},{key:"getImage",value:function(e,t,i){if("blob"===i)return Promise.all(this.canvases.map(function(n){return n.getImage(e,t,i)}));if("dataURL"===i){var n=this.canvases.map(function(n){return n.getImage(e,t,i)});return n.length>1?n:n[0]}}},{key:"updateProgress",value:function(e){this.style(this.progressWave,{width:e+"px"})}}])&&u(t.prototype,i),n&&u(t,n),l}();t.default=h,e.exports=t.default},"./src/mediaelement-webaudio.js":(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(i("./src/mediaelement.js"));function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,r=u(e);if(t){var a=u(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,r.default);var t,i,n,d=l(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=d.call(this,e)).params=e,t.sourceMediaElement=null,t}return t=c,(i=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(e,t,i){s(u(c.prototype),"_load",this).call(this,e,t,i),this.createMediaElementSource(e)}},{key:"createMediaElementSource",value:function(e){this.sourceMediaElement=this.ac.createMediaElementSource(e),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(e,t){return this.resumeAudioContext(),s(u(c.prototype),"play",this).call(this,e,t)}},{key:"destroy",value:function(){s(u(c.prototype),"destroy",this).call(this),this.destroyWebAudio()}}])&&a(t.prototype,i),n&&a(t,n),c}();t.default=d,e.exports=t.default},"./src/mediaelement.js":(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(i("./src/webaudio.js")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}i.default=e,t&&t.set(e,i);return i}(i("./src/util/index.js"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,r=c(e);if(t){var a=c(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(p,r.default);var t,i,n,s=d(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=s.call(this,e)).params=e,t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},t.mediaType=e.mediaType.toLowerCase(),t.elementPosition=e.elementPosition,t.peaks=null,t.playbackRate=1,t.volume=1,t.isMuted=!1,t.buffer=null,t.onPlayEnd=null,t.mediaListeners={},t}return t=p,(i=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var e=this;this.mediaListeners.error=function(){e.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){e.fireEvent("canplay")},this.mediaListeners.ended=function(){e.fireEvent("finish")},this.mediaListeners.play=function(){e.fireEvent("play")},this.mediaListeners.pause=function(){e.fireEvent("pause")},this.mediaListeners.seeked=function(t){e.fireEvent("seek")},this.mediaListeners.volumechange=function(t){e.isMuted=e.media.muted,e.isMuted?e.volume=0:e.volume=e.media.volume,e.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(t){e.media.removeEventListener(t,e.mediaListeners[t]),e.media.addEventListener(t,e.mediaListeners[t])})}},{key:"createTimer",value:function(){var e=this;this.on("play",function t(){e.isPaused()||(e.fireEvent("audioprocess",e.getCurrentTime()),a.frame(t)())}),this.on("pause",function(){e.fireEvent("audioprocess",e.getCurrentTime())})}},{key:"load",value:function(e,t,i,n){var r=document.createElement(this.mediaType);r.controls=this.params.mediaControls,r.autoplay=this.params.autoplay||!1,r.preload=null==n?"auto":n,r.src=e,r.style.width="100%";var a=t.querySelector(this.mediaType);a&&t.removeChild(a),t.appendChild(r),this._load(r,i,n)}},{key:"loadElt",value:function(e,t){e.controls=this.params.mediaControls,e.autoplay=this.params.autoplay||!1,this._load(e,t,e.preload)}},{key:"_load",value:function(e,t,i){if(!(e instanceof HTMLMediaElement)||void 0===e.addEventListener)throw new Error("media parameter is not a valid media element");"function"!=typeof e.load||t&&"none"==i||e.load(),this.media=e,this._setupMediaListeners(),this.peaks=t,this.onPlayEnd=null,this.buffer=null,this.isMuted=e.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var e=(this.buffer||this.media).duration;return e>=1/0&&(e=this.media.seekable.end(0)),e}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(e){null!=e&&(this.media.currentTime=e),this.clearPlayEnd()}},{key:"play",value:function(e,t){this.seekTo(e);var i=this.media.play();return t&&this.setPlayEnd(t),i}},{key:"pause",value:function(){var e;return this.media&&(e=this.media.pause()),this.clearPlayEnd(),e}},{key:"setPlayEnd",value:function(e){var t=this;this.clearPlayEnd(),this._onPlayEnd=function(i){i>=e&&(t.pause(),t.seekTo(e))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(e,t,i){return this.buffer?l(c(p.prototype),"getPeaks",this).call(this,e,t,i):this.peaks||[]}},{key:"setSinkId",value:function(e){return e?this.media.setSinkId?this.media.setSinkId(e):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){this.volume=e,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(e){this.isMuted=this.media.muted=e}},{key:"destroy",value:function(){var e=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(t){e.media&&e.media.removeEventListener(t,e.mediaListeners[t])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}])&&o(t.prototype,i),n&&o(t,n),p}();t.default=p,e.exports=t.default},"./src/peakcache.js":(e,t)=>{"use strict";function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clearPeakCache()}var t,n,r;return t=e,(n=[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(e,t,i){e!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=e);for(var n=[],r=0;r<this.peakCacheRanges.length&&this.peakCacheRanges[r]<t;)r++;for(r%2==0&&n.push(t);r<this.peakCacheRanges.length&&this.peakCacheRanges[r]<=i;)n.push(this.peakCacheRanges[r]),r++;r%2==0&&n.push(i),n=n.filter(function(e,t,i){return 0==t?e!=i[t+1]:t==i.length-1?e!=i[t-1]:e!=i[t-1]&&e!=i[t+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(n),this.peakCacheRanges=this.peakCacheRanges.sort(function(e,t){return e-t}).filter(function(e,t,i){return 0==t?e!=i[t+1]:t==i.length-1?e!=i[t-1]:e!=i[t-1]&&e!=i[t+1]});var a=[];for(r=0;r<n.length;r+=2)a.push([n[r],n[r+1]]);return a}},{key:"getCacheRanges",value:function(){var e,t=[];for(e=0;e<this.peakCacheRanges.length;e+=2)t.push([this.peakCacheRanges[e],this.peakCacheRanges[e+1]]);return t}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=n,e.exports=t.default},"./src/util/absMax.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.default)(e),i=(0,r.default)(e);return-i>t?-i:t};var n=a(i("./src/util/max.js")),r=a(i("./src/util/min.js"));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},"./src/util/clamp.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){return Math.min(Math.max(t,e),i)},e.exports=t.default},"./src/util/fetch.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)throw new Error("fetch options missing");if(!e.url)throw new Error("fetch url missing");var t=new n.default,i=new Headers,r=new Request(e.url);t.controller=new AbortController,e&&e.requestHeaders&&e.requestHeaders.forEach(function(e){i.append(e.key,e.value)});var s=e.responseType||"json",o={method:e.method||"GET",headers:i,mode:e.mode||"cors",credentials:e.credentials||"same-origin",cache:e.cache||"default",redirect:e.redirect||"follow",referrer:e.referrer||"client",signal:t.controller.signal};return fetch(r,o).then(function(e){t.response=e;var i=!0;e.body||(i=!1);var n=e.headers.get("content-length");return null===n&&(i=!1),i?(t.onProgress=function(e){t.fireEvent("progress",e)},new Response(new ReadableStream(new a(t,n,e)),o)):e}).then(function(e){var t;if(e.ok)switch(s){case"arraybuffer":return e.arrayBuffer();case"json":return e.json();case"blob":return e.blob();case"text":return e.text();default:t="Unknown responseType: "+s}throw t||(t="HTTP error status: "+e.status),new Error(t)}).then(function(e){t.fireEvent("success",e)}).catch(function(e){t.fireEvent("error",e)}),t.fetchRequest=r,t};var n=function(e){return e&&e.__esModule?e:{default:e}}(i("./src/util/observer.js"));function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t,this.instance._reader=n.body.getReader(),this.total=parseInt(i,10),this.loaded=0}var t,i,n;return t=e,(i=[{key:"start",value:function(e){var t=this;!function i(){t.instance._reader.read().then(function(n){var r=n.done,a=n.value;if(r)return 0===t.total&&t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!1}),void e.close();t.loaded+=a.byteLength,t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!(0===t.total)}),e.enqueue(a),i()}).catch(function(t){e.error(t)})}()}}])&&r(t.prototype,i),n&&r(t,n),e}();e.exports=t.default},"./src/util/frame.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(0,n.default)(function(){return e.apply(void 0,i)})}};var n=function(e){return e&&e.__esModule?e:{default:e}}(i("./src/util/request-animation-frame.js"));e.exports=t.default},"./src/util/get-id.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){void 0===e&&(e="wavesurfer_");return e+Math.random().toString(32).substring(2)},e.exports=t.default},"./src/util/index.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getId",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"max",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"min",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"absMax",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"style",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"frame",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"preventClick",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"fetchFile",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return f.default}});var n=m(i("./src/util/get-id.js")),r=m(i("./src/util/max.js")),a=m(i("./src/util/min.js")),s=m(i("./src/util/absMax.js")),o=m(i("./src/util/observer.js")),l=m(i("./src/util/style.js")),u=m(i("./src/util/request-animation-frame.js")),d=m(i("./src/util/frame.js")),c=m(i("./node_modules/debounce/index.js")),p=m(i("./src/util/prevent-click.js")),h=m(i("./src/util/fetch.js")),f=m(i("./src/util/clamp.js"));function m(e){return e&&e.__esModule?e:{default:e}}},"./src/util/max.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=-1/0;return Object.keys(e).forEach(function(i){e[i]>t&&(t=e[i])}),t},e.exports=t.default},"./src/util/min.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Number(1/0);return Object.keys(e).forEach(function(i){e[i]<t&&(t=e[i])}),t},e.exports=t.default},"./src/util/observer.js":(e,t)=>{"use strict";function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._disabledEventEmissions=[],this.handlers=null}var t,n,r;return t=e,(n=[{key:"on",value:function(e,t){var i=this;this.handlers||(this.handlers={});var n=this.handlers[e];return n||(n=this.handlers[e]=[]),n.push(t),{name:e,callback:t,un:function(e,t){return i.un(e,t)}}}},{key:"un",value:function(e,t){if(this.handlers){var i,n=this.handlers[e];if(n)if(t)for(i=n.length-1;i>=0;i--)n[i]==t&&n.splice(i,1);else n.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(e,t){var i=this;return this.on(e,function n(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];t.apply(i,a),setTimeout(function(){i.un(e,n)},0)})}},{key:"setDisabledEventEmissions",value:function(e){this._disabledEventEmissions=e}},{key:"_isDisabledEventEmission",value:function(e){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(e)}},{key:"fireEvent",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(this.handlers&&!this._isDisabledEventEmission(e)){var r=this.handlers[e];r&&r.forEach(function(e){e.apply(void 0,i)})}}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=n,e.exports=t.default},"./src/util/prevent-click.js":(e,t)=>{"use strict";function i(e){e.stopPropagation(),document.body.removeEventListener("click",i,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){document.body.addEventListener("click",i,!0)},e.exports=t.default},"./src/util/request-animation-frame.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return setTimeout(e,1e3/60)}).bind(window);t.default=i,e.exports=t.default},"./src/util/style.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.keys(t).forEach(function(i){e.style[i]!==t[i]&&(e.style[i]=t[i])}),e},e.exports=t.default},"./src/wavesurfer.js":(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=r?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,t&&t.set(e,i);return i}(i("./src/util/index.js")),a=d(i("./src/drawer.multicanvas.js")),s=d(i("./src/webaudio.js")),o=d(i("./src/mediaelement.js")),l=d(i("./src/peakcache.js")),u=d(i("./src/mediaelement-webaudio.js"));function d(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=g(e);if(t){var r=g(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t,i){return t&&y(e.prototype,t),i&&y(e,i),e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(i,r.Observer);var t=h(i);function i(e){var n;if(v(this,i),(n=t.call(this)).defaultParams={audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:a.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1},waveColor:"#999",xhr:{}},n.backends={MediaElement:o.default,WebAudio:s.default,MediaElementWebAudio:u.default},n.util=r,n.params=Object.assign({},n.defaultParams,e),n.params.splitChannelsOptions=Object.assign({},n.defaultParams.splitChannelsOptions,e.splitChannelsOptions),n.container="string"==typeof e.container?document.querySelector(n.params.container):n.params.container,!n.container)throw new Error("Container element not found");if(null==n.params.mediaContainer?n.mediaContainer=n.container:"string"==typeof n.params.mediaContainer?n.mediaContainer=document.querySelector(n.params.mediaContainer):n.mediaContainer=n.params.mediaContainer,!n.mediaContainer)throw new Error("Media Container element not found");if(n.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(n.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(!0===n.params.rtl&&r.style(n.container,{transform:"rotateY(180deg)"}),n.params.backgroundColor&&n.setBackgroundColor(n.params.backgroundColor),n.savedVolume=0,n.isMuted=!1,n.tmpEvents=[],n.currentRequest=null,n.arraybuffer=null,n.drawer=null,n.backend=null,n.peakCache=null,"function"!=typeof n.params.renderer)throw new Error("Renderer parameter is invalid");n.Drawer=n.params.renderer,"AudioElement"==n.params.backend&&(n.params.backend="MediaElement"),"WebAudio"!=n.params.backend&&"MediaElementWebAudio"!==n.params.backend||s.default.prototype.supportsWebAudio.call(null)||(n.params.backend="MediaElement"),n.Backend=n.backends[n.params.backend],n.initialisedPluginList={},n.isDestroyed=!1,n.isReady=!1;var l=0;return n._onResize=r.debounce(function(){l==n.drawer.wrapper.clientWidth||n.params.scrollParent||(l=n.drawer.wrapper.clientWidth,n.drawer.fireEvent("redraw"))},"number"==typeof n.params.responsive?n.params.responsive:100),f(n,m(n))}return _(i,null,[{key:"create",value:function(e){return new i(e).init()}}]),_(i,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var t=this;return e.forEach(function(e){return t.addPlugin(e)}),e.forEach(function(e){e.deferInit||t.initPlugin(e.name)}),this.fireEvent("plugins-registered",e),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var t=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach(function(i){t[i]=e.staticProps[i]});var i=e.instance;return Object.getOwnPropertyNames(r.Observer.prototype).forEach(function(e){i.prototype[e]=r.Observer.prototype[e]}),this[e.name]=new i(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if("function"!=typeof this[e].destroy)throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach(function(t){return e.destroyPlugin(t)})}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())}),this.drawer.on("click",function(t,i){setTimeout(function(){return e.seekTo(i)},0)}),this.drawer.on("scroll",function(t){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",t)})}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")}),this.backend.on("play",function(){return e.fireEvent("play")}),this.backend.on("pause",function(){return e.fireEvent("pause")}),this.backend.on("audioprocess",function(t){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",t)}),"MediaElement"!==this.params.backend&&"MediaElementWebAudio"!==this.params.backend||(this.backend.on("seek",function(){e.drawer.progress(e.backend.getPlayedPercents())}),this.backend.on("volume",function(){var t=e.getVolume();e.fireEvent("volume",t),e.backend.isMuted!==e.isMuted&&(e.isMuted=e.backend.isMuted,e.fireEvent("mute",e.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new l.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,t){var i=this;return this.fireEvent("interaction",function(){return i.play(e,t)}),this.backend.play(e,t)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var t=this.getDuration()||1,i=this.getCurrentTime()||0;i=Math.max(0,Math.min(t,i+(e||0))),this.seekAndCenter(i/t)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var t=this;if("number"!=typeof e||!isFinite(e)||e<0||e>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return t.seekTo(e)});var i="WebAudio"===this.params.backend,n=this.backend.isPaused();i&&!n&&this.backend.pause();var r=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),i&&!n&&this.backend.play(),this.params.scrollParent=r,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){e!==this.isMuted?(this.backend.setMute?(this.backend.setMute(e),this.isMuted=e):e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)):this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){return this.params.waveColor}},{key:"setWaveColor",value:function(e){this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){return this.params.progressColor}},{key:"setProgressColor",value:function(e){this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,r.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(e){this.params.splitChannelsOptions.filterChannels=e,this.drawBuffer()}},{key:"drawBuffer",value:function(){var e,t=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),i=this.drawer.getWidth(),n=t,r=0,a=Math.max(r+i,n);if(this.params.fillParent&&(!this.params.scrollParent||t<i)&&(r=0,a=n=i),this.params.partialRender){var s,o=this.peakCache.addRangeToPeakCache(n,r,a);for(s=0;s<o.length;s++)e=this.backend.getPeaks(n,o[s][0],o[s][1]),this.drawer.drawPeaks(e,n,o[s][0],o[s][1])}else e=this.backend.getPeaks(n,r,a),this.drawer.drawPeaks(e,n,r,a);this.fireEvent("redraw",e,n)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var t=this;this.decodeArrayBuffer(e,function(e){t.isDestroyed||t.loadDecodedBuffer(e)})}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var t=this,i=new FileReader;i.addEventListener("progress",function(e){return t.onProgress(e)}),i.addEventListener("load",function(e){return t.loadArrayBuffer(e.target.result)}),i.addEventListener("error",function(){return t.fireEvent("error","Error reading file")}),i.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,t,i,n){if(!e)throw new Error("url parameter cannot be empty");if(this.empty(),i){var r={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(i),"Peaks are not provided":!t,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof e},a=Object.keys(r).filter(function(e){return r[e]});a.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+a.join("\n\t- ")),i=null)}switch(this.params.backend){case"WebAudio":return this.loadBuffer(e,t,n);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,t,i,n)}}},{key:"loadBuffer",value:function(e,t,i){var n=this,r=function(t){return t&&n.tmpEvents.push(n.once("ready",t)),n.getArrayBuffer(e,function(e){return n.loadArrayBuffer(e)})};if(!t)return r();this.backend.setPeaks(t,i),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",r))}},{key:"loadMediaElement",value:function(e,t,i,n){var r=this,a=e;if("string"==typeof e)this.backend.load(a,this.mediaContainer,t,i);else{var s=e;this.backend.loadElt(s,t),a=s.src}this.tmpEvents.push(this.backend.once("canplay",function(){r.backend.destroyed||(r.drawBuffer(),r.isReady=!0,r.fireEvent("ready"))}),this.backend.once("error",function(e){return r.fireEvent("error",e)})),t&&(this.backend.setPeaks(t,n),this.drawBuffer(),this.fireEvent("waveform-ready")),t&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(a,function(e){r.decodeArrayBuffer(e,function(e){r.backend.buffer=e,r.backend.setPeaks(null),r.drawBuffer(),r.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(e,t){var i=this;this.arraybuffer=e,this.backend.decodeArrayBuffer(e,function(n){i.isDestroyed||i.arraybuffer!=e||(t(n),i.arraybuffer=null)},function(){return i.fireEvent("error","Error decoding audiobuffer")})}},{key:"getArrayBuffer",value:function(e,t){var i=this,n=Object.assign({url:e,responseType:"arraybuffer"},this.params.xhr),a=r.fetchFile(n);return this.currentRequest=a,this.tmpEvents.push(a.on("progress",function(e){i.onProgress(e)}),a.on("success",function(e){t(e),i.currentRequest=null}),a.on("error",function(e){i.fireEvent("error",e),i.currentRequest=null})),a}},{key:"onProgress",value:function(e){var t;t=e.lengthComputable?e.loaded/e.total:e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(100*t),e.target)}},{key:"exportPCM",value:function(e,t,i,n,r){e=e||1024,n=n||0,t=t||1e4,i=i||!1;var a=this.backend.getPeaks(e,n,r),s=[].map.call(a,function(e){return Math.round(e*t)/t});return new Promise(function(e,t){var n=JSON.stringify(s);i||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(n)),e(n)})}},{key:"exportImage",value:function(e,t,i){return e||(e="image/png"),t||(t=1),i||(i="dataURL"),this.drawer.getImage(e,t,i)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(e){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(e){return e.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&this.backend.destroy(),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}]),i}();t.default=b,b.VERSION="4.4.0",b.util=r,e.exports=t.default},"./src/webaudio.js":(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=e[s]}i.default=e,t&&t.set(e,i);return i}(i("./src/util/index.js"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,r=c(e);if(t){var a=c(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p="playing",h="paused",f="finished",m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,r.Observer);var t=d(i);function i(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=t.call(this)).audioContext=null,a.offlineAudioContext=null,a.stateBehaviors=(s(n={},p,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),s(n,h,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}}),s(n,f,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),n),a.params=e,a.ac=e.audioContext||(a.supportsWebAudio()?a.getAudioContext():{}),a.lastPlay=a.ac.currentTime,a.startPosition=0,a.scheduledPause=null,a.states=(s(r={},p,Object.create(a.stateBehaviors[p])),s(r,h,Object.create(a.stateBehaviors[h])),s(r,f,Object.create(a.stateBehaviors[f])),r),a.buffer=null,a.filters=[],a.gainNode=null,a.mergedPeaks=null,a.offlineAc=null,a.peaks=null,a.playbackRate=1,a.analyser=null,a.scriptNode=null,a.source=null,a.splitPeaks=[],a.state=null,a.explicitDuration=e.duration,a.destroyed=!1,a}return l(i,[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(e){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,e)),window.WaveSurferOfflineAudioContext}}]),l(i,[{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(h),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(e){e&&e.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(e){this.state!==this.states[e]&&(this.state=this.states[e],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.setFilters(t)}},{key:"setFilters",value:function(e){this.disconnectFilters(),e&&e.length&&(this.filters=e,this.analyser.disconnect(),e.reduce(function(e,t){return e.connect(t),t},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(i.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(i.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var e=this;this.scriptNode.onaudioprocess=function(){var t=e.getCurrentTime();t>=e.getDuration()?(e.setState(f),e.fireEvent("pause")):t>=e.scheduledPause?e.pause():e.state===e.states[p]&&e.fireEvent("audioprocess",t)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=function(){}}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(e){if(e){var t=new window.Audio;if(!t.setSinkId)return Promise.reject(new Error("setSinkId is not supported in your browser"));t.autoplay=!0;var i=this.ac.createMediaStreamDestination();return this.gainNode.disconnect(),this.gainNode.connect(i),t.srcObject=i.stream,t.setSinkId(e)}return Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"setVolume",value:function(e){this.gainNode.gain.setValueAtTime(e,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(e,t,i){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"AudioContext"in window?this.offlineAc.decodeAudioData(e).then(function(e){return t(e)}).catch(function(e){return i(e)}):this.offlineAc.decodeAudioData(e,function(e){return t(e)},i)}},{key:"setPeaks",value:function(e,t){null!=t&&(this.explicitDuration=t),this.peaks=e}},{key:"setLength",value:function(e){if(!this.mergedPeaks||e!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var t,i=this.buffer?this.buffer.numberOfChannels:1;for(t=0;t<i;t++)this.splitPeaks[t]=[],this.splitPeaks[t][2*(e-1)]=0,this.splitPeaks[t][2*(e-1)+1]=0;this.mergedPeaks[2*(e-1)]=0,this.mergedPeaks[2*(e-1)+1]=0}}},{key:"getPeaks",value:function(e,t,i){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(t=t||0,i=i||e-1,this.setLength(e),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var n=this.createBuffer(1,4096,this.sampleRate);this.buffer=n.buffer}var r,a=this.buffer.length/e,s=~~(a/10)||1,o=this.buffer.numberOfChannels;for(r=0;r<o;r++){var l=this.splitPeaks[r],u=this.buffer.getChannelData(r),d=void 0;for(d=t;d<=i;d++){var c=~~(d*a),p=~~(c+a),h=u[c],f=h,m=void 0;for(m=c;m<p;m+=s){var g=u[m];g>f&&(f=g),g<h&&(h=g)}l[2*d]=f,l[2*d+1]=h,(0==r||f>this.mergedPeaks[2*d])&&(this.mergedPeaks[2*d]=f),(0==r||h<this.mergedPeaks[2*d+1])&&(this.mergedPeaks[2*d+1]=h)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(e){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=e,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[p]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(e,t){if(this.buffer)return this.scheduledPause=null,null==e&&(e=this.getCurrentTime())>=this.getDuration()&&(e=0),null==t&&(t=this.getDuration()),this.startPosition=e,this.lastPlay=this.ac.currentTime,this.state===this.states[f]&&this.setState(h),{start:e,end:t}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(e,t){if(this.buffer){this.createSource();var i=this.seekTo(e,t);e=i.start,t=i.end,this.scheduledPause=t,this.source.start(0,e),this.resumeAudioContext(),this.setState(p),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(h),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(e){this.scheduledPause=e}}]),i}();t.default=m,m.scriptBufferSize=256,e.exports=t.default},"./node_modules/debounce/index.js":e=>{function t(e,t,i){var n,r,a,s,o;function l(){var u=Date.now()-s;u<t&&u>=0?n=setTimeout(l,t-u):(n=null,i||(o=e.apply(a,r),a=r=null))}null==t&&(t=100);var u=function(){a=this,r=arguments,s=Date.now();var u=i&&!n;return n||(n=setTimeout(l,t)),u&&(o=e.apply(a,r),a=r=null),o};return u.clear=function(){n&&(clearTimeout(n),n=null)},u.flush=function(){n&&(o=e.apply(a,r),a=r=null,clearTimeout(n),n=null)},u}t.debounce=t,e.exports=t}},t={};return function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}("./src/wavesurfer.js")})()}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("video.js"),require("wavesurfer.js")):"function"==typeof define&&define.amd?define("VideojsWavesurfer",["video.js","wavesurfer.js"],t):"object"==typeof exports?exports.VideojsWavesurfer=t(require("video.js"),require("wavesurfer.js")):e.VideojsWavesurfer=t(e.videojs,e.WaveSurfer)}(self,function(e,t){return(()=>{var i={21:function(e,t,i){var n;!function(t){"use strict";function r(e,t){t=t||2;var i,n=Number(e)<0,r=e.toString();return n&&(r=r.slice(1)),i=t-r.length+1,(n?"-":"")+new Array(i).join("0").concat(r)}void 0===(n=function(){return r}.call(t,i,t,e))||(e.exports=n)}(this)},997:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={debug:!1,displayMilliseconds:!0},e.exports=t.default},537:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};i.READY="ready",i.ERROR="error",i.VOLUMECHANGE="volumechange",i.FULLSCREENCHANGE="fullscreenchange",i.TIMEUPDATE="timeupdate",i.ENDED="ended",i.PAUSE="pause",i.FINISH="finish",i.SEEK="seek",i.REDRAW="redraw",i.AUDIOPROCESS="audioprocess",i.DEVICE_READY="deviceReady",i.DEVICE_ERROR="deviceError",i.AUDIO_OUTPUT_READY="audioOutputReady",i.WAVE_READY="waveReady",i.PLAYBACK_FINISH="playbackFinish",i.ABORT="abort",i.RESIZE="resize",Object.freeze(i);var n=i;t.default=n,e.exports=t.default},200:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={setSource:function(e,t){if(this.player.usingPlugin("wavesurfer")){var i=this.player.wavesurfer().surfer.params.backend,n=e.src,r=e.peaks;switch(i){case"WebAudio":this.player.wavesurfer().load(n);break;default:t(null,e);var a=this.player.tech_.el();void 0===r?this.player.wavesurfer().load(a):this.player.wavesurfer().load(a,r)}}else t(null,e)}},e.exports=t.default},518:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i(21)),r=a(i(455));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=e<0?0:e,(isNaN(e)||e===1/0)&&(e=0);var a=(0,r.default)(1e3*e),s=a;void 0!==t&&(s=(0,r.default)(1e3*t));var o=(0,n.default)(a.hours),l=(0,n.default)(a.minutes),u=(0,n.default)(a.seconds),d=(0,n.default)(a.milliseconds,3);if(a.days>0||s.days>0){var c=(0,n.default)(a.days);return"".concat(c,":").concat(o,":").concat(l,":").concat(u)}return a.hours>0||s.hours>0?"".concat(o,":").concat(l,":").concat(u):i?"".concat(l,":").concat(u,":").concat(d):"".concat(l,":").concat(u)},e.exports=t.default},456:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=i(390))&&n.__esModule?n:{default:n};t.default=function(e,t,i){!0===i&&("error"===t?r.default.log.error(e):"warn"===t?r.default.log.warn(e):r.default.log(e))},e.exports=t.default},734:(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Wavesurfer=void 0;var r=p(i(537)),a=p(i(456)),s=p(i(518)),o=p(i(997)),l=p(i(200)),u=p(i(908)),d=p(i(390)),c=p(i(410));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=d.default.getPlugin("plugin"),_="wavesurfer",b="vjs-wavedisplay",T="WebAudio",w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,y);var t,i,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=v(e);if(t){var r=v(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return m(this,i)}}(l);function l(e,t){var i;return function(e,t){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this),i=n.call(this,e,t),e.addClass("vjs-wavesurfer"),t=d.default.mergeOptions(o.default,t),i.waveReady=!1,i.waveFinished=!1,i.liveMode=!1,i.backend=null,i.debug="true"===t.debug.toString(),i.textTracksEnabled=i.player.options_.tracks.length>0,i.displayMilliseconds=t.displayMilliseconds,t.formatTime&&"function"==typeof t.formatTime?i.setFormatTime(t.formatTime):i.setFormatTime(function(e,t){return(0,s.default)(e,t,i.displayMilliseconds)}),i.player.one(r.default.READY,i.initialize.bind(g(i))),i}return t=l,(i=[{key:"initialize",value:function(){var e=this;void 0!==this.player.bigPlayButton&&this.player.bigPlayButton.hide();var t=this.parseOptions(this.player.options_.plugins.wavesurfer);!0===this.player.options_.controls&&(this.player.controlBar.show(),this.player.controlBar.el_.style.display="flex",this.backend===T&&void 0!==this.player.controlBar.progressControl&&this.player.controlBar.progressControl.hide(),void 0!==this.player.controlBar.pictureInPictureToggle&&this.player.controlBar.pictureInPictureToggle.hide(),["currentTimeDisplay","timeDivider","durationDisplay"].forEach(function(t){void 0!==(t=e.player.controlBar[t])&&(t.el_.style.display="block",t.show())}),void 0!==this.player.controlBar.remainingTimeDisplay&&this.player.controlBar.remainingTimeDisplay.hide(),this.backend===T&&void 0!==this.player.controlBar.playToggle&&(this.player.controlBar.playToggle.on(["tap","click"],this.onPlayToggle.bind(this)),this.player.controlBar.playToggle.hide())),this.surfer=c.default.create(t),this.surfer.on(r.default.ERROR,this.onWaveError.bind(this)),this.surfer.on(r.default.FINISH,this.onWaveFinish.bind(this)),this.backend=this.surfer.params.backend,this.log("Using wavesurfer.js "+this.backend+" backend."),"microphone"in this.player.wavesurfer().surfer.getActivePlugins()&&(this.liveMode=!0,this.waveReady=!0,this.log("wavesurfer.js microphone plugin enabled."),this.player.controlBar.playToggle.show(),this.surfer.microphone.on(r.default.DEVICE_ERROR,this.onWaveError.bind(this))),this.surferReady=this.onWaveReady.bind(this),this.backend===T&&(this.surferProgress=this.onWaveProgress.bind(this),this.surferSeek=this.onWaveSeek.bind(this),this.player.muted()&&this.setVolume(0)),this.liveMode||this.setupPlaybackEvents(!0),this.player.on(r.default.VOLUMECHANGE,this.onVolumeChange.bind(this)),this.player.on(r.default.FULLSCREENCHANGE,this.onScreenChange.bind(this)),!0===this.player.options_.fluid&&(this.surfer.drawer.wrapper.className=b,this.responsiveWave=c.default.util.debounce(this.onResizeChange.bind(this),150),u.default.addEventListener(r.default.RESIZE,this.responsiveWave))}},{key:"parseOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.player.el_.getBoundingClientRect();this.originalWidth=this.player.options_.width||t.width,this.originalHeight=this.player.options_.height||t.height;var i=this.player.controlBar.height();if(!0===this.player.options_.controls&&0===i&&(i=30),void 0===e.container&&(e.container=this.player.el_),void 0===e.waveformHeight){var n=t.height;e.height=n-i}else e.height=e.waveformHeight;return e.splitChannels&&!0===e.splitChannels&&(e.height/=2),"backend"in e?this.backend=e.backend:e.backend=this.backend="MediaElement",e}},{key:"setupPlaybackEvents",value:function(e){!1===e?(this.surfer.un(r.default.READY,this.surferReady),this.backend===T&&(this.surfer.un(r.default.AUDIOPROCESS,this.surferProgress),this.surfer.un(r.default.SEEK,this.surferSeek))):!0===e&&(this.surfer.on(r.default.READY,this.surferReady),this.backend===T&&(this.surfer.on(r.default.AUDIOPROCESS,this.surferProgress),this.surfer.on(r.default.SEEK,this.surferSeek)))}},{key:"load",value:function(e,t){e instanceof Blob||e instanceof File?(this.log("Loading object: "+JSON.stringify(e)),this.surfer.loadBlob(e)):void 0!==t?this.loadPeaks(e,t):("string"==typeof e?this.log("Loading URL: "+e):this.log("Loading element: "+e),this.surfer.load(e))}},{key:"loadPeaks",value:function(e,t){var i=this;if(Array.isArray(t))this.log("Loading URL with array of peaks: "+e),this.surfer.load(e,t);else{var n={url:t,responseType:"json"};void 0!==this.player.options_.plugins.wavesurfer.xhr&&(n.xhr=this.player.options_.plugins.wavesurfer.xhr);var a=c.default.util.fetchFile(n);a.once("success",function(n){i.log("Loaded Peak Data URL: "+t),n&&n.data?i.surfer.load(e,n.data):(i.player.trigger(r.default.ERROR,"Could not load peaks data from "+t),i.log(err,"error"))}),a.once("error",function(e){i.player.trigger(r.default.ERROR,"Unable to retrieve peak data from "+t+". Status code: "+a.response.status)})}}},{key:"play",value:function(){void 0!==this.player.controlBar.playToggle&&this.player.controlBar.playToggle.contentEl()&&this.player.controlBar.playToggle.handlePlay(),this.liveMode?this.surfer.microphone.active?this.surfer.microphone.paused?(this.log("Resume microphone"),this.surfer.microphone.play()):this.pause():(this.log("Start microphone"),this.surfer.microphone.start()):(this.log("Start playback"),this.player.play(),this.surfer.play())}},{key:"pause",value:function(){void 0!==this.player.controlBar.playToggle&&this.player.controlBar.playToggle.contentEl()&&this.player.controlBar.playToggle.handlePause(),this.liveMode?(this.log("Pause microphone"),this.surfer.microphone.pause()):(this.log("Pause playback"),this.waveFinished?this.waveFinished=!1:this.surfer.pause(),this.setCurrentTime())}},{key:"dispose",value:function(){this.surfer&&(this.liveMode&&this.surfer.microphone&&(this.surfer.microphone.destroy(),this.log("Destroyed microphone plugin")),this.surfer.destroy()),this.log("Destroyed plugin")}},{key:"isDestroyed",value:function(){return this.player&&null===this.player.children()}},{key:"destroy",value:function(){this.player.dispose()}},{key:"setVolume",value:function(e){void 0!==e&&(this.log("Changing volume to: "+e),this.player.volume(e))}},{key:"exportImage",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"blob";return this.surfer.exportImage(e,t,i)}},{key:"setAudioOutput",value:function(e){var t=this;e&&this.surfer.setSinkId(e).then(function(e){t.player.trigger(r.default.AUDIO_OUTPUT_READY)}).catch(function(e){t.player.trigger(r.default.ERROR,e),t.log(e,"error")})}},{key:"getCurrentTime",value:function(){var e=this.surfer.getCurrentTime();return isNaN(e)?0:e}},{key:"setCurrentTime",value:function(e,t){if(void 0===e&&(e=this.surfer.getCurrentTime()),void 0===t&&(t=this.surfer.getDuration()),e=isNaN(e)?0:e,t=isNaN(t)?0:t,this.player.controlBar.currentTimeDisplay&&this.player.controlBar.currentTimeDisplay.contentEl()&&this.player.controlBar.currentTimeDisplay.contentEl().lastChild){var i=Math.min(e,t);this.player.controlBar.currentTimeDisplay.formattedTime_=this.player.controlBar.currentTimeDisplay.contentEl().lastChild.textContent=this._formatTime(i,t,this.displayMilliseconds)}this.textTracksEnabled&&this.player.tech_&&this.player.tech_.el_&&this.player.tech_.setCurrentTime(e)}},{key:"getDuration",value:function(){var e=this.surfer.getDuration();return isNaN(e)?0:e}},{key:"setDuration",value:function(e){void 0===e&&(e=this.surfer.getDuration()),e=isNaN(e)?0:e,this.player.controlBar.durationDisplay&&this.player.controlBar.durationDisplay.contentEl()&&this.player.controlBar.durationDisplay.contentEl().lastChild&&(this.player.controlBar.durationDisplay.formattedTime_=this.player.controlBar.durationDisplay.contentEl().lastChild.textContent=this._formatTime(e,e,this.displayMilliseconds))}},{key:"onWaveReady",value:function(){var e=this;this.waveReady=!0,this.waveFinished=!1,this.liveMode=!1,this.log("Waveform is ready"),this.player.trigger(r.default.WAVE_READY),this.backend===T&&(this.setCurrentTime(),this.setDuration(),void 0!==this.player.controlBar.playToggle&&this.player.controlBar.playToggle.contentEl()&&this.player.controlBar.playToggle.show()),this.player.loadingSpinner.contentEl()&&this.player.loadingSpinner.hide(),!0===this.player.options_.autoplay&&(this.setVolume(0),this.backend===T?this.play():this.player.play().catch(function(t){e.onWaveError(t)}))}},{key:"onWaveFinish",value:function(){var e=this;this.log("Finished playback"),this.player.trigger(r.default.PLAYBACK_FINISH),!0===this.player.options_.loop?this.backend===T&&(this.surfer.stop(),this.play()):(this.waveFinished=!0,this.backend===T&&(this.pause(),this.player.trigger(r.default.ENDED),this.surfer.once(r.default.SEEK,function(){void 0!==e.player.controlBar.playToggle&&e.player.controlBar.playToggle.removeClass("vjs-ended"),e.player.trigger(r.default.PAUSE)})))}},{key:"onWaveProgress",value:function(e){this.setCurrentTime()}},{key:"onWaveSeek",value:function(){this.setCurrentTime()}},{key:"onWaveError",value:function(e){e.name&&"AbortError"===e.name||"DOMException"===e.name&&e.message.startsWith("The operation was aborted")?this.player.trigger(r.default.ABORT,e):(this.player.trigger(r.default.ERROR,e),this.log(e,"error"))}},{key:"onPlayToggle",value:function(){void 0!==this.player.controlBar.playToggle&&this.player.controlBar.playToggle.hasClass("vjs-ended")&&this.player.controlBar.playToggle.removeClass("vjs-ended"),this.surfer.isPlaying()?this.pause():this.play()}},{key:"onVolumeChange",value:function(){var e=this.player.volume();this.player.muted()&&(e=0),this.surfer.setVolume(e)}},{key:"onScreenChange",value:function(){var e=this,t=this.player.setInterval(function(){var i,n;if(e.player.isFullscreen()||(i=e.originalWidth,n=e.originalHeight),e.waveReady){if(e.liveMode&&!e.surfer.microphone.active)return;e.redrawWaveform(i,n)}e.player.clearInterval(t)},100)}},{key:"onResizeChange",value:function(){void 0!==this.surfer&&this.redrawWaveform()}},{key:"redrawWaveform",value:function(e,t){if(!this.isDestroyed()){if(this.player.el_){var i=this.player.el_.getBoundingClientRect();void 0===e&&(e=i.width),void 0===t&&(t=i.height)}this.surfer.drawer.destroy(),this.surfer.params.width=e,this.surfer.params.height=t-this.player.controlBar.height(),this.surfer.createDrawer(),this.surfer.drawer.wrapper.className=b,this.surfer.drawBuffer(),this.surfer.drawer.progress(this.surfer.backend.getPlayedPercents())}}},{key:"log",value:function(e,t){(0,a.default)(e,t,this.debug)}},{key:"setFormatTime",value:function(e){this._formatTime=e,d.default.setFormatTime(this._formatTime)}}])&&h(t.prototype,i),l}();t.Wavesurfer=w,w.VERSION="3.5.0",d.default.Wavesurfer=w,void 0===d.default.getPlugin(_)&&d.default.registerPlugin(_,w),d.default.use("*",function(e){return l.default.player=e,l.default})},908:(e,t,i)=>{var n;n="undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},e.exports=n},455:e=>{"use strict";e.exports=(e=>{if("number"!=typeof e)throw new TypeError("Expected a number");const t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(1e3*e)%1e3,nanoseconds:t(1e6*e)%1e3}})},390:t=>{"use strict";t.exports=e},410:e=>{"use strict";e.exports=t}},n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={exports:{}};return i[e].call(t.exports,t,t.exports,r),t.exports}return r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r(734)})()}),function(e,t){function i(e){return function(){var t={method:e},i=Array.prototype.slice.call(arguments);/^get/.test(e)?(n.assert(i.length>0,"Get methods require a callback."),i.unshift(t)):(/^set/.test(e)&&(n.assert(0!==i.length,"Set methods require a value."),t.value=i[0]),i=[t]),this.send.apply(this,i)}}var n={DEBUG:!1,VERSION:"0.0.11",CONTEXT:"player.js"};n.POST_MESSAGE=!!e.postMessage,n.origin=function(t){return"//"===t.substr(0,2)&&(t=e.location.protocol+t),t.split("/").slice(0,3).join("/")},n.addEvent=function(e,t,i){e&&(e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i)},n.log=function(){n.log.history=n.log.history||[],n.log.history.push(arguments),e.console&&n.DEBUG&&e.console.log(Array.prototype.slice.call(arguments))},n.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},n.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.isNone=function(e){return null==e},n.has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.indexOf=function(e,t){if(null==e)return-1;var i=0,n=e.length;if(Array.prototype.IndexOf&&e.indexOf===Array.prototype.IndexOf)return e.indexOf(t);for(;n>i;i++)if(e[i]===t)return i;return-1},n.assert=function(e,t){if(!e)throw t||"Player.js Assert Failed"},n.Keeper=function(){this.init()},n.Keeper.prototype.init=function(){this.data={}},n.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},n.Keeper.prototype.has=function(e,t){if(!this.data.hasOwnProperty(e))return!1;if(n.isNone(t))return!0;for(var i=this.data[e],r=0;r<i.length;r++)if(i[r].id===t)return!0;return!1},n.Keeper.prototype.add=function(e,t,i,n,r){var a={id:e,event:t,cb:i,ctx:n,one:r};this.has(t)?this.data[t].push(a):this.data[t]=[a]},n.Keeper.prototype.execute=function(e,t,i,r){if(!this.has(e,t))return!1;for(var a=[],s=[],o=0;o<this.data[e].length;o++){var l=this.data[e][o];n.isNone(t)||!n.isNone(t)&&l.id===t?(s.push({cb:l.cb,ctx:l.ctx?l.ctx:r,data:i}),!1===l.one&&a.push(l)):a.push(l)}0===a.length?delete this.data[e]:this.data[e]=a;for(var u=0;u<s.length;u++){var d=s[u];d.cb.call(d.ctx,d.data)}},n.Keeper.prototype.on=function(e,t,i,n){this.add(e,t,i,n,!1)},n.Keeper.prototype.one=function(e,t,i,n){this.add(e,t,i,n,!0)},n.Keeper.prototype.off=function(e,t){var i=[];if(!this.data.hasOwnProperty(e))return i;for(var r=[],a=0;a<this.data[e].length;a++){var s=this.data[e][a];n.isNone(t)||s.cb===t?n.isNone(s.id)||i.push(s.id):r.push(s)}return 0===r.length?delete this.data[e]:this.data[e]=r,i},n.Player=function(e,t){return this instanceof n.Player?void this.init(e,t):new n.Player(e,t)},n.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},n.EVENTS.all=function(){var e=[];for(var t in n.EVENTS)n.has(n.EVENTS,t)&&n.isString(n.EVENTS[t])&&e.push(n.EVENTS[t]);return e},n.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"},n.METHODS.all=function(){var e=[];for(var t in n.METHODS)n.has(n.METHODS,t)&&n.isString(n.METHODS[t])&&e.push(n.METHODS[t]);return e},n.READIED=[],n.Player.prototype.init=function(i,r){var a=this;n.isString(i)&&(i=t.getElementById(i)),this.elem=i,n.assert("IFRAME"===i.nodeName,'playerjs.Player constructor requires an Iframe, got "'+i.nodeName+'"'),n.assert(i.src,"playerjs.Player constructor requires a Iframe with a 'src' attribute."),this.origin=n.origin(i.src),this.keeper=new n.Keeper,this.isReady=!1,this.queue=[],this.events=n.EVENTS.all(),this.methods=n.METHODS.all(),n.POST_MESSAGE?n.addEvent(e,"message",function(e){a.receive(e)}):n.log("Post Message is not Available."),n.indexOf(n.READIED,i.src)>-1?a.loaded=!0:this.elem.onload=function(){a.loaded=!0}},n.Player.prototype.send=function(e,t,i){if(e.context=n.CONTEXT,e.version=n.VERSION,t){var r=this.keeper.getUUID();e.listener=r,this.keeper.one(r,e.method,t,i)}return this.isReady||"ready"===e.value?(n.log("Player.send",e,this.origin),!0===this.loaded&&this.elem.contentWindow.postMessage(JSON.stringify(e),this.origin),!0):(n.log("Player.queue",e),this.queue.push(e),!1)},n.Player.prototype.receive=function(e){if(n.log("Player.receive",e),e.origin!==this.origin)return!1;var t;try{t=JSON.parse(e.data)}catch(e){return!1}return t.context===n.CONTEXT&&("ready"===t.event&&t.value&&t.value.src===this.elem.src&&this.ready(t),void(this.keeper.has(t.event,t.listener)&&this.keeper.execute(t.event,t.listener,t.value,this)))},n.Player.prototype.ready=function(e){if(!0===this.isReady)return!1;e.value.events&&(this.events=e.value.events),e.value.methods&&(this.methods=e.value.methods),this.isReady=!0,this.loaded=!0;for(var t=0;t<this.queue.length;t++){var i=this.queue[t];n.log("Player.dequeue",i),"ready"===e.event&&this.keeper.execute(i.event,i.listener,!0,this),this.send(i)}this.queue=[]},n.Player.prototype.on=function(e,t,i){var n=this.keeper.getUUID();return"ready"===e?this.keeper.one(n,e,t,i):this.keeper.on(n,e,t,i),this.send({method:"addEventListener",value:e,listener:n}),!0},n.Player.prototype.off=function(e,t){var i=this.keeper.off(e,t);if(n.log("Player.off",i),i.length>0)for(var r in i)return this.send({method:"removeEventListener",value:e,listener:i[r]}),!0;return!1},n.Player.prototype.supports=function(e,t){n.assert(n.indexOf(["method","event"],e)>-1,'evtOrMethod needs to be either "event" or "method" got '+e),t=n.isArray(t)?t:[t];for(var i="event"===e?this.events:this.methods,r=0;r<t.length;r++)if(-1===n.indexOf(i,t[r]))return!1;return!0};for(var r=0,a=n.METHODS.all().length;a>r;r++){var s=n.METHODS.all()[r];n.Player.prototype.hasOwnProperty(s)||(n.Player.prototype[s]=i(s))}n.addEvent(e,"message",function(e){var t;try{t=JSON.parse(e.data)}catch(e){return!1}return t.context===n.CONTEXT&&void("ready"===t.event&&t.value&&t.value.src&&n.READIED.push(t.value.src))}),n.Receiver=function(e,t){this.init(e,t)},n.Receiver.prototype.init=function(i,r){var a=this;this.isReady=!1,this.origin=n.origin(t.referrer),this.methods={},this.supported={events:i||n.EVENTS.all(),methods:r||n.METHODS.all()},this.eventListeners={},this.reject=!(e.self!==e.top&&n.POST_MESSAGE),this.reject||n.addEvent(e,"message",function(e){a.receive(e)})},n.Receiver.prototype.receive=function(t){if(t.origin!==this.origin)return!1;var i={};if(n.isObject(t.data))i=t.data;else try{i=e.JSON.parse(t.data)}catch(e){n.log("JSON Parse Error",e)}if(n.log("Receiver.receive",t,i),!i.method)return!1;if(i.context!==n.CONTEXT)return!1;if(-1===n.indexOf(n.METHODS.all(),i.method))return this.emit("error",{code:2,msg:'Invalid Method "'+i.method+'"'}),!1;var r=n.isNone(i.listener)?null:i.listener;if("addEventListener"===i.method)this.eventListeners.hasOwnProperty(i.value)?-1===n.indexOf(this.eventListeners[i.value],r)&&this.eventListeners[i.value].push(r):this.eventListeners[i.value]=[r],"ready"===i.value&&this.isReady&&this.ready();else if("removeEventListener"===i.method){if(this.eventListeners.hasOwnProperty(i.value)){var a=n.indexOf(this.eventListeners[i.value],r);a>-1&&this.eventListeners[i.value].splice(a,1),0===this.eventListeners[i.value].length&&delete this.eventListeners[i.value]}}else this.get(i.method,i.value,r)},n.Receiver.prototype.get=function(e,t,i){var n=this;if(!this.methods.hasOwnProperty(e))return this.emit("error",{code:3,msg:'Method Not Supported"'+e+'"'}),!1;var r=this.methods[e];if("get"===e.substr(0,3)){r.call(this,function(t){n.send(e,t,i)})}else r.call(this,t)},n.Receiver.prototype.on=function(e,t){this.methods[e]=t},n.Receiver.prototype.send=function(t,i,r){if(n.log("Receiver.send",t,i,r),this.reject)return n.log("Receiver.send.reject",t,i,r),!1;var a={context:n.CONTEXT,version:n.VERSION,event:t};n.isNone(i)||(a.value=i),n.isNone(r)||(a.listener=r);var s=JSON.stringify(a);e.parent.postMessage(s,""===this.origin?"*":this.origin)},n.Receiver.prototype.emit=function(e,t){if(!this.eventListeners.hasOwnProperty(e))return!1;n.log("Instance.emit",e,t,this.eventListeners[e]);for(var i=0;i<this.eventListeners[e].length;i++){var r=this.eventListeners[e][i];this.send(e,t,r)}return!0},n.Receiver.prototype.ready=function(){n.log("Receiver.ready"),this.isReady=!0;var t={src:e.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",t)||this.send("ready",t)},n.HTML5Adapter=function(e){return this instanceof n.HTML5Adapter?void this.init(e):new n.HTML5Adapter(e)},n.HTML5Adapter.prototype.init=function(e){n.assert(e,"playerjs.HTML5Adapter requires a video element");var t=this.receiver=new n.Receiver;e.addEventListener("playing",function(){t.emit("play")}),e.addEventListener("pause",function(){t.emit("pause")}),e.addEventListener("ended",function(){t.emit("ended")}),e.addEventListener("timeupdate",function(){t.emit("timeupdate",{seconds:e.currentTime,duration:e.duration})}),e.addEventListener("progress",function(){t.emit("buffered",{percent:e.buffered.length})}),t.on("play",function(){e.play()}),t.on("pause",function(){e.pause()}),t.on("getPaused",function(t){t(e.paused)}),t.on("getCurrentTime",function(t){t(e.currentTime)}),t.on("setCurrentTime",function(t){e.currentTime=t}),t.on("getDuration",function(t){t(e.duration)}),t.on("getVolume",function(t){t(100*e.volume)}),t.on("setVolume",function(t){e.volume=t/100}),t.on("mute",function(){e.muted=!0}),t.on("unmute",function(){e.muted=!1}),t.on("getMuted",function(t){t(e.muted)}),t.on("getLoop",function(t){t(e.loop)}),t.on("setLoop",function(t){e.loop=t})},n.HTML5Adapter.prototype.ready=function(){this.receiver.ready()},n.JWPlayerAdapter=function(e){return this instanceof n.JWPlayerAdapter?void this.init(e):new n.JWPlayerAdapter(e)},n.JWPlayerAdapter.prototype.init=function(e){n.assert(e,"playerjs.JWPlayerAdapter requires a player object");var t=this.receiver=new n.Receiver;this.looped=!1,e.on("pause",function(){t.emit("pause")}),e.on("play",function(){t.emit("play")}),e.on("time",function(e){var i=e.position,n=e.duration;if(!i||!n)return!1;var r={seconds:i,duration:n};t.emit("timeupdate",r)});var i=this;e.on("complete",function(){!0===i.looped?e.seek(0):t.emit("ended")}),e.on("error",function(){t.emit("error")}),t.on("play",function(){e.play(!0)}),t.on("pause",function(){e.pause(!0)}),t.on("getPaused",function(t){t(e.getState().toLowerCase()!=="PLAYING".toLowerCase())}),t.on("getCurrentTime",function(t){t(e.getPosition())}),t.on("setCurrentTime",function(t){e.seek(t)}),t.on("getDuration",function(t){t(e.getDuration())}),t.on("getVolume",function(t){t(e.getVolume())}),t.on("setVolume",function(t){e.setVolume(t)}),t.on("mute",function(){e.setMute(!0)}),t.on("unmute",function(){e.setMute(!1)}),t.on("getMuted",function(t){t(!0===e.getMute())}),t.on("getLoop",function(e){e(this.looped)},this),t.on("setLoop",function(e){this.looped=e},this)},n.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()},n.MockAdapter=function(){return this instanceof n.MockAdapter?void this.init():new n.MockAdapter},n.MockAdapter.prototype.init=function(){var e={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){e.interval=setInterval(function(){e.currentTime+=.25,e.timeupdate({seconds:e.currentTime,duration:e.duration})},250),e.playing=!0},pause:function(){clearInterval(e.interval),e.playing=!1}},t=this.receiver=new n.Receiver;t.on("play",function(){var t=this;e.play(),this.emit("play"),e.timeupdate=function(e){t.emit("timeupdate",e)}}),t.on("pause",function(){e.pause(),this.emit("pause")}),t.on("getPaused",function(t){t(!e.playing)}),t.on("getCurrentTime",function(t){t(e.currentTime)}),t.on("setCurrentTime",function(t){e.currentTime=t}),t.on("getDuration",function(t){t(e.duration)}),t.on("getVolume",function(t){t(e.volume)}),t.on("setVolume",function(t){e.volume=t}),t.on("mute",function(){e.mute=!0}),t.on("unmute",function(){e.mute=!1}),t.on("getMuted",function(t){t(e.mute)}),t.on("getLoop",function(t){t(e.loop)}),t.on("setLoop",function(t){e.loop=t})},n.MockAdapter.prototype.ready=function(){this.receiver.ready()},n.VideoJSAdapter=function(e){return this instanceof n.VideoJSAdapter?void this.init(e):new n.VideoJSAdapter(e)},n.VideoJSAdapter.prototype.init=function(e){n.assert(e,"playerjs.VideoJSReceiver requires a player object");var t=this.receiver=new n.Receiver;e.on("pause",function(){t.emit("pause")}),e.on("play",function(){t.emit("play")}),e.on("timeupdate",function(i){var n=e.currentTime(),r=e.duration();if(!n||!r)return!1;var a={seconds:n,duration:r};t.emit("timeupdate",a)}),e.on("ended",function(){t.emit("ended")}),e.on("error",function(){t.emit("error")}),t.on("play",function(){e.play()}),t.on("pause",function(){e.pause()}),t.on("getPaused",function(t){t(e.paused())}),t.on("getCurrentTime",function(t){t(e.currentTime())}),t.on("setCurrentTime",function(t){e.currentTime(t)}),t.on("getDuration",function(t){t(e.duration())}),t.on("getVolume",function(t){t(100*e.volume())}),t.on("setVolume",function(t){e.volume(t/100)}),t.on("mute",function(){e.volume(0)}),t.on("unmute",function(){e.volume(1)}),t.on("getMuted",function(t){t(0===e.volume())}),t.on("getLoop",function(t){t(e.loop())}),t.on("setLoop",function(t){e.loop(t)})},n.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()},"function"==typeof define&&define.amd?define(function(){return n}):"object"==typeof module&&module.exports?module.exports=n:e.playerjs=n}(window,document);var backend_url="https://adilo.bigcommand.com";function getSourceHostname(){if(location.ancestorOrigins&&location.ancestorOrigins.length)return new URL(location.ancestorOrigins[0]).hostname;const e=window.self!==window.top?document.referrer:"";return e?new URL(e).hostname:""}function roundUp(e,t){return Math.ceil(e*t)/t}function getInteractionClass(){let e=player.currentTime();return 0==e?{class:"before",time:e}:e>0&&e<duration?{class:"during",time:e}:e==video.duration?{class:"after",time:e}:void 0}function getDuration(){duration=parseInt(roundUp(video.duration,1)),watched.length=duration,watched.fill(0)}function registerWatchDuration(){var e=parseInt(player.currentTime());watched[e]=1;var t=watched.reduce(function(e,t){return e+t},0);if(t>=1&&!reportedView){let e=new FormData;e.append("video_id",video.id),e.append("watched_time",t),getSourceHostname()&&e.append("embed_source",getSourceHostname()),fetch(backend_url+"/api/analytics/views/store",{method:"POST",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:e}).then(e=>e.json()).then(e=>{reportedView=!0}).catch(e=>{console.error("Error:",e)})}clearTimeout(debounceTimer),debounceTimer=setTimeout(()=>{let e=new FormData;e.append("video_id",video.id),e.append("watched_time",t),fetch(backend_url+"/api/analytics/views/update",{method:"POST",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:e}).then(e=>e.json()).then(e=>{console.log("watch time update ",e)}).catch(e=>{console.error("Error:",e)})},3e3)}function registerInteraction(e,t,i,n={}){parent.postMessage({eventName:"CTAInteraction",payload:{type:e,phase:t,timestamp:i,extra:n},media:publishableMediaData},"*");let r=new FormData;r.append("video_id",video.id),r.append("event_type",e),r.append("cta_class",t),r.append("time",Math.floor(i)),r.append("data",JSON.stringify(n)),getSourceHostname()&&r.append("embed_source",getSourceHostname()),fetch(backend_url+"/api/analytics/interactions/store",{method:"POST",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:r}).then(e=>e.json()).then(e=>{console.log("Interactions",e)}).catch(e=>{console.error("Interactions Error:",e)})}function countInteractionDisplays(e,t,i,n={}){if(parent.postMessage({eventName:"CTADisplay",payload:{type:e,phase:t,timestamp:i,extra:n},media:publishableMediaData},"*"),"during"==t&&reportedDuringDisplays[e])return;let r=new FormData;r.append("video_id",video.id),r.append("interaction_type",e),r.append("display_class",t),r.append("time",Math.floor(i)),r.append("data",JSON.stringify(n)),getSourceHostname()&&r.append("embed_source",getSourceHostname()),fetch(backend_url+"/api/analytics/interactions/display/store",{method:"POST",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:r}).then(e=>e.json()).then(t=>{reportedDuringDisplays[e]=!0}).catch(e=>{console.error("Interaction Display Error:",e)}),"during"==t&&(reportedDuringDisplays[e]=!0)}function playerSeeked(){parent.postMessage({eventName:"seeked",timestamp:player.currentTime(),media:publishableMediaData},"*")}function handleMetaDataloaded(){publishablePlayerData.videoWidth=player.videoWidth(),publishablePlayerData.videoHeight=player.videoHeight(),parent.postMessage({eventName:"loadedmetadata",media:publishableMediaData,player:publishablePlayerData},"*")}function playerVolumeChanged(){parent.postMessage({eventName:"volumeChange",level:player.volume(),media:publishableMediaData},"*")}function playerFullScreenChanged(){parent.postMessage({eventName:"fullScreenChange",fullscreen:player.isFullscreen(),media:publishableMediaData},"*")}function playerResolutionChanged(e,t){parent.postMessage({eventName:"resolutionChange",resolution:t,media:publishableMediaData},"*")}function playerSubtitlesChanged(e,t){let{label:i,language:n,mode:r}=t||{label:null,language:null,mode:"disabled"};parent.postMessage({eventName:"subtitleChange",activeTrack:{label:i,language:n,mode:r},media:publishableMediaData},"*")}function playerRateChanged(){parent.postMessage({eventName:"playbackSpeedChange",rate:player.playbackRate(),media:publishableMediaData},"*")}function playerChapterChanged(e,t){parent.postMessage({eventName:"chapterChange",chapter:t,media:publishableMediaData},"*")}function handleCTASkipped(e,t){parent.postMessage({eventName:"CTASkip",payload:t,media:publishableMediaData},"*")}function initializeSubtitleChangeEvent(){var e;player&&player.textTracks&&player.textTracks().addEventListener("change",function(t){clearTimeout(e);let i=Array.from(player.textTracks()).find(function(e){return"captions"===e.kind&&"showing"===e.mode});e=setTimeout(function(){player.trigger("subtitleChange",i)},10)})}function handleCallToActionClick(e,t,i=null){registerInteraction(e,t,player.currentTime(),{url:i})}function evaluateCurrentEngagement(e){return lastEngagementLogTime=player.currentTime(),playbackEnabled&&store.set("video_"+video.id+":playback",currentTime),event}function PlayerPausePlay(){if(document.addEventListener("visibilitychange",function(e){"1"!=project_setting.pause_player&&"true"!=project_setting.pause_player||("hidden"===document.visibilityState?player.pause():player.play())}),!queryParams.has("editor"));window.addEventListener("message",function(e){let t=project_setting.sticky_player,i=project_setting.pause_player;if(player&&void 0!==e.data.visibility){var n=player.paused();"true"===e.data.visibility||!0===e.data.visibility?n&&(parent.postMessage({sticy:1!==t&&"true"!=t,pause:1===i||"true"==i,status:n,media:publishableMediaData},"*"),player.currentTime(player.currentTime()),player.play()):n||(parent.postMessage({sticy:1===t||"true"==t,pause:1===i||"true"==i,status:n,media:publishableMediaData},"*"),player.pause())}})}function forceHd(){for(var e=[],t=document.querySelectorAll(".vjs-quality-selector ul.vjs-menu-content li"),i=0;i<t.length;i++){var n=t[i].innerText.split(",");"Auto"!==n[0]&&"Quality"!==n[0]&&e.push(i)}t[e.sort((e,t)=>t-e)[0]].click()}function selectQuality(e,t=!1){if(player.trigger("resolutionChange",e),"Auto"===e&&("true"==video.player_options.force_hd||1==video.player_options.force_hd))return!1;if(t&&forceHd(),qualityLevels.length>0)for(var i=document.querySelectorAll(".vjs-quality-selector ul.vjs-menu-content li"),n=0;n<i.length;n++){i[n].innerText.split(",")[0]==e&&i[n].click()}settingsMenuActive=!1}function getQualities(){1==video.player_options.force_hd||"true"==video.player_options.force_hd?selectQuality("hd",!0):selectQuality("Auto",!1)}function setTimeByUrl(e){let t=0;queryParams.has("start")&&(t=queryParams.get("start"),e.currentTime(t),canModifyTime=!1)}function screenTriggers(){$("body").on("click",".vjs-fullscreen-control",function(){fullScreenOrWindow()})}function adjustOverlay(){var e=$(".video-container"),t=$(".videojs-text-overlay");if(e&&t){var i=e.height(),n=e.width(),r=i<n?i:n;t.css({fontSize:6*r/100})}showOverlay=!0}function setThumbnailWidthAndHeight(){if(window.matchMedia("(min-width: 1168px)").matches){var e=document.createElement("STYLE"),t=document.createTextNode("@media only screen and (min-width: 1168px).entry .entry-content > iframe[style] {max-width: calc(6 * (100vw / 12) - 28px) !important;]max-height: calc(6 * (100vh / 12) - 28px) !important;}@media only screen and (min-width: 768px).entry .entry-content > iframe[style] {max-width: calc(8 * (100vw / 12) - 28px) !important;]max-height: calc(8 * (100vh / 12) - 28px) !important;}@media only screen and (min-width: 1168px).entry .entry-content > , .entry .entry-summary >  {max-width: calc(6 * (100vw / 12) - 28px);max-height: calc(6 * (100vh / 12) - 28px);}@media only screen and (min-width: 768px).entry .entry-content > , .entry .entry-summary >  {max-width: calc(8 * (100vw / 12) - 28px);max-height: calc(8 * (100vh / 12) - 28px);}");e.appendChild(t),document.head.appendChild(e)}else if(window.matchMedia("(min-width: 768px)").matches){e=document.createElement("STYLE"),t=document.createTextNode("@media only screen and (min-width: 1168px).entry .entry-content > iframe[style] {max-width: calc(6 * (100vw / 12) - 28px) !important;]max-height: calc(6 * (100vh / 12) - 28px) !important;}@media only screen and (min-width: 768px).entry .entry-content > iframe[style] {max-width: calc(8 * (100vw / 12) - 28px) !important;]max-height: calc(8 * (100vh / 12) - 28px) !important;}@media only screen and (min-width: 1168px).entry .entry-content > , .entry .entry-summary >  {max-width: calc(6 * (100vw / 12) - 28px);max-height: calc(6 * (100vh / 12) - 28px);}@media only screen and (min-width: 768px).entry .entry-content > , .entry .entry-summary >  {max-width: calc(8 * (100vw / 12) - 28px);max-height: calc(8 * (100vh / 12) - 28px);}");e.appendChild(t),document.head.appendChild(e)}}function setPlaybarPosition(e){var t=e;e=0,playbarPopupsPosition=parseInt(e)+42+"px";var i=$(".vjs-control-bar"),n=$(".vjs-text-track-display");i.css({position:"absolute",bottom:e+"px",display:"inline-flex !important",zIndex:1}).show(),$("#unMute_div").css({position:"absolute ",bottom:playbarPopupsPosition,right:"15px"}),$(".bottom-right").css({position:"absolute",bottom:playbarPopupsPosition,right:"15px",zIndex:0}).show(),$(".bottom-right").css({position:"absolute",bottom:playbarPopupsPosition,right:"15px",zIndex:0}).show(),$(".bottom-left").css({position:"absolute",bottom:playbarPopupsPosition,left:"15px",zIndex:0}).show(),$(".top-left").css({position:"absolute",top:playbarPopupsPosition,left:"15px",zIndex:0}).show(),$(".top-right").css({position:"absolute",top:playbarPopupsPosition,right:"15px",zIndex:0}).show(),n.css({position:"absolute",top:"auto",bottom:parseInt(t<1?0:t-40)+("hide"===video.player_options.control_visibility?5:45)+"px"})}function ifEmbedPage(){let e=window.location.href.includes("watch");if("window"==screenMode&&e){let e=setInterval(()=>{let t=document.getElementById("vjs_video_3");t&&(t.style.paddingTop="0px",clearInterval(e))},1e3)}}function setVideoWidthHeight(){let e=$("video");e.height("initial"),$(".vjs-poster").css("transition","0.5s"),1==video.is_audio&&queryParams.has("minified")&&$(".vjs-poster").css({"background-size":"cover","background-repeat":"no-repeat"}),setPlaybarPosition(e.css("marginBottom")?e.css("marginBottom").replace("px",""):"0"),e.height("inherit")}function fullScreenOrWindow(){let e=$(document).find(".vjs-fullscreen-control");e.length>0&&setTimeout(()=>{let t="Fullscreen"==e.attr("title")?"window":"full";t=t,setVideoWidthHeight()},1e3),ifEmbedPage()}function record_event(e){if(video&&("true"===video.player_options.autoplay||!0===video.player_options.autoplay||queryParams.has("autoplay")&&1==queryParams.get("autoplay")||queryParams.has("autoplay")&&"true"==queryParams.get("autoplay")||queryParams.has("autoplay")&&1==queryParams.get("autoplay")||queryParams.has("autoplay")&&"1"==queryParams.get("autoplay")))return!1;if(void 0!==video.id){let n=window.location.search.split("?");var t=null;t="q"==n[1]?"qrcode":"b"==n[1]?"bubble":"";var i={video_id:video.id,project_id:video.video_project?video.video_project.id:0,team_id:video.team,user_id:video.owner,event_offset_time:currentTime,watch_session_id:watchSessionId,status:t};const r=Object.assign({},i,e);r.experiment_id=video.experiment_id?video.experiment_id:null,r.experiment_click_id=video.experiment_click_id?video.experiment_click_id:null,r.video_experiment_id=video.video_experiment_id?video.video_experiment_id:null;try{$.ajax({type:"post",url:EMBED_URL+"api/log",data:r,success:function(e){},error:function(e){}})}catch(e){}}}function setUserUniqueId(){if(!cookie_data_exists("user-cookie"))try{$.ajax({type:"post",url:EMBED_URL+"api/get-user-cookie",success:function(e){const t=new Date;t.setTime(t.getTime()+864e7);let i="expires="+t.toUTCString();document.cookie="user-cookie="+e+";"+i+";path=/"},error:function(e){console.log(e)}})}catch(e){}}function assignWatchSessionId(){watchSessionId=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function addSettingsButton(){var e,t;e=videojs.getComponent("Button"),t=videojs.extend(e,{constructor:function(t,i){e.call(this,t,i)},buildCSSClass:function(){return"vjs-icon-cog vjs-custom-settings-menu-button video-setting vjs-control vjs-button"},handleClick:function(e){$(document).find(".vjs-chapterList, .vjs-share-menu, .vjs-custom-setting-modal").remove(),settingsMenuActive?settingsMenuActive=!1:settingsMenuActive="main",showChapters=!1,adiloPopupVisible=!1,generate_video_quality_playback_html()}}),videojs.registerComponent("settingsButton",t);player.controlBar.addChild(new t)}function addAdiloButton(){var e,t;e=videojs.getComponent("Button"),t=videojs.extend(e,{constructor:function(t,i){e.call(this,t,i)},buildCSSClass:function(){return"vjs-icon-adilo vjs-control vjs-button"},handleClick:function(e){adiloPopupVisible=!adiloPopupVisible,showChapters=!1,settingsMenuActive=!1;var t='<div class="vjs-bg vjs-adilo-popup" style="bottom: '+playbarPopupsPosition+'px;"><p style="color: white !important;">We are Adilo.. the future of videos! Get unlimited 4K video hosting and adaptive streaming with advanced tools to grow your business</p> <a href="https://www.adilo.com/" target="_blank">Learn more</a></div>';$(document).find(".vjs-chapterList, .vjs-share-menu, .vjs-custom-setting-modal").remove(),$(document).find(".vjs-adilo-popup").length>0?$(document).find(".videojs-wrap .vjs-adilo-popup").remove():$(document).find(".videojs-wrap").append(t)}}),videojs.registerComponent("adiloButton",t);player.controlBar.addChild(new t)}function generate_video_quality_playback_html(){if(playerOptions_&&player&&settingsMenuActive){var e='<div class="vjs-settings vjs-bg vjs-settings-modal vjs-custom-setting-modal" style="bottom: '+playbarPopupsPosition+'px">';"main"!=settingsMenuActive||fadeOut||(e+='<div class="vjs-settings-main"><ul>',e+='<li class="vjs-playback-speed vjs-playback-speed-click" data-type="playback">\n                                Playback speed\n                                <span>'+(1==player.playbackRate()?"Normal":player.playbackRate()+"x")+'</span>\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/arrow_right_player.svg"/>\n                                </i>\n                            </li>',qualityLevels.length>0&&0==video.is_audio&&(e+='<li class="vjs-settings-main-quality vjs-playback-speed-click" data-type="quality">Quality',e+="<span>"+(qualityIsAuto()?"Auto":"")+" "+qualityLevels[qualityLevels.selectedIndex].height+"p</span>",e+='<i><img src="'+BASE_URL+'/embed/image/arrow_right_player.svg"/></i>'),e+="</ul></div>"),e+="</div>"}$(document).find(".vjs-custom-setting-modal").remove(),$(document).find(".videojs-wrap .vjs-custom-skin").append(e)}function qualityIsAuto(){return"true"!=video.player_options.force_hd&&($(".vjs-quality-selector ul li:last-of-type")?$(".vjs-quality-selector ul li:last-of-type").text().indexOf("selected")>=0:void 0)}function addShareButton(){var e,t;e=videojs.getComponent("Button"),t=videojs.extend(e,{constructor:function(t,i){e.call(this,t,i)},buildCSSClass:function(){return"vjs-icon-custom-share vjs-control vjs-button"},handleClick:function(e){shareMenuVisible=!shareMenuVisible,showChapters=!1,$(document).find(".vjs-chapterList, .vjs-share-menu, .vjs-custom-setting-modal").remove(),$(document).find(".vjs-share-menu").length>0?$(document).find(".vjs-share-menu").remove():generate_share_btn_html(e)}}),videojs.registerComponent("shareButton",t);player.controlBar.addChild(new t)}function addDownloadButton(){var e,t;e=videojs.getComponent("Button"),t=videojs.extend(e,{constructor:function(t,i){e.call(this,t,i)},buildCSSClass:function(){return"vjs-vjsdownload vjs-control vjs-button"},handleClick:function(e){$(document).find(".vjs-chapterList, .vjs-share-menu, .vjs-custom-setting-modal").remove();showDownloadVideo=!0,generate_download_modal()}}),videojs.registerComponent("shareButton",t);player.controlBar.addChild(new t);$(document).find(".vjs-vjsdownload").css("background-color",video.player_options.color),$(document).find(".vjs-vjsdownload").attr("style","background-color : "+video.player_options.color+"!important")}function generate_share_btn_html(e){if(shareMenuVisible){var t='<div class="vjs-share-menu vjs-bg"><ul>\n                        <li class="head">Share this Video</li>';t+=' <li>\n                            <a\n                                    @click="shareMenuVisible = false;$refs.videoPlayer.player.pause();" class="share-from-ambed" data-type="facebook"\n                                    href="https://facebook.com/sharer.php?u='+video.embed_url+'"\n                                    target="_blank"\n                            >\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/share/facebook.svg"/>\n                                </i>Facebook\n                            </a>\n                        </li>',t+='<li>\n                            <a\n                                    @click="shareMenuVisible = false;$refs.videoPlayer.player.pause();" class="share-from-ambed" data-type="twitter"\n                                    href="https://twitter.com/intent/tweet?url='+video.embed_url+'&via=Adilo"\n                                    target="_blank"\n                            >\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/share/twitter.svg"/>\n                                </i>Twitter\n                            </a>\n                        </li>',t+='<li>\n                            <a\n                                    @click="shareMenuVisible = false;$refs.videoPlayer.player.pause();" class="share-from-ambed" data-type="linkedin"\n                                    href="https://www.linkedin.com/sharing/share-offsite/?url='+video.embed_url+'"\n                                    target="_blank"\n                            >\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/share/linkedin.svg"/>\n                                </i>LinkedIn\n                            </a>\n                        </li>',t+='<li>\n                            <a\n                                    @click="shareMenuVisible = false;$refs.videoPlayer.player.pause();" class="share-from-ambed" data-type="tumblr"\n                                    href="https://www.tumblr.com/share/link?url='+video.embed_url+'"\n                                    target="_blank"\n                            >\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/share/tumblr.svg"/>\n                                </i>Tumblr\n                            </a>\n                        </li>',t+=' <li>\n                            <a\n                                    @click="shareMenuVisible = false;$refs.videoPlayer.player.pause();" class="share-from-ambed" data-type="pinterest"\n                                    href="https://pinterest.com/pin/create/button/?url='+video.embed_url+'"\n                                    target="_blank"\n                            >\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/share/pinterest.svg"/>\n                                </i>Pinterest\n                            </a>\n                        </li>',t+='<li\n                                @click="shareModalVisible = true; shareMenuVisible = false;$refs.videoPlayer.player.pause();" class="share-from-ambed" data-type="embed"\n                        >\n                            <i>\n                                <img src="'+BASE_URL+'/embed/image/share/embed_code.svg"/>\n                            </i>Embed Code\n                        </li>',"true"!=video.player_options.allow_download&&1!=video.player_options.allow_download||(t+='<li v-if="video.player_options.allow_download">\n                            <a\n                                    class="share-from-ambed" data-type="download"\n                                    href="javascript:void(0)"\n                            >\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/share/download.svg"/>\n                                </i>Download\n                            </a>\n                        </li>'),t+="</ul></div>",$(document).find(".videojs-wrap .vjs-custom-skin").append(t)}}function generate_embed_modal(){var e='<div class="share-video-modal" style=""><div class="share-modal-backdrop"></div> <div class="share-video-inner relative vjs-bg"><div class="share-head"><button class="share-close-button">Ã</button> <h2>Embed Code</h2></div> <div class="embed-code-wrapper clearfix"><div class="embed-code"><textarea spellcheck="false" id="share-embed-code-textarea" cols="30" rows="4" onclick="this.select()" contenteditable="false">';e+='<iframe width="640" height="400" allowtransparency="true" src="'+video.embed_url+'" frameborder="0" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen scrolling="no"></iframe>',e+='</textarea></div> <button data-type="copy-embed-code-to-clipboard" class="copy-embed-code-to-clipboard">Click to copy</button></div></div></div>',$(document).find(".video-player .share-video-modal").remove(),$(document).find(".video-player").append(e)}function download(e,t="download.mp4"){var i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("download",t),i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(url),document.body.removeChild(i)}function generate_download_modal(){if(0==video.drm){var e='<div class="el-dialog__wrapper el-dialog--huge dialog_border_radius fade in downlod-video-model" style="z-index: 2009;"><div role="dialog" aria-modal="true" aria-label="Download" class="el-dialog el-dialog--center" style="margin-top: 15vh; width: 40%;"><div class="el-dialog__header"><span class="el-dialog__title">Download</span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><div class="el-dialog__body"><div class="el-dialog__body"><div style="display: flex; flex-direction: column;"><b>Select file to download</b></div> <div style="margin-top: 20px;"><table class="table" style="width: 100%;max-width: 100%;margin-bottom: 20px"><thead><tr><th></th> <th>FILE</th> <th>TYPE</th> <th>SIZE</th> <th></th></tr></thead> <tbody>';if("string"==typeof video.files){var t=video.files;(t=t.slice(1,-1)).split(",")}else video.files;$.each(video.resolutions,function(t,i){i=(i=i.file_path).replace(/\\\//g,"/").replace("s3.us-east-2.wasabisys.com","stream.adilo.com");var n=/(?:\.([^.]+))?$/.exec(i)[1];"mp3"!=n&&"mp4"!=n&&(1==video.is_audio?(n="."+n,i=i.replace(n,".mp3")):(n="."+n,i=i.replace(n,".mp4"))),e+='<tr><td><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 17.859 14.164"><g id="video-player" transform="translate(0 -6)"><path id="Path_9224" data-name="Path 9224" d="M27.86,23.2l-3.387-2.155a.308.308,0,0,0-.473.26v4.311a.308.308,0,0,0,.473.26l3.387-2.155a.308.308,0,0,0,0-.52Zm-3.244,1.855V21.869l2.505,1.595Z" transform="translate(-16.61 -10.381)" fill="#fffff"></path> <path id="Path_9225" data-name="Path 9225" d="M17.551,6H.308A.308.308,0,0,0,0,6.308V19.856a.308.308,0,0,0,.308.308H17.551a.308.308,0,0,0,.308-.308V6.308A.308.308,0,0,0,17.551,6ZM3.079,12.774H.616V10H3.079ZM.616,13.39H3.079v2.771H.616Zm3.079,3.079V6.616H14.164V19.548H3.695Zm13.548-3.695H14.78V10h2.463Zm-2.463.616h2.463v2.771H14.78Zm2.463-6.774V9.387H14.78V6.616Zm-16.627,0H3.079V9.387H.616Zm0,12.932V16.777H3.079v2.771Zm16.627,0H14.78V16.777h2.463Z" transform="translate(0 0)" fill="#fffff"></path></g></svg></td> <td style="vertical-align: middle;text-align: center">'+getFilename(i)+'</td> <td style="vertical-align: middle;text-align: center">MP4</td>  <td style="vertical-align: middle;text-align: center">'+getFileSize(i)+'</td> <td><div data-file="'+i+'" class="download-embed-file"><svg height="30" viewBox="0 0 512 512" width="30" xmlns="http://www.w3.org/2000/svg"><path fill="#0DABD8" d="m448 512h-384c-35.285156 0-64-28.714844-64-64v-85.332031c0-11.777344 9.558594-21.335938 21.332031-21.335938 11.777344 0 21.335938 9.558594 21.335938 21.335938v85.332031c0 11.753906 9.578125 21.332031 21.332031 21.332031h384c11.753906 0 21.332031-9.578125 21.332031-21.332031v-85.332031c0-11.777344 9.558594-21.335938 21.335938-21.335938 11.773437 0 21.332031 9.558594 21.332031 21.335938v85.332031c0 35.285156-28.714844 64-64 64zm0 0"></path> <path fill="#0DABD8" d="m356.414062 271.082031-85.332031 85.332031c-8.339843 8.34375-21.824219 8.34375-30.164062 0l-85.332031-85.332031c-6.101563-6.101562-7.9375-15.273437-4.632813-23.253906 3.308594-7.957031 11.09375-13.160156 19.714844-13.160156h64v-213.335938c0-11.773437 9.554687-21.332031 21.332031-21.332031s21.332031 9.558594 21.332031 21.332031v213.335938h64c8.621094 0 16.40625 5.203125 19.714844 13.160156 3.304687 7.980469 1.46875 17.152344-4.632813 23.253906zm0 0"></path></svg></div></td></tr>'}),e+="</tbody></table></div></div></div>\x3c!----\x3e</div></div>"}else e='<div class="el-dialog__wrapper el-dialog--huge dialog_border_radius fade in downlod-video-model" style="z-index: 2009;"><div role="dialog" aria-modal="true" aria-label="Download" class="el-dialog el-dialog--center" style="margin-top: 15vh; width: 40%;"><div class="el-dialog__header"><span class="el-dialog__title">Download</span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><div class="el-dialog__body"><div class="el-dialog__body"><div style="display: flex; flex-direction: column;"><b class="text-center">This video is protected</b></div><div style="margin-top: 20px;"></div></div></div>\x3c!----\x3e</div></div>';$(document).find(".video-player .downlod-video-model").remove(),$(document).find(".video-player .vjs-custom-skin").append('<div class="download-active"></div>'),$(document).find(".video-player .vjs-custom-skin").append(e)}function getFileSize(e){var t=this.getFileResolution(e),i=null;return this.video.resolutions.forEach(function(e,n){e.name==t&&(i=e.file_size)}),null==i?"-":converBytesToGb(i)}function openFile(e){return"mp4"==e.substr(e.lastIndexOf(".")+1)}function getFilename(e){return e.substring(e.lastIndexOf("/")+1,e.length)}function getFileResolutionFull(e){var t=getFileResolution(e).toString();return(t=t.substring(0,t.length-1))+"x"+Math.round(parseInt(t)*(16/9))}function getFileResolution(e){var t=e.split("/");return t[t.length-1].split(".")[0]}function addskipButton(){var e,t;e=videojs.getComponent("Button"),t=videojs.extend(e,{constructor:function(t,i){e.call(this,t,i)},buildCSSClass:function(){return"vjs-icon-skip vjs-custom-skip-menu-button vjs-control vjs-button"},handleClick:function(e){var t=parseInt(player.currentTime())+10;player.currentTime(t)}}),videojs.registerComponent("skipButton",t);player.controlBar.addChild(new t)}function addrewindButton(){var e,t;e=videojs.getComponent("Button"),t=videojs.extend(e,{constructor:function(t,i){e.call(this,t,i)},buildCSSClass:function(){return"vjs-icon-rewind vjs-custom-rewind-menu-button vjs-control vjs-button"},handleClick:function(e){var t=parseInt(player.currentTime())-10;player.currentTime(t)}}),videojs.registerComponent("rewindButton",t);player.controlBar.addChild(new t)}function addChaptersButton(){var e,t;e=videojs.getComponent("Button"),t=videojs.extend(e,{constructor:function(t,i){e.call(this,t,i)},buildCSSClass:function(){return"vjs-icon-chapters vjs-custom-settings-menu-button vjs-control vjs-button"},handleClick:function(e){if($(document).find(".vjs-chapterList, .vjs-share-menu, .vjs-custom-setting-modal").remove(),showChapters){showChapters=!1,$(document).find(".vjs-chapterList").remove(),$(document).find(".videojs-wrap .floatingChapterBtn").remove();var t=video.player_options.color;null===video.video_owner.settings.global_player_color||"false"!=video.player_options.disable_global_color&&0!=video.player_options.disable_global_color||(t=video.video_owner.settings.global_player_color),queryParams.has("editor")&&(t=video.player_options.color,"false"!=video.player_options.disable_global_color&&0!=video.player_options.disable_global_color||(t=video.video_owner.settings.global_player_color));var i=' <div class="floatingChapterBtn">\n                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="148" height="47" viewBox="0 0 148 47">\n  <defs>\n    <filter id="Rectangle_3382" x="0" y="0" width="148" height="47" filterUnits="userSpaceOnUse">\n      <feOffset dy="3" input="SourceAlpha"/>\n      <feGaussianBlur stdDeviation="3" result="blur"/>\n      <feFlood flood-opacity="0.161"/>\n      <feComposite operator="in" in2="blur"/>\n      <feComposite in="SourceGraphic"/>\n    </filter>\n  </defs>\n  <g id="Group_16893" data-name="Group 16893" transform="translate(-702.784 -159.997)">\n    <g id="Group_16892" data-name="Group 16892" transform="translate(-99.216 -62.003)">\n      <g transform="matrix(1, 0, 0, 1, 802, 222)" filter="url(#Rectangle_3382)">\n        <rect id="Rectangle_3382-2" data-name="Rectangle 3382" width="130" height="29" rx="14.5" transform="translate(9 6)" fill="'+t+'"/>\n      </g>\n      <g id="Group_16891" data-name="Group 16891" transform="translate(-2.5 -0.326)">\n        <g id="Group_16890" data-name="Group 16890" transform="translate(-601.216 -391)">\n          <g id="Group_16867" data-name="Group 16867">\n            <path id="Path_9878" data-name="Path 9878" d="M394,548a2,2,0,1,1,2-2A2,2,0,0,1,394,548Z" transform="translate(1038.216 82)" fill="#fff" fill-rule="evenodd"/>\n          </g>\n          <g id="Group_16866" data-name="Group 16866">\n            <path id="Path_9879" data-name="Path 9879" d="M394,548a2,2,0,1,1,2-2A2,2,0,0,1,394,548Z" transform="translate(1038.216 87.653)" fill="#fff" fill-rule="evenodd"/>\n          </g>\n          <g id="Group_16868" data-name="Group 16868">\n            <path id="Path_9880" data-name="Path 9880" d="M394,548a2,2,0,1,1,2-2A2,2,0,0,1,394,548Z" transform="translate(1038.216 93.653)" fill="#fff" fill-rule="evenodd"/>\n          </g>\n          <g id="Group_16889" data-name="Group 16889" transform="translate(683.432 96.25)" opacity="0.996">\n            <line id="Line_521" data-name="Line 521" x2="13" transform="translate(753.284 537.672)" fill="none" stroke="#fff" stroke-linecap="round" stroke-width="1.4"/>\n            <line id="Line_523" data-name="Line 523" x2="13" transform="translate(753.284 543.846)" fill="none" stroke="#fff" stroke-linecap="round" stroke-width="1.4"/>\n            <line id="Line_522" data-name="Line 522" x2="13" transform="translate(753.284 531.497)" fill="none" stroke="#fff" stroke-linecap="round" stroke-width="1.4"/>\n          </g>\n        </g>\n        <text id="Anti-Slip_Shoe_Grips" data-name="Anti-Slip Shoe Grips" transform="translate(928 247)" fill="#fff" font-size="12" font-family="ArialMT, Arial"><tspan x="-70.711" y="0">Chapters</tspan></text>\n      </g>\n    </g>\n  </g>\n</svg>\n\n            </div>';0==$(document).find(".vjs-chapterList").length&&$(document).find(".videojs-wrap .vjs-custom-skin").append(i)}else{if(showChapters=!0,video.video_chapters.length>0&&showChapters&&("true"==video.player_options.chapter_control||1==video.player_options.chapter_control)){var n='<div class="vjs-branding vjs-chapterList"><ul class="" >';video.video_chapters.forEach((e,t)=>{n+='<li data-chapter-number="'+(t+1)+'" data-id="'+e.id+'" data-title="'+e.title+'" data-chapter="'+e.time+'" class="start-from-chapter">\n                           '+(null!==e.title?e.title:"")+"\n                        </li>"}),n+="</ul></div>",$(document).find(".videojs-wrap .vjs-custom-skin").append(n)}$(document).find(".videojs-wrap .floatingChapterBtn").remove()}}}),videojs.registerComponent("chaptersButton",t);player.controlBar.addChild(new t)}function addButtons(){var e=videojs.getComponent("Button"),t=videojs.extend(e,{constructor:function(t,i){e.call(this,t,i)},buildCSSClass:function(){return"vjs-icon-previous-item vjs-control vjs-button"},handleClick:function(e){}});videojs.registerComponent("prevButton",t);player.controlBar.addChild(new t);var i=videojs.extend(e,{constructor:function(t,i){e.call(this,t,i)},buildCSSClass:function(){return"vjs-icon-next-item vjs-control vjs-button"},handleClick:function(e){}});videojs.registerComponent("nextButton",i);player.controlBar.addChild(new i)}function addSubtitlesButton(){var e,t;e=videojs.getComponent("Button"),t=videojs.extend(e,{constructor:function(t,i){e.call(this,t,i)},buildCSSClass:function(){return"vjs-captions-button vjs-custom-settings-menu-button vjs-control vjs-button"},handleClick:function(e){$(document).find(".vjs-chapterList, .vjs-share-menu, .vjs-custom-setting-modal").remove()}}),videojs.registerComponent("subtitlesButton",t);player.controlBar.addChild(new t)}function addMultiAudioButton(){var e,t;e=videojs.getComponent("Button"),t=videojs.extend(e,{constructor:function(t,i){e.call(this,t,i)},buildCSSClass:function(){return"vjs-audio-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-button multitrack-audio-subtitle"},handleClick:function(e){$(document).find(".vjs-chapterList, .vjs-share-menu, .vjs-custom-setting-modal").remove()}}),videojs.registerComponent("subtitlesButton",t);player.controlBar.addChild(new t)}function generate_audio_subtitle_btn_html(){var e='<div class="vjs-share-menu vjs-multi-track-audio-menu vjs-bg"><ul>\n                        <li class="head">Subtitles</li>';e+=' <li class="video-subtitle-languages" data-type="-1">\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/share/facebook.svg"/>\n                                </i>Off\n                        </li>',video.video_subtitles&&video.video_subtitles.translated_subtitles&&video.video_subtitles.translated_subtitles.forEach((t,i)=>{e+=' <li class="video-subtitle-languages" data-type="'+i+'">\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/share/facebook.svg"/>\n                                </i>\n'+t.lang_name}),video.video_subtitles&&video.video_subtitles.translated_subtitles&&(e+=' <li class="video-subtitle-languages" data-type="'+video.video_subtitles.translated_subtitles.length+'">\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/share/facebook.svg"/>\n                                </i>\n'+video.video_subtitles.lang_name),"true"!=video.player_options.allow_download&&1!=video.player_options.allow_download||(e+='<li v-if="video.player_options.allow_download">\n                            <a\n                                    class="share-from-ambed" data-type="download"\n                                    href="javascript:void(0)"\n                            >\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/share/download.svg"/>\n                                </i>Download\n                            </a>\n                        </li>'),e+="</ul><ul>",e+='                        <li class="head">Audio</li>',e+=' <li class="video-subtitle-languages-audio" data-type="-1">\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/share/facebook.svg"/>\n                                </i>Original '+(null!==video.audio_language&&""!==video.audio_language?" - "+video.audio_language:"")+"\n                        </li>",video.audios.forEach((t,i)=>{e+=' <li class="video-subtitle-languages-audio" data-type="'+i+'">\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/share/facebook.svg"/>\n                                </i>\n'+t.language_name}),e+="</ul></div>",$(document).find(".videojs-wrap .vjs-custom-skin").append(e)}function constructControlBar(){!0!==video.player_options.share_control&&"true"!==video.player_options.share_control||addShareButton(),!1!==video.player_options.share_control&&"false"!==video.player_options.share_control||!0!==video.player_options.allow_download&&"true"!==video.player_options.allow_download||addDownloadButton(),addSettingsButton(),!0!==video.player_options.skip_rewind&&"true"!==video.player_options.skip_rewind||(addrewindButton(),addskipButton()),video.video_chapters.length>0&&("true"===video.player_options.chapter_control||!0===video.player_options.chapter_control)&&addChaptersButton(),video.video_subtitles;var e={};e=1==video.is_audio&&queryParams.has("minified")?{volumePanel:{inline:!0,vertical:!1}}:{volumePanel:{inline:!1,vertical:!0}},videojs.getComponent("ControlBar").prototype.options_={loadEvent:"play",children:{playToggle:{},volumeMenuButton:{},currentTimeDisplay:{},progressControl:{},liveDisplay:{},remainingTimeDisplay:{},customControlSpacer:{},shareButton:{},adiloButton:{},playbackRateMenuButton:{},chaptersButton:{},descriptionsButton:{},captionsButton:{},audioTrackButton:{},settingsButton:{},fullscreenToggle:!1,subtitlesButton:{},volumeControl:e}},controlBarReady=!0}function playerOptions(){if(video){let n=video.thumbnail;var e={},t={},i="video"===embed_status?video.player_options.color:null!=playlist_data&&null!=playlist_data.color&&"custom"===playlist_data.apperance?playlist_data.color:"default"===playlist_data.apperance&&null!=project_setting&&project_setting.color?project_setting.color:video.player_options.color;return"video"===embed_status&&(null===video.video_owner.settings.global_player_color||"false"!=video.player_options.disable_global_color&&0!=video.player_options.disable_global_color||(i=video.video_owner.settings.global_player_color)),1!=video.is_audio||queryParams.has("minified")?"true"!==video.player_options.enable_casting&&!0!==video.player_options.enable_casting||(e={chromecast:{addButtonToControlBar:!0}}):e="true"===video.player_options.enable_casting||!0===video.player_options.enable_casting?{wavesurfer:{backend:"MediaElement",displayMilliseconds:!1,debug:!0,waveColor:"grey",progressColor:i,cursorColor:"black",interact:!0,hideScrollbar:!0},chromecast:{addButtonToControlBar:!0}}:{wavesurfer:{backend:"MediaElement",displayMilliseconds:!1,debug:!0,waveColor:"grey",progressColor:i,cursorColor:"black",interact:!0,hideScrollbar:!0}},t=1==video.is_audio&&queryParams.has("minified")?{volumePanel:{inline:!0,vertical:!1}}:{volumePanel:{inline:!1,vertical:!0}},{playbackRates:[.5,1,1.5,2],width:"100%",height:"100%",techOrder:["chromecast","html5"],fluid:!0,autoplay:getAutoplay(),muted:getMuted(),poster:n,inactivityTimeout:0,responsive:!0,aspectRatio:"16:9",fill:!0,playsinline:!0,controls:!1,html5:{vhs:{overrideNative:!0},nativeAudioTracks:!1,nativeVideoTracks:!1,nativeTextTracks:!1},controlBar:t,userActions:{doubleClick:!1},plugins:e}}}$(document).on("click",".vjs-playback-speed-click",function(){var e=$(this).data("type");if(settingsMenuActive=e,"main"==e){var t='<div class="vjs-settings-main"><ul>';t+='<li class="vjs-playback-speed vjs-playback-speed-click" data-type="playback">\n                                Playback speed\n                                <span>'+(1==player.playbackRate()?"Normal":player.playbackRate()+"x")+'</span>\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/arrow_right_player.svg"/>\n                                </i>\n                            </li>',qualityLevels.length>0&&(t+='<li class="vjs-settings-main-quality vjs-playback-speed-click" data-type="quality">Quality',t+="<span>"+(qualityIsAuto()?"Auto":"")+qualityLevels[qualityLevels.selectedIndex].height+"p</span>",t+='<i><img src="'+BASE_URL+'/embed/image/arrow_right_player.svg"/></i>'),t+="</ul></div>",$(document).find(".vjs-custom-setting-modal").html(t)}if("playback"==e){t='<div class="vjs-settings-playback"><ul>';t+=' <li class="head vjs-playback-speed-click" data-type="main" @click="settingsMenuActive = \'main\'">\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/arrow_left_player.svg"/>\n                                </i>Playback\n                            </li>',$.each(playbackRates,function(e,i){t+='<li data-rate="'+i+'" class="change-player-playback-rate '+(player.playbackRate()==i?"active":"")+'"\n                            >',t+='<i class="tick">\n                                    <img src="'+BASE_URL+'/embed/image/selected_tick_player.svg"/>\n                                </i>'+("1"==i?"Normal":i+"x"),t+="</li>"}),t+="</ul></div>",$(document).find(".vjs-custom-setting-modal").html(t)}if("quality"==e){t='<div class="vjs-settings-quality "><ul class="">';t+='<li data-quality="Auto" class="'+(qualityIsAuto()?"active":"")+' change-player-quality" >\n                                <i class="tick">\n                                    <img src="'+BASE_URL+'/embed/image/selected_tick_player.svg"/>\n                                </i>\n                                Auto\n                            </li>',$.each(qualityLevels.levels_,function(e,i){t+='<li data-quality="'+i.height+'p" class="change-player-quality quality-'+i.height+" "+(qualityLevels[qualityLevels.selectedIndex].height!=i.height||qualityIsAuto()?"":"active")+'">',t+='<i class="tick">\n                                    <img src="'+BASE_URL+'/embed/image/selected_tick_player.svg"/>\n                                </i>'+i.height+"p",t+="</li>"}),t+='<li class="head vjs-playback-speed-click" data-type="main" @click="settingsMenuActive = \'main\'">\n                                <i>\n                                    <img src="'+BASE_URL+'/embed/image/arrow_left_player.svg"/>\n                                </i>Quality\n                            </li>',t+="</ul></div>",$(document).find(".vjs-custom-setting-modal").html(t)}}),$(document).on("click",".change-player-quality",function(){var e=$(this).data("quality");parseInt(e)>700&&0==video.is_audio?$(document).find(".videojs-wrap").addClass("videojs-hd"):$(document).find(".videojs-wrap").removeClass("videojs-hd"),selectQuality(e),$(document).find(".vjs-custom-setting-modal").remove()}),$(document).on("click",".change-player-playback-rate",function(){var e=$(this).data("rate");settingsMenuActive=!1,player.playbackRate(e),$(document).find(".vjs-custom-setting-modal").remove()}),$(document).on("click",".share-from-ambed",function(){var e=$(this).data("type");"download"==e&&(showDownloadVideo=!0,generate_download_modal()),"embed"==e&&(shareModalVisible=!0,generate_embed_modal()),"facebook"!=e&&"twitter"!=e&&"linkedin"!=e&&"tumblr"!=e&&"pinterest"!=e&&"embed"!=e||(shareMenuVisible=!1),player.pause()}),$(document).on("click",".copy-embed-code-to-clipboard",function(){var e=document.getElementById("share-embed-code-textarea");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),$(this).text("Copied!")}),$(document).on("click",".share-close-button, .share-modal-backdrop",function(){$(document).find(".video-player .share-video-modal").remove()}),$(document).on("click",".el-dialog__close",function(){$(this).parents().find(".el-dialog__wrapper").remove()}),$(document).on("click",".el-dialog__headerbtn",function(){$(document).find(".video-player").find(".download-active").remove()}),$(document).on("click",".download-embed-file",function(){var e=$(this).data("file"),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","download.mp4"),t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),document.body.removeChild(t)}),$(document).on("click",".video-subtitle-languages-audio",function(){[{id:"my-1",kind:"translation",label:"kannada",language:"kannada",url:"https://cdnjs.cloudflare.com/ajax/libs/ion-sound/3.0.7/sounds/glass.mp3",enabled:!1},{id:"my-2",kind:"translation",label:"tamil",language:"tamil",url:"https://cdnjs.cloudflare.com/ajax/libs/ion-sound/3.0.7/sounds/door_bump.mp3",enabled:!1},{id:"my-3",kind:"translation",label:"marathi",language:"marathi",url:"https://s3.us-east-2.wasabisys.com/adilo-encoding/uQpDagsJMZIKO3tl/NPch_Eex/audio.wav",enabled:!0}].forEach(e=>{player.audioTracks().addTrack(e)})}),$(document).on("click",".video-subtitle-languages",function(){var e=$(this).data("type");video.video_subtitles.translated_subtitles.forEach((e,t)=>{player.textTracks()[t].mode="hidden"}),player.textTracks()[video.video_subtitles.translated_subtitles.length].mode="hidden",e>=0&&video.video_subtitles.translated_subtitles.forEach((t,i)=>{i===e&&(player.textTracks()[i].mode="showing")})}),$(document).on("click",".fa-times-container .fa-times",function(){$(document).find(".vjs-chapterList").remove();var e=video.player_options.color;null===video.video_owner.settings.global_player_color||"false"!=video.player_options.disable_global_color&&0!=video.player_options.disable_global_color||(e=video.video_owner.settings.global_player_color),queryParams.has("editor")&&(e=video.player_options.color,"false"!=video.player_options.disable_global_color&&0!=video.player_options.disable_global_color||(e=video.video_owner.settings.global_player_color));var t=' <div class="floatingChapterBtn">\n                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="148" height="47" viewBox="0 0 148 47">\n  <defs>\n    <filter id="Rectangle_3382" x="0" y="0" width="148" height="47" filterUnits="userSpaceOnUse">\n      <feOffset dy="3" input="SourceAlpha"/>\n      <feGaussianBlur stdDeviation="3" result="blur"/>\n      <feFlood flood-opacity="0.161"/>\n      <feComposite operator="in" in2="blur"/>\n      <feComposite in="SourceGraphic"/>\n    </filter>\n  </defs>\n  <g id="Group_16893" data-name="Group 16893" transform="translate(-702.784 -159.997)">\n    <g id="Group_16892" data-name="Group 16892" transform="translate(-99.216 -62.003)">\n      <g transform="matrix(1, 0, 0, 1, 802, 222)" filter="url(#Rectangle_3382)">\n        <rect id="Rectangle_3382-2" data-name="Rectangle 3382" width="130" height="29" rx="14.5" transform="translate(9 6)" fill="'+e+'"/>\n      </g>\n      <g id="Group_16891" data-name="Group 16891" transform="translate(-2.5 -0.326)">\n        <g id="Group_16890" data-name="Group 16890" transform="translate(-601.216 -391)">\n          <g id="Group_16867" data-name="Group 16867">\n            <path id="Path_9878" data-name="Path 9878" d="M394,548a2,2,0,1,1,2-2A2,2,0,0,1,394,548Z" transform="translate(1038.216 82)" fill="#fff" fill-rule="evenodd"/>\n          </g>\n          <g id="Group_16866" data-name="Group 16866">\n            <path id="Path_9879" data-name="Path 9879" d="M394,548a2,2,0,1,1,2-2A2,2,0,0,1,394,548Z" transform="translate(1038.216 87.653)" fill="#fff" fill-rule="evenodd"/>\n          </g>\n          <g id="Group_16868" data-name="Group 16868">\n            <path id="Path_9880" data-name="Path 9880" d="M394,548a2,2,0,1,1,2-2A2,2,0,0,1,394,548Z" transform="translate(1038.216 93.653)" fill="#fff" fill-rule="evenodd"/>\n          </g>\n          <g id="Group_16889" data-name="Group 16889" transform="translate(683.432 96.25)" opacity="0.996">\n            <line id="Line_521" data-name="Line 521" x2="13" transform="translate(753.284 537.672)" fill="none" stroke="#fff" stroke-linecap="round" stroke-width="1.4"/>\n            <line id="Line_523" data-name="Line 523" x2="13" transform="translate(753.284 543.846)" fill="none" stroke="#fff" stroke-linecap="round" stroke-width="1.4"/>\n            <line id="Line_522" data-name="Line 522" x2="13" transform="translate(753.284 531.497)" fill="none" stroke="#fff" stroke-linecap="round" stroke-width="1.4"/>\n          </g>\n        </g>\n        <text id="Anti-Slip_Shoe_Grips" data-name="Anti-Slip Shoe Grips" transform="translate(928 247)" fill="#fff" font-size="12" font-family="ArialMT, Arial"><tspan x="-70.711" y="0">Chapters</tspan></text>\n      </g>\n    </g>\n  </g>\n</svg>\n\n            </div>';0==$(document).find(".vjs-chapterList").length&&$(document).find(".videojs-wrap .vjs-custom-skin").append(t)}),$(document).on("click",".start-from-chapter",function(){show_text=!0;var e=$(this).data("chapter");if(null!==player){var t=e.split(":"),i=60*+t[0]*60+60*+t[1]+ +t[2];player.currentTime(i)}$(this).hasClass("fromBtn")&&$(document).find(".vjs-chapterList").remove(),player.trigger("chapterChange",{id:$(this).data("id"),title:$(this).data("title"),chapterNumber:$(this).data("chapter-number"),startsFrom:$(this).data("chapter")})});const globals={_window:window,_document:document,_navigator:navigator},test_browser={_isWebkit:"WebkitAppearance"in globals._document.documentElement.style&&!/Edge/.test(globals._navigator.userAgent),_isIPhone:/(iPhone|iPod)/gi.test(globals._navigator.userAgent),_isIos:/(iPhone|iPad|iPod)/gi.test(globals._navigator.userAgent),_isMac:/(Mac)/gi.test(globals._navigator.userAgent),_isSafari:/(safari)/gi.test(globals._navigator.userAgent),_isAndroid:/(Android)/gi.test(globals._navigator.userAgent),_isMobile:/(iPhone|iPad|iPod|Android|webOS|BlackBerry|Windows Phone)/gi.test(globals._navigator.userAgent),_isTouch:"ontouchstart"in window||navigator.msMaxTouchPoints,_isChrome:/(Chrome)/gi.test(globals._navigator.userAgent),_isFirefox:/firefox/gi.test(globals._navigator.userAgent)};function getSource(){if("password"==video.player_options.permissions&&passwordSucceeded||"password"!==video.player_options.permissions||"password"==video.player_options.permissions&&"playlist"==embed_status){if(1==video.is_audio)return video.drm_protection&&video.dash_url_drm?test_browser._isFirefox?test_browser._isSafari&&(test_browser._isMac||test_browser._isIos)?[{src:video.hls_url_aes,type:"application/x-mpegURL"}]:{src:video.dash_url_drm,type:"application/dash+xml",keySystems:{"com.widevine.alpha":{url:"https://license.pallycon.com/ri/licenseManager.do",licenseHeaders:{"pallycon-customdata-v2":widevine}}}}:test_browser._isChrome?{src:video.dash_url_drm,type:"application/dash+xml",keySystems:{"com.widevine.alpha":{url:"https://license.pallycon.com/ri/licenseManager.do",licenseHeaders:{"pallycon-customdata-v2":widevine}}}}:test_browser._isSafari&&(test_browser._isMac||test_browser._isIos)?[{src:video.hls_url_aes,type:"application/x-mpegURL"}]:[{src:video.dash_url_drm,type:"application/dash+xml",keySystemOptions:[{name:"com.widevine.alpha",options:{serverURL:"https://license.pallycon.com/ri/licenseManager.do",httpRequestHeaders:{"pallycon-customdata-v2":widevine}}},{name:"com.microsoft.playready",options:{serverURL:"https://license.pallycon.com/ri/licenseManager.do",httpRequestHeaders:{"pallycon-customdata-v2":playready}}}]}]:[{src:video.path,type:"audio/mp3"}];if(!video.path&&!video.dash_url_drm&&video.hls_url_aes)return!1;if(video.drm_protection&&video.dash_url_drm)return test_browser._isFirefox?test_browser._isSafari&&(test_browser._isMac||test_browser._isIos)?[{src:video.hls_url_aes,type:"application/x-mpegURL"}]:{src:video.dash_url_drm,type:"application/dash+xml",keySystems:{"com.widevine.alpha":{url:"https://license.pallycon.com/ri/licenseManager.do",licenseHeaders:{"pallycon-customdata-v2":widevine}}}}:test_browser._isChrome?{src:video.dash_url_drm,type:"application/dash+xml",keySystems:{"com.widevine.alpha":{url:"https://license.pallycon.com/ri/licenseManager.do",licenseHeaders:{"pallycon-customdata-v2":widevine}}}}:test_browser._isSafari&&(test_browser._isMac||test_browser._isIos)?[{src:video.hls_url_aes,type:"application/x-mpegURL"}]:[{src:video.dash_url_drm,type:"application/dash+xml",keySystemOptions:[{name:"com.widevine.alpha",options:{serverURL:"https://license.pallycon.com/ri/licenseManager.do",httpRequestHeaders:{"pallycon-customdata-v2":widevine}}},{name:"com.microsoft.playready",options:{serverURL:"https://license.pallycon.com/ri/licenseManager.do",httpRequestHeaders:{"pallycon-customdata-v2":playready}}}]}];if(video.path.indexOf(".m3u8")>0)return[{src:video.path,type:"application/x-mpegURL",withCredentials:!1}];if(video.path.indexOf(".mp4")>0&&video.is_snap)return[{src:video.original_path,type:"video/mp4",withCredentials:!1}];var e="";if("string"==typeof video.files)try{var t=JSON.parse(video.files)}catch(e){t=""}else t=video.files;return $.each(t,function(t,i){i.indexOf(".m3u8")>0&&(e=i.replace("http:","https:"))}),[{src:e,type:"application/x-mpegURL",withCredentials:!1}]}return[{src:"",type:"video/mp4"}]}function getMuted(){var e=!1;try{var t=getUrlVars().autoplay;"true"!==t&&"1"!==t||(e=!0)}catch(e){}try{"true"!==video.player_options.autoplay&&!0!==video.player_options.autoplay||(e=!0)}catch(e){}return muteIcon=e,null!==video.reel_url&&""!==video.reel_url&&"reel"===video.player_options.thumbnail_type&&(e=!0),e}function getAutoplay(){var e=!1;return e}function getUrlVars(){for(var e,t=[],i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<i.length;n++)e=i[n].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function cssField(){var e,t,i="video"===embed_status?video.player_options.color:null!=playlist_data&&null!=playlist_data.color&&"custom"===playlist_data.apperance?playlist_data.color:"default"===playlist_data.apperance&&null!=project_setting&&project_setting.color?project_setting.color:video.player_options.color;"video"===embed_status&&("default"==video.player_options.appearance_type&&(i=null!=project_setting.color?project_setting.color:video.video_owner.settings.global_player_color),"custom"==video.player_options.appearance_type&&(null===video.video_owner.settings.global_player_color||"false"!=video.player_options.disable_global_color&&0!=video.player_options.disable_global_color||(i=video.video_owner.settings.global_player_color))),queryParams.has("editor")&&(i=video.player_options.color,"custom"==video.player_options.appearance_type&&("false"!=video.player_options.disable_global_color&&0!=video.player_options.disable_global_color||(i=video.video_owner.settings.global_player_color)),"default"==video.player_options.appearance_type&&(i=null!=project_setting.color?project_setting.color:video.video_owner.settings.global_player_color)),e=".vjs-subs-caps-button, .vjs-captions-button, .vjs-icon-chapters, .vjs-play-control, .vjs-volume-menu-button, .vjs-volume-panel, .vjs-mute-control, .vjs-custom-settings-menu-button, .video-js.vjs-custom-skin .vjs-volume-level, .vjs-playback-rate.vjs-menu-button, .vjs-icon-custom-share, .vjs-fullscreen-control, .vjs-resolution-button, .vjs-quality-selector, .vjs-play-progress, .vjs-custom-control-spacer, .vjs-icon-adilo, .vjs-icon-previous-item, .vjs-icon-next-item { background: "+i+" !important;}",e+=".vjs-icon-skip, .vjs-icon-rewind { background-color: "+i+" !important;}",e+=".vjs-custom-rewind-menu-button { background-image: url('"+EMBED_URL+"/img/rewind.svg') !important }",e+=".vjs-custom-skip-menu-button { background-image: url('"+EMBED_URL+"/img/skip.svg') !important  }",e+=".vjs-play-progress {background: "+toRGBA(i,1)+" !important;}",e+=".video-container.minimized-audio-player .vjs-volume-level, .video-container.minimized-audio-player .vjs-load-progress {background: #ffffff !important;}",e+=".vjs-load-progress {background: "+toRGBA(i,.8)+" !important;}",e+=".vjs-progress-holder {background: "+toRGBA(i,.5)+" !important;}",e+=".vjs-big-play-button:before {color: "+toRGBA(i,.8)+" !important; }",e+=".video-container.minimized-audio-player .video-player .video-js {background-color: "+i+" !important; }",e+=".video-container.minimized-audio-player .vjs-control-bar { visibility: visible !important; display: inline-flex !important;}","always"===video.player_options.control_visibility?e+=".vjs-control-bar { opacity: 1 !important; display: -ms-flexbox !important; display: flex !important; visibility: visible !important}":"hide"===video.player_options.control_visibility?e+=".vjs-control-bar { opacity: 0 !important; display: none !important;}":"hide_progress"===video.player_options.control_visibility&&(e+=".vjs-progress-control.vjs-control, .vjs-time-control.vjs-control { opacity: 0 !important; pointer-events: none !important;}"),"true"!=video.player_options.branding_active&&1!=video.player_options.branding_active||!ownerStatus.logo||(e+='.vjs-icon-adilo:before {background-image:url("'+ownerStatus.logo+'")}'),"true"==video.player_options.autoplay||1==video.player_options.autoplay?muteIcon=!0:muteIcon=!1,"password"==video.player_options.permissions&&(video.player_options.text_overlay="false"),"false"!==video.player_options.settings&&!1!==video.player_options.settings||(video.player_options.speed_control=!1,video.player_options.quality_control=!1,e+=".vjs-custom-settings-menu-button.video-setting { display: none !important }"),"false"!==video.player_options.playbar&&!1!==video.player_options.playbar||(e+=".vjs-progress-control.vjs-control, .vjs-time-control.vjs-control { opacity: 0 !important; pointer-events: none !important;}"),"false"!==video.player_options.speed_control&&!1!==video.player_options.speed_control||(e+=".vjs-playback-speed { display: none !important }"),"false"!==video.player_options.quality_control&&!1!==video.player_options.quality_control||(e+=".vjs-settings-main-quality { display: none !important }"),"true"!==video.player_options.loop_control&&!0!==video.player_options.loop_control||"hide"===video.player_options.control_visibility||(e+=".vjs-paused .vjs-control-bar { display: inline-flex !important; }"),"false"!==video.player_options.share_control&&!1!==video.player_options.share_control||"false"!==video.player_options.allow_download&&!1!==video.player_options.allow_download||(e+=".vjs-icon-custom-share {display: none !important;}"),"true"!=video.player_options.volume_control&&1!=video.player_options.volume_control||!muteIcon||(e+=".vjs-volume-menu-button, .vjs-volume-panel {display: none !important;}",video.player_options.volume_control="false"),"false"!=video.player_options.volume_control&&0!=video.player_options.volume_control||(e+=".vjs-volume-menu-button, .vjs-volume-panel{display: none !important;}"),"false"!==video.player_options.fullscreen_control&&!1!==video.player_options.fullscreen_control||(e+=".vjs-fullscreen-control {display: none !important;}"),"false"!==video.player_options.chapter_control&&!1!==video.player_options.chapter_control||(e+=".vjs-icon-chapters {display: none !important;}"),!("false"!==video.player_options.subtitle_control&&!1!==video.player_options.subtitle_control||"false"!==project_setting.subtitle_control&&!1!==project_setting.subtitle_control)?e+=".vjs-captions-button, .vjs-audio-button, .vjs-icon-subtitles, .vjs-icon-captions, .vjs-subs-caps-button {display: none !important;}":e+=".vjs-captions-button, .vjs-audio-button, .vjs-icon-subtitles, .vjs-icon-captions, .vjs-subs-caps-button {display: block ;}",video.player_options.settings||video.player_options.share_control||video.player_options.volume_control||video.player_options.chapter_control||video.player_options.subtitle_control||video.player_options.fullscreen_control||(e+=".vjs-custom-control-spacer {display: none !important}"),t=(t='&lt;style type="text/css"&gt; '+e+"&lt;/style&gt;").replace(/&lt;/g,"<").replace(/&gt;/g,">"),$(document).find("body").find(".supportive-css").html(t)}function toRGBA(e,t){return/^#[0-9A-F]{6}$/i.test(e)&&(e=hexToRgb(e)),e.replace(")",", "+t+")").replace("(","a(")}function hexToRgb(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")":null}function fixQuotes(e){return e.replace(/[ââ]/g,"'").replace(/[ââ]/g,'"')}function initPixelRetargeting(player,currTime){null!==video.video_basecode&&video.video_basecode.event_code.length>0&&video.video_basecode.event_code.forEach((val,index)=>{var time=val.time,a=time.split(":"),seconds=60*+a[0]*60+60*+a[1]+ +a[2],parseTime=parseInt(currTime);if(seconds==parseTime&&-1==executed.indexOf(parseTime)){var code=val.code;let script=code.replace(/<\/?script>/g,"");script=fixQuotes(script);try{eval(script)}catch(e){console.log("Pixel Error : ",e)}executed.push(parseTime)}})}function initPoster(e){}function handleTimeChange(e){player.currentTime(e)}function handlePlayback(e){if(playbackEnabled){var t=store.get("video_"+video.id+":playback");t>10&&video.duration-t>20&&handleTimeChange(t)}}function getVttFile(){var e="";if("string"==typeof video.files)var t=video.files.split(",");else t=video.files;return $.each(t,function(t,i){i.indexOf(".vtt")>0&&(e=i.replace("http:","https:"))}),e=(e=(e=(e=e.replace(/\\/g,"")).replace("s3.us-east-2.wasabisys.com/adilo-encoding","stream.adilo.com/adilo-encoding")).replace("adilo-encoding.stream.adilo.com","stream.adilo.com/adilo-encoding")).replace(/\"/g,"")}function initHlsQualitySelector(e){try{e.hlsQualitySelector()}catch(e){}var t=function(){qualityLevels=e.qualityLevels()};try{t()}catch(e){console.log("error",e);try{t()}catch(e){console.log("error",e),setTimeout(function(){try{t()}catch(e){console.log("error",e)}},2e3)}}}function qualityIsHd(){if(qualityLevels.length>0&&qualityLevels[qualityLevels.selectedIndex])return qualityLevels[qualityLevels.selectedIndex].height>700}function initVtt(e){try{var t=getVttFile();e.vttThumbnails({src:t})}catch(e){console.log("error",e)}}function initSubtitles(e){console.log("--------------------------");var t="",i="",n="";null!==video.video_subtitles&&(video.video_subtitles.url=video.video_subtitles.url+"?timestamp="+Date.now(),null!==video.video_subtitles.translated_subtitles&&video.video_subtitles.translated_subtitles.forEach((t,r)=>{language.forEach((e,r)=>{e.code==t.language&&(i=e.name),n=t.language===video.language&&"showing"}),e.addRemoteTextTrack({kind:"captions",label:i,language:t.language,id:34546,src:t.url+"?timestamp="+Date.now(),default:n})}),language.forEach((e,i)=>{e.code==video.video_subtitles.language&&(t=e.name)}),n=(!0===video.player_options.subtitle_display||"true"===video.player_options.subtitle_display)&&"showing",!1!==video.player_options.subtitle_control&&"false"!==video.player_options.subtitle_control||(n=(!0===project_setting.subtitle_display||"true"===project_setting.subtitle_display)&&"showing"),e.addRemoteTextTrack({kind:"captions",label:t,language:video.video_subtitles.language,id:34546,src:video.video_subtitles.url,default:n}))}function checkUserStatus(){void 0!==this.$store&&void 0!==this.$store.getters&&null!=this.$store.getters.isAuthenticated&&(userStatus.logged=!0);const e=ownerStatus;e&&(userStatus.active=e.status,userStatus.logo=e.logo,userStatus.freeUser=e.free_user,userStatus.freeUser&&player&&addAdiloButton())}function resume_watch_from_html(){if(0===resumeWatchFrom||"true"!==video.player_options.resume_player&&!0!==video.player_options.resume_player||video.schedular.is_schedule||"true"!==video.player_options.restart_choice&&!0!==video.player_options.restart_choice)if(0===resumeWatchFrom||"true"!==video.player_options.resume_player&&!0!==video.player_options.resume_player||video.schedular.is_schedule||"false"!==video.player_options.restart_choice&&!1!==video.player_options.restart_choice)if(0===resumeWatchFrom||"true"!==project_setting.resume_player&&!0!==project_setting.resume_player||video.schedular.is_schedule||"true"!==project_setting.restart_choice&&!0!==project_setting.restart_choice)0===resumeWatchFrom||"true"!==project_setting.resume_player&&!0!==project_setting.resume_player||video.schedular.is_schedule||"false"!==project_setting.restart_choice&&!1!==project_setting.restart_choice?$(document).find(".videojs-wrap").removeClass("resumeVideo"):(player.currentTime(resumeWatchFrom),player.muted(!0),player.play(),resumeWatchFrom=0);else{e='<div class="resumeWatchFrom" id="resumeWatchFrom">\n            <div>\n                <div class="watchVideoFrom" data-time="'+resumeWatchFrom+'" @click="watchVideoFrom(resumeWatchFrom)">\n                    <div>\n                        <img src="'+BASE_URL+'/embed/image/Group2.svg" height="60" />\n                    </div>\n                    <div>\n                        <span>Resume</span><br>\n                        <span style="margin-left: 20px;">Watching</span></div>\n                </div>\n                <div class="watchVideoFrom" data-time="0" @click="watchVideoFrom(0)">\n                    <div><img src="'+BASE_URL+'/embed/image/Group1.svg" height="60" /></div>\n                    <div style="margin-left: 15px;"><span>Start</span><br>\n                        <span>Over</span></div>\n                </div>\n            </div>\n\n        </div>';$(document).find(".videojs-wrap").addClass("resumeVideo"),$(document).find(".video-container .resumeWatchFrom").remove(),$(document).find(".video-container").append(e)}else player.currentTime(resumeWatchFrom),player.muted(!0),player.play(),resumeWatchFrom=0;else{var e='<div class="resumeWatchFrom" id="resumeWatchFrom">\n            <div>\n                <div class="watchVideoFrom" data-time="'+resumeWatchFrom+'" @click="watchVideoFrom(resumeWatchFrom)">\n                    <div>\n                        <img src="'+BASE_URL+'/embed/image/Group2.svg" height="60" />\n                    </div>\n                    <div>\n                        <span>Resume</span><br>\n                        <span style="margin-left: 20px;">Watching</span></div>\n                </div>\n                <div class="watchVideoFrom" data-time="0" @click="watchVideoFrom(0)">\n                    <div><img src="'+BASE_URL+'/embed/image/Group1.svg" height="60" /></div>\n                    <div style="margin-left: 15px;"><span>Start</span><br>\n                        <span>Over</span></div>\n                </div>\n            </div>\n\n        </div>';$(document).find(".videojs-wrap").addClass("resumeVideo"),$(document).find(".video-container .resumeWatchFrom").remove(),$(document).find(".video-container").append(e)}}function replay(){player.currentTime(0),player.controls(!0),player.play()}function storeWatchSession(e){if(bandwidthData)if(bandwidthData.not_exceeded)showBandwidthWarning.show=!1;else{const t=bandwidthData.bandwidth;e.pause(),showBandwidthWarning.show=!0,userStatus.logged?(showBandwidthWarning.head=`You reached the bandwidth limit of ${converBytesToGb(t)}.`,showBandwidthWarning.body="Please upgrade to one of our premium plans to increase bandwidth limit."):(showBandwidthWarning.head="Video cannot be played.",showBandwidthWarning.body="This video requires attention from the owner.")}return!0}function converBytesToGb(e){const t=["Bytes","KB","MB","GB","TB"];if(0===e)return"n/a";const i=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return 0===i?`${e} ${t[i]})`:`${(e/1024**i).toFixed(1)} ${t[i]}`}function autoPlayOnStart(){if(video.reels.length>0&&canAutoPlayReel&&null!==video.reel_url&&""!==video.reel_url&&"reel"===video.player_options.thumbnail_type){player.muted(!0);let e=player.play();return void 0!==e&&e.catch(function(){console.log("Motion thumbnail was prevented"),canAutoPlayReel=!1,reinitialize_player(),player.muted(!1)}),console.log(e),resumeWatchFrom=0,!1}if(videoPlaying)return!1;"true"!=video.player_options.autoplay&&1!=video.player_options.autoplay||video.schedular.is_schedule||"false"!=video.player_options.interaction_before_email_capture||"password"===video.player_options.permissions?queryParams.has("autoplay")&&1==queryParams.get("autoplay")||queryParams.has("autoplay")&&"true"==queryParams.get("autoplay")||queryParams.has("autoplay")&&1==queryParams.get("autoplay")||queryParams.has("autoplay")&&"1"==queryParams.get("autoplay")?(queryParams.has("type")&&"callout"==queryParams.get("type")?player.muted(!1):player.muted(!0),player.play(),resumeWatchFrom=0):player.muted(!1):(player.muted(!0),player.play(),resumeWatchFrom=0)}function initPlayback(){"true"==video.player_options.playback&&(playbackEnabled=!0)}$(document).on("click",".watchVideoFrom",function(){var e=$(this).data("time");player.play(),player.currentTime(e),document.getElementById("resumeWatchFrom").remove(),$(document).find(".videojs-wrap").removeClass("resumeVideo"),resumeWatchFrom=0});var videos=[];function watch_related_videos(){var e=video.player_options.interaction_after_more_videos_list;$.ajax({type:"get",url:EMBED_URL+"api/video/playlist/get_list",data:{ids:e},success:function(e){if((videos=e).length>0&&"more_videos"==video.player_options.interaction_after_type){var t='<div class="videojs-overlay more-videos-wrap" style=""><div class="more-videos-inner"><div class="inner-wrap"><div class="video-title">'+video.player_options.interaction_after_more_videos_text+'</div> <div class="video-list">';$.each(videos,function(e,i){t+='<div class="video"><div class="thumbnail watch-more-video-click" data-video="'+i.id+'" style="background-image: url('+croppa(i.thumbnail,200)+');"><span class="video-duration">'+i.duration_formatted+'</span></div> <div title="'+i.title+'" class="title">'+i.title+"</div></div>"}),t+='</div></div></div> <span class="replay watch-more-replay"><img alt="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0Ni42OTIiIGhlaWdodD0iNDYuMjcxIiB2aWV3Qm94PSIwIDAgNDYuNjkyIDQ2LjI3MSI+CiAgPGcgaWQ9Im5vdW5fcmVwbGF5XzYzMzUyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAuMTgxIC0yNi4zMzIpIHJvdGF0ZSg0MCkiPgogICAgPGcgaWQ9IkdydXBwZV8xMjQxMiIgZGF0YS1uYW1lPSJHcnVwcGUgMTI0MTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3IDIwLjM2MSkiPgogICAgICA8ZyBpZD0iR3J1cHBlXzEyNDExIiBkYXRhLW5hbWU9IkdydXBwZSAxMjQxMSI+CiAgICAgICAgPHBhdGggaWQ9IlBmYWRfOTM5MCIgZGF0YS1uYW1lPSJQZmFkIDkzOTAiIGQ9Ik01MC4wOTEsMjkuNTgyQTE1LjQ2NCwxNS40NjQsMCwwLDEsNDYuOSw0Ni44MzNhMTYuMDA5LDE2LjAwOSwwLDAsMS00LjY1MywzLjE4OSwxNS43MTEsMTUuNzExLDAsMCwxLTEzLjItLjI3OGMtMS4zMjQtLjYxNS0uNDQ5LTIuNTIsMS4wODYtMS43NTRhMTMuMywxMy4zLDAsMCwwLDExLjIyNy4xNSwxMy4zODMsMTMuMzgzLDAsMCwwLDYuOC0xNy42NjksMTMuNDIzLDEzLjQyMywwLDAsMC0yNS4wNCw5LjU2N2wxLjItMy4xMzcsMS45MzQuNzMyLTIuNTYyLDYuNjM5TDE3LDQxLjcxbC43MzItMS45MzQsMy41LDEuMzU5QTE1LjU1MywxNS41NTMsMCwwLDEsNTAuMDkxLDI5LjU4MloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNyAtMjAuMzYxKSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAxOTIxIiBzdHJva2Utd2lkdGg9IjAuMiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"></span></div>'}$(document).find(".video-player .more-videos-wrap").remove(),$(document).find(".video-player").append(t)}})}function reinitialize_player(){var e=document.getElementById("my-player");if(e&&videojs(e).dispose(),$(document).find(".video-player").html('<video id="my-player" class="video-js controls vjs-custom-skin" playsinline="true" webkit-playsinline="true"></video><div class="supportive-css"></div>'),playerOptions_=playerOptions(),player=videojs(document.getElementById("my-player"),playerOptions_),player.eme(),player.src(getSource()),player.poster(video.thumbnail),queryParams.has("editor")&&(0==video.video_chapters.length?video.player_options.chapter_control=!1:1!=video.video_chapters.length||"true"!=video.player_options.chapter_control&&1!=video.player_options.chapter_control||addChaptersButton()),$(document).find(".video-player.video-js .skipAndRewind").remove(),"true"===video.player_options.skip_rewind||!0===video.player_options.skip_rewind){$(document).find(".video-container").addClass("skip_and_rewind"),!0!==video.player_options.skip_rewind&&"true"!==video.player_options.skip_rewind||(addrewindButton(),addskipButton());var t='<div class="skipAndRewind d-none">\n                        <div class="rewindVideo">\n                            <img src="'+BASE_URL+'/img/rewind.svg" height="50">\n                        </div>\n                        <div class="skipVideo">\n                            <img src="'+BASE_URL+'/img/skip.svg" height="50">\n                        </div>\n                    </div>';$(document).find(".video-player.video-js").append(t)}else $(document).find(".video-container").removeClass("skip_and_rewind");cssField(),player.on("play",player_play),player.on("loadedmetadata",handleMetaDataloaded),player.on("pause",player_pause),player.on("playing",player_playing),player.on("timeupdate",player_timeupdate),player.on("ended",player_ended),player.on("canplay",player_canplay),player.on("ready",player_ready),player.on("seeked",playerSeeked),player.on("volumechange",playerVolumeChanged),player.on("fullscreenchange",playerFullScreenChanged),player.on("resolutionChange",playerResolutionChanged),player.on("subtitleChange",playerSubtitlesChanged),player.on("ratechange",playerRateChanged),player.on("chapterChange",playerChapterChanged),player.on("CTASkip",handleCTASkipped),queryParams.get("list")&&playlist&&$(document).find(".current_playlist_video").text(current_playlist_video+" / "+playlist.videos.length)}function croppa(e,t,i,n){try{if(e.includes("wasabisys.com")||e.includes("b-cdn.net")||e.includes("stream.adilo.com")||e.includes("audioThumbnail")){var r="large";return t<=120?r="tiny":t<=320?r="small":t<=640&&(r="medium"),e.replace(/(.*).mp4-(.*)-(.*)/,"$1.mp4-"+r+"-$3")}if(!e)return;var a,s,o="-"+(t=t?Math.round(t):"_")+"x"+(i=i?Math.round(i):"_");if(n&&n instanceof Array)for(s in n)if("string"==typeof(a=n[s]))o+="-"+a;else if("object"==typeof a)for(s in a){(a=a[s])instanceof Array?o+="-"+s+"("+a.join(",")+")":o+="-"+s+"("+a+")";break}return e.replace(/^(.+)(\.[a-z]+)$/i,"$1"+o+"$2")}catch(t){return e}}$(document).on("click",".watch-more-replay",function(){$(document).find(".video-player .more-videos-wrap").remove(),replay()}),$(document).on("click",".watch-more-video-click",function(){var e=$(this).data("video");$.each(videos,function(t,i){if(e===i.id){video.player_options.password||(video.player_options.autoplay=!0,hidePlaybutton=!0),reset_video();video.timestamp;var n=video.ip,r=video.geoLocationDetail,a=video.language,s=video.allow_video;video=i,video.allow_video=s,video.ip=n,video.geoLocationDetail=r,video.language=a,video.allow_video=s,video&&(video.schedular=video.schedular?video.schedular:{},video.schedular.is_stream_ended=!1,video.schedular.is_running=!0),video.drm_protection&&null==window.safari?(userStatus.inRequest=!0,canLoad=!1,$.ajax({type:"post",url:"https://encoding.bigcommand.com/api/v1.0/api.php",data:JSON.stringify({username:"precious",action:"get_drm_key",video_id:video.video_id}),dataType:"json",success:function(e){userStatus.inRequest=!1,widevine=e.result.Widevine,playready=e.result.PlayReady,canLoad=!0,checkUserStatus()},error:function(e){}})):(userStatus.inRequest=!1,canLoad=!0,checkUserStatus());var o=setInterval(function(){canLoad&&(reinitialize_player(),clearInterval(o),$(document).find(".more-videos-wrap").remove())},10)}})}),$(document).on("click touchstart",".vjs-icon-next-item, .vjs-icon-previous-item",function(e){$(e.target).hasClass("vjs-icon-next-item")&&$.each(playlist.videos,function(e,t){if(e==current_playlist_video){current_playlist_video=e+1,$(document).find(".current_playlist_video").text(current_playlist_video+" / "+playlist.videos.length),video.player_options.password||(video.player_options.autoplay=!0,hidePlaybutton=!0),reset_video();video.timestamp;var i=video.ip,n=video.geoLocationDetail,r=video.language,a=video.allow_video;if(video=t,video.allow_video=a,video.ip=i,video.geoLocationDetail=n,video.language=r,video.allow_video=a,video&&(video.schedular=video.schedular?video.schedular:{},video.schedular.is_stream_ended=!1,video.schedular.is_running=!0),video.visual_watermarking){if(video.player_options.visual_watermark_name&&visualWatermarkContent.push("This video is licensed by: "+video.video_owner.name),"people_invited"===project_setting.permissions){var s=getCookie("BC-Invitee-Auth-Email");""!==s&&null!=s&&visualWatermarkContent.push("This video is licensed to: "+s)}video.player_options.deter_text&&null!==video.player_options.deterText&&""!==video.player_options.deterText&&null!==video.player_options.deterText&&void 0!==video.player_options.deterText&&visualWatermarkContent.push(video.player_options.deterText),video.player_options.visual_watermark_ip&&""!==video.ip&&null!==video.ip&&void 0!==video.ip&&visualWatermarkContent.push("This video is streamed to: "+video.ip),video.player_options.geo_location&&visualWatermarkContent.push("This video is streaming to "+video.geoLocationDetail+(video.player_options.visual_watermark_timestamp?" at "+video.timestamp:""))}video.drm_protection&&null==window.safari?(userStatus.inRequest=!0,canLoad=!1,$.ajax({type:"post",url:"https://encoding.bigcommand.com/api/v1.0/api.php",data:JSON.stringify({username:"precious",action:"get_drm_key",video_id:video.video_id}),dataType:"json",success:function(e){userStatus.inRequest=!1,widevine=e.result.Widevine,playready=e.result.PlayReady,canLoad=!0,checkUserStatus()},error:function(e){}})):(userStatus.inRequest=!1,canLoad=!0,checkUserStatus());var o=setInterval(function(){if(canLoad){if(reinitialize_player(),player.play(),clearInterval(o),queryParams.has("minified")&&1==video.is_audio||"audio"==playlist_data.status&&1==video.is_audio){var e='<div class="audioDetail">\n                        <span class="title marquee">'+video.title+'</span><br>\n                        <span class="author-name marqueee">'+(null!==video.author_name&&""!==video.author_name?video.author_name:video.video_owner.name)+"</span><br>\n                        \n                        \n                    </div>";$(document).find(".video-container .video-player").append(e);var t=video.duration_formatted.split(":");3===t.length&&("00"==t[0]&&t.splice(0,1),"00"==t[1]&&(t[1]="0")),2===t.length&&"00"==t[0]&&(t[0]="0");e='<div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" aria-live="off" role="presentation">'+t.join(":");$(document).find(".video-container .video-player .video-js .vjs-control-bar .vjs-duration.vjs-time-control").remove(),$(document).find(".video-container .video-player .video-js .vjs-control-bar").append(e)}$(document).find(".current_playlist_video").text(current_playlist_video+" / "+playlist.videos.length),$(document).find(".current_playlist_video").text(current_playlist_video+" / "+playlist.videos.length),$(this).parents("#playlist-wrap").remove()}},10);return!1}}),$(e.target).hasClass("vjs-icon-previous-item")&&$.each(playlist.videos,function(e,t){if(e==current_playlist_video-2){current_playlist_video=e+1,$(document).find(".current_playlist_video").text(current_playlist_video+" / "+playlist.videos.length),video.player_options.password||(video.player_options.autoplay=!0,hidePlaybutton=!0),reset_video();video.timestamp;var i=video.ip,n=video.geoLocationDetail,r=video.language,a=video.allow_video;if(video=t,video.allow_video=a,video.ip=i,video.geoLocationDetail=n,video.language=r,video.allow_video=a,video&&(video.schedular=video.schedular?video.schedular:{},video.schedular.is_stream_ended=!1,video.schedular.is_running=!0),video.visual_watermarking){if(video.player_options.visual_watermark_name&&visualWatermarkContent.push("This video is licensed by: "+video.video_owner.name),"people_invited"===project_setting.permissions){var s=getCookie("BC-Invitee-Auth-Email");""!==s&&null!=s&&visualWatermarkContent.push("This video is licensed to: "+s)}video.player_options.deter_text&&null!==video.player_options.deterText&&""!==video.player_options.deterText&&null!==video.player_options.deterText&&void 0!==video.player_options.deterText&&visualWatermarkContent.push(video.player_options.deterText),video.player_options.visual_watermark_ip&&""!==video.ip&&null!==video.ip&&void 0!==video.ip&&visualWatermarkContent.push("This video is streamed to: "+video.ip),video.player_options.geo_location&&visualWatermarkContent.push("This video is streaming to "+video.geoLocationDetail+(video.player_options.visual_watermark_timestamp?" at "+video.timestamp:""))}video.drm_protection&&null==window.safari?(userStatus.inRequest=!0,canLoad=!1,$.ajax({type:"post",url:"https://encoding.bigcommand.com/api/v1.0/api.php",data:JSON.stringify({username:"precious",action:"get_drm_key",video_id:video.video_id}),dataType:"json",success:function(e){userStatus.inRequest=!1,widevine=e.result.Widevine,playready=e.result.PlayReady,canLoad=!0,checkUserStatus()},error:function(e){}})):(userStatus.inRequest=!1,canLoad=!0,checkUserStatus());var o=setInterval(function(){if(canLoad){if(reinitialize_player(),player.play(),clearInterval(o),queryParams.has("minified")&&1==video.is_audio||"audio"==playlist_data.status&&1==video.is_audio){var e='<div class="audioDetail">\n                        <span class="title marquee">'+video.title+'</span><br>\n                        <span class="author-name marqueee">'+(null!==video.author_name&&""!==video.author_name?video.author_name:video.video_owner.name)+"</span><br>\n                        \n                        \n                    </div>";$(document).find(".video-container .video-player").append(e);var t=video.duration_formatted.split(":");3===t.length&&("00"==t[0]&&t.splice(0,1),"00"==t[1]&&(t[1]="0")),2===t.length&&"00"==t[0]&&(t[0]="0");e='<div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" aria-live="off" role="presentation">'+t.join(":");$(document).find(".video-container .video-player .video-js .vjs-control-bar .vjs-duration.vjs-time-control").remove(),$(document).find(".video-container .video-player .video-js .vjs-control-bar").append(e)}$(document).find(".current_playlist_video").text(current_playlist_video+" / "+playlist.videos.length),$(document).find(".current_playlist_video").text(current_playlist_video+" / "+playlist.videos.length),$(this).parents("#playlist-wrap").remove()}},10);return!1}})});let BC_onMobile=!1;window.screen.availWidth<=414&&(BC_onMobile=!0);var isMobile=BC_onMobile;function addBeforeCapture(){1==video.player_options.interaction_before_email_capture||"true"==video.player_options.interaction_before_email_capture?(add_before_email_capture(),countInteractionDisplays("email_capture","before",player.currentTime())):1!=video.player_options.interaction_before_share_capture&&"true"!=video.player_options.interaction_before_share_capture||(add_before_share_gate(),countInteractionDisplays("share_gate","before",player.currentTime()))}function add_before_email_capture(){if($(document).find(".before-email-capture-wrap").hide(),"true"!=video.player_options.interaction_before_email_capture&&1!=video.player_options.interaction_before_email_capture||is_schedule_running||is_stream_ended)$(document).find(".before-email-capture-wrap").show();else{var e='<div class="widget-name email-capture-wrap before-email-capture-wrap '+("full"==video.player_options.interaction_before_email_capture_type?"full-size":"")+" "+("minimized"==video.player_options.interaction_before_email_capture_type?"minimized-size":"")+'"><div class="inner-wrap">';"true"!=video.player_options.interaction_before_email_capture_allow_skip&&1!=video.player_options.interaction_before_email_capture_allow_skip||(e+='<span class="skip">skip</span> '),""!=video.player_options.interaction_before_email_capture_upper_text&&(e+='<h1 class="upper-text" style="font-size: 37px;">'+video.player_options.interaction_before_email_capture_upper_text+"</h1>"),isMobile||(e+=' <div class="firstname-lastname-wrap">',"true"!=video.player_options.interaction_before_email_capture_firstname&&1!=video.player_options.interaction_before_email_capture_firstname||(e+='<div class="firstname"><label for="" style="color: rgb(255, 255, 255);">First name</label> <span><div><div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="first_name"></div> </div></span></div> '),"true"!=video.player_options.interaction_before_email_capture_firstname&&1!=video.player_options.interaction_before_email_capture_firstname||(e+='<div class="lastname"><label for="" style="color: rgb(255, 255, 255);">Last name</label> <div class="el-input">\x3c!----\x3e<input type="text" autocomplete="off" class="el-input__inner" name="last_name"></div></div> '),e+=" </div>"),e+='<div class="email-phone-wrap"><div class="email"><label for="" style="color: rgb(255, 255, 255);">Email</label> <span><div><div class="el-input">\x3c!----\x3e<input type="email" autocomplete="off" class="el-input__inner" name="email"></div> \x3c!----\x3e</div></span></div> \x3c!----\x3e',"true"!=video.player_options.interaction_before_email_capture_phone_number&&1!=video.player_options.interaction_before_email_capture_phone_number||isMobile||(e+='<div class="phone"><label for="">Phone</label> <div class="el-input">\x3c!----\x3e<input type="text" autocomplete="off" class="el-input__inner" name="phone">\x3c!----\x3e\x3c!----\x3e\x3c!----\x3e\x3c!----\x3e</div></div>'),e+="</div> ",e+='<div class="submit-wrap"><button type="button" class="el-button el-button--submit submit-form">\x3c!----\x3e\x3c!----\x3e<span> '+video.player_options.interaction_before_email_capture_button_text+"</span></button></div> ",""!=video.player_options.interaction_before_email_capture_lower_text&&(e+='<div class="lower-text">'+video.player_options.interaction_before_email_capture_lower_text+"</div></div></div>"),$(document).find(".video-player .before-email-capture-wrap").remove(),player.pause(),player.exitFullscreen(),$(document).find(".video-player").append(e)}}function set_watched_cookie(e){const t=new Date;t.setTime(t.getTime()+24*e*60*60*1e3);let i="expires="+t.toUTCString();document.cookie=video.video_id+"=true;"+i+";path=/"}function cookie_data_exists(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var r=i[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function setCookie(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3),document.cookie=e+"="+t+";expires="+n.toUTCString()}function getCookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}function opt_in_form_field_validated(e,t,i){const n=!e||video.player_options[`interaction_before_email_capture_${e}`];if(isMobile)return!0;const r=$(".before-email-capture-wrap").find(`[name="${t}"]`);if("true"===n||!0===n){const e=!!r.val();return e||show_error_message_for_form(r,t,i),e}return!0}function show_required_message(e,t){$(document).on("keyup",`.before-email-capture-wrap [name="${e}"], .during-email-capture-wrap [name="${e}"], .after-email-capture-wrap [name="${e}"]`,function(){if(""!==$(this).val())return $(this).parent().parent().find(`.${e}-error`).remove(),!0;show_error_message_for_form($(this),e,t)})}function show_error_message_for_form(e,t,i){var n=`<p class="${t}-error">\n        <img alt="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOC4wODgiIGhlaWdodD0iMTguMDg4IiB2aWV3Qm94PSIwIDAgMTguMDg4IDE4LjA4OCI+CiAgPGcgaWQ9IkdydXBwZV8xMDk5OCIgZGF0YS1uYW1lPSJHcnVwcGUgMTA5OTgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MjggLTQ3OSkiPgogICAgPGNpcmNsZSBpZD0iRWxsaXBzZV80MjYwIiBkYXRhLW5hbWU9IkVsbGlwc2UgNDI2MCIgY3g9IjkuMDQ0IiBjeT0iOS4wNDQiIHI9IjkuMDQ0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MjggNDc5KSIgZmlsbD0iI2VlNTk1MSIvPgogICAgPGcgaWQ9IkdydXBwZV84NTY5IiBkYXRhLW5hbWU9IkdydXBwZSA4NTY5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MzguMTAzIDQ5Mi44MTIpIHJvdGF0ZSgxODApIj4KICAgICAgPGNpcmNsZSBpZD0iRWxsaXBzZV80MjU5IiBkYXRhLW5hbWU9IkVsbGlwc2UgNDI1OSIgY3g9IjAuOTk0IiBjeT0iMC45OTQiIHI9IjAuOTk0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwKSIgZmlsbD0iI2ZmZiIvPgogICAgICA8cGF0aCBpZD0iUGZhZF84MjI5IiBkYXRhLW5hbWU9IlBmYWQgODIyOSIgZD0iTS41OTUsMEEuNi42LDAsMCwwLDAsLjU5NVY1LjY0OGEuNTk1LjU5NSwwLDEsMCwxLjE4OSwwVi41OTVBLjYuNiwwLDAsMCwuNTk1LDBaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjQzNSAzLjYxKSIgZmlsbD0iI2ZmZiIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg==" align="sub">  ${i} is required\n    </p>`;e.parent().parent().find(`.${t}-error`).remove(),e.parent().parent().append(n)}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function after_video_email_capture(){let e=!1;window.screen.availWidth<=414&&(e=!0);var t=e,i='<div class="widget-name email-capture-wrap after-email-capture-wrap '+("full"==video.player_options.interaction_after_email_capture_type?"full-size":"")+" "+("minimized"==video.player_options.interaction_after_email_capture_type?"minimized-size":"")+'"><div class="inner-wrap">';"true"!=video.player_options.interaction_after_email_capture_allow_skip&&1!=video.player_options.interaction_after_email_capture_allow_skip||(i+='<span class="skip">skip</span> '),""!=video.player_options.interaction_after_email_capture_upper_text&&(i+='<h1 class="upper-text" style="font-size: 37px;">'+video.player_options.interaction_after_email_capture_upper_text+"</h1>"),t||(i+=' <div class="firstname-lastname-wrap">',"true"==video.player_options.interaction_after_email_capture_firstname&&(i+='<div class="firstname"><label for="" style="color: rgb(255, 255, 255);">First name</label> <span><div><div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="first_name"></div> </div></span></div> '),"true"==video.player_options.interaction_after_email_capture_lastname&&(i+='<div class="lastname"><label for="" style="color: rgb(255, 255, 255);">Last name</label> <div class="el-input">\x3c!----\x3e<input type="text" autocomplete="off" class="el-input__inner" name="last_name"></div></div> '),i+=" </div>"),i+='<div class="email-phone-wrap"><div class="email"><label for="" style="color: rgb(255, 255, 255);">Email</label> <span><div><div class="el-input">\x3c!----\x3e<input type="email" autocomplete="off" class="el-input__inner" name="email"></div> \x3c!----\x3e</div></span></div> \x3c!----\x3e',"true"!=video.player_options.interaction_after_email_capture_phone_number||t||(i+='<div class="phone"><label for="">Phone</label> <div class="el-input">\x3c!----\x3e<input type="text" autocomplete="off" class="el-input__inner" name="phone">\x3c!----\x3e\x3c!----\x3e\x3c!----\x3e\x3c!----\x3e</div></div>'),i+="</div> ",i+='<div class="submit-wrap"><button type="button" class="el-button el-button--submit submit-form">\x3c!----\x3e\x3c!----\x3e<span> '+video.player_options.interaction_after_email_capture_button_text+"</span></button></div> ",""!=video.player_options.interaction_after_email_capture_lower_text&&(i+='<div class="lower-text">'+video.player_options.interaction_after_email_capture_lower_text+"</div></div></div>"),$(document).find(".video-player .after-email-capture-wrap").remove(),player.pause(),player.exitFullscreen(),$(document).find(".video-player").append(i)}$(document).on("click",".before-email-capture-wrap .skip",function(){player.play();let e={type:"email_capture",phase:"before",timestamp:player.currentTime(),extra:{}};player.trigger("CTASkip",e),$(document).find(".before-email-capture-wrap").remove()}),$(document).on("click",".before-email-capture-wrap .submit-form",function(){if(f_valid=opt_in_form_field_validated("firstname","first_name","First Name"),l_valid=opt_in_form_field_validated("firstname","last_name","Last Name"),p_valid=opt_in_form_field_validated("phone_number","phone","Phone"),e_valid=opt_in_form_field_validated(null,"email","Email"),f_valid&&l_valid&&p_valid&&e_valid&&validateEmail($(".before-email-capture-wrap").find('[name="email"]').val())){$(this).find("span").prepend('<i class="el-icon-loading"></i>');var e=$(this);$.ajax({type:"post",url:EMBED_URL+"api/leadCapture",data:{firstname:$(".before-email-capture-wrap").find('[name="first_name"]').val(),lastname:$(".before-email-capture-wrap").find('[name="last_name"]').val(),email:$(".before-email-capture-wrap").find('[name="email"]').val(),phone:$(".before-email-capture-wrap").find('[name="phone"]').val(),type:"before",user_id:video.owner,project_id:video.video_project.id,team_id:video.team,video_id:video.id,log_element:"before_video_email_capture",email_list:video.player_options.interaction_before_email_capture_email_list},success:function(e){setCookie(video.id+"_before_interaction",!0,360),set_watched_cookie(7),player.play(),$(document).find(".before-email-capture-wrap").remove(),registerInteraction("email_capture","before",player.currentTime())},error:function(t){e.find("span .el-icon-loading").remove()}})}}),$(document).on("keyup",'.before-email-capture-wrap [name="email"], .during-email-capture-wrap [name="email"], .after-email-capture-wrap [name="email"]',function(){if(validateEmail($(this).val()))return $(this).parent().parent().find(".email-error").remove(),!0;$(this).parent().parent().find(".email-error").remove(),$(this).parent().parent().append('<p class="email-error"><img alt="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOC4wODgiIGhlaWdodD0iMTguMDg4IiB2aWV3Qm94PSIwIDAgMTguMDg4IDE4LjA4OCI+CiAgPGcgaWQ9IkdydXBwZV8xMDk5OCIgZGF0YS1uYW1lPSJHcnVwcGUgMTA5OTgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MjggLTQ3OSkiPgogICAgPGNpcmNsZSBpZD0iRWxsaXBzZV80MjYwIiBkYXRhLW5hbWU9IkVsbGlwc2UgNDI2MCIgY3g9IjkuMDQ0IiBjeT0iOS4wNDQiIHI9IjkuMDQ0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MjggNDc5KSIgZmlsbD0iI2VlNTk1MSIvPgogICAgPGcgaWQ9IkdydXBwZV84NTY5IiBkYXRhLW5hbWU9IkdydXBwZSA4NTY5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MzguMTAzIDQ5Mi44MTIpIHJvdGF0ZSgxODApIj4KICAgICAgPGNpcmNsZSBpZD0iRWxsaXBzZV80MjU5IiBkYXRhLW5hbWU9IkVsbGlwc2UgNDI1OSIgY3g9IjAuOTk0IiBjeT0iMC45OTQiIHI9IjAuOTk0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwKSIgZmlsbD0iI2ZmZiIvPgogICAgICA8cGF0aCBpZD0iUGZhZF84MjI5IiBkYXRhLW5hbWU9IlBmYWQgODIyOSIgZD0iTS41OTUsMEEuNi42LDAsMCwwLDAsLjU5NVY1LjY0OGEuNTk1LjU5NSwwLDEsMCwxLjE4OSwwVi41OTVBLjYuNiwwLDAsMCwuNTk1LDBaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjQzNSAzLjYxKSIgZmlsbD0iI2ZmZiIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg==" align="sub"> This must be a valid email address\n            </p>')}),show_required_message("first_name","First Name"),show_required_message("last_name","Last Name"),show_required_message("phone","Phone"),$(document).on("click",".during-email-capture-wrap .skip",function(){player.play(),$(document).find(".during-email-capture-wrap").remove();let e={type:"email_capture",phase:"during",timestamp:player.currentTime(),extra:{}};player.trigger("CTASkip",e)}),$(document).on("click",".capture-email-wrap .capture-button",function(){if(console.log("click"),validateEmail($(".capture-email-wrap").find('[name="email"]').val())){$(this).find("span").prepend('<i class="el-icon-loading"></i>');var e=$(this);$.ajax({type:"post",url:EMBED_URL+"api/leadCapture",data:{firstname:$(".capture-email-wrap").find('[name="first_name"]').val(),lastname:$(".capture-email-wrap").find('[name="last_name"]').val(),email:$(".capture-email-wrap").find('[name="email"]').val(),phone:$(".capture-email-wrap").find('[name="phone"]').val(),type:"during",user_id:video.owner,project_id:video.video_project.id,team_id:video.team,video_id:video.id,log_element:"capture-email-wrap",email_list:video.player_options.interaction_during_email_capture_email_list},success:function(e){setCookie(video.id+"_during_interaction",!0,360),player.play(),$(document).find(".capture-email-wrap").remove(),registerInteraction("email_capture","during",player.currentTime())},error:function(t){e.find("span .el-icon-loading").remove()}})}}),$(document).on("click",".after-email-capture-wrap .skip",function(){player.play(),replay(),$(document).find(".after-email-capture-wrap").remove();let e={type:"email_capture",phase:"after",timestamp:player.currentTime(),extra:{}};player.trigger("CTASkip",e)}),$(document).on("click",".after-email-capture-wrap .submit-form",function(){if(validateEmail($(".after-email-capture-wrap").find('[name="email"]').val())){$(this).find("span").prepend('<i class="el-icon-loading"></i>');var e=$(this);$.ajax({type:"post",url:EMBED_URL+"api/leadCapture",data:{firstname:$(".after-email-capture-wrap").find('[name="first_name"]').val(),lastname:$(".after-email-capture-wrap").find('[name="last_name"]').val(),email:$(".after-email-capture-wrap").find('[name="email"]').val(),phone:$(".after-email-capture-wrap").find('[name="phone"]').val(),type:"after",user_id:video.owner,project_id:video.video_project.id,team_id:video.team,video_id:video.id,email_list:video.player_options.after_video_email_capture},success:function(e){setCookie(video.id+"_after_interaction",!0,360),player.play(),$(document).find(".after-email-capture-wrap").remove(),registerInteraction("email_capture","after",player.currentTime())},error:function(t){e.find("span .el-icon-loading").remove()}})}});var playlist=!1,playlist_second_time=!1;function add_playlist_data(){if(queryParams.has("list")){var e=queryParams.get("list");e&&$.ajax({type:"get",url:EMBED_URL+"api/playlist?id="+e,success:function(e){var t=0;if(playlist=e){if($.each(playlist.videos,function(e,i){video.id==i.id&&(current_playlist_video=e+1,t=e)}),nextVideoId=playlist.videos[t+1],prevVideoId=playlist.videos[t-1],null==prevVideoId){let e=playlist.videos.length-1;prevVideoId=playlist.videos[e]}null==nextVideoId&&(nextVideoId=playlist.videos[0]),$(document).find("#embedVideo").addClass("playlist-mode");var i="custom"===playlist.apperance?playlist.color:project_setting.color,n=lighterPlayerColor(i);if("billboard"===playlist.theme)0==playlist_second_time&&(billiBoardTheme(playlist,nextVideoId,prevVideoId),playlist_second_time=!0),$(document).find("#embedVideo").append('<button class="billiboard-prev billiboard-arrow update-playlist-video" data-video_id='+prevVideoId.id+"></button>"),$(document).find("#embedVideo").append('<button class="billiboard-next billiboard-arrow update-playlist-video" data-video_id='+nextVideoId.id+"></button>"),$(document).find(".billboard-video-title").remove(),$(document).find(".billboard-theme-section").append('<div class="billboard-video-title"><h3>'+video.title+"</h3></div>"),$(".billboard-slider-block .slick-slider .slick-arrow").css("background",i),$(document).find(".billboard-video-title").css("border-color",i),$(document).find(".billiboard-arrow").css("background",i);else if("pilot"===playlist.theme)current_video=video,pilotTheme(playlist,t),$(".pilottheme-section .pilot-arrow").css("background",i);else if("portal"===playlist.theme)portalTheme(playlist),$(".portal-main-desc-div").css("border-color",i);else if("course"===playlist.theme)courseTheme(playlist,current_playlist_video);else if("grid"===playlist.theme)gridTheme(playlist),$(".grid-playlist-title p").css("background-color",i),$(".grid-theme-section").css("border-color",i),$(".grid-theme-section").css("background-color",n);else if("lake"===playlist.theme)lakeTheme(playlist),$(".lake-grid-box.active").css("border-color",i),$(".lake-playlist-title p").css("background-color",i),$(".lake-grid-section").css("background-color",n);else if("modern"===playlist.theme)modernAudioTheme(playlist,current_playlist_video),$(".modern-audio-player-section").css("background-color",i);else if("backdrop"===playlist.theme)backdropTheme(playlist);else if("supersonic"===playlist.theme)superSonicTheme(playlist),$(".super-sonic-audio-player-section .super-sonic-audio-detail").css("background-color",i),$(".super-sonic-audio-player-section .video-container.super-sonic-audio-player").css("background-color",i);else{var r='<div class="play-list-area"><div id="show-playlist-button"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDBWMHoiLz4KPHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTTQgMTBoMTJ2Mkg0em0wLTRoMTJ2Mkg0em0wIDhoOHYySDR6bTEwIDB2Nmw1LTN6Ii8+PC9zdmc+Cg=="> <br>\n\t    <span class="current_playlist_video">'+current_playlist_video+" /  "+playlist.videos.length+"</span>\n\t</div></div>";$(document).find("#embedVideo .play-list-area").remove(),$(document).find("#embedVideo").append(r)}}},error:function(e){}})}}function adjustVideoDimensions(e){var t=parseFloat(e.width/e.height);if(console.log(t),$("#embedVideo").length)var i=$(window).height()-$("#embedVideo").offset().top;else i=$(window).height()-$(".main_div").offset().top;var n=Math.min($(window).width(),960);if(Math.round(n/t)>i){var r=getDimensionsForHeight(i,t);$("#embedVideo").css("maxHeight",r.height),$("#embedVideo").css("maxWidth",r.width),$(".main_div").css("maxHeight",r.height),$(".main_div").css("maxWidth",r.width)}else queryParams.has("editor")||($("#embedVideo").css("max-width","100%"),$(".main_div").css("max-width","100%"))}function getDimensionsForHeight(e,t){var i={};return i.height=e,i.width=Math.round(i.height*t),i}function reset_video(){reportedDuringDisplays={email_capture:!1,share_gate:!1,text:!1,image:!1,html:!1,callout_button:!1,call_to_action:!1},publishableMediaData={},publishablePlayerData={},duration=0,watched=new Array(0),reportedView=!1,show_text=!0,is_schedule_running=!1,is_stream_ended=!1,watchSessionId=!1,passwordSucceeded=!1,playerReady=!1,screenMode="window",videoEnded=!1,videoPlaying=!1,videoStarted=!1,muteIcon=!1,canModifyTime=!0,settingsMenuActive=!0,widevine="",playready="",canLoad=!1,resumeWatchFrom=0,localStorageDuration=[],visualWatermarkContent=[],visibleWatermark="",fadeOut=!1,interval=0,lastEngagementLogTime=0,lastFrame=!1,playbackEnabled=!1,showChapters=!1,showSubtitles=!1,adiloPopupVisible=!1,shareMenuVisible=!1,controlBarReady=!1,blinking_sound_visible=!1,showDownloadVideo=!1,volumeGif=!0,currentTime=0,executed=[],qualityLevels=[],videoId=null,playbarPopupsPosition=null,showOverlay=!1,language=[{name:"English",code:"en"},{name:"Spanish",code:"es"},{name:"French",code:"fr"},{name:"Chinese",code:"zh"},{name:"Italian",code:"it"},{name:"Vietnamese",code:"vi"},{name:"Portuguese",code:"pt"},{name:"Arabic",code:"ar"},{name:"German",code:"de"},{name:"Hindi",code:"hi"},{name:"Javanese",code:"jv"},{name:"Japanese",code:"jp"},{name:"Korean",code:"ko"},{name:"Romanian",code:"ro"},{name:"Polish",code:"pl"},{name:"Irish",code:"ga"},{name:"Dutch",code:"nl"},{name:"Hebrew",code:"he"},{name:"Javanese",code:"jv"},{name:"Indonesian",code:"id"},{name:"Greek",code:"el"},{name:"Filipino",code:"tl"},{name:"Czech",code:"cs"},{name:"Thai",code:"th"},{name:"Urdu",code:"ur"},{name:"Malay",code:"ms"},{name:"Persian",code:"fa"},{name:"Finnish",code:"fi"},{name:"Turkish",code:"tr"},{name:"Danish",code:"da"},{name:"Swedish",code:"sv"}],userStatus={active:!0,logged:!1,inRequest:!1,userData:null,freeUser:null},showBandwidthWarning={show:!1,head:"",body:""},playbackRates=[.5,1,1.5,2],queryParams=new URLSearchParams(window.location.search);video.schedular}function enable_branding_logo(){if("default"!=video.player_options.appearance_type&&ownerStatus.in_video_branding&&userStatus.logo&&!userStatus.freeUser&&("video"==embed_status&&"true"==video.player_options.branding_active||1==video.player_options.branding_active)||null!=playlist_data&&"custom"==playlist_data.apperance&&"playlist"==embed_status&&1==playlist_data.active){const t=ownerStatus.position,i=ownerStatus.hoverable>0?"logo-hover":"",n=getLogoSideSection(ownerStatus);var e="";e+='<div class="vjs-branding d-flex '+t+" "+i+'" style="position: absolute; z-index: 0; width: max-content; height: max-content;"><img src="'+userStatus.logo+'" class="user-logo-image">'+n+"</div>",$(document).find(".user-logo-image").remove(),$(document).find(".video-player .vjs-custom-skin").append(e)}else if(project_setting.ownerStatus.in_video_branding&&userStatus.logo&&!userStatus.freeUser&&"true"==project_setting.branding_active){const t=project_setting.ownerStatus.position,i=project_setting.ownerStatus.hoverable>0?"logo-hover":"",n=getLogoSideSection(project_setting.ownerStatus);e="";e+='<div class="vjs-branding d-flex '+t+" "+i+'" style="position: absolute; z-index: 0; width: max-content; height: max-content;"><img src="'+userStatus.logo+'" class="user-logo-image">'+n+"</div>",$(document).find(".user-logo-image").remove(),$(document).find(".video-player .vjs-custom-skin").append(e)}}function getLogoSideSection(e){let t="",i=e.name;if(e.hoverable){if(t+='<div class="logo-side-section">',t+=`<div style="color: ${e.color}" class="logo-side-section-title">${i||""}</div>`,t+=`<div style="color: ${e.color}" class="logo-side-section-tags">${e.tags||""}</div>`,e.clickable&&e.website){let i=e.website;i.includes("//")||(i=`//${i}`),t+=`<div style="border-color: ${e.color}; " class="logo-side-section-tag"><a style="color: ${e.color}" href="${i}" target="_blank">Visit us</a></div>`}t+="</div>"}return t}function scheduled_publishing(){setDate(),timer();var e='<div data-v-399fd730="" class="widget-name email-capture-wrap video_schedule before_video_schedule"><div data-v-399fd730="" class="inner-wrap">';""!=schedular.stream_start_text&&(e+='<h1 data-v-399fd730="" class="upper-text">This Video Will Begin Streaming In</h1>'),e+=' <div data-v-399fd730="" class="counter"><ul data-v-399fd730="" class="video_timer"><li data-v-399fd730=""><div data-v-399fd730="" class="timer"><span data-v-399fd730="" class="schedule-days">'+days+'</span></div> <p data-v-399fd730="" class="timer_type">DAYS</p></li> <li data-v-399fd730=""><div data-v-399fd730="" class="timer"><span data-v-399fd730="" class="schedule-hours">'+hours+'</span></div> <p data-v-399fd730="" class="timer_type">HOURS</p></li> <li data-v-399fd730=""><div data-v-399fd730="" class="timer"><span data-v-399fd730="" class="schedule-mins">'+mins+'</span></div> <p data-v-399fd730="" class="timer_type">MINUTES</p></li> <li data-v-399fd730=""><div data-v-399fd730="" class="timer"><span data-v-399fd730="" class="schedule-secs">'+secs+'</span></div> <p data-v-399fd730="" class="timer_type">SECONDS</p></li></ul></div> <div data-v-399fd730="" class="timer_end_date"><p data-v-399fd730="">'+showStreamStartDate(formated_start_date)+'</p></div> <div data-v-399fd730="" class="soon_text">',""!=schedular.stream_start_text&&null!==schedular.stream_start_text&&void 0!==schedular.stream_start_text&&(e+='<p data-v-399fd730="">'+schedular.stream_start_text+"</p>"),e+="</div></div> ",e+="</div>",$(document).find(".video-player").find(".before_video_schedule").remove(),$(document).find(".video-player").append(e)}function timer(){if(test_browser._isSafari&&!test_browser._isChrome)var e=schedular.stream_start_date.split("-"),t=new Date(e[1]+"/"+e[2]+"/"+e[0]+" "+schedular.stream_start_hour+":"+schedular.stream_start_min+":00").getTime();else t=new Date(streamStartDate).getTime(),t=new Date(schedular.stream_start_date+" "+schedular.stream_start_hour+":"+schedular.stream_start_min+":00").getTime();new Date;x=setInterval(()=>{let e=(new Date).getTime(),i=t-e;days=Math.floor(i/864e5),hours=Math.floor(i%864e5/36e5).toString(),mins=Math.floor(i%36e5/6e4),secs=Math.floor(i%6e4/1e3),i<0&&(stopTimer(),days="00",hours="00",mins="00",secs="00",livevideo=!1,schedular.is_running=!1,$(document).find(".before_video_schedule").remove(),schedular.is_end_stream&&""!=video.stream_end_date&&streamEnd()),$(".schedule-days").text(days),$(".schedule-hours").text(hours),$(".schedule-mins").text(mins),$(".schedule-secs").text(secs)},1e3)}function stopTimer(){clearInterval(this.x),this.schedular.is_running=!1}function setDate(){let e=schedular.stream_start_hour?schedular.stream_start_hour:0,t=schedular.stream_start_min?schedular.stream_start_min:0,i=schedular.stream_end_hour?schedular.stream_end_hour:0,n=schedular.stream_end_min?schedular.stream_end_min:0,r=getDate(schedular.stream_start_date),a=getDate(schedular.stream_end_date);if(streamStartDate=r,r&&(e=("0"+e).slice(-2),t=("0"+t).slice(-2),formated_start_date=`${r}T${e}:${t}:00`,streamStartDate=getUTCDateTime(formated_start_date)),a){i=("0"+i).slice(-2),n=("0"+n).slice(-2),streamEndDate=getUTCDateTime(`${a}T${i}:${n}:00`)}}function getDate(e){if(e){let t=new Date(e),i=t.getMonth()+1;i=("0"+i).slice(-2);let n=t.getDate();return t.getFullYear()+"-"+i+"-"+n}return null}function getUTCDateTime(e){if(e){e=parseUTC(e);let t=new Date(e.toString()),i=t.getMonth()+1,n=t.getDate(),r=t.getFullYear(),a=t.getHours(),s=t.getMinutes(),o=t.getSeconds();return r+"-"+("0"+i).slice(-2)+"-"+("0"+n).slice(-2)+" "+("0"+a).slice(-2)+":"+("0"+s).slice(-2)+":"+o}return null}function parseUTC(e){var t=e.split(/\D/);return new Date(Date.UTC(t[0],--t[1],t[2],t[3],t[4],t[5]))}function showStreamStartDate(){const e=["January","February","March","April","May","June","July","August","September","October","November","December"];if(test_browser._isSafari&&!test_browser._isChrome)var t=schedular.stream_start_date.split("-"),i=new Date(t[1]+"/"+t[2]+"/"+t[0]+" "+schedular.stream_start_hour+":"+schedular.stream_start_min+":00");else i=new Date(schedular.stream_start_date+" "+schedular.stream_start_hour+":"+schedular.stream_start_min+":00");let n=i.getDate(),r=i.getHours(),a=i.getMinutes();a<10&&(a="0"+a);let s="am";return 0==r?r=12:r>12&&(r%=12,s="pm"),formated_start_date?`${e[i.getMonth()]} ${n} @ ${r}:${a} ${s}`:""}function streamEnd(){var e=new Date;let t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()).getTime(),i=streamEndDate;getDate(schedular.stream_end_date);var n=i.split(/\D/),r=new Date(n[0],--n[1],n[2],n[3],n[4]);i=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds()).getTime();if(schedular.is_stream_ended=!1,isEnded=!1,t>i){var a='<div data-v-399fd730="" class="widget-name email-capture-wrap video_schedule before_video_schedule">';schedular.is_stream_end_text&&(a+='<div data-v-3bf39bfc="" class="inner-wrap end-text-wrap"><h1 data-v-3bf39bfc="" class="upper-text">Sorry, This Video Stream Has Ended!</h1> <div data-v-3bf39bfc="" class="counter"><div data-v-3bf39bfc="" class="submit-wrap">',schedular.is_action_button&&(a+='<a data-v-3bf39bfc="" type="submit" href="'+schedular.button_link+'">'+schedular.button_text+"</a>"),a+='</div></div> <div data-v-3bf39bfc="" class="soon_text">',""!=schedular.stream_end_text&&void 0!==schedular.stream_end_text&&(a+='<p data-v-3bf39bfc="">'+schedular.stream_end_text+"</p>"),a+="</div>"),a+="</div>",$(document).find(".video-player").find(".before_video_schedule").remove(),$(document).find(".video-player").append(a),schedular.is_running=!1,schedular.is_stream_ended=!0}}function prev_v(){$.each(playlist.videos,function(e,t){if(current_playlist_video==e)return t})}function player_play(){setVideoWidthHeight(),parent.postMessage({eventName:"play",media:publishableMediaData},"*");var e=!1,t=!1;if(queryParams.get("list")){$.each(playlist.videos,function(t,i){if(current_playlist_video-2==t&&t>=0&&!e){e=i;var n='<div id="prev-preview" ref="prev" v-if="prev">\n\t    <div class="thumb">\n\t\t<div class="img" style="background-image: url('+i.thumbnail+')">&nbsp;</div>\n\t    </div>\n\t    <div class="label">\n\t\t<div>Previous Video</div>\n\t\t<div>'+i.title+"</div>\n\t    </div>\n\t</div>\n";return $(n).insertAfter(".vjs-icon-previous-item"),!1}}),$.each(playlist.videos,function(e,i){if(current_playlist_video==e&&e!==playlist.videos.length&&!t){t=i;var n='<div id="next-preview" ref="next" v-if="next">\n\t    <div class="thumb">\n\t\t<div class="img" style="background-image: url('+i.thumbnail+')">&nbsp;</div>\n\t    </div>\n\t    <div class="label">\n\t\t<div>Previous Video</div>\n\t\t<div>'+i.title+"</div>\n\t    </div>\n\t</div>\n";return $(n).insertAfter(".vjs-icon-next-item"),!1}});var i='<div class="playlist-css"><style>',n=11;if(t||(i+=".vjs-icon-next-item {display: none !important}",n-=3),e||(i+=".vjs-icon-previous-item {display: none !important}",n-=3),i+=".playlist-mode .vjs-control-bar .vjs-time-control {left: "+n+"em !important;}",queryParams.has("minified")&&(i+=".play-list-area {display: none !important}",i+=".vjs-volume-menu-button, .vjs-volume-panel {display: block !important}"),i+="</style></div>",$(".playlist-mode .playlist-css").remove(),$(".playlist-mode").append(i),$(i).insertAfter(".play-list-area"),queryParams.has("minified")&&1==video.is_audio){var r='<div class="audioDetail">\n                        <span class="title marquee">'+video.title+'</span><br>\n                        <span class="author-name marqueee">'+(null!==video.author_name&&""!==video.author_name?video.author_name:video.video_owner.name)+"</span><br>\n                        \n                        \n                    </div>";$(document).find(".video-container .video-player").append(r);var a=video.duration_formatted.split(":");3===a.length&&("00"==a[0]&&a.splice(0,1),"00"==a[1]&&(a[1]="0")),2===a.length&&"00"==a[0]&&(a[0]="0");r='<div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Duration&nbsp;</span><span class="vjs-duration-display" aria-live="off" role="presentation">'+a.join(":");$(document).find(".video-container .video-player .video-js .vjs-control-bar .vjs-duration.vjs-time-control").remove(),$(document).find(".video-container .video-player .video-js .vjs-control-bar").append(r)}}var s=null!==video.author_name&&""!==video.author_name?video.author_name:video.video_owner.name;void 0!==s&&s.length<=15?$(document).find(".audioDetail").removeClass("animatedAuthor"):$(document).find(".audioDetail").addClass("animatedAuthor"),video.title.length<=15?$(document).find(".audioDetail").removeClass("animated"):$(document).find(".audioDetail").addClass("animated"),videoEnded=!1,videoPlaying=!0,videoStarted||(videoStarted=!0),canModifyTime&&setTimeByUrl(player),qualityLevels.length>0&&(getQualities(),qualityIsHd()&&0==video.is_audio?$(document).find(".videojs-wrap").addClass("videojs-hd"):$(document).find(".videojs-wrap").removeClass("videojs-hd")),$(document).find(".video-player .videojs-text-overlay").remove(),queryParams.has("responsive")&&$("video").css("object-fit","cover"),video.reels.length>0&&null!==video.reel_url&&""!==video.reel_url&&canAutoPlayReel,adjustVideoDimensions(video)}function player_pause(){parent.postMessage({eventName:"paused",currentPlayerTimestamp:player.currentTime(),media:publishableMediaData},"*"),$(document).find(".vjs-custom-setting-modal, .vjs-share-menu,.vjs-volume-menu-button .vjs-menu-content, .vjs-paused .vjs-captions-button .vjs-menu-content").css({display:"none"}),evaluateCurrentEngagement("pause");let e="#super-sonic-play-div-"+video.id,t="#super-sonic-sound-div-"+video.id;$(document).find(e).show(),$(document).find(t).hide();let i="#backdrop-play-div-"+video.id,n="#backdrop-sound-div-"+video.id;$(document).find(i).show(),$(document).find(n).hide(),videoPlaying=!1,showChapters=!1,clickOnProgressBar&&player.play(),player_status="stop"}function player_ended(){(parent.postMessage({eventName:"ended",media:publishableMediaData},"*"),player_status="stop",clickOnProgressBar=!1,show_text=!0,$(document).find(".video-container").removeClass("disable-video-playing"),queryParams.get("list")&&$.each(playlist.videos,function(e,t){if(e==current_playlist_video){current_playlist_video=e+1,$(document).find(".current_playlist_video").text(current_playlist_video+" / "+playlist.videos.length),video.player_options.password||(video.player_options.autoplay=!0,hidePlaybutton=!0),reset_video();video.timestamp;var i=video.ip,n=video.geoLocationDetail,r=video.language,a=video.allow_video;if(video=t,video.allow_video=a,video.ip=i,video.geoLocationDetail=n,video.language=r,video.allow_video=a,video&&(video.schedular=video.schedular?video.schedular:{},video.schedular.is_stream_ended=!1,video.schedular.is_running=!0),video.visual_watermarking){if(video.player_options.visual_watermark_name&&visualWatermarkContent.push("This video is licensed by: "+video.video_owner.name),"people_invited"===project_setting.permissions){var s=getCookie("BC-Invitee-Auth-Email");""!==s&&null!=s&&visualWatermarkContent.push("This video is licensed to: "+s)}video.player_options.deter_text&&null!==video.player_options.deterText&&""!==video.player_options.deterText&&null!==video.player_options.deterText&&void 0!==video.player_options.deterText&&visualWatermarkContent.push(video.player_options.deterText),video.player_options.visual_watermark_ip&&""!==video.ip&&null!==video.ip&&void 0!==video.ip&&visualWatermarkContent.push("This video is streamed to: "+video.ip),video.player_options.geo_location&&visualWatermarkContent.push("This video is streaming to "+video.geoLocationDetail+(video.player_options.visual_watermark_timestamp?" at "+video.timestamp:""))}video.drm_protection&&null==window.safari?(userStatus.inRequest=!0,canLoad=!1,$.ajax({type:"post",url:"https://encoding.bigcommand.com/api/v1.0/api.php",data:JSON.stringify({username:"precious",action:"get_drm_key",video_id:video.video_id}),dataType:"json",success:function(e){userStatus.inRequest=!1,widevine=e.result.Widevine,playready=e.result.PlayReady,canLoad=!0,checkUserStatus()},error:function(e){}})):(userStatus.inRequest=!1,canLoad=!0,checkUserStatus());var o=setInterval(function(){canLoad&&(reinitialize_player(),player.play(),clearInterval(o),$(document).find(".current_playlist_video").text(current_playlist_video+" / "+playlist.videos.length),$(document).find(".current_playlist_video").text(current_playlist_video+" / "+playlist.videos.length),$(this).parents("#playlist-wrap").remove())},10);return!1}}),$(document).find(".vjs-custom-setting-modal, .vjs-share-menu,.vjs-volume-menu-button .vjs-menu-content, .vjs-paused .vjs-captions-button .vjs-menu-content").css({display:"none"}),"email_capture"==video.player_options.interaction_after_type)&&(null===getCookie(video.id+"_after_interaction")&&(player.pause(),$(".during-email-capture-wrap").remove(),after_video_email_capture(),countInteractionDisplays("email_capture","after",player.currentTime())));watch_related_videos(),videoEnded=!0,lastFrame=!0;try{player.isFullscreen()&&player.exitFullscreen()}catch(e){}evaluateCurrentEngagement("ended");let e="#super-sonic-play-div-"+video.id,t="#super-sonic-sound-div-"+video.id;$(document).find(e).hide(),$(document).find(t).show();let i="#backdrop-play-div-"+video.id,n="#backdrop-sound-div-"+video.id;if($(document).find(i).hide(),$(document).find(n).show(),playbackEnabled&&store.remove("video_"+video.id+":playback"),"loop"===video.player_options.interaction_after_type?replay():player.pause(),"show_thumbnail"===video.player_options.interaction_after_type){if(videoStarted=!1,$(document).find(".vjs-control-bar").addClass("d-block"),player.currentTime(0),$(".vjs-has-started .vjs-poster").addClass("show_thumbnail"),player.poster(video.thumbnail),player.trigger("loadstart"),""!=video.player_options.text_overlay_text&&("true"==video.player_options.text_overlay||1==video.player_options.text_overlay)||"true"==video.experiment_overlay){var r='<div class="videojs-overlay videojs-text-overlay" style="font-size: 21.48px;"><span>'+(video.experiment_overlay?video.experiment_overlay:null!==video.player_options.text_overlay_text?video.player_options.text_overlay_text:"")+"</span></div>";$(document).find(".video-player .videojs-text-overlay").append(),$(document).find(".video-player").append(r)}}else $(document).find(".vjs-control-bar").removeClass("d-block");if("redirect"===video.player_options.interaction_after_type)return window.parent.location=video.player_options.interaction_after_cta_link_url;if("call_to_action"===video.player_options.interaction_after_type){if(player.pause(),player.controls(!1),"text"===video.player_options.interaction_after_cta_type){r='<div class="text-wrap after-video-text-wrap" style="">';video.player_options.interaction_after_cta_link_url.startsWith("http")||video.player_options.interaction_after_cta_link_url.startsWith("//:")?1===video.player_options.cta_new_tab_after?r+='<a href="'+video.player_options.interaction_after_cta_link_url+'" target="_blank" class="text-overlay-inner" onclick="handleCallToActionClick(\'call_to_action\', \'after\', \''+video.player_options.interaction_after_cta_link_url+"')\">":r+='<a href="'+video.player_options.interaction_after_cta_link_url+"\" class=\"text-overlay-inner\" onclick=\"handleCallToActionClick('call_to_action', 'after', '"+video.player_options.interaction_after_cta_link_url+"')\">":1===video.player_options.cta_new_tab_after?r+='<a href="https://'+video.player_options.interaction_after_cta_link_url+'" target="_blank" class="text-overlay-inner" onclick="handleCallToActionClick(\'call_to_action\', \'after\', \''+video.player_options.interaction_after_cta_link_url+"')\">":r+='<a href="https://'+video.player_options.interaction_after_cta_link_url+"\" class=\"text-overlay-inner\" onclick=\"handleCallToActionClick('call_to_action', 'after', '"+video.player_options.interaction_after_cta_link_url+"')\">",r+="<span>"+video.player_options.interaction_after_cta_text+'</span></a> <span class="replay"><img alt="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0Ni42OTIiIGhlaWdodD0iNDYuMjcxIiB2aWV3Qm94PSIwIDAgNDYuNjkyIDQ2LjI3MSI+CiAgPGcgaWQ9Im5vdW5fcmVwbGF5XzYzMzUyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAuMTgxIC0yNi4zMzIpIHJvdGF0ZSg0MCkiPgogICAgPGcgaWQ9IkdydXBwZV8xMjQxMiIgZGF0YS1uYW1lPSJHcnVwcGUgMTI0MTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3IDIwLjM2MSkiPgogICAgICA8ZyBpZD0iR3J1cHBlXzEyNDExIiBkYXRhLW5hbWU9IkdydXBwZSAxMjQxMSI+CiAgICAgICAgPHBhdGggaWQ9IlBmYWRfOTM5MCIgZGF0YS1uYW1lPSJQZmFkIDkzOTAiIGQ9Ik01MC4wOTEsMjkuNTgyQTE1LjQ2NCwxNS40NjQsMCwwLDEsNDYuOSw0Ni44MzNhMTYuMDA5LDE2LjAwOSwwLDAsMS00LjY1MywzLjE4OSwxNS43MTEsMTUuNzExLDAsMCwxLTEzLjItLjI3OGMtMS4zMjQtLjYxNS0uNDQ5LTIuNTIsMS4wODYtMS43NTRhMTMuMywxMy4zLDAsMCwwLDExLjIyNy4xNSwxMy4zODMsMTMuMzgzLDAsMCwwLDYuOC0xNy42NjksMTMuNDIzLDEzLjQyMywwLDAsMC0yNS4wNCw5LjU2N2wxLjItMy4xMzcsMS45MzQuNzMyLTIuNTYyLDYuNjM5TDE3LDQxLjcxbC43MzItMS45MzQsMy41LDEuMzU5QTE1LjU1MywxNS41NTMsMCwwLDEsNTAuMDkxLDI5LjU4MloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNyAtMjAuMzYxKSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAxOTIxIiBzdHJva2Utd2lkdGg9IjAuMiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"></span></div>',$(document).find(".video-player .after-video-text-wrap").remove(),$(document).find(".video-player").append(r),countInteractionDisplays("call_to_action","after",player.currentTime())}if("image"===video.player_options.interaction_after_cta_type){r='<div class="image-wrap after-video-image-wrap" style="">';video.player_options.interaction_after_cta_link_url.startsWith("http")||video.player_options.interaction_after_cta_link_url.startsWith("//:")?1===video.player_options.cta_new_tab_after?r+='<a target="_blank" href="'+video.player_options.interaction_after_cta_link_url+'" class="image-inner" style="background-image: url('+video.player_options.interaction_after_cta_image+');">&nbsp;</a> ':r+='<a href="'+video.player_options.interaction_after_cta_link_url+'" class="image-inner" style="background-image: url('+video.player_options.interaction_after_cta_image+');">&nbsp;</a> ':1===video.player_options.cta_new_tab_after?r+='<a target="_blank" href="https://'+video.player_options.interaction_after_cta_link_url+'" class="image-inner" style="background-image: url('+video.player_options.interaction_after_cta_image+');">&nbsp;</a> ':r+='<a href="https://'+video.player_options.interaction_after_cta_link_url+'" class="image-inner" style="background-image: url('+video.player_options.interaction_after_cta_image+');">&nbsp;</a> ',r+='<span class="replay after-video-image-replay"><img alt="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0Ni42OTIiIGhlaWdodD0iNDYuMjcxIiB2aWV3Qm94PSIwIDAgNDYuNjkyIDQ2LjI3MSI+CiAgPGcgaWQ9Im5vdW5fcmVwbGF5XzYzMzUyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAuMTgxIC0yNi4zMzIpIHJvdGF0ZSg0MCkiPgogICAgPGcgaWQ9IkdydXBwZV8xMjQxMiIgZGF0YS1uYW1lPSJHcnVwcGUgMTI0MTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3IDIwLjM2MSkiPgogICAgICA8ZyBpZD0iR3J1cHBlXzEyNDExIiBkYXRhLW5hbWU9IkdydXBwZSAxMjQxMSI+CiAgICAgICAgPHBhdGggaWQ9IlBmYWRfOTM5MCIgZGF0YS1uYW1lPSJQZmFkIDkzOTAiIGQ9Ik01MC4wOTEsMjkuNTgyQTE1LjQ2NCwxNS40NjQsMCwwLDEsNDYuOSw0Ni44MzNhMTYuMDA5LDE2LjAwOSwwLDAsMS00LjY1MywzLjE4OSwxNS43MTEsMTUuNzExLDAsMCwxLTEzLjItLjI3OGMtMS4zMjQtLjYxNS0uNDQ5LTIuNTIsMS4wODYtMS43NTRhMTMuMywxMy4zLDAsMCwwLDExLjIyNy4xNSwxMy4zODMsMTMuMzgzLDAsMCwwLDYuOC0xNy42NjksMTMuNDIzLDEzLjQyMywwLDAsMC0yNS4wNCw5LjU2N2wxLjItMy4xMzcsMS45MzQuNzMyLTIuNTYyLDYuNjM5TDE3LDQxLjcxbC43MzItMS45MzQsMy41LDEuMzU5QTE1LjU1MywxNS41NTMsMCwwLDEsNTAuMDkxLDI5LjU4MloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNyAtMjAuMzYxKSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAxOTIxIiBzdHJva2Utd2lkdGg9IjAuMiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"></span></div>',$(document).find(".video-player .after-video-image-wrap").remove(),$(document).find(".video-player").append(r),countInteractionDisplays("image","after",player.currentTime())}if("html_code"===video.player_options.interaction_after_cta_type){r='<div class="html-interaction-wrap after-video-html-wrap" style=""><div>';r+=video.player_options.interaction_after_cta_html_code,r+='<span class="replay after-video-html-replay"><img alt="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0Ni42OTIiIGhlaWdodD0iNDYuMjcxIiB2aWV3Qm94PSIwIDAgNDYuNjkyIDQ2LjI3MSI+CiAgPGcgaWQ9Im5vdW5fcmVwbGF5XzYzMzUyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAuMTgxIC0yNi4zMzIpIHJvdGF0ZSg0MCkiPgogICAgPGcgaWQ9IkdydXBwZV8xMjQxMiIgZGF0YS1uYW1lPSJHcnVwcGUgMTI0MTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3IDIwLjM2MSkiPgogICAgICA8ZyBpZD0iR3J1cHBlXzEyNDExIiBkYXRhLW5hbWU9IkdydXBwZSAxMjQxMSI+CiAgICAgICAgPHBhdGggaWQ9IlBmYWRfOTM5MCIgZGF0YS1uYW1lPSJQZmFkIDkzOTAiIGQ9Ik01MC4wOTEsMjkuNTgyQTE1LjQ2NCwxNS40NjQsMCwwLDEsNDYuOSw0Ni44MzNhMTYuMDA5LDE2LjAwOSwwLDAsMS00LjY1MywzLjE4OSwxNS43MTEsMTUuNzExLDAsMCwxLTEzLjItLjI3OGMtMS4zMjQtLjYxNS0uNDQ5LTIuNTIsMS4wODYtMS43NTRhMTMuMywxMy4zLDAsMCwwLDExLjIyNy4xNSwxMy4zODMsMTMuMzgzLDAsMCwwLDYuOC0xNy42NjksMTMuNDIzLDEzLjQyMywwLDAsMC0yNS4wNCw5LjU2N2wxLjItMy4xMzcsMS45MzQuNzMyLTIuNTYyLDYuNjM5TDE3LDQxLjcxbC43MzItMS45MzQsMy41LDEuMzU5QTE1LjU1MywxNS41NTMsMCwwLDEsNTAuMDkxLDI5LjU4MloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNyAtMjAuMzYxKSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAxOTIxIiBzdHJva2Utd2lkdGg9IjAuMiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"></span></div>',$(document).find(".video-player .after-video-html-wrap").remove(),$(document).find(".video-player").append(r),countInteractionDisplays("html","after",player.currentTime())}}video.reels.length>0&&null!==video.reel_url&&""!==video.reel_url&&show_reels&&canAutoPlayReel&&(player.currentTime(0),player.muted(!0),player.play())}function player_playing(){if(video.reels.length>0&&show_reels&&queryParams.has("reelPreview")&&canAutoPlayReel){$(".video-player.video-js").addClass("reel-running");var e='<div class="floatingVolumnBtn"><span style="margin-right: 10px">Turn on sound</span><img src="/embed/image/animated volume icon.svg"></div>';0===$(document).find(".floatingVolumnBtn").length&&$(document).find(".videojs-wrap .vjs-custom-skin").append(e)}if(video.reels.length>0&&null!==video.reel_url&&""!==video.reel_url&&show_reels&&canAutoPlayReel){$(".video-player.video-js").addClass("reel-running"),player.muted(!0);e='<div class="floatingVolumnBtn"><span style="margin-right: 10px">Turn on sound</span><img src="/embed/image/animated volume icon.svg"></div>';0===$(document).find(".floatingVolumnBtn").length&&$(document).find(".videojs-wrap .vjs-custom-skin").append(e)}if(player.controls(1),volumeGif=!0,$(".vjs-has-started .vjs-poster").removeClass("show_thumbnail"),"on_hover"==video.player_options.control_visibility&&test_browser._isMobile&&0==$(".video-container.minimized-audio-player").length&&($(".vjs-control-bar").removeClass("vjs-fade-out"),setTimeout(function(){$(".vjs-control-bar").addClass("vjs-fade-out")},1e3)),1!=video.player_options.disable_pause&&"true"!=video.player_options.disable_pause||($(document).find(".video-container").addClass("disable-video-playing"),player.controlBar.playToggle.disable()),video.video_chapters.length>0&&("true"==video.player_options.chapter_control||1==video.player_options.chapter_control)){$(document).find(".videojs-wrap .floatingChapterBtn").remove();var t=video.player_options.color;null===video.video_owner.settings.global_player_color||"false"!=video.player_options.disable_global_color&&0!=video.player_options.disable_global_color||(t=video.video_owner.settings.global_player_color),queryParams.has("editor")&&(t=video.player_options.color,"false"!=video.player_options.disable_global_color&&0!=video.player_options.disable_global_color||(t=video.video_owner.settings.global_player_color));e=' <div class="floatingChapterBtn">\n                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="148" height="47" viewBox="0 0 148 47">\n  <defs>\n    <filter id="Rectangle_3382" x="0" y="0" width="148" height="47" filterUnits="userSpaceOnUse">\n      <feOffset dy="3" input="SourceAlpha"/>\n      <feGaussianBlur stdDeviation="3" result="blur"/>\n      <feFlood flood-opacity="0.161"/>\n      <feComposite operator="in" in2="blur"/>\n      <feComposite in="SourceGraphic"/>\n    </filter>\n  </defs>\n  <g id="Group_16893" data-name="Group 16893" transform="translate(-702.784 -159.997)">\n    <g id="Group_16892" data-name="Group 16892" transform="translate(-99.216 -62.003)">\n      <g transform="matrix(1, 0, 0, 1, 802, 222)" filter="url(#Rectangle_3382)">\n        <rect id="Rectangle_3382-2" data-name="Rectangle 3382" width="130" height="29" rx="14.5" transform="translate(9 6)" fill="'+t+'"/>\n      </g>\n      <g id="Group_16891" data-name="Group 16891" transform="translate(-2.5 -0.326)">\n        <g id="Group_16890" data-name="Group 16890" transform="translate(-601.216 -391)">\n          <g id="Group_16867" data-name="Group 16867">\n            <path id="Path_9878" data-name="Path 9878" d="M394,548a2,2,0,1,1,2-2A2,2,0,0,1,394,548Z" transform="translate(1038.216 82)" fill="#fff" fill-rule="evenodd"/>\n          </g>\n          <g id="Group_16866" data-name="Group 16866">\n            <path id="Path_9879" data-name="Path 9879" d="M394,548a2,2,0,1,1,2-2A2,2,0,0,1,394,548Z" transform="translate(1038.216 87.653)" fill="#fff" fill-rule="evenodd"/>\n          </g>\n          <g id="Group_16868" data-name="Group 16868">\n            <path id="Path_9880" data-name="Path 9880" d="M394,548a2,2,0,1,1,2-2A2,2,0,0,1,394,548Z" transform="translate(1038.216 93.653)" fill="#fff" fill-rule="evenodd"/>\n          </g>\n          <g id="Group_16889" data-name="Group 16889" transform="translate(683.432 96.25)" opacity="0.996">\n            <line id="Line_521" data-name="Line 521" x2="13" transform="translate(753.284 537.672)" fill="none" stroke="#fff" stroke-linecap="round" stroke-width="1.4"/>\n            <line id="Line_523" data-name="Line 523" x2="13" transform="translate(753.284 543.846)" fill="none" stroke="#fff" stroke-linecap="round" stroke-width="1.4"/>\n            <line id="Line_522" data-name="Line 522" x2="13" transform="translate(753.284 531.497)" fill="none" stroke="#fff" stroke-linecap="round" stroke-width="1.4"/>\n          </g>\n        </g>\n        <text id="Anti-Slip_Shoe_Grips" data-name="Anti-Slip Shoe Grips" transform="translate(928 247)" fill="#fff" font-size="12" font-family="ArialMT, Arial"><tspan x="-70.711" y="0">Chapters</tspan></text>\n      </g>\n    </g>\n  </g>\n</svg>\n\n            </div>';0==$(document).find(".vjs-chapterList").length&&$(document).find(".videojs-wrap .vjs-custom-skin").append(e)}if(muteIcon&&volumeGif){if("false"==video.player_options.hide_turn_on||0==video.player_options.hide_turn_on){e=' <div class="vjs-branding" id="mute_div">\n                    <li\n                            style="cursor:pointer;display: block;"\n                            @click="muteIcon=false;$el.querySelector(\'.vjs-volume-menu-button\').click()"\n                    >\n                        <img src="'+BASE_URL+'/embed/image/volume_muted.svg"/>\n                    </li>\n                </div>',e='<div class="floatingVolumnBtnmute vjs-branding" id="mute_div"><span style="margin-right: 10px">Turn on sound</span><img src="/embed/image/animated volume icon.svg"></div>';$(document).find("#unMute_div, #mute_div").remove(),$(document).find(".videojs-wrap .vjs-custom-skin").append(e)}}else $(document).find("#unMute_div, #mute_div").remove();let i="#super-sonic-play-div-"+video.id,n="#super-sonic-sound-div-"+video.id;$(document).find(i).hide(),$(document).find(n).show();let r="#backdrop-play-div-"+video.id,a="#backdrop-sound-div-"+video.id;$(document).find(r).hide(),$(document).find(a).show(),player_status="play"}function fancyTimeFormat(e){e=Number(e);var t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=Math.floor(e%3600%60),r=(t>0?t+"h ":"")+(i>0?i+"m ":"")+(n>0?n+"s":"");return""!==r?r+" / ":""}function player_timeupdate(){if(registerWatchDuration(),interaction_during_options.forEach(e=>{player.currentTime()<e.start_time&&(e.triggered=!1)}),window.addEventListener("message",function(e){e.data.playerPause&&player.pause()}),publishablePlayerData.currentTime=player.currentTime(),publishablePlayerData.playbackRate=player.playbackRate(),publishablePlayerData.paused=player.paused(),publishablePlayerData.muted=player.muted(),parent.postMessage({eventName:"currentTime",timestamp:player.currentTime(),currentTimestamp:player.currentTime(),media:publishableMediaData,player:publishablePlayerData},"*"),visualWatermarkContent.length>0&&(interval+=1,10==interval)){var e=$(".video-player").height(),t=$(".video-player").width();$(".floatingWatermark").css({top:Math.floor(Math.random()*Math.floor(e)),left:Math.floor(Math.random()*Math.floor(t))});var i=visualWatermarkContent.length,n=Math.floor(Math.random()*Math.floor(i));if(visibleWatermark=visualWatermarkContent[n],video.visual_watermarking&&visualWatermarkContent.length>0){var r='               <div class="floatingWatermark" style=\'top: '+Math.floor(Math.random()*Math.floor(e))+"px;left: "+Math.floor(Math.random()*Math.floor(t))+"px'> <div>\n                    <span>"+visibleWatermark+"</span>\n                </div></div>";$(document).find(".vjs-custom-skin .floatingWatermark").remove(),$(document).find(".vjs-custom-skin").append(r)}interval=0}try{var a=[];localStorageDuration.forEach((e,t)=>{e.key!==video.video_id&&(a[a.length]=e)}),localStorageDuration=a,localStorageDuration.push({key:video.video_id,value:parseInt(player.currentTime())}),localStorage.setItem("storageDuration",JSON.stringify(localStorageDuration))}catch(e){}var s;null!==video.video_basecode&&video.video_basecode.event_code.length>0&&initPixelRetargeting(player,player.currentTime()),player.duration()-player.currentTime()<.5&&"show_last_frame"==video.player_options.interaction_after_type&&(clickOnProgressBar=!1,lastFrame&&player.pause(),lastFrame=!1),video.reels.length>0&&show_reels&&queryParams.has("reelPreview")&&canAutoPlayReel&&video.reels.forEach((e,t)=>{current_reel===t&&e.end==parseInt(player.currentTime())&&video.reels[0].start>0&&video.reels[0].end>0&&((current_reel+=1)>=video.reels.length&&(current_reel=0),0===current_reel||current_reel===video.reels.length?player.currentTime(video.reels[0].start):player.currentTime(video.reels[t+1].start),player.play())}),void 0!==player&&(s=s=player.currentTime()),$(document).find(".audioDetail .current-duration").text(fancyTimeFormat(s)),"true"!=video.player_options.interaction_during_active&&1!=video.player_options.interaction_during_active||!show_text||(clickOnProgressBar=!1,during_interaction(s,clickOnProgressBar))}function player_canplay(){playerReady=!0,setVideoWidthHeight(),adjustOverlay()}function interaction_during_text_size(e){let t=!1;return window.screen.availWidth<=414&&(t=!0),t?"very_small"===e.interaction_during_text_size?"font-size:10px":"very_small_light"===e.interaction_during_text_size?"font-size:10px;font-weight: 100;":"very_small_bold"===e.interaction_during_text_size?"font-size:10px;font-weight: 600;":"small"===e.interaction_during_text_size?"font-size:15px;":"small_light"===e.interaction_during_text_size?"font-size:15px;font-weight: 100;":"small_bold"===e.interaction_during_text_size?"font-size:15px;font-weight: 600;":"medium"===e.interaction_during_text_size?"font-size:18px;":"medium_light"===e.interaction_during_text_size?"font-size:18px;font-weight: 100;":"medium_bold"===e.interaction_during_text_size?"font-size:18px;font-weight: 600;":"large"===e.interaction_during_text_size?"font-size:25px;":"large_light"===e.interaction_during_text_size?"font-size:25px;font-weight: 100;":"large_bold"===e.interaction_during_text_size?"font-size:25px;font-weight: 600;":"x_large"===e.interaction_during_text_size?"font-size:35px;":"x_large_light"===e.interaction_during_text_size?"font-size:35px;font-weight: 100;":"x_large_bold"===e.interaction_during_text_size?"font-size:35px;font-weight: 600;":"xx_large"===e.interaction_during_text_size?"font-size:50px;":"xx_large_light"===e.interaction_during_text_size?"font-size:50px;font-weight: 100;":"xx_large_bold"===e.interaction_during_text_size?"font-size:50px;font-weight: 600;":"font-size:10px":"very_small"===e.interaction_during_text_size?"font-size:13px":"very_small_light"===e.interaction_during_text_size?"font-size:13px;font-weight: 100;":"very_small_bold"===e.interaction_during_text_size?"font-size:13px;font-weight: 600;":"small"===e.interaction_during_text_size?"font-size:18px;":"small_light"===e.interaction_during_text_size?"font-size:18px;font-weight: 100;":"small_bold"===e.interaction_during_text_size?"font-size:18px;font-weight: 600;":"medium"===e.interaction_during_text_size?"font-size:25px;":"medium_light"===e.interaction_during_text_size?"font-size:25px;font-weight: 100;":"medium_bold"===e.interaction_during_text_size?"font-size:25px;font-weight: 600;":"large"===e.interaction_during_text_size?"font-size:40px;":"large_light"===e.interaction_during_text_size?"font-size:40px;font-weight: 100;":"large_bold"===e.interaction_during_text_size?"font-size:40px;font-weight: 600;":"x_large"===e.interaction_during_text_size?"font-size:70px;":"x_large_light"===e.interaction_during_text_size?"font-size:70px;font-weight: 100;":"x_large_bold"===e.interaction_during_text_size?"font-size:70px;font-weight: 600;":"xx_large"===e.interaction_during_text_size?"font-size:90px;":"xx_large_light"===e.interaction_during_text_size?"font-size:90px;font-weight: 100;":"xx_large_bold"===e.interaction_during_text_size?"font-size:90px;font-weight: 600;":"font-size:13px"}function interaction_during_text_2_size(e){let t=!1;return window.screen.availWidth<=414&&(t=!0),t?"very_small"===e.interaction_during_text_2_size?"font-size:10px":"very_small_light"===e.interaction_during_text_2_size?"font-size:10px;font-weight: 100;":"very_small_bold"===e.interaction_during_text_2_size?"font-size:10px;font-weight: 600;":"small"===e.interaction_during_text_2_size?"font-size:15px;":"small_light"===e.interaction_during_text_2_size?"font-size:15px;font-weight: 100;":"small_bold"===e.interaction_during_text_2_size?"font-size:15px;font-weight: 600;":"medium"===e.interaction_during_text_2_size?"font-size:18px;":"medium_light"===e.interaction_during_text_2_size?"font-size:18px;font-weight: 100;":"medium_bold"===e.interaction_during_text_2_size?"font-size:18px;font-weight: 600;":"large"===e.interaction_during_text_2_size?"font-size:25px;":"large_light"===e.interaction_during_text_2_size?"font-size:25px;font-weight: 100;":"large_bold"===e.interaction_during_text_2_size?"font-size:25px;font-weight: 600;":"x_large"===e.interaction_during_text_2_size?"font-size:35px;":"x_large_light"===e.interaction_during_text_2_size?"font-size:35px;font-weight: 100;":"x_large_bold"===e.interaction_during_text_2_size?"font-size:35px;font-weight: 600;":"xx_large"===e.interaction_during_text_2_size?"font-size:50px;":"xx_large_light"===e.interaction_during_text_2_size?"font-size:50px;font-weight: 100;":"xx_large_bold"===e.interaction_during_text_2_size?"font-size:50px;font-weight: 600;":"font-size:10px":"very_small"===e.interaction_during_text_2_size?"font-size:13px":"very_small_light"===e.interaction_during_text_2_size?"font-size:13px;font-weight: 100;":"very_small_bold"===e.interaction_during_text_2_size?"font-size:13px;font-weight: 600;":"small"===e.interaction_during_text_2_size?"font-size:18px;":"small_light"===e.interaction_during_text_2_size?"font-size:18px;font-weight: 100;":"small_bold"===e.interaction_during_text_2_size?"font-size:18px;font-weight: 600;":"medium"===e.interaction_during_text_2_size?"font-size:25px;":"medium_light"===e.interaction_during_text_2_size?"font-size:25px;font-weight: 100;":"medium_bold"===e.interaction_during_text_2_size?"font-size:25px;font-weight: 600;":"large"===e.interaction_during_text_2_size?"font-size:40px;":"large_light"===e.interaction_during_text_2_size?"font-size:40px;font-weight: 100;":"large_bold"===e.interaction_during_text_2_size?"font-size:40px;font-weight: 600;":"x_large"===e.interaction_during_text_2_size?"font-size:70px;":"x_large_light"===e.interaction_during_text_2_size?"font-size:70px;font-weight: 100;":"x_large_bold"===e.interaction_during_text_2_size?"font-size:70px;font-weight: 600;":"xx_large"===e.interaction_during_text_2_size?"font-size:90px;":"xx_large_light"===e.interaction_during_text_2_size?"font-size:90px;font-weight: 100;":"xx_large_bold"===e.interaction_during_text_2_size?"font-size:90px;font-weight: 600;":"font-size:13px"}function interaction_during_button_size(e){let t=!1;window.screen.availWidth<=414&&(t=!0);var i=t;return"callout_button"==e.interaction_during_type?"small"===e.interaction_during_button_size?button_size=i?"width: 85px!important;":"width: 170px!important;height: 45px!important;":"medium"===e.interaction_during_button_size?button_size=i?"width: 135px!important;":"width: 270px!important;height: 45px!important;":"large"===e.interaction_during_button_size&&(button_size=i?"width: 212.5px!important;":"width: 425px!important;height: 45px!important;"):"small"===e.interaction_during_button_size?"full_spread"==e.interaction_during_overlay_background_style?button_size="width: 15%!important;":button_size="width: 35%!important;":"medium"===e.interaction_during_button_size?"full_spread"==e.interaction_during_overlay_background_style?button_size="width: 30%!important;":button_size="width: 60%!important;":"large"===e.interaction_during_button_size&&("full_spread"==e.interaction_during_overlay_background_style?button_size="width: 60%!important;":button_size="width: 100%!important;"),button_size}function interaction_during_callout_button_with_link(e,t,i,n){var r="";return!e.interaction_during_link_url||e.interaction_during_link_url.startsWith("http")||e.interaction_during_link_url.startsWith("//:")?e.interaction_during_link_url?1==e.interaction_during_link_open_in_new_tab?r+='<a href="'+e.interaction_during_link_url+'" target="_blank"  class="during-callout-button-url" onclick="call_endtime_function(\'callout_button\', \''+e.interaction_during_link_url+"', true)\">":r+='<a href="'+e.interaction_during_link_url+'"  class="during-callout-button-url" onclick="call_endtime_function(\'callout_button\', \''+e.interaction_during_link_url+"', true)\">":r+='<a href="javascript:void(0)" class="during-callout-button-url">':1==e.interaction_during_link_open_in_new_tab?r+='<a href="https://'+e.interaction_during_link_url+'" target="_blank" class="during-callout-button-url" onclick="call_endtime_function(\'callout_button\', \''+e.interaction_during_link_url+"', true)\">":r+='<a href="https://'+e.interaction_during_link_url+'" class="during-callout-button-url" onclick="call_endtime_function(\'callout_button\', \''+e.interaction_during_link_url+"', true)\">",e.interaction_during_overlay_background_style,r+=' <div class="callout-button" style="background: '+e.interaction_during_button_background_color+";"+t+";"+i+";"+n+'">'+(e.interaction_during_button_text?e.interaction_during_button_text:"Submit")+"</div>",r+="</a>"}function interaction_during_card_button_with_link(e,t,i,n){var r="";return!e.interaction_during_link_url||e.interaction_during_link_url.startsWith("http")||e.interaction_during_link_url.startsWith("//:")?e.interaction_during_link_url?1==e.interaction_during_link_open_in_new_tab?r+='<a href="'+e.interaction_during_link_url+'" target="_blank"  class="during-callout-button-url" onclick="call_endtime_function(\'cards\', \''+e.interaction_during_link_url+"', true)\">":r+='<a href="'+e.interaction_during_link_url+'"  class="during-callout-button-url" onclick="call_endtime_function(\'cards\', \''+e.interaction_during_link_url+"', true)\">":(console.log(r),r+='<a href="javascript:void(0)" class="during-callout-button-url">'):1==e.interaction_during_link_open_in_new_tab?r+='<a href="https://'+e.interaction_during_link_url+'" target="_blank" class="during-callout-button-url" onclick="call_endtime_function(\'cards\', \''+e.interaction_during_link_url+"', true)\">":r+='<a href="https://'+e.interaction_during_link_url+'" class="during-callout-button-url" onclick="call_endtime_function(\'cards\', \''+e.interaction_during_link_url+"', true)\">","tight_wrap"==e.interaction_during_overlay_background_style?r+=' <div class="cards-button" style="background: '+e.interaction_during_button_background_color+";"+t+";"+i+";"+n+'">'+(e.interaction_during_button_text?e.interaction_during_button_text:"Submit")+"</div>":r+='<div class="cards-button" style="background: '+e.interaction_during_button_background_color+";"+t+";"+i+";"+n+'">'+(e.interaction_during_button_text?e.interaction_during_button_text:"Submit")+"</div>",r+="</a>"}function interaction_during_text_type(e,t){e.interaction_during_pause_video_on_display?queryParams1.has("editor")&&$(document).find(".vjs-big-play-button").addClass("vjs-hidden"):(player.pause(),$(document).find(".vjs-big-play-button").addClass("vjs-hidden")),player.controls(!1);var i;i=interaction_during_text_size(e);var n="",r="";if(1==e.interaction_during_overlay_background_active||"true"==e.interaction_during_overlay_background_active){if("full_spread"==e.interaction_during_overlay_background_style)n="width:100%;height:100%;";else if("tight_stretch"==e.interaction_during_overlay_background_style){isDuringType="tight_stretch",n="width:100%;height:20%!important;top:"+(t.interaction_during_cta_top?t.interaction_during_cta_top:"5")+"%!important;",r="position: relative;top: -10px;right:3px;float: right;background-color: black;border-radius: 20px;padding:6px 8px;color:white;"}else if("tight_wrap"==e.interaction_during_overlay_background_style){let i=t.interaction_during_cta_top?t.interaction_during_cta_top:"50",n=t.interaction_during_cta_left?t.interaction_during_cta_left:"0";isDuringType="tight_wrap",background_style_tight_wrap="width:100%;height:20%!important;top:"+i+"%!important;left:"+n+"%!important;background-color:transparent !important",r="position: relative;right:10px;float: right;background-color: black;border-radius: 20px;padding:6px 8px;color:white;";const a=hexaColorwithOpacity(e.interaction_during_overlay_background_color,e.interaction_during_overlay_background_opacity);background_style_tight_wrap_span="background-color:"+a+"!important;padding:10px"}if(n+="background-color:"+hexaColorwithOpacity(e.interaction_during_overlay_background_color,e.interaction_during_overlay_background_opacity)+"!important;","tight_wrap"==e.interaction_during_overlay_background_style){var a='<div class="text-wrap during-vieo-text" id="draggable" style="'+background_style_tight_wrap+'">';a+='<div class="text-overlay-inner">'}else if("tight_stretch"==e.interaction_during_overlay_background_style){a='<div class="text-wrap during-vieo-text " id="draggable" style="'+n+'">';a+='<div class="text-overlay-inner text-full-strech">'}else{a='<div class="text-wrap during-vieo-text " style="'+n+'">';a+='<div class="text-overlay-inner text-full-strech">'}!e.interaction_during_link_url||e.interaction_during_link_url.startsWith("http")||e.interaction_during_link_url.startsWith("//:")?e.interaction_during_link_url?1==e.interaction_during_link_open_in_new_tab?a+='<a href="'+e.interaction_during_link_url+'" target="_blank"  class="during-video-text-url" onclick="call_endtime_function(\'text\', \''+e.interaction_during_link_url+"', true)\">":a+='<a href="'+e.interaction_during_link_url+'"  class="during-video-text-url" onclick="call_endtime_function(\'text\', \''+e.interaction_during_link_url+"', true)\">":a+='<a href="javascript:void(0)" class="during-video-text-url">':1==e.interaction_during_link_open_in_new_tab?a+='<a href="https://'+e.interaction_during_link_url+'" target="_blank" class="during-video-text-url" onclick="call_endtime_function(\'text\', \''+e.interaction_during_link_url+"', true)\">":a+='<a href="https://'+e.interaction_during_link_url+'" class="during-video-text-url" onclick="call_endtime_function(\'text\', \''+e.interaction_during_link_url+"', true)\">","tight_wrap"==e.interaction_during_overlay_background_style?a+='<span style="color:'+e.interaction_during_text_color+";"+i+";"+background_style_tight_wrap_span+'">'+e.interaction_during_text+"</span>":a+='<span style="color:'+e.interaction_during_text_color+";"+i+';">'+e.interaction_during_text+"</span>",a+="</a>","true"!=e.interaction_during_allow_skip&&1!=e.interaction_during_allow_skip||("tight_stretch"==e.interaction_during_overlay_background_style?(a+="</div>",a+='<span class="skip skip-during-video-text" style="'+r+'">x</span>'):"tight_wrap"==e.interaction_during_overlay_background_style?(a+='<span class="skip skip-during-video-text" style="'+r+'">x</span>',a+="</div>"):(a+='<span class="skip skip-during-video-text">skip</span>',a+="</div>")),a+="</div>"}else{a='<div class="text-wrap during-vieo-text " style="'+(n="background-color:#011a22!important;width:100%;height:100%;")+'">';a+='<div class="text-overlay-inner text-full-strech">',!e.interaction_during_link_url||e.interaction_during_link_url.startsWith("http")||e.interaction_during_link_url.startsWith("//:")?e.interaction_during_link_url?1==e.interaction_during_link_open_in_new_tab?a+='<a href="'+e.interaction_during_link_url+'" target="_blank"  class="during-video-text-url" onclick="call_endtime_function(\'text\', \''+e.interaction_during_link_url+"', true)\">":a+='<a href="'+e.interaction_during_link_url+'"  class="during-video-text-url" onclick="call_endtime_function(\'text\', \''+e.interaction_during_link_url+"', true)\">":a+='<a href="javascript:void(0)" class="during-video-text-url">':1==e.interaction_during_link_open_in_new_tab?a+='<a href="https://'+e.interaction_during_link_url+'" target="_blank" class="during-video-text-url" onclick="call_endtime_function(\'text\', \''+e.interaction_during_link_url+"', true)\">":a+='<a href="https://'+e.interaction_during_link_url+'" class="during-video-text-url" onclick="call_endtime_function(\'text\', \''+e.interaction_during_link_url+"', true)\">",a+='<span style="color:'+e.interaction_during_text_color+";"+i+';">'+e.interaction_during_text+"</span>",a+="</a>","true"!=e.interaction_during_allow_skip&&1!=e.interaction_during_allow_skip||(a+='<span class="skip skip-during-video-text">skip</span>',a+="</div>"),a+="</div>"}player.exitFullscreen(),$(document).find(".video-player .during-vieo-text").remove(),$(document).find(".video-player").append(a)}function interaction_during_html_type(e,t){e.interaction_during_pause_video_on_display?queryParams1.has("editor")&&$(document).find(".vjs-big-play-button").addClass("vjs-hidden"):(player.pause(),$(document).find(".vjs-big-play-button").addClass("vjs-hidden")),player.controls(!1);var i='<div class="html-interaction-wrap during-video-html-wrap" style=""><div>';i+=e.interaction_during_html_code,i+="</div> ","true"!=e.interaction_during_allow_skip&&1!=e.interaction_during_allow_skip||(i+='<span class="skip skip-during-video-html">skip</span>'),i+="</div>",player.exitFullscreen(),$(document).find(".video-player .html-interaction-wrap").remove(),$(document).find(".video-player").append(i)}function interaction_during_image_type(e,t){e.interaction_during_pause_video_on_display?queryParams1.has("editor")&&$(document).find(".vjs-big-play-button").addClass("vjs-hidden"):(player.pause(),$(document).find(".vjs-big-play-button").addClass("vjs-hidden")),player.controls(!1);var i='<div class="image-wrap during-video-image" style="">';!e.interaction_during_link_url||e.interaction_during_link_url.startsWith("http")||e.interaction_during_link_url.startsWith("//:")?1==e.interaction_during_link_open_in_new_tab?i+='<a href="'+e.interaction_during_link_url+'" target="_blank" class="image-inner during-video-image-url" onclick="call_endtime_function(\'image\', \''+e.interaction_during_link_url+'\', true)" style="background-image: url('+e.interaction_during_image+');"> </a>':i+='<a href="'+e.interaction_during_link_url+'" class="image-inner during-video-image-url" onclick="call_endtime_function(\'image\', \''+e.interaction_during_link_url+'\', true)" style="background-image: url('+e.interaction_during_image+');"> </a>':1==e.interaction_during_link_open_in_new_tab?i+='<a href="https://'+e.interaction_during_link_url+'" target="_blank" class="image-inner during-video-image-url" onclick="call_endtime_function(\'image\', \''+e.interaction_during_link_url+'\', true)" style="background-image: url('+e.interaction_during_image+');">&nbsp;</a> ':i+='<a href="https://'+e.interaction_during_link_url+'" class="image-inner during-video-image-url" onclick="call_endtime_function(\'image\', \''+e.interaction_during_link_url+'\', true)" style="background-image: url('+e.interaction_during_image+');">&nbsp;</a> ',"true"!=e.interaction_during_allow_skip&&1!=e.interaction_during_allow_skip||(i+='<span class="skip skip-during-video-image">skip</span>'),i+="</div>",player.exitFullscreen(),$(document).find(".video-player .during-video-image").remove(),$(document).find(".video-player").append(i)}function interaction_during_capture_email_type(e,t){e.interaction_during_pause_video_on_display?queryParams1.has("editor")&&$(document).find(".vjs-big-play-button").addClass("vjs-hidden"):(player.pause(),$(document).find(".vjs-big-play-button").addClass("vjs-hidden")),player.controls(!1),text_size=interaction_during_text_size(e),text_2_size=interaction_during_text_2_size(e),button_size=interaction_during_button_size(e),button_color="color:"+e.interaction_during_button_text_color,skip_icon_style="position: absolute;top: 10px;right:10px;height:25px;float: right;background: #162B39 0% 0% no-repeat padding-box;border-radius: 20px;padding:6px 8px;color:white;box-shadow: 0px 0px 10px #FFBB00A3;color:white;";var i="background-color:"+e.interaction_during_opt_in_form_background_color+"!important;",n="",r="";if(r="rounded_edge"==e.interaction_during_button_edge?"border-radius: 7px!important;":"border-radius: 0px!important;",e.interaction_during_overlay_background_active){n+="background-color:"+hexaColorwithOpacity(e.interaction_during_overlay_background_color,e.interaction_during_overlay_background_opacity)+"!important;"}var a='<div class="capture-email-wrap  during-vieo-text" id="capture_email"  style="'+n+'">';"full_spread"==e.interaction_during_overlay_background_style?("style-4"==e.interaction_during_capture_email_form_style?a+='<div class="full_spread-style-box-4"  style="'+i+'">':"style-7"==e.interaction_during_capture_email_form_style?a+='<div class="full_spread-style-box-7" style="'+i+'">':a+='<div class="full_spread-style-box"  style="'+i+'">',isDuringType="full_spread"):"tight_stretch"==e.interaction_during_overlay_background_style?("style-4"==e.interaction_during_capture_email_form_style?a+='<div class="tight_stretch-style-box-4" id="draggable-email-capture" style="'+i+'">':"style-7"==e.interaction_during_capture_email_form_style?a+='<div class="tight_stretch-style-box-7" id="draggable-email-capture" style="'+i+'">':a+='<div class="tight_stretch-style-box" id="draggable-email-capture" style="'+i+'">',isDuringType="tight_stretch",localStorage.setItem("interaction-during-top",0),a+='<div style="margin-bottom:10px;"><span class="skip skip-during-video-text skipforexpand" id="expandskip" style="'+skip_icon_style+';padding: 4px 8px;top:10px;float:right;">X</span></div>'):"tight_wrap"==e.interaction_during_overlay_background_style&&("style-4"==e.interaction_during_capture_email_form_style?a+='<div class="tight_wrap-style-box-4" id="draggable-email-capture" style="'+i+'">':"style-7"==e.interaction_during_capture_email_form_style?a+='<div class="tight_wrap-style-box-7" id="draggable-email-capture" style="'+i+'">':a+='<div class="tight_wrap-style-box" id="draggable-email-capture" style="'+i+'">',isDuringType="tight_wrap",a+='<div style="margin-bottom:10px;"><span class="skip skip-during-video-text skipforexpand" id="expandskip" style="'+skip_icon_style+';padding: 4px 8px;top:10px;float:right;">X</span></div>'),"style-1"==e.interaction_during_capture_email_form_style?(e.interaction_during_cta_image&&(a+='<img class="capture_img" src='+e.interaction_during_cta_image+"></img>"),e.interaction_during_text&&(a+=' <div class="capture-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),(e.capture_email_first_name||e.capture_email_last_name)&&(e.capture_email_first_name&&e.capture_email_last_name?a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="first_name" placeholder="First name"><div style="width: 10%;margin-bottom:10px;"></div><input type="text" autocomplete="off" class="el-input__inner" name="last_name" placeholder="Last name"></div>':(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="',a+=e.capture_email_first_name?"first_name":"last_name",a+='" placeholder="',a+=e.capture_email_first_name?"First name":"Last name",a+='"></div>')),a+='<div class="el-input"><input type="email" autocomplete="off" class="el-input__inner" name="email" placeholder="Email Address"></div> ',e.capture_email_phone_number&&(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="phone" placeholder="Phone number"></div> '),a+=' <div class="capture-button" style="background: '+e.interaction_during_button_background_color+";"+r+";"+button_size+";"+button_color+'">'+(e.interaction_during_button_text?e.interaction_during_button_text:"Submit")+"</div>"):"style-2"==e.interaction_during_capture_email_form_style?(e.interaction_during_text&&(a+=' <div class="capture-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_cta_image&&(a+='<img class="capture_img" src='+e.interaction_during_cta_image+"></img>"),e.interaction_during_text_2&&(a+=' <div class="capture-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),(e.capture_email_first_name||e.capture_email_last_name)&&(e.capture_email_first_name&&e.capture_email_last_name?a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="first_name" placeholder="First name"><div style="width: 10%;margin-bottom:10px;"></div><input type="text" autocomplete="off" class="el-input__inner" name="last_name" placeholder="Last name"></div>':(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="',a+=e.capture_email_first_name?"first_name":"last_name",a+='" placeholder="',a+=e.capture_email_first_name?"First name":"Last name",a+='"></div>')),a+='<div class="el-input"><input type="email" autocomplete="off" class="el-input__inner" name="email" placeholder="Email Address"></div> ',e.capture_email_phone_number&&(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="phone" placeholder="Phone number"></div> '),a+=' <div class="capture-button" style="background: '+e.interaction_during_button_background_color+";"+r+";"+button_size+";"+button_color+'">'+(e.interaction_during_button_text?e.interaction_during_button_text:"Submit")+"</div>"):"style-3"==e.interaction_during_capture_email_form_style?(e.interaction_during_text&&(a+=' <div class="capture-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="capture-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),e.interaction_during_cta_image&&(a+='<img class="capture_img" src='+e.interaction_during_cta_image+"></img>"),(e.capture_email_first_name||e.capture_email_last_name)&&(e.capture_email_first_name&&e.capture_email_last_name?a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="first_name" placeholder="First name"><div style="width: 10%;margin-bottom:10px;"></div><input type="text" autocomplete="off" class="el-input__inner" name="last_name" placeholder="Last name"></div>':(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="',a+=e.capture_email_first_name?"first_name":"last_name",a+='" placeholder="',a+=e.capture_email_first_name?"First name":"Last name",a+='"></div>')),a+='<div class="el-input"><input type="email" autocomplete="off" class="el-input__inner" name="email" placeholder="Email Address"></div> ',e.capture_email_phone_number&&(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="phone" placeholder="Phone number"></div> '),a+=' <div class="capture-button" style="background: '+e.interaction_during_button_background_color+";"+r+";"+button_size+";"+button_color+'">'+(e.interaction_during_button_text?e.interaction_during_button_text:"Submit")+"</div>"):"style-4"==e.interaction_during_capture_email_form_style?(a+=' <div style="display:flex;width:100%;justify-content:center">',e.interaction_during_cta_image&&(a+=' <div class="col-img">',a+='<img class="capture_img" src='+e.interaction_during_cta_image+"></img>",a+=" </div>"),a+='<div class="col">',e.interaction_during_text&&(a+=' <div class="capture-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="capture-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),(e.capture_email_first_name||e.capture_email_last_name)&&(e.capture_email_first_name&&e.capture_email_last_name?a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="first_name" placeholder="First name"><div style="width: 10%;margin-bottom:10px;"></div><input type="text" autocomplete="off" class="el-input__inner" name="last_name" placeholder="Last name"></div>':(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="',a+=e.capture_email_first_name?"first_name":"last_name",a+='" placeholder="',a+=e.capture_email_first_name?"First name":"Last name",a+='"></div>')),a+='<div class="el-input"><input type="email" autocomplete="off" class="el-input__inner" name="email" placeholder="Email Address"></div> ',e.capture_email_phone_number&&(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="phone" placeholder="Phone number"></div> '),a+=' <div class="capture-button" style="background: '+e.interaction_during_button_background_color+";"+r+";"+button_size+";"+button_color+'">'+(e.interaction_during_button_text?e.interaction_during_button_text:"Submit")+"</div>",a+=" </div>",a+=" </div>"):"style-5"==e.interaction_during_capture_email_form_style?(e.interaction_during_text&&(a+=' <div class="capture-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="capture-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),(e.capture_email_first_name||e.capture_email_last_name)&&(e.capture_email_first_name&&e.capture_email_last_name?a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="first_name" placeholder="First name"><div style="width: 10%;margin-bottom:10px;"></div><input type="text" autocomplete="off" class="el-input__inner" name="last_name" placeholder="Last name"></div>':(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="',a+=e.capture_email_first_name?"first_name":"last_name",a+='" placeholder="',a+=e.capture_email_first_name?"First name":"Last name",a+='"></div>')),a+='<div class="el-input"><input type="email" autocomplete="off" class="el-input__inner" name="email" placeholder="Email Address"></div> ',e.capture_email_phone_number&&(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="phone" placeholder="Phone number"></div> '),a+=' <div class="capture-button" style="background: '+e.interaction_during_button_background_color+";"+r+";"+button_size+";"+button_color+'">'+(e.interaction_during_button_text?e.interaction_during_button_text:"Submit")+"</div>"):"style-6"==e.interaction_during_capture_email_form_style?(e.interaction_during_text&&(a+=' <div class="capture-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),(e.capture_email_first_name||e.capture_email_last_name)&&(e.capture_email_first_name&&e.capture_email_last_name?a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="first_name" placeholder="First name"><div style="width: 10%;margin-bottom:10px;"></div><input type="text" autocomplete="off" class="el-input__inner" name="last_name" placeholder="Last name"></div>':(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="',a+=e.capture_email_first_name?"first_name":"last_name",a+='" placeholder="',a+=e.capture_email_first_name?"First name":"Last name",a+='"></div>')),a+='<div class="el-input"><input type="email" autocomplete="off" class="el-input__inner" name="email" placeholder="Email Address"></div> ',e.capture_email_phone_number&&(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="phone" placeholder="Phone number"></div> '),a+=' <div class="capture-button" style="background: '+e.interaction_during_button_background_color+";"+r+";"+button_size+";"+button_color+'">'+(e.interaction_during_button_text?e.interaction_during_button_text:"Submit")+"</div>",e.interaction_during_text_2&&(a+=' <div class="capture-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>")):"style-7"==e.interaction_during_capture_email_form_style&&(e.interaction_during_text&&(a+=' <div class="capture-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),a+='<div class="form-btn">',a+='<div style="width: 100%;margin: 0 auto;">',(e.capture_email_first_name||e.capture_email_last_name)&&(e.capture_email_first_name&&e.capture_email_last_name?a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="first_name" placeholder="First name"><div style="width: 10%;margin-bottom:10px;"></div><input type="text" autocomplete="off" class="el-input__inner" name="last_name" placeholder="Last name"></div>':(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="',a+=e.capture_email_first_name?"first_name":"last_name",a+='" placeholder="',a+=e.capture_email_first_name?"First name":"Last name",a+='"></div>')),a+='<div class="el-input"><input type="email" autocomplete="off" class="el-input__inner" name="email" placeholder="Email Address"></div> ',e.capture_email_phone_number&&(a+='<div class="el-input"><input type="text" autocomplete="off" class="el-input__inner" name="phone" placeholder="Phone number"></div> '),a+="</div> ",a+=' <div class="capture-button" style="background: '+e.interaction_during_button_background_color+";"+r+";"+button_size+";"+button_color+'">'+(e.interaction_during_button_text?e.interaction_during_button_text:"Submit")+"</div>",a+="</div>"),a+="</div>","true"!=e.interaction_during_allow_skip&&1!=e.interaction_during_allow_skip||("full_spread"==e.interaction_during_overlay_background_style?a+='<span class="skip skip-during-video-text" style="'+skip_icon_style+'">X</span>':a+='<span class="skip skip-during-video-text" id="skip" >skip</span>'),a+="</div>",player.exitFullscreen(),$(document).find(".video-player .during-vieo-text").remove(),$(document).find(".video-player").append(a),"tight_wrap"==e.interaction_during_overlay_background_style&&$("#draggable-email-capture").resizable(),queryParams.has("editor")||"tight_wrap"!=e.interaction_during_overlay_background_style||$("#draggable-email-capture").resizable("disable"),null!=t.interaction_during_cta_width&&"tight_wrap"==e.interaction_during_overlay_background_style?$("#draggable-email-capture").css("width",t.interaction_during_cta_width+"%"):$("#draggable-email-capture").css("width",""),null!=t.interaction_during_cta_height&&"tight_wrap"==e.interaction_during_overlay_background_style?$("#draggable-email-capture").css("height",t.interaction_during_cta_height+"%"):$("#draggable-email-capture").css("height",""),draggableEmailCapture(e,t),"full_spread"!=e.interaction_during_overlay_background_style&&checkOverlapcaptureform()}function draggableEmailCapture(e,t){localStorage.getItem("interaction-during-cta-width")&&queryParams.has("editor")&&"tight_wrap"==isDuringType?$("#draggable-email-capture").css("width",localStorage.getItem("interaction-during-cta-width")+"%"):$("#draggable-email-capture").remove("width",""),localStorage.getItem("interaction-during-cta-height")&&queryParams.has("editor")&&"tight_wrap"==isDuringType?$("#draggable-email-capture").css("height",localStorage.getItem("interaction-during-cta-height")+"%"):$("#draggable-email-capture").remove("height",""),localStorage.getItem("interaction-during-top-editor")&&queryParams.has("editor")&&"tight_wrap"==isDuringType?$("#draggable-email-capture").css("top",localStorage.getItem("interaction-during-top-editor")+"px"):localStorage.getItem("interaction-during-top-editor")&&queryParams.has("editor")&&"tight_stretch"==isDuringType&&$("#draggable-email-capture").css("top","0px"),localStorage.getItem("interaction-during-left-editor")&&queryParams.has("editor")&&"full_spread"!=isDuringType&&$("#draggable-email-capture").css("left",localStorage.getItem("interaction-during-left-editor")+"px"),null==t.interaction_during_cta_top||queryParams.has("editor")||(t.interaction_during_cta_top,$("#draggable-email-capture").css("top",t.interaction_during_cta_top+"%")),null==t.interaction_during_cta_left||queryParams.has("editor")||(t.interaction_during_cta_left,$("#draggable-email-capture").css("left",t.interaction_during_cta_left+"%"))}function interaction_during_callout_button_type(e,t){e.interaction_during_pause_video_on_display?queryParams1.has("editor")&&$(document).find(".vjs-big-play-button").addClass("vjs-hidden"):(player.pause(),$(document).find(".vjs-big-play-button").addClass("vjs-hidden")),player.controls(!1);var i,n,r,a,s="",o="",l="",u="";if(i=interaction_during_text_size(e),n=interaction_during_text_2_size(e),r=interaction_during_button_size(e),a="color:"+e.interaction_during_button_text_color,l="rounded_edge"==e.interaction_during_button_edge?"border-radius: 17px!important;":"border-radius: 0px!important;",e.interaction_during_overlay_background_active){if("full_spread"==e.interaction_during_overlay_background_style)s="width:100%;height:100%;";else if("tight_stretch"==e.interaction_during_overlay_background_style)isDuringType="tight_stretch",s="width:100%;height:35%!important;top:20px!important;",o="position: relative;top: -10px;right:3px;float: right;background-color: black;border-radius: 20px;padding:6px 8px;color:white;";else if("tight_wrap"==e.interaction_during_overlay_background_style){isDuringType="tight_wrap",o="position: relative;right:10px;float: right;background-color: black;border-radius: 20px;padding:6px 8px;color:white;",u="max-width:80%;text-align: center;;padding:15px;display:flex;flex-flow:column;position:absolute;justify-content:space-between;background-color:"+hexaColorwithOpacity(e.interaction_during_overlay_background_color,e.interaction_during_overlay_background_opacity)+"!important;",s+="background-color:transparent!important;"}if("tight_wrap"!=e.interaction_during_overlay_background_style){s+="background-color:"+hexaColorwithOpacity(e.interaction_during_overlay_background_color,e.interaction_during_overlay_background_opacity)+"!important;"}if("full_spread"==e.interaction_during_overlay_background_style){var d='<div class="text-wrap during-vieo-text" style="'+s+'">';d+='<div class="callout-overlay-inner-full-spread">'}else if("tight_stretch"==e.interaction_during_overlay_background_style){d='<div class="text-wrap during-vieo-text" id="draggable-callout-button" style="'+s+'">';d+='<div class="callout-overlay-inner">'}else{d='<div class="text-wrap during-vieo-text" style="'+s+'">';d+='<div class="callout-overlay-inner">'}"tight_wrap"==e.interaction_during_overlay_background_style&&(d+='<div style="'+u+'" id="draggable-callout-button">',"true"!=e.interaction_during_allow_skip&&1!=e.interaction_during_allow_skip||(d+='<div style="display:flex;justify-content:end;right:-10px;top:10px;position:absolute">',d+='<span class="skip skip-during-video-text" style="'+o+'">x</span>',d+="</div>")),"button_only"==e.interaction_during_callout_button_style?d+=interaction_during_callout_button_with_link(e,l,r,a):"button_with_title"==e.interaction_during_callout_button_style?(e.interaction_during_text&&(d+='<div style="color:'+e.interaction_during_text_color+";"+i+';">'+e.interaction_during_text+"</div>","full_spread"==e.interaction_during_overlay_background_style?d+="</br>":d+='<div style="margin-bottom:10px"></div>'),d+=interaction_during_callout_button_with_link(e,l,r,a)):"button_with_title_subtitle"==e.interaction_during_callout_button_style?((e.interaction_during_text||e.interaction_during_text_2)&&(d+='<div class="callout-button-multitext">'),e.interaction_during_text&&(d+='<div style="color:'+e.interaction_during_text_color+";"+i+';">'+e.interaction_during_text+"</div>","full_spread"==e.interaction_during_overlay_background_style?d+="</br>":d+='<div style="margin-bottom:10px"></div>'),e.interaction_during_text_2&&(d+='<div style="color:'+e.interaction_during_text_2_color+";"+n+';">'+e.interaction_during_text_2+"</div>","full_spread"==e.interaction_during_overlay_background_style?d+="</br>":d+='<div style="margin-bottom:10px"></div>'),(e.interaction_during_text||e.interaction_during_text_2)&&(d+="</div>"),d+=interaction_during_callout_button_with_link(e,l,r,a)):"button_with_multi_text_left"==e.interaction_during_callout_button_style?((e.interaction_during_text||e.interaction_during_text_2)&&(d+='<div  class="callout-button-multitext-with-button"><div class="callout-button-multitext">'),e.interaction_during_text&&(d+='<div style="color:'+e.interaction_during_text_color+";"+i+';">'+e.interaction_during_text+"</div>","full_spread"==e.interaction_during_overlay_background_style?d+="</br>":d+='<div style="margin-bottom:10px"></div>'),e.interaction_during_text_2&&(d+='<div style="color:'+e.interaction_during_text_2_color+";"+n+';">'+e.interaction_during_text_2+"</div>"),(e.interaction_during_text||e.interaction_during_text_2)&&(d+="</div>"),d+=interaction_during_callout_button_with_link(e,l,r,a),d+="</div>"):"button_with_multi_text_right"==e.interaction_during_callout_button_style&&(d+='<div class="callout-button-multitext-with-button">',d+=interaction_during_callout_button_with_link(e,l,r,a),(e.interaction_during_text||e.interaction_during_text_2)&&(d+='<div class="callout-button-multitext">'),e.interaction_during_text&&(d+='<div style="color:'+e.interaction_during_text_color+";"+i+';">'+e.interaction_during_text+"</div>","full_spread"==e.interaction_during_overlay_background_style?d+="</br>":d+='<div style="margin-bottom:10px"></div>'),e.interaction_during_text_2&&(d+='<div style="color:'+e.interaction_during_text_2_color+";"+n+';">'+e.interaction_during_text_2+"</div>"),(e.interaction_during_text||e.interaction_during_text_2)&&(d+="</div>"),d+="</div>"),"tight_wrap"==e.interaction_during_overlay_background_style&&(d+="</div>"),"true"!=e.interaction_during_allow_skip&&1!=e.interaction_during_allow_skip||("tight_stretch"==e.interaction_during_overlay_background_style?(d+="</div>",d+='<span class="skip skip-during-video-text" style="'+o+'">x</span>'):"full_spread"==e.interaction_during_overlay_background_style&&(d+='<span class="skip skip-during-video-text">skip</span>',d+="</div>"))}else{d='<div class="text-wrap during-vieo-text" style="'+s+'">';d+='<div class="callout-overlay-inner">',"button_only"==e.interaction_during_callout_button_style?d+=interaction_during_callout_button_with_link(e,l,r,a):"button_with_title"==e.interaction_during_callout_button_style?(e.interaction_during_text&&(d+='<div style="color:'+e.interaction_during_text_color+";"+i+';">'+e.interaction_during_text+"</div>",d+="</br>"),d+=interaction_during_callout_button_with_link(e,l,r,a)):"button_with_title_subtitle"==e.interaction_during_callout_button_style?((e.interaction_during_text||e.interaction_during_text_2)&&(d+='<div class="callout-button-multitext">'),e.interaction_during_text&&(d+='<div style="color:'+e.interaction_during_text_color+";"+i+';">'+e.interaction_during_text+"</div>",d+="</br>"),e.interaction_during_text_2&&(d+='<div style="color:'+e.interaction_during_text_2_color+";"+n+';">'+e.interaction_during_text_2+"</div>",d+="</br>"),(e.interaction_during_text||e.interaction_during_text_2)&&(d+="</div>"),d+=interaction_during_callout_button_with_link(e,l,r,a)):"button_with_multi_text_left"==e.interaction_during_callout_button_style?((e.interaction_during_text||e.interaction_during_text_2)&&(d+='<div  class="callout-button-multitext-with-button"><div class="callout-button-multitext">'),e.interaction_during_text&&(d+='<div style="color:'+e.interaction_during_text_color+";"+i+';">'+e.interaction_during_text+"</div>",d+="</br>"),e.interaction_during_text_2&&(d+='<div style="color:'+e.interaction_during_text_2_color+";"+n+';">'+e.interaction_during_text_2+"</div>"),(e.interaction_during_text||e.interaction_during_text_2)&&(d+="</div>"),d+=interaction_during_callout_button_with_link(e,l,r,a),d+="</div>"):"button_with_multi_text_right"==e.interaction_during_callout_button_style&&(d+='<div class="callout-button-multitext-with-button">',d+=interaction_during_callout_button_with_link(e,l,r,a),(e.interaction_during_text||e.interaction_during_text_2)&&(d+='<div class="callout-button-multitext">'),e.interaction_during_text&&(d+='<div style="color:'+e.interaction_during_text_color+";"+i+';">'+e.interaction_during_text+"</div>",d+="</br>"),e.interaction_during_text_2&&(d+='<div style="color:'+e.interaction_during_text_2_color+";"+n+';">'+e.interaction_during_text_2+"</div>"),(e.interaction_during_text||e.interaction_during_text_2)&&(d+="</div>"),d+="</div>"),"true"!=e.interaction_during_allow_skip&&1!=e.interaction_during_allow_skip||(d+='<span class="skip skip-during-video-text">skip</span>',d+="</div>")}d+="</div>",player.exitFullscreen(),$(document).find(".video-player .during-vieo-text").remove(),$(document).find(".video-player").append(d),console.log(t),"tight_wrap"==e.interaction_during_overlay_background_style?($("#draggable-callout-button").css("top",t.interaction_during_cta_top+"%"),$("#draggable-callout-button").css("left",t.interaction_during_cta_left+"%")):"tight_stretch"==e.interaction_during_overlay_background_style&&$("#draggable-callout-button").css("top",t.interaction_during_cta_top+"%")}let dotid;function interaction_during_slider_dot(e){var t="";return(e.interaction_during_cta_image||e.interaction_during_cta_image_2||e.interaction_during_cta_image_3)&&(t+='<ul class="slider-dots">'),e.interaction_during_cta_image&&(t+='<li class="dot" data-value="0"></li>'),e.interaction_during_cta_image_2&&(t+='<li class="dot" data-value="1"></li>'),e.interaction_during_cta_image_3&&(t+='<li class="dot" data-value="2"></li>'),(e.interaction_during_cta_image||e.interaction_during_cta_image_3||e.interaction_during_cta_image_2)&&(t+="</ul>"),console.log(t),t}function interaction_during_cards_type(e,t){e.interaction_during_pause_video_on_display?queryParams1.has("editor")&&$(document).find(".vjs-big-play-button").addClass("vjs-hidden"):(player.pause(),$(document).find(".vjs-big-play-button").addClass("vjs-hidden")),player.controls(!1),text_size=interaction_during_text_size(e),text_2_size=interaction_during_text_2_size(e),button_size=interaction_during_button_size(e),button_color="color:"+e.interaction_during_button_text_color,skip_icon_style="position: absolute;top: 10px;right:10px;height:25px;float: right;background: #162B39 0% 0% no-repeat padding-box;border-radius: 20px;padding:6px 8px;color:white;box-shadow: 0px 0px 10px #FFBB00A3;color:white;";var i="background-color:"+e.interaction_during_card_background_color+"!important;",n="",r="";r="rounded_edge"==e.interaction_during_button_edge?"border-radius: 7px!important;":"border-radius: 0px!important;";var a='<div class="cards-wrap  during-cards-cta" id="cards_cta" style="'+(n+="background-color:"+(e.interaction_during_overlay_background_active?hexaColorwithOpacity(e.interaction_during_overlay_background_color,e.interaction_during_overlay_background_opacity):"transparent")+"!important;")+'">';"full_spread"==e.interaction_during_overlay_background_style?(a+='<div class="cards-style-box-full"  style="'+i+'">',isDuringType="full_spread"):"tight_stretch"==e.interaction_during_overlay_background_style?("style-4"==e.interaction_during_cards_form_style||"style-5"==e.interaction_during_cards_form_style?a+='<div class="cards-style-box-4-5-stretch" id="draggable-cards" style="'+i+'">':"style-9"==e.interaction_during_cards_form_style||"style-10"==e.interaction_during_cards_form_style?a+='<div class="cards-style-box-9-10-stretch" id="draggable-cards" style="'+i+'">':"style-7"==e.interaction_during_cards_form_style?a+='<div class="cards-style-box-7-stretch" id="draggable-cards" style="'+i+'">':"style-8"==e.interaction_during_cards_form_style?a+='<div class="cards-style-box-8-stretch" id="draggable-cards" style="'+i+'">':"style-2"==e.interaction_during_cards_form_style||"style-14"==e.interaction_during_cards_form_style?a+='<div class="cards-style-box-stretch" id="draggable-cards" style="'+i+';padding:0!important">':a+='<div class="cards-style-box-stretch" id="draggable-cards" style="'+i+'">',a+='<div style="z-index:99999;"><span class="skip skip-during-cards-cta skipforexpand" id="expandskipcards" style="'+skip_icon_style+';padding: 4px 8px;top:10px;float:right;">X</span></div>',isDuringType="tight_stretch",localStorage.setItem("interaction-during-top",0)):"tight_wrap"==e.interaction_during_overlay_background_style&&("style-4"==e.interaction_during_cards_form_style||"style-5"==e.interaction_during_cards_form_style?a+='<div class="cards-style-box-4-5-wrap" id="draggable-cards" style="'+i+'">':"style-9"==e.interaction_during_cards_form_style||"style-10"==e.interaction_during_cards_form_style?a+='<div class="cards-style-box-9-10-wrap" id="draggable-cards" style="'+i+'">':"style-7"==e.interaction_during_cards_form_style?a+='<div class="cards-style-box-7-wrap" id="draggable-cards" style="'+i+'">':"style-8"==e.interaction_during_cards_form_style?a+='<div class="cards-style-box-8-wrap" id="draggable-cards" style="'+i+'">':"style-2"==e.interaction_during_cards_form_style||"style-14"==e.interaction_during_cards_form_style?a+='<div class="cards-style-box-wrap" id="draggable-cards" style="'+i+';padding:0!important">':a+='<div class="cards-style-box-wrap" id="draggable-cards" style="'+i+'">',isDuringType="tight_wrap",a+='<div style="z-index:99999;"><span class="skip skip-during-cards-cta skipforexpand" id="expandskipcards" style="'+skip_icon_style+';padding: 4px 8px;top:10px;float:right;">X</span></div>'),"style-1"==e.interaction_during_cards_form_style&&(e.interaction_during_cta_image&&(a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_img cards_img_load"/>'),a+='<div style="display:flex;flex-direction:column;justify-content:center;max-height:50%">',e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>',a+="</div>"),"style-2"==e.interaction_during_cards_form_style&&(e.interaction_during_cta_image&&(a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_img_style_2 cards_img_load"/>'),"tight_wrap"==e.interaction_during_overlay_background_style?a+='<div style="display:flex;flex-direction:column;margin: 0 10px;">':a+='<div style="display:flex;flex-direction:column;margin-top: 25px;height:100vh">',e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>',a+="</div>"),"style-3"==e.interaction_during_cards_form_style&&(e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),e.interaction_during_cta_image&&(a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_img cards_img_load"/>'),a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>'),"style-4"==e.interaction_during_cards_form_style&&(a+='<div class="cards-style-4">',a+='<div class="col-img">',e.interaction_during_cta_image&&(console.log(e.interaction_during_cta_image),a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_img_style_4 cards_img_load"/>'),a+="</div>",a+='<div class="col-content">',e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>',a+="</div>",a+="</div>"),"style-5"==e.interaction_during_cards_form_style&&(a+='<div class="cards-style-4">',a+='<div class="col-img">',e.interaction_during_cta_image&&(a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_img_style_4 slide cards_img_load"/>'),e.interaction_during_cta_image_2&&(a+='<img src = "'+e.interaction_during_cta_image_2+'" class="cards_img_style_4 slide cards_img_load"/>'),e.interaction_during_cta_image_3&&(a+='<img src = "'+e.interaction_during_cta_image_3+'" class="cards_img_style_4 slide cards_img_load"/>'),(e.interaction_during_cta_image||e.interaction_during_cta_image_3||e.interaction_during_cta_image_2)&&(a+=interaction_during_slider_dot(e)),a+="</div>",a+='<div class="col-content">',e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>',a+="</div>",a+="</div>"),"style-6"==e.interaction_during_cards_form_style&&(e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>'),"style-7"==e.interaction_during_cards_form_style&&(e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),a+='<div class="cards-style-7">',a+='<div class="col-img">',e.interaction_during_cta_image&&(a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_img_style_7 slide cards_img_load"/>'),e.interaction_during_cta_image_2&&(a+='<img src = "'+e.interaction_during_cta_image_2+'" class="cards_img_style_7 slide cards_img_load"/>'),e.interaction_during_cta_image_3&&(a+='<img src = "'+e.interaction_during_cta_image_3+'" class="cards_img_style_7 slide cards_img_load"/>'),a+='<div class="child-images-style-7">',e.interaction_during_cta_image&&(a+='<img class="cards_child_img dotimg cards_img_load" src="'+e.interaction_during_cta_image+'"/>'),e.interaction_during_cta_image_2&&(a+='<img class="cards_child_img dotimg cards_img_load" src="'+e.interaction_during_cta_image_2+'"/>'),e.interaction_during_cta_image_3&&(a+='<img class="cards_child_img dotimg cards_img_load" src="'+e.interaction_during_cta_image_3+'"/>'),a+="</div>",a+="</div>",a+='<div class="col-content">',e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),e.interaction_during_text_3&&(a+=' <div class="cards-text" style="color:black;font-size:13px">'+e.interaction_during_text_3+"</div>"),e.interaction_during_text_4&&(a+=' <div class="cards-text" style="color:black;font-size:13px">'+e.interaction_during_text_4+"</div>"),e.interaction_during_text_5&&(a+=' <div class="cards-text" style="color:black;font-size:13px">'+e.interaction_during_text_5+"</div>"),a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>',a+="</div>",a+="</div>"),"style-8"==e.interaction_during_cards_form_style&&(e.interaction_during_text&&(a+=' <div class="cards-text cards-text-style-8" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="cards-text-2 cards-text-2-style-8" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),e.interaction_during_text_3&&(a+=' <div class="cards-text cards-text-3-style-8"  style="color:black;font-size:13px">'+e.interaction_during_text_3+"</div>"),a+='<div class="images">',a+='<div class="child-images_style_8">',e.interaction_during_cta_image&&(a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_child_img_style_8 dotimg cards_img_load"/>'),e.interaction_during_cta_image_2&&(a+='<img src = "'+e.interaction_during_cta_image_2+'" class="cards_child_img_style_8 dotimg cards_img_load"/>'),e.interaction_during_cta_image_3&&(a+='<img src = "'+e.interaction_during_cta_image_3+'" class="cards_child_img_style_8 dotimg cards_img_load"/>'),a+="</div>",a+='<div class="col-img">',e.interaction_during_cta_image&&(a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_img_style_8 slide cards_img_load"/>'),e.interaction_during_cta_image_2&&(a+='<img src = "'+e.interaction_during_cta_image_2+'" class="cards_img_style_8 slide cards_img_load"/>'),e.interaction_during_cta_image_3&&(a+='<img src = "'+e.interaction_during_cta_image_3+'" class="cards_img_style_8 slide cards_img_load"/>'),a+="</div>",a+="</div>",e.interaction_during_text_4&&(a+=' <div class="cards-text-2 cards-text-4-style-8"  style="color:black;font-size:13px">'+e.interaction_during_text_4+"</div>"),a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>'),"style-9"==e.interaction_during_cards_form_style&&(a+='<div class="cards-style-9">',a+='<div class="col-style-9-content">',e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),a+="</div>",a+='<div class="col-style-9-btn">',a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>',a+="</div>",a+="</div>"),"style-10"==e.interaction_during_cards_form_style&&(a+='<div class="cards-style-9">',a+='<div class="col-style-10-content">',e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),a+="</div>",a+='<div class="col-style-9-img">',e.interaction_during_cta_image&&(a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_img_style_10"/>'),a+="</div>",a+='<div class="col-style-9-btn">',a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>',a+="</div>",a+="</div>"),"style-11"==e.interaction_during_cards_form_style&&(e.interaction_during_cta_image&&(a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_img cards_img_load"/>'),a+='<div class="col-style-11-col">',a+='<div class="col-style-11-col-content">',e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),a+="</div>",a+='<div class="col-style-11-col-btn">',a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>',a+="</div>",a+="</div>"),"style-12"==e.interaction_during_cards_form_style&&(e.interaction_during_cta_image&&(a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_img cards_img_load"/>'),e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>")),"style-13"==e.interaction_during_cards_form_style&&(e.interaction_during_cta_image&&(a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_img_style_13 cards_img_load"/>'),a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>'),"style-14"==e.interaction_during_cards_form_style&&(e.interaction_during_cta_image&&(a+='<img src = "'+e.interaction_during_cta_image+'" class="cards_img_style_2 slide cards_img_load"/>'),e.interaction_during_cta_image_2&&(a+='<img src = "'+e.interaction_during_cta_image_2+'" class="cards_img_style_2 slide cards_img_load"/>'),e.interaction_during_cta_image_3&&(a+='<img src = "'+e.interaction_during_cta_image_3+'" class="cards_img_style_2 slide cards_img_load"/>'),(e.interaction_during_cta_image||e.interaction_during_cta_image_3||e.interaction_during_cta_image_2)&&(a+=interaction_during_slider_dot(e)),"tight_wrap"==e.interaction_during_overlay_background_style?a+='<div style="display:flex;flex-direction:column;">':a+='<div style="display:flex;flex-direction:column;margin-top: 25px;height:100vh">',e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>',a+="</div>"),"style-15"==e.interaction_during_cards_form_style&&(a+=' <div class="cards-text-content cards-style-15">',e.interaction_during_text_desc&&(a+=' <div class="cards-text_desc">'+e.interaction_during_text_desc+"</div>"),e.interaction_during_text&&(a+=' <div class="cards-text" style="color:'+e.interaction_during_text_color+";"+text_size+'">'+e.interaction_during_text+"</div>"),a+="</div>",e.interaction_during_text_2&&(a+=' <div class="cards-text-2" style="color:'+e.interaction_during_text_2_color+";"+text_2_size+'">'+e.interaction_during_text_2+"</div>"),a+=interaction_during_card_button_with_link(e,r,button_size,button_color),a+='<div style="margin-bottom:5px"></div>'),a+="</div>","true"!=e.interaction_during_allow_skip&&1!=e.interaction_during_allow_skip||("full_spread"==e.interaction_during_overlay_background_style?a+='<span class="skip skip-during-cards-cta skipcard" style="'+skip_icon_style+'">X</span>':a+='<span class="skip skip-during-cards-cta skipcard" id="skipcards" >skip</span>'),a+="</div>",player.exitFullscreen(),$(document).find(".video-player .during-cards-cta").remove(),$(document).find(".video-player").append(a),"tight_wrap"==e.interaction_during_overlay_background_style&&$("#draggable-cards").resizable(),queryParams.has("editor")||"tight_wrap"!=e.interaction_during_overlay_background_style||$("#draggable-cards").resizable("disable");"style-14"==e.interaction_during_cards_form_style||"style-5"==e.interaction_during_cards_form_style?(e.interaction_during_cta_image||e.interaction_during_cta_image_2||e.interaction_during_cta_image_3)&&sliderforcardsstyle5_14("cards"):"style-7"==e.interaction_during_cards_form_style||"style-8"==e.interaction_during_cards_form_style?(e.interaction_during_cta_image||e.interaction_during_cta_image_2||e.interaction_during_cta_image_3)&&sliderforcardsstyle78("cards"):clearInterval(dotid),null!=t.interaction_during_cta_width&&"tight_wrap"==e.interaction_during_overlay_background_style?$("#draggable-cards").css("width",t.interaction_during_cta_width+"%"):$("#draggable-cards").css("width",""),null!=t.interaction_during_cta_height&&"tight_wrap"==e.interaction_during_overlay_background_style?$("#draggable-cards").css("height",t.interaction_during_cta_height+"%"):$("#draggable-cards").css("height",""),draggablecards(e,t),$(".cards_img_load").length>0&&$(".cards_img_load").on("load",function(){draggabletopleftforcards(e,t)}),"full_spread"!=e.interaction_during_overlay_background_style&&checkOverlapcardsform()}function draggabletopleftforcards(e,t){null==t.interaction_during_cta_top||queryParams.has("editor")||(t.interaction_during_cta_top,$("#draggable-cards").css("top",t.interaction_during_cta_top+"%")),null==t.interaction_during_cta_left||queryParams.has("editor")||(t.interaction_during_cta_left,$("#draggable-cards").css("left",t.interaction_during_cta_left+"%")),"full_spread"!=e.interaction_during_overlay_background_style&&checkOverlapcardsform()}function draggablecards(e,t){localStorage.getItem("interaction-during-cta-width")&&queryParams.has("editor")&&"tight_wrap"==isDuringType?$("#draggable-cards").css("width",localStorage.getItem("interaction-during-cta-width")+"%"):$("#draggable-cards").remove("width",""),localStorage.getItem("interaction-during-cta-height")&&queryParams.has("editor")&&"tight_wrap"==isDuringType?$("#draggable-cards").css("height",localStorage.getItem("interaction-during-cta-height")+"%"):$("#draggable-cards").remove("height",""),localStorage.getItem("interaction-during-top-editor")&&queryParams.has("editor")&&"tight_wrap"==isDuringType?$("#draggable-cards").css("top",localStorage.getItem("interaction-during-top-editor")+"px"):localStorage.getItem("interaction-during-top-editor")&&queryParams.has("editor")&&"tight_stretch"==isDuringType&&$("#draggable-email-capture").css("top","0px"),localStorage.getItem("interaction-during-left-editor")&&queryParams.has("editor")&&"full_spread"!=isDuringType&&$("#draggable-cards").css("left",localStorage.getItem("interaction-during-left-editor")+"px"),null==t.interaction_during_cta_top||queryParams.has("editor")||(t.interaction_during_cta_top,$("#draggable-cards").css("top",t.interaction_during_cta_top+"%")),null==t.interaction_during_cta_left||queryParams.has("editor")||(t.interaction_during_cta_left,$("#draggable-cards").css("left",t.interaction_during_cta_left+"%"))}function sliderforcardsstyle78(e){const t=document.querySelectorAll(".slide");let i=0;function n(e){t[i].style.display="none",i=(e+t.length)%t.length,t[i].style.display="block"}"cards"!=e&&(clearInterval(dotid),i=e),dotid=setInterval(function(){n(i+1)},5e3),n(i)}function sliderforcardsstyle5_14(e){const t=document.querySelectorAll(".slide"),i=document.querySelectorAll(".dot");let n=0;function r(e){t[n].style.display="none",i[n].classList.remove("active"),n=(e+t.length)%t.length,t[n].style.display="block",i[n].classList.add("active")}"cards"!=e&&(clearInterval(dotid),n=e),dotid=setInterval(function(){r(n+1)},5e3),r(n)}function hexaColorwithOpacity(e,t){return e=e.replace("#",""),console.log(e),`#${e}${Math.round(2.55*t).toString(16).padStart(2,"0")}`}var myTimeout;function call_endtime_function(e,t=null,i=!1){$(document).find(".video-player .during-vieo-text").remove(),$(document).find(".video-player .html-interaction-wrap").remove(),$(document).find(".video-player .during-video-image").remove(),$(document).find(".video-player .during-cards-cta").remove(),player.play(),player.controls(!0);let n={type:e,timestamp:player.currentTime(),phase:"during",extra:{url:t}};i?(myTimeout&&clearTimeout(myTimeout),registerInteraction(e,"during",player.currentTime(),{url:t})):player.trigger("CTASkip",n)}function during_interaction(e,t){var i=[];if(r=video.player_options.interaction_during_array)i=interaction_during_options.filter(e=>e.start_time==video.player_options.interaction_during_start_time);e=Math.floor(e);var n=interaction_during_options.filter(t=>Math.abs(e-t.start_time)<.1);if(i.length){if(i[0].start_time!=e&&0!=n.length){n=n[0];var r=JSON.parse(n.interaction_during_json);n.triggered||"text"!=n.type?n.triggered||"html_code"!=n.type?n.triggered||"image"!=n.type?n.triggered||"capture_email"!=n.type?n.triggered||"callout_button"!=n.type?n.triggered||"cards"!=n.type||(n.triggered=!0,interaction_during_cards_type(r,n),countInteractionDisplays("cards","during",player.currentTime()),"1"==n.pause_video_on_display&&(clearTimeout(myTimeout),myTimeout=window.setTimeout(()=>{call_endtime_function("cards")},1e3*(n.end_time-n.start_time)))):(n.triggered=!0,interaction_during_callout_button_type(r,n),countInteractionDisplays("callout_button","during",player.currentTime()),"1"==n.pause_video_on_display&&(clearTimeout(myTimeout),myTimeout=window.setTimeout(()=>{call_endtime_function("callout_button")},1e3*(n.end_time-n.start_time)))):(n.triggered=!0,interaction_during_capture_email_type(r,n),countInteractionDisplays("email_capture","during",player.currentTime()),"1"==n.pause_video_on_display&&(clearTimeout(myTimeout),myTimeout=window.setTimeout(()=>{call_endtime_function("email_capture")},1e3*(n.end_time-n.start_time)))):(n.triggered=!0,interaction_during_image_type(r,n),countInteractionDisplays("image","during",player.currentTime()),"1"==n.pause_video_on_display&&(clearTimeout(myTimeout),myTimeout=window.setTimeout(()=>{call_endtime_function("image")},1e3*(n.end_time-n.start_time)))):(n.triggered=!0,interaction_during_html_type(r,n),countInteractionDisplays("html","during",player.currentTime()),"1"==n.pause_video_on_display&&(clearTimeout(myTimeout),myTimeout=window.setTimeout(()=>{call_endtime_function("html")},1e3*(n.end_time-n.start_time)))):(n.triggered=!0,interaction_during_text_type(r,n),countInteractionDisplays("text","during",player.currentTime()),"1"==n.pause_video_on_display&&(clearTimeout(myTimeout),myTimeout=window.setTimeout(()=>{call_endtime_function("text")},1e3*(n.end_time-n.start_time))))}}else if(0!=n.length){n=n[0];r=JSON.parse(n.interaction_during_json);n.triggered||"text"!=n.type?n.triggered||"html_code"!=n.type?n.triggered||"image"!=n.type?n.triggered||"capture_email"!=n.type?n.triggered||"callout_button"!=n.type?n.triggered||"cards"!=n.type||(n.triggered=!0,interaction_during_cards_type(r,n),countInteractionDisplays("cards","during",player.currentTime()),"1"==n.pause_video_on_display&&(clearTimeout(myTimeout),myTimeout=window.setTimeout(()=>{call_endtime_function("cards")},1e3*(n.end_time-n.start_time)))):(n.triggered=!0,interaction_during_callout_button_type(r,n),countInteractionDisplays("callout_button","during",player.currentTime()),"1"==n.pause_video_on_display&&(clearTimeout(myTimeout),myTimeout=window.setTimeout(()=>{call_endtime_function("callout_button")},1e3*(n.end_time-n.start_time)))):(n.triggered=!0,interaction_during_capture_email_type(r,n),countInteractionDisplays("email_capture","during",player.currentTime()),"1"==n.pause_video_on_display&&(clearTimeout(myTimeout),myTimeout=window.setTimeout(()=>{call_endtime_function("capture_email")},1e3*(n.end_time-n.start_time)))):(n.triggered=!0,interaction_during_image_type(r,n),countInteractionDisplays("image","during",player.currentTime()),"1"==n.pause_video_on_display&&(clearTimeout(myTimeout),myTimeout=window.setTimeout(()=>{call_endtime_function("image")},1e3*(n.end_time-n.start_time)))):(n.triggered=!0,interaction_during_html_type(r,n),countInteractionDisplays("html","during",player.currentTime()),"1"==n.pause_video_on_display&&(clearTimeout(myTimeout),myTimeout=window.setTimeout(()=>{call_endtime_function("html_code")},1e3*(n.end_time-n.start_time)))):(n.triggered=!0,interaction_during_text_type(r,n),countInteractionDisplays("text","during",player.currentTime()),"1"==n.pause_video_on_display&&(clearTimeout(myTimeout),myTimeout=window.setTimeout(()=>{call_endtime_function("text")},1e3*(n.end_time-n.start_time))))}}$(document).on("click","#show-playlist-button",function(){var e='<div id="playlist-wrap" style=""><div id="playlist-header"><div id="playlist-hide"><img src="data:image/svg+xml;base64,PHN2ZyBpZD0iQ2xvc2VfcG9wX3VwIiBkYXRhLW5hbWU9IkNsb3NlIHBvcCB1cCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCI+CiAgPGcgaWQ9IkNvbWJpbmVkLVNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc3IC0xOSkiIGZpbGw9IiMyMTQ1NWUiPgogICAgPHBhdGggZD0iTSAyODkuOTc1NjE2NDU1MDc4MSAzMi45MDAwMDE1MjU4Nzg5MSBDIDI4OS43Mjg2OTg3MzA0Njg4IDMyLjkwMDAwMTUyNTg3ODkxIDI4OS40OTY1NTE1MTM2NzE5IDMyLjgwMzg0MDYzNzIwNzAzIDI4OS4zMjE5NjA0NDkyMTg4IDMyLjYyOTI0OTU3Mjc1MzkxIEwgMjg0LjA3MDcwOTIyODUxNTYgMjcuMzc4MDAwMjU5Mzk5NDEgTCAyODQgMjcuMzA3Mjg5MTIzNTM1MTYgTCAyODMuOTI5MjkwNzcxNDg0NCAyNy4zNzgwMDAyNTkzOTk0MSBMIDI3OC42NzgwMzk1NTA3ODEyIDMyLjYyOTI0OTU3Mjc1MzkxIEMgMjc4LjUwMzQ0ODQ4NjMyODEgMzIuODAzODQwNjM3MjA3MDMgMjc4LjI3MTMwMTI2OTUzMTIgMzIuOTAwMDAxNTI1ODc4OTEgMjc4LjAyNDM4MzU0NDkyMTkgMzIuOTAwMDAxNTI1ODc4OTEgQyAyNzcuNzc3NDY1ODIwMzEyNSAzMi45MDAwMDE1MjU4Nzg5MSAyNzcuNTQ1MzQ5MTIxMDkzOCAzMi44MDM4NDA2MzcyMDcwMyAyNzcuMzcwNzU4MDU2NjQwNiAzMi42MjkyNDk1NzI3NTM5MSBDIDI3Ny4xOTYxNjY5OTIxODc1IDMyLjQ1NDY1ODUwODMwMDc4IDI3Ny4xMDAwMDYxMDM1MTU2IDMyLjIyMjUzMDM2NDk5MDIzIDI3Ny4xMDAwMDYxMDM1MTU2IDMxLjk3NTYxMDczMzAzMjIzIEMgMjc3LjEwMDAwNjEwMzUxNTYgMzEuNzI4NzAwNjM3ODE3MzggMjc3LjE5NjE2Njk5MjE4NzUgMzEuNDk2NTcwNTg3MTU4MiAyNzcuMzcwNzU4MDU2NjQwNiAzMS4zMjE5Njk5ODU5NjE5MSBMIDI4Mi42MjIwMDkyNzczNDM4IDI2LjA3MDcwOTIyODUxNTYyIEwgMjgyLjY5MjcxODUwNTg1OTQgMjYgTCAyODIuNjIyMDA5Mjc3MzQzOCAyNS45MjkyOTA3NzE0ODQzOCBMIDI3Ny4zNzA3NTgwNTY2NDA2IDIwLjY3ODAzMDAxNDAzODA5IEMgMjc3LjE5NjE2Njk5MjE4NzUgMjAuNTAzNDI5NDEyODQxOCAyNzcuMTAwMDA2MTAzNTE1NiAyMC4yNzEyOTkzNjIxODI2MiAyNzcuMTAwMDA2MTAzNTE1NiAyMC4wMjQzODkyNjY5Njc3NyBDIDI3Ny4xMDAwMDYxMDM1MTU2IDE5Ljc3NzQ3OTE3MTc1MjkzIDI3Ny4xOTYxNjY5OTIxODc1IDE5LjU0NTM0OTEyMTA5Mzc1IDI3Ny4zNzA3NTgwNTY2NDA2IDE5LjM3MDc1MDQyNzI0NjA5IEMgMjc3LjU0NTM0OTEyMTA5MzggMTkuMTk2MTU5MzYyNzkyOTcgMjc3Ljc3NzQ2NTgyMDMxMjUgMTkuMTAwMDAwMzgxNDY5NzMgMjc4LjAyNDM4MzU0NDkyMTkgMTkuMTAwMDAwMzgxNDY5NzMgQyAyNzguMjcxMzAxMjY5NTMxMiAxOS4xMDAwMDAzODE0Njk3MyAyNzguNTAzNDQ4NDg2MzI4MSAxOS4xOTYxNTkzNjI3OTI5NyAyNzguNjc4MDM5NTUwNzgxMiAxOS4zNzA3NTA0MjcyNDYwOSBMIDI4My45MjkyOTA3NzE0ODQ0IDI0LjYyMTk5OTc0MDYwMDU5IEwgMjg0IDI0LjY5MjcxMDg3NjQ2NDg0IEwgMjg0LjA3MDcwOTIyODUxNTYgMjQuNjIxOTk5NzQwNjAwNTkgTCAyODkuMzIxOTYwNDQ5MjE4OCAxOS4zNzA3NTA0MjcyNDYwOSBDIDI4OS40OTY1NTE1MTM2NzE5IDE5LjE5NjE1OTM2Mjc5Mjk3IDI4OS43Mjg2OTg3MzA0Njg4IDE5LjEwMDAwMDM4MTQ2OTczIDI4OS45NzU2MTY0NTUwNzgxIDE5LjEwMDAwMDM4MTQ2OTczIEMgMjkwLjIyMjUzNDE3OTY4NzUgMTkuMTAwMDAwMzgxNDY5NzMgMjkwLjQ1NDY1MDg3ODkwNjIgMTkuMTk2MTU5MzYyNzkyOTcgMjkwLjYyOTI0MTk0MzM1OTQgMTkuMzcwNzUwNDI3MjQ2MDkgQyAyOTAuODAzODMzMDA3ODEyNSAxOS41NDUzNDkxMjEwOTM3NSAyOTAuODk5OTkzODk2NDg0NCAxOS43Nzc0NzkxNzE3NTI5MyAyOTAuODk5OTkzODk2NDg0NCAyMC4wMjQzODkyNjY5Njc3NyBDIDI5MC44OTk5OTM4OTY0ODQ0IDIwLjI3MTI5OTM2MjE4MjYyIDI5MC44MDM4MzMwMDc4MTI1IDIwLjUwMzQyOTQxMjg0MTggMjkwLjYyOTI0MTk0MzM1OTQgMjAuNjc4MDMwMDE0MDM4MDkgTCAyODUuMzc3OTkwNzIyNjU2MiAyNS45MjkyOTA3NzE0ODQzOCBMIDI4NS4zMDcyODE0OTQxNDA2IDI2IEwgMjg1LjM3Nzk5MDcyMjY1NjIgMjYuMDcwNzA5MjI4NTE1NjIgTCAyOTAuNjI5MjQxOTQzMzU5NCAzMS4zMjE5Njk5ODU5NjE5MSBDIDI5MC44MDM4MzMwMDc4MTI1IDMxLjQ5NjU3MDU4NzE1ODIgMjkwLjg5OTk5Mzg5NjQ4NDQgMzEuNzI4NzAwNjM3ODE3MzggMjkwLjg5OTk5Mzg5NjQ4NDQgMzEuOTc1NjEwNzMzMDMyMjMgQyAyOTAuODk5OTkzODk2NDg0NCAzMi4yMjI1MzAzNjQ5OTAyMyAyOTAuODAzODMzMDA3ODEyNSAzMi40NTQ2NTg1MDgzMDA3OCAyOTAuNjI5MjQxOTQzMzU5NCAzMi42MjkyNDk1NzI3NTM5MSBDIDI5MC40NTQ2NTA4Nzg5MDYyIDMyLjgwMzg0MDYzNzIwNzAzIDI5MC4yMjI1MzQxNzk2ODc1IDMyLjkwMDAwMTUyNTg3ODkxIDI4OS45NzU2MTY0NTUwNzgxIDMyLjkwMDAwMTUyNTg3ODkxIFoiIHN0cm9rZT0ibm9uZSIvPgogICAgPHBhdGggZD0iTSAyNzguMDI0MzgzNTQ0OTIxOSAxOS4yMDAwMDA3NjI5Mzk0NSBDIDI3Ny44MDQxNjg3MDExNzE5IDE5LjIwMDAwMDc2MjkzOTQ1IDI3Ny41OTcxNjc5Njg3NSAxOS4yODU3NTEzNDI3NzM0NCAyNzcuNDQxNDY3Mjg1MTU2MiAxOS40NDE0NTk2NTU3NjE3MiBDIDI3Ny4yODU3NjY2MDE1NjI1IDE5LjU5NzE3MTc4MzQ0NzI3IDI3Ny4yMDAwMTIyMDcwMzEyIDE5LjgwNDE5MTU4OTM1NTQ3IDI3Ny4yMDAwMTIyMDcwMzEyIDIwLjAyNDM4OTI2Njk2Nzc3IEMgMjc3LjIwMDAxMjIwNzAzMTIgMjAuMjQ0NTkwNzU5Mjc3MzQgMjc3LjI4NTc2NjYwMTU2MjUgMjAuNDUxNjEwNTY1MTg1NTUgMjc3LjQ0MTQ2NzI4NTE1NjIgMjAuNjA3MzIwNzg1NTIyNDYgTCAyODIuNjkyNzE4NTA1ODU5NCAyNS44NTg1Nzk2MzU2MjAxMiBMIDI4Mi44MzQxMzY5NjI4OTA2IDI2IEwgMjgyLjY5MjcxODUwNTg1OTQgMjYuMTQxNDIwMzY0Mzc5ODggTCAyNzcuNDQxNDY3Mjg1MTU2MiAzMS4zOTI2NzkyMTQ0Nzc1NCBDIDI3Ny4yODU3NjY2MDE1NjI1IDMxLjU0ODM4OTQzNDgxNDQ1IDI3Ny4yMDAwMTIyMDcwMzEyIDMxLjc1NTQwOTI0MDcyMjY2IDI3Ny4yMDAwMTIyMDcwMzEyIDMxLjk3NTYxMDczMzAzMjIzIEMgMjc3LjIwMDAxMjIwNzAzMTIgMzIuMTk1ODA4NDEwNjQ0NTMgMjc3LjI4NTc2NjYwMTU2MjUgMzIuNDAyODMyMDMxMjUgMjc3LjQ0MTQ2NzI4NTE1NjIgMzIuNTU4NTQwMzQ0MjM4MjggQyAyNzcuNTk3MTY3OTY4NzUgMzIuNzE0MjQ4NjU3MjI2NTYgMjc3LjgwNDE5OTIxODc1IDMyLjc5OTk5OTIzNzA2MDU1IDI3OC4wMjQzODM1NDQ5MjE5IDMyLjc5OTk5OTIzNzA2MDU1IEMgMjc4LjI0NDU2Nzg3MTA5MzggMzIuNzk5OTk5MjM3MDYwNTUgMjc4LjQ1MTU5OTEyMTA5MzggMzIuNzE0MjQ4NjU3MjI2NTYgMjc4LjYwNzMzMDMyMjI2NTYgMzIuNTU4NTQwMzQ0MjM4MjggTCAyODMuODU4NTgxNTQyOTY4OCAyNy4zMDcyODkxMjM1MzUxNiBMIDI4NCAyNy4xNjU4NzA2NjY1MDM5MSBMIDI4NC4xNDE0MTg0NTcwMzEyIDI3LjMwNzI4OTEyMzUzNTE2IEwgMjg5LjM5MjY2OTY3NzczNDQgMzIuNTU4NTQwMzQ0MjM4MjggQyAyODkuNTQ4NDAwODc4OTA2MiAzMi43MTQyNDg2NTcyMjY1NiAyODkuNzU1NDAxNjExMzI4MSAzMi43OTk5OTkyMzcwNjA1NSAyODkuOTc1NjE2NDU1MDc4MSAzMi43OTk5OTkyMzcwNjA1NSBDIDI5MC4xOTU4MDA3ODEyNSAzMi43OTk5OTkyMzcwNjA1NSAyOTAuNDAyODMyMDMxMjUgMzIuNzE0MjQ4NjU3MjI2NTYgMjkwLjU1ODUzMjcxNDg0MzggMzIuNTU4NTQwMzQ0MjM4MjggQyAyOTAuNzE0MjMzMzk4NDM3NSAzMi40MDI4MzIwMzEyNSAyOTAuNzk5OTg3NzkyOTY4OCAzMi4xOTU4MDg0MTA2NDQ1MyAyOTAuNzk5OTg3NzkyOTY4OCAzMS45NzU2MTA3MzMwMzIyMyBDIDI5MC43OTk5ODc3OTI5Njg4IDMxLjc1NTQwOTI0MDcyMjY2IDI5MC43MTQyMzMzOTg0Mzc1IDMxLjU0ODM4OTQzNDgxNDQ1IDI5MC41NTg1MzI3MTQ4NDM4IDMxLjM5MjY3OTIxNDQ3NzU0IEwgMjg1LjMwNzI4MTQ5NDE0MDYgMjYuMTQxNDIwMzY0Mzc5ODggTCAyODUuMTY1ODYzMDM3MTA5NCAyNiBMIDI4NS4zMDcyODE0OTQxNDA2IDI1Ljg1ODU3OTYzNTYyMDEyIEwgMjkwLjU1ODUzMjcxNDg0MzggMjAuNjA3MzIwNzg1NTIyNDYgQyAyOTAuNzE0MjMzMzk4NDM3NSAyMC40NTE2MTA1NjUxODU1NSAyOTAuNzk5OTg3NzkyOTY4OCAyMC4yNDQ1OTA3NTkyNzczNCAyOTAuNzk5OTg3NzkyOTY4OCAyMC4wMjQzODkyNjY5Njc3NyBDIDI5MC43OTk5ODc3OTI5Njg4IDE5LjgwNDE5MTU4OTM1NTQ3IDI5MC43MTQyMzMzOTg0Mzc1IDE5LjU5NzE3MTc4MzQ0NzI3IDI5MC41NTg1MzI3MTQ4NDM4IDE5LjQ0MTQ0ODIxMTY2OTkyIEMgMjkwLjQwMjgzMjAzMTI1IDE5LjI4NTc1MTM0Mjc3MzQ0IDI5MC4xOTU4MzEyOTg4MjgxIDE5LjIwMDAwMDc2MjkzOTQ1IDI4OS45NzU2MTY0NTUwNzgxIDE5LjIwMDAwMDc2MjkzOTQ1IEMgMjg5Ljc1NTQwMTYxMTMyODEgMTkuMjAwMDAwNzYyOTM5NDUgMjg5LjU0ODM3MDM2MTMyODEgMTkuMjg1NzUxMzQyNzczNDQgMjg5LjM5MjY2OTY3NzczNDQgMTkuNDQxNDU5NjU1NzYxNzIgTCAyODQuMTQxNDE4NDU3MDMxMiAyNC42OTI3MTA4NzY0NjQ4NCBMIDI4NCAyNC44MzQxMjkzMzM0OTYwOSBMIDI4My44NTg1ODE1NDI5Njg4IDI0LjY5MjcxMDg3NjQ2NDg0IEwgMjc4LjYwNzMzMDMyMjI2NTYgMTkuNDQxNDU5NjU1NzYxNzIgQyAyNzguNDUxNjI5NjM4NjcxOSAxOS4yODU3NTEzNDI3NzM0NCAyNzguMjQ0NTk4Mzg4NjcxOSAxOS4yMDAwMDA3NjI5Mzk0NSAyNzguMDI0MzgzNTQ0OTIxOSAxOS4yMDAwMDA3NjI5Mzk0NSBNIDI3OC4wMjQzODM1NDQ5MjE5IDE5LjAwMDAwMzgxNDY5NzI3IEMgMjc4LjI4NjU2MDA1ODU5MzggMTkuMDAwMDAzODE0Njk3MjcgMjc4LjU0ODcwNjA1NDY4NzUgMTkuMTAwMDEzNzMyOTEwMTYgMjc4Ljc0ODc0ODc3OTI5NjkgMTkuMzAwMDQxMTk4NzMwNDcgTCAyODQgMjQuNTUxMjkwNTEyMDg0OTYgTCAyODkuMjUxMjUxMjIwNzAzMSAxOS4zMDAwNDExOTg3MzA0NyBDIDI4OS40NTEyOTM5NDUzMTI1IDE5LjEwMDAxMzczMjkxMDE2IDI4OS43MTM0Mzk5NDE0MDYyIDE5LjAwMDAwMzgxNDY5NzI3IDI4OS45NzU2MTY0NTUwNzgxIDE5LjAwMDAwMzgxNDY5NzI3IEMgMjkwLjIzNzc5Mjk2ODc1IDE5LjAwMDAwMzgxNDY5NzI3IDI5MC40OTk5Mzg5NjQ4NDM4IDE5LjEwMDAxMzczMjkxMDE2IDI5MC42OTk5NTExNzE4NzUgMTkuMzAwMDQxMTk4NzMwNDcgQyAyOTEuMTAwMDA2MTAzNTE1NiAxOS43MDAwODg1MDA5NzY1NiAyOTEuMTAwMDA2MTAzNTE1NiAyMC4zNDg2OTAwMzI5NTg5OCAyOTAuNjk5OTUxMTcxODc1IDIwLjc0ODczOTI0MjU1MzcxIEwgMjg1LjQ0ODY5OTk1MTE3MTkgMjYgTCAyOTAuNjk5OTUxMTcxODc1IDMxLjI1MTI2MDc1NzQ0NjI5IEMgMjkxLjEwMDAwNjEwMzUxNTYgMzEuNjUxMzA5OTY3MDQxMDIgMjkxLjEwMDAwNjEwMzUxNTYgMzIuMjk5OTE5MTI4NDE3OTcgMjkwLjY5OTk1MTE3MTg3NSAzMi42OTk5NTg4MDEyNjk1MyBDIDI5MC40OTk5Mzg5NjQ4NDM4IDMyLjg5OTk4NjI2NzA4OTg0IDI5MC4yMzc3OTI5Njg3NSAzMyAyODkuOTc1NjE2NDU1MDc4MSAzMyBDIDI4OS43MTM0Mzk5NDE0MDYyIDMzIDI4OS40NTEyOTM5NDUzMTI1IDMyLjg5OTk4NjI2NzA4OTg0IDI4OS4yNTEyNTEyMjA3MDMxIDMyLjY5OTk1ODgwMTI2OTUzIEwgMjg0IDI3LjQ0ODcwOTQ4NzkxNTA0IEwgMjc4Ljc0ODc0ODc3OTI5NjkgMzIuNjk5OTU4ODAxMjY5NTMgQyAyNzguNTQ4NzA2MDU0Njg3NSAzMi44OTk5ODYyNjcwODk4NCAyNzguMjg2NTYwMDU4NTkzOCAzMyAyNzguMDI0MzgzNTQ0OTIxOSAzMyBDIDI3Ny43NjIyMDcwMzEyNSAzMyAyNzcuNTAwMDYxMDM1MTU2MiAzMi44OTk5ODYyNjcwODk4NCAyNzcuMzAwMDQ4ODI4MTI1IDMyLjY5OTk1ODgwMTI2OTUzIEMgMjc2Ljg5OTk5Mzg5NjQ4NDQgMzIuMjk5OTE5MTI4NDE3OTcgMjc2Ljg5OTk5Mzg5NjQ4NDQgMzEuNjUxMzA5OTY3MDQxMDIgMjc3LjMwMDA0ODgyODEyNSAzMS4yNTEyNjA3NTc0NDYyOSBMIDI4Mi41NTEzMDAwNDg4MjgxIDI2IEwgMjc3LjMwMDA0ODgyODEyNSAyMC43NDg3MzkyNDI1NTM3MSBDIDI3Ni44OTk5OTM4OTY0ODQ0IDIwLjM0ODY5MDAzMjk1ODk4IDI3Ni44OTk5OTM4OTY0ODQ0IDE5LjcwMDA4ODUwMDk3NjU2IDI3Ny4zMDAwNDg4MjgxMjUgMTkuMzAwMDQxMTk4NzMwNDcgQyAyNzcuNTAwMDYxMDM1MTU2MiAxOS4xMDAwMTM3MzI5MTAxNiAyNzcuNzYyMjA3MDMxMjUgMTkuMDAwMDAzODE0Njk3MjcgMjc4LjAyNDM4MzU0NDkyMTkgMTkuMDAwMDAzODE0Njk3MjcgWiIgc3Ryb2tlPSJub25lIiBmaWxsPSIjZTRlN2VjIi8+CiAgPC9nPgo8L3N2Zz4K"></div> <div id="playlist-title">\n';e+=playlist.title,e+=' </div> <div id="playlist-info">',video.video_owner.name&&(e+="<span>"+video.video_owner.name+"</span>"),e+='<span class="middot">Â·</span>&nbsp;&nbsp;&nbsp; '+current_playlist_video+" / "+playlist.videos.length+'\n\t\t    </div></div> <div id="videos">',$.each(playlist.videos,function(t,i){e+='<div data-index="'+t+'" data-video_id="'+i.id+'" class="update-playlist-video video '+(i.id==video.id?"active":"")+'" ><div class="number">'+(t+1)+'</div> <div class="thumbnail"><div class="img" style="background-image: url('+croppa(i.thumbnail,100)+');"></div> <div class="duration">'+i.duration_formatted+'</div></div> <div class="title">\n\t\t\t   '+i.title+"\n\t\t\t    <div>"+i.description+"</div></div></div>",i.id==video.id&&(current_playlist_video=t+1)}),e+="</div></div>",$(document).find(".play-list-area").append(e),$(document).find("#show-playlist-button").text(current_playlist_video),$(document).find(".playlist-info").text(current_playlist_video)}),$(document).on("click",".update-playlist-video",function(){var e=$(this).data("video_id");if($.each(playlist.videos,function(t,i){if(i.id==e){video.player_options.password||(video.player_options.autoplay=!0,hidePlaybutton=!0),reset_video();video.timestamp;var n=video.ip,r=video.geoLocationDetail,a=video.language,s=video.allow_video;if(video=i,video.allow_video=s,video.ip=n,video.geoLocationDetail=r,video.language=a,video.allow_video=s,video&&(video.schedular=video.schedular?video.schedular:{},video.schedular.is_stream_ended=!1,video.schedular.is_running=!0),video.visual_watermarking){if(video.player_options.visual_watermark_name&&visualWatermarkContent.push("This video is licensed by: "+video.video_owner.name),"people_invited"===project_setting.permissions){var o=getCookie("BC-Invitee-Auth-Email");""!==o&&null!=o&&visualWatermarkContent.push("This video is licensed to: "+o)}""!==video.player_options.deterText&&null!==video.player_options.deterText&&void 0!==video.player_options.deterText&&""!=video.player_options.deterText&&visualWatermarkContent.push(video.player_options.deterText),video.player_options.visual_watermark_ip&&""!==video.ip&&null!==video.ip&&void 0!==video.ip&&visualWatermarkContent.push("This video is streamed to: "+video.ip),video.player_options.geo_location&&visualWatermarkContent.push("This video is streaming to "+video.geoLocationDetail+(video.player_options.visual_watermark_timestamp?" at "+video.timestamp:""))}video.drm_protection&&null==window.safari?(userStatus.inRequest=!0,canLoad=!1,$.ajax({type:"post",url:"https://encoding.bigcommand.com/api/v1.0/api.php",data:JSON.stringify({username:"precious",action:"get_drm_key",video_id:video.video_id}),dataType:"json",success:function(e){userStatus.inRequest=!1,widevine=e.result.Widevine,playready=e.result.PlayReady,canLoad=!0,checkUserStatus()},error:function(e){}})):(userStatus.inRequest=!1,canLoad=!0,checkUserStatus());var l=setInterval(function(){canLoad&&(reinitialize_player(),player.play(),clearInterval(l),$(document).find(".current_playlist_video").text(current_playlist_video+" / "+playlist.videos.length),$(document).find(".current_playlist_video").text(current_playlist_video+" / "+playlist.videos.length),$(this).parents("#playlist-wrap").remove())},10)}}),"supersonic"==playlist.theme){$(".super-sonic-sound-button ").hide(),$(".super-sonic-play-button").show();let e="#super-sonic-play-div-"+video.id,t="#super-sonic-sound-div-"+video.id;$(document).find(e).hide(),$(document).find(t).show()}if("backdrop"==playlist.theme){$(".backdrop-sound-button").hide(),$(".backdrop-play-button").show();let e="#backdrop-play-div-"+video.id,t="#backdrop-sound-div-"+video.id;$(document).find(e).hide(),$(document).find(t).show()}if($(document).find(".modern-playlist-area").remove(),playlist&&"classic"===playlist.theme){var t='<div class="play-list-area"><div id="show-playlist-button"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDBWMHoiLz4KPHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTTQgMTBoMTJ2Mkg0em0wLTRoMTJ2Mkg0em0wIDhoOHYySDR6bTEwIDB2Nmw1LTN6Ii8+PC9zdmc+Cg=="> <br>\n\t    '+current_playlist_video+" / "+playlist.videos.length+"\n\t</div></div>";$(document).find("#embedVideo .play-list-area").remove(),$(document).find("#embedVideo").append(t)}adjustVideoDimensions(video)}),$(document).on("click","#playlist-hide",function(){if($(this).parents("#playlist-wrap").remove(),playlist){var e='<div class="play-list-area"><div id="show-playlist-button"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDBWMHoiLz4KPHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTTQgMTBoMTJ2Mkg0em0wLTRoMTJ2Mkg0em0wIDhoOHYySDR6bTEwIDB2Nmw1LTN6Ii8+PC9zdmc+Cg=="> <br>\n\t    '+current_playlist_video+" / "+playlist.videos.length+"\n\t</div></div>";$(document).find("#embedVideo .play-list-area").remove(),$(document).find("#embedVideo").append(e)}}),$(document).on("click",".floatingChapterBtn",function(){if($(document).find(".vjs-chapterList, .vjs-share-menu, .vjs-custom-setting-modal").remove(),showChapters=!0,video.video_chapters.length>0&&("true"==video.player_options.chapter_control||1==video.player_options.chapter_control)){$(document).find(".vjs-chapterList").remove();var e='<div class="vjs-branding vjs-chapterList"><div class="fa-times-container"><svg class="fa-times"  height="10pt" viewBox="0 0 329.26933 329" width="10pt" xmlns="http://www.w3.org/2000/svg"><path d="m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0" fill="#fff" /></svg></div><ul class="" >';video.video_chapters.forEach((t,i)=>{e+='<li data-chapter-number="'+(i+1)+'" data-id="'+t.id+'" data-title="'+t.title+'" data-chapter="'+t.time+'" class="start-from-chapter fromBtn">\n                           '+(null!==t.title?t.title:"")+"\n                        </li>"}),e+="</ul></div>",$(document).find(".videojs-wrap .vjs-custom-skin").append(e)}$(this).addClass("hide")}),$(document).on("click",".floatingVolumnBtn",function(){show_reels=!1,show_reels||(player.src(getSource()),player.currentTime(0),clickOnProgressBar=!0,$(".video-player.video-js").removeClass("reel-running"),player.play(),player.muted(!1),$(document).find(".floatingVolumnBtn").remove())}),$(document).on("click",".dot",function(){$(".dot").removeClass("active"),$(".slide").css("display","none"),sliderforcardsstyle5_14($(this).index())}),$(document).on("click",".dotimg",function(){$(".slide").css("display","none"),sliderforcardsstyle78($(this).index())}),$(document).on("click",".skipcard",function(){clearInterval(dotid)}),$(document).on("click",".cromCastBtn",function(){player.trigger("chromecastRequested")});var current_reel=0,task;function during_interaction_show(){var e=video.player_options.interaction_during_array;if(e){var t={interaction_during_cta_expand:e.interaction_during_cta_expand,interaction_during_cta_top:e.interaction_during_cta_top,interaction_during_cta_left:e.interaction_during_cta_left,interaction_during_cta_width:e.interaction_during_cta_width,interaction_during_cta_height:e.interaction_during_cta_height};player.currentTime(video.player_options.interaction_during_start_time),e.interaction_during_type&&(document.getElementById("resumeWatchFrom").remove(),$(document).find(".videojs-wrap").removeClass("resumeVideo")),"text"==e.interaction_during_type?interaction_during_text_type(e,t):"html_code"==e.interaction_during_type?interaction_during_html_type(e,t):"image"==e.interaction_during_type?interaction_during_image_type(e,t):"capture_email"==e.interaction_during_type?interaction_during_capture_email_type(e,t):"callout_button"==e.interaction_during_type?interaction_during_callout_button_type(e,t):"cards"==e.interaction_during_type&&interaction_during_cards_type(e,t)}}function player_ready(){if(queryParams.has("editor")&&commentTimeline(),getDuration(),initializeSubtitleChangeEvent(),$(document).find(".vjs-vjsdownload").css("background-color",video.player_options.color),$(document).find(".vjs-vjsdownload").attr("style","background-color : "+video.player_options.color+"!important"),video.reels.length>0&&canAutoPlayReel&&null!==video.reel_url&&""!==video.reel_url&&"reel"===video.player_options.thumbnail_type&&player.src(video.reel_url),new playerjs.VideoJSAdapter(this).ready(),"on_hover"===video.player_options.control_visibility&&0==video.is_audio&&$(".vjs-control-bar").addClass("vjs-fade-out"),video.visual_watermarking&&0==video.is_audio){var e='<div class="visualWatermarking">';if(!0!==video.player_options.visual_watermark_name&&"true"!==video.player_options.visual_watermark_name||(e+='<div class="watermarkName">\n<span><strong>Licensed by: '+video.video_owner.name+"</strong></span>\n</div>"),"people_invited"===project_setting.permissions){var t=getCookie("BC-Invitee-Auth-Email");""!==t&&null!=t&&(e+="<div>\n<span>Licensed to: "+t+"</span>\n</div>")}!0!==video.player_options.deter_text&&"true"!==video.player_options.deter_text||""!==video.player_options.deterText&&null!==video.player_options.deterText&&void 0!==video.player_options.deterText&&(e+="<div>\n<span>Deter Text: "+video.player_options.deterText+"</span>\n</div>"),!0!==video.player_options.visual_watermark_timestamp&&"true"!==video.player_options.visual_watermark_timestamp||""!==video.timestamp&&null!==video.timestamp&&void 0!==video.timestamp&&(e+="<div>\n<span>"+video.timestamp+"</span>\n</div>"),!0!==video.player_options.visual_watermark_ip&&"true"!==video.player_options.visual_watermark_ip||""!==video.ip&&null!==video.ip&&void 0!==video.ip&&(e+="<div>\n<span>IP Address: "+video.ip+"</span>\n</div>"),!0!==video.player_options.geo_location&&"true"!==video.player_options.geo_location||""!==video.geoLocationDetail&&null!==video.geoLocationDetail&&void 0!==video.geoLocationDetail&&(e+="<div>\n<span>Geo Location: "+video.geoLocationDetail+"</span>\n</div>"),e+="</div>",$(document).find(".vjs-custom-skin").append(e)}if(!0!==video.player_options.enable_casting&&"true"!==video.player_options.enable_casting||setTimeout(function(){if(0!==$(document).find(".vjs-chromecast-button").length){var e='<div class="cromCastBtn"><img src="'+BASE_URL+'/img/cast.svg" /></div>';$(document).find(".videojs-wrap .vjs-custom-skin").append(e)}},2e3),test_browser._isMobile&&($(".vjs-icon-skip").remove(),$(".vjs-icon-rewind").remove(),$(".video-container.skip_and_rewind").addClass("is_mobile")),video.video_chapters.length>0&&("true"==video.player_options.chapter_control||1==video.player_options.chapter_control)){$(document).find(".videojs-wrap .floatingChapterBtn").remove();var i=video.player_options.color;null===video.video_owner.settings.global_player_color||"false"!=video.player_options.disable_global_color&&0!=video.player_options.disable_global_color||(i=video.video_owner.settings.global_player_color),queryParams.has("editor")&&(i=video.player_options.color,"false"!=video.player_options.disable_global_color&&0!=video.player_options.disable_global_color||(i=video.video_owner.settings.global_player_color));e=' <div class="floatingChapterBtn">\n                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="148" height="47" viewBox="0 0 148 47">\n  <defs>\n    <filter id="Rectangle_3382" x="0" y="0" width="148" height="47" filterUnits="userSpaceOnUse">\n      <feOffset dy="3" input="SourceAlpha"/>\n      <feGaussianBlur stdDeviation="3" result="blur"/>\n      <feFlood flood-opacity="0.161"/>\n      <feComposite operator="in" in2="blur"/>\n      <feComposite in="SourceGraphic"/>\n    </filter>\n  </defs>\n  <g id="Group_16893" data-name="Group 16893" transform="translate(-702.784 -159.997)">\n    <g id="Group_16892" data-name="Group 16892" transform="translate(-99.216 -62.003)">\n      <g transform="matrix(1, 0, 0, 1, 802, 222)" filter="url(#Rectangle_3382)">\n        <rect id="Rectangle_3382-2" data-name="Rectangle 3382" width="130" height="29" rx="14.5" transform="translate(9 6)" fill="'+i+'"/>\n      </g>\n      <g id="Group_16891" data-name="Group 16891" transform="translate(-2.5 -0.326)">\n        <g id="Group_16890" data-name="Group 16890" transform="translate(-601.216 -391)">\n          <g id="Group_16867" data-name="Group 16867">\n            <path id="Path_9878" data-name="Path 9878" d="M394,548a2,2,0,1,1,2-2A2,2,0,0,1,394,548Z" transform="translate(1038.216 82)" fill="#fff" fill-rule="evenodd"/>\n          </g>\n          <g id="Group_16866" data-name="Group 16866">\n            <path id="Path_9879" data-name="Path 9879" d="M394,548a2,2,0,1,1,2-2A2,2,0,0,1,394,548Z" transform="translate(1038.216 87.653)" fill="#fff" fill-rule="evenodd"/>\n          </g>\n          <g id="Group_16868" data-name="Group 16868">\n            <path id="Path_9880" data-name="Path 9880" d="M394,548a2,2,0,1,1,2-2A2,2,0,0,1,394,548Z" transform="translate(1038.216 93.653)" fill="#fff" fill-rule="evenodd"/>\n          </g>\n          <g id="Group_16889" data-name="Group 16889" transform="translate(683.432 96.25)" opacity="0.996">\n            <line id="Line_521" data-name="Line 521" x2="13" transform="translate(753.284 537.672)" fill="none" stroke="#fff" stroke-linecap="round" stroke-width="1.4"/>\n            <line id="Line_523" data-name="Line 523" x2="13" transform="translate(753.284 543.846)" fill="none" stroke="#fff" stroke-linecap="round" stroke-width="1.4"/>\n            <line id="Line_522" data-name="Line 522" x2="13" transform="translate(753.284 531.497)" fill="none" stroke="#fff" stroke-linecap="round" stroke-width="1.4"/>\n          </g>\n        </g>\n        <text id="Anti-Slip_Shoe_Grips" data-name="Anti-Slip Shoe Grips" transform="translate(928 247)" fill="#fff" font-size="12" font-family="ArialMT, Arial"><tspan x="-70.711" y="0">Chapters</tspan></text>\n      </g>\n    </g>\n  </g>\n</svg>\n\n            </div>';0==$(document).find(".vjs-chapterList").length&&$(document).find(".videojs-wrap").append(e)}if($(document).find(".vjs-big-play-button.vjs-hidden").removeClass("vjs-hidden"),queryParams.has("list")&&(add_playlist_data(),addButtons()),muteIcon||!volumeGif||"true"!=video.player_options.mute_icon&&1!=video.player_options.mute_icon)$(document).find("#unMute_div, #mute_div").remove();else{e='<div class="vjs-branding" id="unMute_div">\n                    <li class="unmute-video-player" \n                            style="cursor:pointer;display: block;"\n                            @click="muteIcon=true;$el.querySelector(\'.vjs-volume-menu-button\').click()"\n                    >';userStatus.active&&(e+='<img src="'+BASE_URL+'/embed/image/video_thumbnail_animated_volume.svg"/>'),e+="                    </li>\n                </div>",$(document).find("#unMute_div, #mute_div").remove(),$(document).find(".videojs-wrap .vjs-custom-skin").append(e)}if(1==video.is_audio?$(document).find(".videojs-wrap").addClass("audio-player"):$(document).find(".videojs-wrap").removeClass("audio-player"),""!=video.player_options.text_overlay_text&&("true"==video.player_options.text_overlay||1==video.player_options.text_overlay)||video.experiment_overlay){e='<div class="videojs-overlay videojs-text-overlay" style="font-size: 21.48px;"><span>'+(video.experiment_overlay?video.experiment_overlay:null!==video.player_options.text_overlay_text?video.player_options.text_overlay_text:"")+"</span></div>";$(document).find(".video-player .videojs-text-overlay").append(),$(document).find(".video-player").append(e)}if(!video.allow_video){var n=document.createElement("div");return n.className="restrictedVideo",n.innerHTML='<div class="warningText"><img src="'+BASE_URL+'/img/exclamation_blue.svg" height="45"> <br>The owner of this content has not<br> made it available in your location</div>',document.body.appendChild(n),document.body.removeChild(document.getElementById("embedVideo")),!1}cookie_data_exists(video.video_id)||null===getCookie(video.id+"_before_interaction")&&add_before_email_capture();if(1!=video.player_options.interaction_before_capture&&"true"!=video.player_options.interaction_before_capture||addBeforeCapture(),video.schedular.is_schedule&&scheduled_publishing(),$(document).find(".video-js .vjs-subs-caps-button button.vjs-subs-caps-button").addClass("vjs-captions-button").removeClass("vjs-subs-caps-button"),enable_branding_logo(),"password"==video.player_options.permissions&&"video"==embed_status&&!passwordSucceeded||null!=playlist_data&&"password"==playlist_data.permissions&&!passwordSucceeded&&"playlist"==embed_status||"playlist"==embed_status&&"default"==playlist_data.privacy&&"password"==project_setting.permissions&&!passwordSucceeded){e='<div data-v-3d4f3fb2="" class="wrap password-wrap-modal" style="background-image: url('+video.thumbnail+');"><div data-v-3d4f3fb2="" class="overlay"></div> <div data-v-3d4f3fb2="" class="lock-icon"><img alt="" src="'+BASE_URL+'/embed/image/password_lock_icon.svg"></div> <div data-v-3d4f3fb2="" class="passwordModal"><div data-v-3d4f3fb2="" class="inner-wrap"><div data-v-3d4f3fb2="" class="note">Enter password</div> <div data-v-3d4f3fb2="" class="el-input el-input--large el-input-group el-input-group--append">\x3c!----\x3e<input type="text" autocomplete="off" placeholder="Password" autofocus="autofocus" class="el-input__inner" name="video-password">\x3c!----\x3e\x3c!----\x3e<div class="el-input-group__append"><button data-v-3d4f3fb2="" type="button" class="el-button el-button--primary submit-video-password">\x3c!----\x3e\x3c!----\x3e<span>';null!=playlist_data&&playlist_data.password_button_text&&"password"==playlist_data.permissions?e+=playlist_data.password_button_text:video.player_options.password_button_text&&"video"==embed_status?e+=video.player_options.password_button_text:"playlist"==embed_status&&"password"!=playlist_data.permissions&&"password"==project_setting.permissions?e+=project_setting.password_button_text:e+="PLAY VIDEO",e+="</span></button></div>\x3c!----\x3e</div></div></div></div>",$(document).find(".video-container .password-wrap-modal").remove(),player.dispose(),$(document).find(".video-container").append(e)}else $(document).find(".video-container .password-wrap-modal").remove();if(!player)return!1;autoPlayOnStart(),initVtt(player),initHlsQualitySelector(player),handlePlayback(player),initPoster(player),document.getElementById("my-player").disablePictureInPicture=!0,"true"===video.player_options.subtitle_control||!0===video.player_options.subtitle_control?(showSubtitles=!0,initSubtitles(player)):"true"!==project_setting.subtitle_control&&!0!==project_setting.subtitle_control||(showSubtitles=!0,initSubtitles(player));if("on_hover"==video.player_options.control_visibility){var r=document.querySelector(".vjs-control-bar");r&&(r.style.display="inline-flex");var a,s,o=document.querySelector(".video-player");$(o).mouseout(function(){0==$(".video-container.minimized-audio-player").length&&(a="vjs-fade-out",r.classList?(r.classList.add(a),$(document).find(".vjs-chapterList").addClass("vjs-fade-out"),$(document).find(".floatingChapterBtn").addClass("vjs-fade-out")):(r.className+=" "+a,fadeOut=!0))}),$(o).mouseover(function(){a="vjs-fade-out",r.classList?(r.classList.remove(a),$(document).find(".vjs-chapterList").removeClass("vjs-fade-out"),$(document).find(".floatingChapterBtn").removeClass("vjs-fade-out")):(r.className=r.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," "),fadeOut=!1)}),$(o).mousemove(function(){clearTimeout(s),a="vjs-mousemove",r.classList?r.classList.add(a):r.className+=" "+a,s=setTimeout(function(){a="vjs-mousemove",r.classList?r.classList.remove(a):r.className=r.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ")},1e3)},function(){a="vjs-mousemove",r.classList?r.classList.remove(a):r.className=r.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ")})}else{o=document.querySelector(".video-player");$(o).mouseout(function(){fadeOut=!0}),$(o).mouseover(function(){fadeOut=!1})}$(".vjs-volume-menu-button").mouseover(function(){adiloPopupVisible=!1,settingsMenuActive=!1}),initPlayback(),video.reels.length>0&&show_reels&&queryParams.has("reelPreview")&&canAutoPlayReel&&(current_reel=0,video.reels.forEach((e,t)=>{t==current_reel&&(player.muted(!0),player.currentTime(e.start),player.play())})),publishableMediaData={id:video.video_id,title:video.title,duration:video.duration,thumbnail:video.thumbnail},publishablePlayerData={videoWidth:player.videoWidth(),videoHeight:player.videoHeight(),offsetWidth:player.el().offsetWidth,offsetHeight:player.el().offsetHeight,clientWidth:player.el().clientWidth,clientHeight:player.el().clientHeight,currentTime:player.currentTime(),playbackRate:player.playbackRate(),paused:player.paused(),muted:player.muted()},parent.postMessage({eventName:"ready",media:publishableMediaData,player:publishablePlayerData},"*"),parent.postMessage({sticy:1===video.player_options.sticky_player,pause:1===video.player_options.pause_player,status:player.paused(),media:publishableMediaData},"*"),localStorage.storageDuration&&(localStorageDuration=JSON.parse(localStorage.storageDuration),localStorageDuration.forEach((e,t)=>{e.key==video.video_id&&(resumeWatchFrom=e.value,resumeWatchFrom!=video.duration&&resume_watch_from_html())})),during_interaction_show()}function LightenDarkenColor(e,t){var i=!1;"#"==e[0]&&(e=e.slice(1),i=!0);var n=parseInt(e,16),r=(n>>16)+t;r>255?r=255:r<0&&(r=0);var a=(n>>8&255)+t;a>255?a=255:a<0&&(a=0);var s=(255&n)+t;return s>255?s=255:s<0&&(s=0),(i?"#":"")+(s|a<<8|r<<16).toString(16)}function move(e){task&&clearTimeout(task),(e=e||global.event)&&($(".vjs-control-bar").removeClass("vjs-fade-out"),task=setTimeout(mousestop,500))}function mousestop(){setTimeout(function(){$(".vjs-control-bar").addClass("vjs-fade-out")},1e3)}function audioTitleAnimation(){if($(".marquee").css("left","0%"),video.title.length>15){var e,t=0,i=100;clearInterval(e),e=setInterval(function(){(t-=.1)<=-100&&(0,t=100),(i-=.1)<=-100&&(0,i=100),$(".marquee").css("left",t+"%")},10)}}function audioTitleAnimation1(){if($(".marqueee").css("left","0%"),(null!==video.author_name&&""!==video.author_name?video.author_name:video.video_owner.name).length>15){var e,t=0,i=100;clearInterval(e),e=setInterval(function(){(t-=.1)<=-100&&(0,t=100),(i-=.1)<=-100&&(0,i=100),$(".marqueee").css("left",t+"%")},10)}}function convertHMS(e){var t=e.split(":");return 60*+t[0]*60+60*+t[1]+ +t[2]}function lighterPlayerColor(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?"rgb("+parseInt(t[1],16)+" "+parseInt(t[2],16)+" "+parseInt(t[3],16)+" / 20%)":null}$(document).on("click",".rewindVideo",function(e){var t=parseInt(player.currentTime())-10;player.currentTime(t)}),$(document).on("click",".skipVideo",function(e){var t=parseInt(player.currentTime())+10;player.currentTime(t)}),$(document).on("click",".vjs-progress-control.vjs-control, .video-player",function(e){if($(e.target).hasClass("vjs-custom-skin")||$(e.target).hasClass("vjs-poster")){const e=document.querySelector(".video-js.vjs-playing");e&&e.classList.contains("vjs-playing")?clickOnProgressBar=!1:(clickOnProgressBar=!0,player.play())}else clickOnProgressBar=!1;show_reels=!1,!show_reels&&$(document).find(".video-player.video-js.reel-running").length>0&&(player.src(getSource()),player.currentTime(0),clickOnProgressBar=!0,$(".video-player.video-js").removeClass("reel-running"),$(document).find(".floatingVolumnBtn").remove(),player.play(),player.muted(!1))}),this.fullScreenMode=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen,$(document).on("mozfullscreenchange webkitfullscreenchange fullscreenchange",function(){this.fullScreenMode=!this.fullScreenMode}),$(document).mousemove(function(e){if("on_hover"==video.player_options.control_visibility&&this.fullScreenMode)return move(e)}),$(function(){video.title.length<=15?$(document).find(".audioDetail ").removeClass("animated"):$(document).find(".audioDetail ").addClass("animated")}),$(document).on("click","#modern-playlist-hide",function(){$(this).parents(".modern-playlist-area").remove()});let videoOgUrl=video.embed_url,videoOGDescription="Watch "+video.title+" via @adilovideo";function add_before_share_gate(){if($(document).find(".before-share-gate-wrap").hide(),"true"!=video.player_options.interaction_before_share_capture&&1!=video.player_options.interaction_before_share_capture||is_schedule_running||is_stream_ended)$(document).find(".before-email-capture-wrap").show();else{var e='<div class="widget-name email-capture-wrap before-share-gate-wrap"><div class="inner-wrap">',t=!1;1!=video.player_options.interaction_before_share_capture_facebook&&"true"!=video.player_options.interaction_before_share_capture_facebook&&1!=video.player_options.interaction_before_share_capture_twitter&&"true"!=video.player_options.interaction_before_share_capture_twitter&&1!=video.player_options.interaction_before_share_capture_whatsapp&&"true"!=video.player_options.interaction_before_share_capture_whatsapp&&1!=video.player_options.interaction_before_share_capture_fb_messenger&&"true"!=video.player_options.interaction_before_share_capture_fb_messenger&&1!=video.player_options.interaction_before_share_capture_linkedin&&"true"!=video.player_options.interaction_before_share_capture_linkedin&&1!=video.player_options.interaction_before_share_capture_pinterest&&"true"!=video.player_options.interaction_before_share_capture_pinterest||(t=!0),"true"!=video.player_options.interaction_before_share_capture_allow_skip&&1!=video.player_options.interaction_before_share_capture_allow_skip||(e+='<span class="skip">skip</span> '),video.player_options.interaction_before_share_capture_custom_share_text.length>0&&t&&(e+='<h1 class="share-gate-title upper-text" style="font-size: 37px;">'+video.player_options.interaction_before_share_capture_cta_text+"</h1>"),e+=' <div class="share-social-icons-wrap">',"true"!=video.player_options.interaction_before_share_capture_facebook&&1!=video.player_options.interaction_before_share_capture_facebook||(e+='<div class="share-social-icon-flex"><div class="share-social-icon-outer">'+`<a href="https://www.facebook.com/sharer/sharer.php?kid_directed_site=0&sdk=joey&u=${videoOgUrl}&display=popup&ref=plugin&src=share_button" onclick="allowBeforeSharePlayContinue('facebook')" target="_blank">`+'<img class="share-social-icon" src="/img/social_icons/facebook-3.svg" /></a></div> </div> '),"true"!=video.player_options.interaction_before_share_capture_twitter&&1!=video.player_options.interaction_before_share_capture_twitter||(e+='<div class="share-social-icon-flex"><div class="share-social-icon-outer">'+`<a class="twitter-share-button" target="_blank" onclick="allowBeforeSharePlayContinue('x')" href="https://twitter.com/intent/tweet?url=${videoOgUrl+"  "+videoOGDescription}">`+'<img class="share-social-icon" src="/img/social_icons/twticon.png"></a></div> </div> '),"true"!=video.player_options.interaction_before_share_capture_whatsapp&&1!=video.player_options.interaction_before_share_capture_whatsapp||(e+='<div class="share-social-icon-flex"><div class="share-social-icon-outer">'+`<a href="whatsapp://send?text=${videoOgUrl+"  "+videoOGDescription}" onclick="allowBeforeSharePlayContinue('whatsapp')" data-action="share/whatsapp/share">`+'<img class="share-social-icon" src="/img/social_icons/wsappicon.png"></a></div> </div> '),"true"!=video.player_options.interaction_before_share_capture_linkedin&&1!=video.player_options.interaction_before_share_capture_linkedin||(e+='<div class="share-social-icon-flex"><div class="share-social-icon-outer">'+`<a href="https://www.linkedin.com/sharing/share-offsite/?url=${videoOgUrl+"&title="+videoOGDescription}" onclick="allowBeforeSharePlayContinue('linkedin')" target="_blank">`+'<img class="share-social-icon" src="/img/social_icons/linkedi.png"></a></div> </div> '),"true"!=video.player_options.interaction_before_share_capture_pinterest&&1!=video.player_options.interaction_before_share_capture_pinterest||(e+='<div class="share-social-icon-flex"><div class="share-social-icon-outer">'+`<a href="whatsapp://send?text=${videoOgUrl+"  "+videoOGDescription}" onclick="allowBeforeSharePlayContinue('pinterest')" target="_blank">`+'<img class="share-social-icon" src="/img/social_icons/pinterest-3.png"></a></div> </div> '),"true"!=video.player_options.interaction_before_share_capture_fb_messenger&&1!=video.player_options.interaction_before_share_capture_fb_messenger||(e+='<div class="share-social-icon-flex"><div class="share-social-icon-outer"><a href="javascript:;" class="messenger-wrap" onclick="messengerShare()"><img class="share-social-icon" src="/img/social_icons/fbmsnicon.png"></a></div> </div> '),e+=" </div>",e+="</div> ",e+="</div> ",$(document).find(".video-player .before-share-gate-wrap").remove(),player.pause(),player.exitFullscreen(),$(document).find(".video-player").append(e)}}function isMobileData(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(e=>navigator.userAgent.match(e))}function messengerShare(){url=videoOgUrl,isMobileData()?window.location.href="fb-messenger://share/?link="+url:FB.ui({method:"send",link:url,redirect_uri:url}),allowBeforeSharePlayContinue("messanger")}function allowBeforeSharePlayContinue(e=""){setTimeout(()=>{$(document).find(".before-share-gate-wrap").remove(),registerInteraction("social_share","before",player.currentTime(),{socialMedium:e})},5e3)}1!=video.player_options.interaction_before_share_capture_custom_share&&"true"!=video.player_options.interaction_before_share_capture_custom_share||(videoOgUrl=video.player_options.interaction_before_share_capture_custom_share_link?video.player_options.interaction_before_share_capture_custom_share_link:video.watch_url,videoOGDescription=video.player_options.interaction_before_share_capture_custom_share_text?video.player_options.interaction_before_share_capture_custom_share_text:"Watch "+video.title+" via @adilovideo"),window.fbAsyncInit=function(){FB.init({appId:"578439953088499",xfbml:!0,version:"v2.9"}),FB.AppEvents.logPageView()},$(document).on("click",".before-share-gate-wrap .skip",function(){player.play(),$(document).find(".before-share-gate-wrap").remove();let e={type:"social_share",phase:"before",timestamp:player.currentTime(),extra:{}};player.trigger("CTASkip",e)});let queryParams1=new URLSearchParams(window.location.search);var isDuringType="full_spread";if(queryParams1.has("editor")){var isMouseDown=!1,initX,initY,height="",width="",containment="";$(document).on("mousemove",".video-player #draggable",function(e){var t=$(this).addClass("drag").css("cursor","move");containment="tight_stretch"===isDuringType?".video-player":"",$(".video-player #draggable").draggable({containment:containment,drag:function(e,i){var n=$(this).parent().width(),r=$(this).parent().height(),a=i.position.left/n*100,s=i.position.top/r*100;"tight_stretch"===isDuringType?(t.css({top:s+"%"}),localStorage.setItem("interaction-during-left",0),localStorage.setItem("interaction-during-top",s)):"tight_wrap"===isDuringType&&(t.css({top:s+"%",left:a+"%"}),localStorage.setItem("interaction-during-top",s),localStorage.setItem("interaction-during-left",a))}})}),$(document).on("mousemove",".video-player #draggable-email-capture",function(e){"tight_wrap"===isDuringType&&queryParams.has("editor")&&$("#draggable-email-capture").resizable({resize:function(e,t){var i=$("#draggable-email-capture").parent().width(),n=$("#draggable-email-capture").parent().height(),r=t.size.width/i*100,a=t.size.height/n*100;localStorage.setItem("interaction-during-cta-width",r),localStorage.setItem("interaction-during-cta-height",a)}});var t=$(this).addClass("drag").css("cursor","move");$(".video-player #draggable-email-capture").draggable({containment:".video-player",drag:function(e,i){var n=$(this).parent().width(),r=$(this).parent().height(),a=i.position.left/n*100,s=i.position.top/r*100;"tight_stretch"===isDuringType?(t.css({left:a+"%",top:0}),localStorage.setItem("interaction-during-top",0),localStorage.setItem("interaction-during-top-editor",0),0==a?(localStorage.setItem("interaction-during-left",0),localStorage.setItem("interaction-during-left-editor",0)):localStorage.setItem("interaction-during-left",a)):"tight_wrap"===isDuringType&&(t.css({top:s+"%",left:a+"%"}),0==s?(localStorage.setItem("interaction-during-top",0),localStorage.setItem("interaction-during-top-editor",0)):localStorage.setItem("interaction-during-top",s),0==a?(localStorage.setItem("interaction-during-left",0),localStorage.setItem("interaction-during-left-editor",0)):localStorage.setItem("interaction-during-left",a)),localStorage.setItem("interaction-during-top-editor",i.position.top),localStorage.setItem("interaction-during-left-editor",i.position.left)}})}),$(document).on("mouseup",".video-player #draggable-email-capture",function(e){checkOverlapcaptureform()}),$(document).on("mouseup",".video-player #draggable",function(e){isMouseDown=!1,$("body").removeClass("no-select")}),$(document).on("mousemove",".video-player #draggable-callout-button",function(e){var t=$(this).addClass("drag").css("cursor","move");$(".video-player #draggable-callout-button").draggable({containment:".video-player",drag:function(e,i){var n=$(this).parent().width(),r=$(this).parent().height(),a=i.position.left/n*100,s=i.position.top/r*100;"tight_stretch"===isDuringType?(t.css({top:s+"%",left:0}),localStorage.setItem("interaction-during-left",0),localStorage.setItem("interaction-during-top",s)):"tight_wrap"===isDuringType&&(t.css({top:s+"%",left:a+"%"}),localStorage.setItem("interaction-during-top",s),localStorage.setItem("interaction-during-left",a))}})}),$(document).on("mousemove",".video-player #draggable-cards",function(e){"tight_wrap"===isDuringType&&queryParams.has("editor")&&$("#draggable-cards").resizable({resize:function(e,t){var i=$("#draggable-cards").parent().width(),n=$("#draggable-cards").parent().height(),r=t.size.width/i*100,a=t.size.height/n*100;localStorage.setItem("interaction-during-cta-width",r),localStorage.setItem("interaction-during-cta-height",a)}});var t=$(this).addClass("drag").css("cursor","move");$(".video-player #draggable-cards").draggable({containment:".video-player",drag:function(e,i){var n=$(this).parent().width(),r=$(this).parent().height(),a=i.position.left/n*100,s=i.position.top/r*100;if("tight_stretch"===isDuringType)t.css({left:a+"%"}),localStorage.setItem("interaction-during-top",0),localStorage.setItem("interaction-during-top-editor",0),0==a?(localStorage.setItem("interaction-during-left",0),localStorage.setItem("interaction-during-left-editor",0)):localStorage.setItem("interaction-during-left",a);else if("tight_wrap"===isDuringType){if(t.css({top:s+"%",left:a+"%"}),0==s)localStorage.setItem("interaction-during-top",0),localStorage.setItem("interaction-during-top-editor",0);else{$(this).height();localStorage.setItem("interaction-during-top",s)}if(0==a)localStorage.setItem("interaction-during-left",0),localStorage.setItem("interaction-during-left-editor",0);else{$(this).width()/n*100>94||$(this).width();localStorage.setItem("interaction-during-left",a)}}localStorage.setItem("interaction-during-top-editor",i.position.top),localStorage.setItem("interaction-during-left-editor",i.position.left)}})}),$(document).on("mouseup",".video-player #draggable-cards",function(e){checkOverlapcardsform()})}function checkOverlap(e,t){const i=e.getBoundingClientRect(),n=t.getBoundingClientRect();return!(i.right<n.left||i.left>n.right||i.bottom<n.top||i.top>n.bottom)}function checkOverlapcaptureform(){const e=checkOverlap(document.getElementById("draggable-email-capture"),document.getElementById("skip"));$(".expandopt").length||(e?($("#skip").css("visibility","hidden"),$("#expandskip").removeClass("skipforexpand")):($("#skip").css("visibility","visible"),$("#expandskip").addClass("skipforexpand"))),console.log("Overlap:",e)}function checkOverlapcardsform(){const e=checkOverlap(document.getElementById("draggable-cards"),document.getElementById("skipcards"));console.log("hyy"),$(".expandopt").length||(e?($("#skipcards").css("visibility","hidden"),$("#expandskipcards").removeClass("skipforexpand")):($("#skipcards").css("visibility","visible"),$("#expandskipcards").addClass("skipforexpand"))),console.log("Overlap:",e)}function commentTimeline(){if(comment_permission&&"1"==comment_permission){let e=100/video.duration,t=`<div class="comment-timeline"><div class="line"></div>\n        ${comments.filter(e=>e.video_time>0).map(t=>`\n            <span class="comment-profile" style="left:${t.video_time*e}%">\n                <div class="comment-show-box" id="comment-show-box-${t.id}">\n                    <div class="profile-logo">\n                        <span id="pro-img-${t.id}"></span>\n                        <span id="pro-default-${t.id}"></span>\n                    </div>\n                    <div class="comment-body">\n                        <span class="commenter-name">${t.is_guest?null!=t.guest_name?t.guest_name:"Guest":t.user?t.user.name:""}</span>\n                        <span class="comment-timestamp">${toHHMMSS(t.video_time)}</span>\n                        <div class="comment-text">\n                            <div class="comment-desc">\n                                ${null!=t.mention_creator_name&&""!=t.mention_creator_name?`<span class="mention">${"@"+t.mention_creator_name} </span>`:""}\n                                ${t.body}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                ${t.user&&t.user.photo_url?`<img class="timeline-logo timeline-img" data-id="${t.id}" src="${t.user?t.user.photo_url:""}"/>`:`<div class="timeline-logo timeline-img-default" data-id="${t.id}" style="${"background-color:"+getRandomHexColor()}">${t.is_guest?null!=t.guest_name?t.guest_name.charAt(0).toUpperCase():"G":t.user?t.user.name.charAt(0).toUpperCase():""}</div>`}\n            </span>\n        `).join("")}\n        </div>`;$(".vjs-progress-holder").append(t)}}function getRandomHexColor(){let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}function toHHMMSS(e){var t=parseInt(e,10),i=Math.floor(t/3600),n=Math.floor((t-3600*i)/60),r=t-3600*i-60*n;return i<10&&(i="0"+i),n<10&&(n="0"+n),r<10&&(r="0"+r),i+":"+n+":"+r}function billiBoardTheme(e,t,i){var n='<div class="billboard-slider-block"> <div class="slider billboard-slick-slider">';if(e){var r=e.videos;r.push(r.shift()),$.each(r,function(e,t){var i="linear-gradient(rgba(0,0,0,.5), rgba(0,0,0,.5)), url("+croppa(t.thumbnail,100)+")";n+='<div class="billboard-slider-box update-playlist-video" data-index="'+e+'" data-video_id="'+t.id+'"><img src="'+croppa(t.thumbnail,100)+'" alt="image0" class="billboard-image" style="width: 100%;background:'+i+';background-position: center;background-repeat: repeat;background-size: cover;"><div class="billboard-slider-text"><h4>Next</h4><p>'+t.title+"</p></div></div>\n"}),n+="\n\t</div>\n\t</div>",$(document).find("#embedVideo").after(n)}$(".billboard-slick-slider").slick({dots:!0,infinite:!0,slidesToShow:1,slidesToScroll:1})}function pilotTheme(e,t){if(e){if(nextVideoId=e.videos[t+1],prevVideoId=e.videos[t-1],null==prevVideoId){let t=e.videos.length-1;prevVideoId=e.videos[t]}null==nextVideoId&&(nextVideoId=e.videos[0]);var i="custom"===e.apperance?e.color:project_setting.color;$(document).find(".pilot-arrow").remove(),$(document).find("#embedVideo").append('<button class="pilot-prev pilot-arrow update-playlist-video" data-video_id='+prevVideoId.id+"></button>"),$(document).find("#embedVideo").append('<button class="pilot-next pilot-arrow update-playlist-video" data-video_id='+nextVideoId.id+"></button>"),$(document).find(".pilottheme-section .pilot-arrow").css("background",i);let r=nextVideoId.description?nextVideoId.description.slice(0,30)+"...":" ";var n='<div class="nextVideoDiv"><h3 class="pilot-current-title">'+video.title+'</h3><h2 class="pilottheme-slicknav-title" style="color:'+i+'">Next</h2><div class="next-video-main-box">\t\n<div class="next-video-block">\t\n<a class="image_button update-playlist-video" data-video_id='+nextVideoId.id+'> \t\n<img src="'+nextVideoId.thumbnail+'" alt="School Project"> \t\n<div class="time_duration"><span>'+nextVideoId.duration_formatted+'</span></div> \t\n </a><div class="next-video-content-section"> \t\n<h4 class="pilot-current-title">'+nextVideoId.title+"</h4>\t\n <p>"+r+"</p>\t\n</div></div></div></div>";$(document).find(".nextVideoDiv").remove(),$(document).find(".video-container  ").after(n),$(document).find(".next-video-main-box").append('<button class="pilot-prev pilot-arrow update-playlist-video" data-video_id='+prevVideoId.id+"></button>"),$(document).find(".next-video-main-box").append('<button class="pilot-next pilot-arrow update-playlist-video" data-video_id='+nextVideoId.id+"></button>")}}function portalTheme(e){if(e){var t='<div class="portal-main-desc-div"><h3 class="portal-video-title">'+video.title+'</h3><div class="portal-grid-section">';$.each(e.videos,function(e,i){let n=i.description?i.description.slice(0,30)+"...":" ",r=video.id==i.id?"grid-active":"";t+='<div class="portal-grid-box '+r+'"><a class="image_button update-playlist-video" data-video_id='+i.id+'><img src="'+i.thumbnail+'" alt="School Project"><div class="time_duration"><span>'+i.duration_formatted+'</span></div></a><div class="portal-video-content-section"><h4>'+i.title+"</h4><p>"+n+"</p></div></div>"}),t+="</div></div>",$(document).find(".portal-main-desc-div").remove(),$(document).find(".portal-video-title").remove(),$(document).find(".portal-grid-section").remove(),$(document).find("#embedVideo").after(t)}}function courseTheme(e,t){if(e){var i=e.videos.length,n='<div class="course-video-list-block"><div class="playlist-wrap"><div id="playlist-header"><div id="playlist-title">'+e.title+'</div><div id="playlist-info"><span id="course-video-owner">'+video.video_owner.name+'</span><span class="middot">Â·</span>&nbsp;&nbsp;&nbsp; <span id="current_video">'+t+"</span> / "+i+"</div></div>";n+='<div id="videos">',$.each(e.videos,function(e,t){let i=video.id==t.id?"active":"";n+='<div data-index="'+e+'" data-video_id="'+t.id+'" class="update-playlist-video video '+i+'"><div class="number">'+(e+1)+'</div><div class="thumbnail"><div class="img" style="background-image: url('+t.thumbnail+');"></div><div class="duration">'+t.duration_formatted+'</div> </div><div class="title">'+t.title+"</div></div>"}),n+="</div></div></div>",$(document).find(".course-video-list-block").remove(),$(document).find("#embedVideo").after(n)}}function gridTheme(e){if(e){console.log(video.video_description);var t=video.video_description?video.video_description.description:"";console.log(t);var i='<div class="outerDiv"><div class="grid-playlist-title"><p>'+e.title+"</p></div>",n='<div class="grid-desc-block"><h2 class="grid-title-h2">'+video.title+"</h2><p class='grid-playlist-desc'>"+t+"<p></div>",r='<div class="grid-grid-section">';$.each(e.videos,function(e,t){let i=t.description?t.description.slice(0,30)+"...":" ",n=t.title?t.title.slice(0,20)+"...":" ",a=video.id==t.id?"grid-active":"";r+='<div class="grid-grid-box '+a+'"><div class="image_button update-playlist-video" data-index="'+e+'" data-video_id="'+t.id+'" ><img src="'+t.thumbnail+'" alt="'+t.title+'"><div class="time_duration"><span>'+t.duration_formatted+'</span></div></div><div class="grid-video-content-section"><h4>'+n+"</h4><p>"+i+"</p></div></div>"}),r+="</div>",$(document).find(".outerDiv").remove(),$(document).find(".grid-desc-block").remove(),$(document).find(".grid-grid-section").remove(),$(document).find(".grid-video-block").after(n),$(document).find(".grid-video-section").after(r),$(document).find(".grid-video-section").before(i)}$("#gridThemeSearch").on("keyup change",function(t){var i=$("#gridThemeSearch").val();$.ajax({type:"post",url:EMBED_URL+"api/playlist/grid-theme/search",data:{search:i,playlist_id:e.id},success:function(e){var t=e.videos,i='<div class="grid-grid-section">';$.each(t,function(e,t){let n=t.description?t.description.slice(0,30)+"...":" ",r=t.title?t.title.slice(0,20)+"...":" ",a=video.id==t.id?"grid-active":"";i+='<div class="grid-grid-box '+a+'"><div class="image_button update-playlist-video" data-index="'+e+'" data-video_id="'+t.id+'" ><img src="'+t.thumbnail+'" alt="'+t.title+'"><div class="time_duration"><span>'+t.duration_formatted+'</span></div></div><div class="grid-video-content-section"><h4>'+r+"</h4><p>"+n+"</p></div></div>"}),$(document).find(".grid-grid-section").remove(),$(document).find(".grid-video-section").after(i)},error:function(e){}})})}function lakeTheme(e){if(e){var t='<div class="lake-playlist-title"><p>'+e.title+"</p></div>",i='<div class="lake-grid-section">';$.each(e.videos,function(e,t){let n=video.id==t.id?"active":"",r=t.description?t.description.slice(0,30)+"...":" ";i+='<div class="lake-grid-box update-playlist-video '+n+'" data-index="'+e+'" data-video_id="'+t.id+'" ><img class="image left" src="'+t.thumbnail+'" alt="Image"><div class="time_duration"><span>'+t.duration_formatted+'</span></div><div class="lake-video-content-section"><h4>'+t.title+"</h4><p>"+r+"</p></div></div>"}),i+="</div>",$(document).find(".lake-playlist-title").remove(),$(document).find(".lake-grid-section").remove(),$(document).find(".video-container  ").before(t),$(document).find(".video-container  ").after(i)}}function modernAudioTheme(e,t){if(e){$(document).find(".video-container").addClass("modern-audio-player");var i='<div class="modern-audio-detail-section"><div class="modern-audio-menubar"><div class="strip burger-strip"><div></div><div></div><div></div></div></div><div class="modern-audio-data-section"><div class="modern-audio-thumbnail" style="background-image: url('+video.thumbnail+');"></div><div class="modern-audio-detail"><span class="audio-title">'+video.title+'</span><br/><br/><span class="audio-owner-name">'+video.video_owner.name+"</span></div></div></div>";$(document).find(".modern-audio-detail-section").remove(),$(document).find(".modern-audio-player").before(i)}$(".modern-audio-menubar").on("click",function(){var i=e.videos.length;$(document).find(".modern-playlist-area").remove();var n='<div class="modern-playlist-area"><div class="modern-playlist-wrap"><div id="playlist-header">';n+='<div id="modern-playlist-hide"><img src="data:image/svg+xml;base64,PHN2ZyBpZD0iQ2xvc2VfcG9wX3VwIiBkYXRhLW5hbWU9IkNsb3NlIHBvcCB1cCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCI+CiAgPGcgaWQ9IkNvbWJpbmVkLVNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc3IC0xOSkiIGZpbGw9IiMyMTQ1NWUiPgogICAgPHBhdGggZD0iTSAyODkuOTc1NjE2NDU1MDc4MSAzMi45MDAwMDE1MjU4Nzg5MSBDIDI4OS43Mjg2OTg3MzA0Njg4IDMyLjkwMDAwMTUyNTg3ODkxIDI4OS40OTY1NTE1MTM2NzE5IDMyLjgwMzg0MDYzNzIwNzAzIDI4OS4zMjE5NjA0NDkyMTg4IDMyLjYyOTI0OTU3Mjc1MzkxIEwgMjg0LjA3MDcwOTIyODUxNTYgMjcuMzc4MDAwMjU5Mzk5NDEgTCAyODQgMjcuMzA3Mjg5MTIzNTM1MTYgTCAyODMuOTI5MjkwNzcxNDg0NCAyNy4zNzgwMDAyNTkzOTk0MSBMIDI3OC42NzgwMzk1NTA3ODEyIDMyLjYyOTI0OTU3Mjc1MzkxIEMgMjc4LjUwMzQ0ODQ4NjMyODEgMzIuODAzODQwNjM3MjA3MDMgMjc4LjI3MTMwMTI2OTUzMTIgMzIuOTAwMDAxNTI1ODc4OTEgMjc4LjAyNDM4MzU0NDkyMTkgMzIuOTAwMDAxNTI1ODc4OTEgQyAyNzcuNzc3NDY1ODIwMzEyNSAzMi45MDAwMDE1MjU4Nzg5MSAyNzcuNTQ1MzQ5MTIxMDkzOCAzMi44MDM4NDA2MzcyMDcwMyAyNzcuMzcwNzU4MDU2NjQwNiAzMi42MjkyNDk1NzI3NTM5MSBDIDI3Ny4xOTYxNjY5OTIxODc1IDMyLjQ1NDY1ODUwODMwMDc4IDI3Ny4xMDAwMDYxMDM1MTU2IDMyLjIyMjUzMDM2NDk5MDIzIDI3Ny4xMDAwMDYxMDM1MTU2IDMxLjk3NTYxMDczMzAzMjIzIEMgMjc3LjEwMDAwNjEwMzUxNTYgMzEuNzI4NzAwNjM3ODE3MzggMjc3LjE5NjE2Njk5MjE4NzUgMzEuNDk2NTcwNTg3MTU4MiAyNzcuMzcwNzU4MDU2NjQwNiAzMS4zMjE5Njk5ODU5NjE5MSBMIDI4Mi42MjIwMDkyNzczNDM4IDI2LjA3MDcwOTIyODUxNTYyIEwgMjgyLjY5MjcxODUwNTg1OTQgMjYgTCAyODIuNjIyMDA5Mjc3MzQzOCAyNS45MjkyOTA3NzE0ODQzOCBMIDI3Ny4zNzA3NTgwNTY2NDA2IDIwLjY3ODAzMDAxNDAzODA5IEMgMjc3LjE5NjE2Njk5MjE4NzUgMjAuNTAzNDI5NDEyODQxOCAyNzcuMTAwMDA2MTAzNTE1NiAyMC4yNzEyOTkzNjIxODI2MiAyNzcuMTAwMDA2MTAzNTE1NiAyMC4wMjQzODkyNjY5Njc3NyBDIDI3Ny4xMDAwMDYxMDM1MTU2IDE5Ljc3NzQ3OTE3MTc1MjkzIDI3Ny4xOTYxNjY5OTIxODc1IDE5LjU0NTM0OTEyMTA5Mzc1IDI3Ny4zNzA3NTgwNTY2NDA2IDE5LjM3MDc1MDQyNzI0NjA5IEMgMjc3LjU0NTM0OTEyMTA5MzggMTkuMTk2MTU5MzYyNzkyOTcgMjc3Ljc3NzQ2NTgyMDMxMjUgMTkuMTAwMDAwMzgxNDY5NzMgMjc4LjAyNDM4MzU0NDkyMTkgMTkuMTAwMDAwMzgxNDY5NzMgQyAyNzguMjcxMzAxMjY5NTMxMiAxOS4xMDAwMDAzODE0Njk3MyAyNzguNTAzNDQ4NDg2MzI4MSAxOS4xOTYxNTkzNjI3OTI5NyAyNzguNjc4MDM5NTUwNzgxMiAxOS4zNzA3NTA0MjcyNDYwOSBMIDI4My45MjkyOTA3NzE0ODQ0IDI0LjYyMTk5OTc0MDYwMDU5IEwgMjg0IDI0LjY5MjcxMDg3NjQ2NDg0IEwgMjg0LjA3MDcwOTIyODUxNTYgMjQuNjIxOTk5NzQwNjAwNTkgTCAyODkuMzIxOTYwNDQ5MjE4OCAxOS4zNzA3NTA0MjcyNDYwOSBDIDI4OS40OTY1NTE1MTM2NzE5IDE5LjE5NjE1OTM2Mjc5Mjk3IDI4OS43Mjg2OTg3MzA0Njg4IDE5LjEwMDAwMDM4MTQ2OTczIDI4OS45NzU2MTY0NTUwNzgxIDE5LjEwMDAwMDM4MTQ2OTczIEMgMjkwLjIyMjUzNDE3OTY4NzUgMTkuMTAwMDAwMzgxNDY5NzMgMjkwLjQ1NDY1MDg3ODkwNjIgMTkuMTk2MTU5MzYyNzkyOTcgMjkwLjYyOTI0MTk0MzM1OTQgMTkuMzcwNzUwNDI3MjQ2MDkgQyAyOTAuODAzODMzMDA3ODEyNSAxOS41NDUzNDkxMjEwOTM3NSAyOTAuODk5OTkzODk2NDg0NCAxOS43Nzc0NzkxNzE3NTI5MyAyOTAuODk5OTkzODk2NDg0NCAyMC4wMjQzODkyNjY5Njc3NyBDIDI5MC44OTk5OTM4OTY0ODQ0IDIwLjI3MTI5OTM2MjE4MjYyIDI5MC44MDM4MzMwMDc4MTI1IDIwLjUwMzQyOTQxMjg0MTggMjkwLjYyOTI0MTk0MzM1OTQgMjAuNjc4MDMwMDE0MDM4MDkgTCAyODUuMzc3OTkwNzIyNjU2MiAyNS45MjkyOTA3NzE0ODQzOCBMIDI4NS4zMDcyODE0OTQxNDA2IDI2IEwgMjg1LjM3Nzk5MDcyMjY1NjIgMjYuMDcwNzA5MjI4NTE1NjIgTCAyOTAuNjI5MjQxOTQzMzU5NCAzMS4zMjE5Njk5ODU5NjE5MSBDIDI5MC44MDM4MzMwMDc4MTI1IDMxLjQ5NjU3MDU4NzE1ODIgMjkwLjg5OTk5Mzg5NjQ4NDQgMzEuNzI4NzAwNjM3ODE3MzggMjkwLjg5OTk5Mzg5NjQ4NDQgMzEuOTc1NjEwNzMzMDMyMjMgQyAyOTAuODk5OTkzODk2NDg0NCAzMi4yMjI1MzAzNjQ5OTAyMyAyOTAuODAzODMzMDA3ODEyNSAzMi40NTQ2NTg1MDgzMDA3OCAyOTAuNjI5MjQxOTQzMzU5NCAzMi42MjkyNDk1NzI3NTM5MSBDIDI5MC40NTQ2NTA4Nzg5MDYyIDMyLjgwMzg0MDYzNzIwNzAzIDI5MC4yMjI1MzQxNzk2ODc1IDMyLjkwMDAwMTUyNTg3ODkxIDI4OS45NzU2MTY0NTUwNzgxIDMyLjkwMDAwMTUyNTg3ODkxIFoiIHN0cm9rZT0ibm9uZSIvPgogICAgPHBhdGggZD0iTSAyNzguMDI0MzgzNTQ0OTIxOSAxOS4yMDAwMDA3NjI5Mzk0NSBDIDI3Ny44MDQxNjg3MDExNzE5IDE5LjIwMDAwMDc2MjkzOTQ1IDI3Ny41OTcxNjc5Njg3NSAxOS4yODU3NTEzNDI3NzM0NCAyNzcuNDQxNDY3Mjg1MTU2MiAxOS40NDE0NTk2NTU3NjE3MiBDIDI3Ny4yODU3NjY2MDE1NjI1IDE5LjU5NzE3MTc4MzQ0NzI3IDI3Ny4yMDAwMTIyMDcwMzEyIDE5LjgwNDE5MTU4OTM1NTQ3IDI3Ny4yMDAwMTIyMDcwMzEyIDIwLjAyNDM4OTI2Njk2Nzc3IEMgMjc3LjIwMDAxMjIwNzAzMTIgMjAuMjQ0NTkwNzU5Mjc3MzQgMjc3LjI4NTc2NjYwMTU2MjUgMjAuNDUxNjEwNTY1MTg1NTUgMjc3LjQ0MTQ2NzI4NTE1NjIgMjAuNjA3MzIwNzg1NTIyNDYgTCAyODIuNjkyNzE4NTA1ODU5NCAyNS44NTg1Nzk2MzU2MjAxMiBMIDI4Mi44MzQxMzY5NjI4OTA2IDI2IEwgMjgyLjY5MjcxODUwNTg1OTQgMjYuMTQxNDIwMzY0Mzc5ODggTCAyNzcuNDQxNDY3Mjg1MTU2MiAzMS4zOTI2NzkyMTQ0Nzc1NCBDIDI3Ny4yODU3NjY2MDE1NjI1IDMxLjU0ODM4OTQzNDgxNDQ1IDI3Ny4yMDAwMTIyMDcwMzEyIDMxLjc1NTQwOTI0MDcyMjY2IDI3Ny4yMDAwMTIyMDcwMzEyIDMxLjk3NTYxMDczMzAzMjIzIEMgMjc3LjIwMDAxMjIwNzAzMTIgMzIuMTk1ODA4NDEwNjQ0NTMgMjc3LjI4NTc2NjYwMTU2MjUgMzIuNDAyODMyMDMxMjUgMjc3LjQ0MTQ2NzI4NTE1NjIgMzIuNTU4NTQwMzQ0MjM4MjggQyAyNzcuNTk3MTY3OTY4NzUgMzIuNzE0MjQ4NjU3MjI2NTYgMjc3LjgwNDE5OTIxODc1IDMyLjc5OTk5OTIzNzA2MDU1IDI3OC4wMjQzODM1NDQ5MjE5IDMyLjc5OTk5OTIzNzA2MDU1IEMgMjc4LjI0NDU2Nzg3MTA5MzggMzIuNzk5OTk5MjM3MDYwNTUgMjc4LjQ1MTU5OTEyMTA5MzggMzIuNzE0MjQ4NjU3MjI2NTYgMjc4LjYwNzMzMDMyMjI2NTYgMzIuNTU4NTQwMzQ0MjM4MjggTCAyODMuODU4NTgxNTQyOTY4OCAyNy4zMDcyODkxMjM1MzUxNiBMIDI4NCAyNy4xNjU4NzA2NjY1MDM5MSBMIDI4NC4xNDE0MTg0NTcwMzEyIDI3LjMwNzI4OTEyMzUzNTE2IEwgMjg5LjM5MjY2OTY3NzczNDQgMzIuNTU4NTQwMzQ0MjM4MjggQyAyODkuNTQ4NDAwODc4OTA2MiAzMi43MTQyNDg2NTcyMjY1NiAyODkuNzU1NDAxNjExMzI4MSAzMi43OTk5OTkyMzcwNjA1NSAyODkuOTc1NjE2NDU1MDc4MSAzMi43OTk5OTkyMzcwNjA1NSBDIDI5MC4xOTU4MDA3ODEyNSAzMi43OTk5OTkyMzcwNjA1NSAyOTAuNDAyODMyMDMxMjUgMzIuNzE0MjQ4NjU3MjI2NTYgMjkwLjU1ODUzMjcxNDg0MzggMzIuNTU4NTQwMzQ0MjM4MjggQyAyOTAuNzE0MjMzMzk4NDM3NSAzMi40MDI4MzIwMzEyNSAyOTAuNzk5OTg3NzkyOTY4OCAzMi4xOTU4MDg0MTA2NDQ1MyAyOTAuNzk5OTg3NzkyOTY4OCAzMS45NzU2MTA3MzMwMzIyMyBDIDI5MC43OTk5ODc3OTI5Njg4IDMxLjc1NTQwOTI0MDcyMjY2IDI5MC43MTQyMzMzOTg0Mzc1IDMxLjU0ODM4OTQzNDgxNDQ1IDI5MC41NTg1MzI3MTQ4NDM4IDMxLjM5MjY3OTIxNDQ3NzU0IEwgMjg1LjMwNzI4MTQ5NDE0MDYgMjYuMTQxNDIwMzY0Mzc5ODggTCAyODUuMTY1ODYzMDM3MTA5NCAyNiBMIDI4NS4zMDcyODE0OTQxNDA2IDI1Ljg1ODU3OTYzNTYyMDEyIEwgMjkwLjU1ODUzMjcxNDg0MzggMjAuNjA3MzIwNzg1NTIyNDYgQyAyOTAuNzE0MjMzMzk4NDM3NSAyMC40NTE2MTA1NjUxODU1NSAyOTAuNzk5OTg3NzkyOTY4OCAyMC4yNDQ1OTA3NTkyNzczNCAyOTAuNzk5OTg3NzkyOTY4OCAyMC4wMjQzODkyNjY5Njc3NyBDIDI5MC43OTk5ODc3OTI5Njg4IDE5LjgwNDE5MTU4OTM1NTQ3IDI5MC43MTQyMzMzOTg0Mzc1IDE5LjU5NzE3MTc4MzQ0NzI3IDI5MC41NTg1MzI3MTQ4NDM4IDE5LjQ0MTQ0ODIxMTY2OTkyIEMgMjkwLjQwMjgzMjAzMTI1IDE5LjI4NTc1MTM0Mjc3MzQ0IDI5MC4xOTU4MzEyOTg4MjgxIDE5LjIwMDAwMDc2MjkzOTQ1IDI4OS45NzU2MTY0NTUwNzgxIDE5LjIwMDAwMDc2MjkzOTQ1IEMgMjg5Ljc1NTQwMTYxMTMyODEgMTkuMjAwMDAwNzYyOTM5NDUgMjg5LjU0ODM3MDM2MTMyODEgMTkuMjg1NzUxMzQyNzczNDQgMjg5LjM5MjY2OTY3NzczNDQgMTkuNDQxNDU5NjU1NzYxNzIgTCAyODQuMTQxNDE4NDU3MDMxMiAyNC42OTI3MTA4NzY0NjQ4NCBMIDI4NCAyNC44MzQxMjkzMzM0OTYwOSBMIDI4My44NTg1ODE1NDI5Njg4IDI0LjY5MjcxMDg3NjQ2NDg0IEwgMjc4LjYwNzMzMDMyMjI2NTYgMTkuNDQxNDU5NjU1NzYxNzIgQyAyNzguNDUxNjI5NjM4NjcxOSAxOS4yODU3NTEzNDI3NzM0NCAyNzguMjQ0NTk4Mzg4NjcxOSAxOS4yMDAwMDA3NjI5Mzk0NSAyNzguMDI0MzgzNTQ0OTIxOSAxOS4yMDAwMDA3NjI5Mzk0NSBNIDI3OC4wMjQzODM1NDQ5MjE5IDE5LjAwMDAwMzgxNDY5NzI3IEMgMjc4LjI4NjU2MDA1ODU5MzggMTkuMDAwMDAzODE0Njk3MjcgMjc4LjU0ODcwNjA1NDY4NzUgMTkuMTAwMDEzNzMyOTEwMTYgMjc4Ljc0ODc0ODc3OTI5NjkgMTkuMzAwMDQxMTk4NzMwNDcgTCAyODQgMjQuNTUxMjkwNTEyMDg0OTYgTCAyODkuMjUxMjUxMjIwNzAzMSAxOS4zMDAwNDExOTg3MzA0NyBDIDI4OS40NTEyOTM5NDUzMTI1IDE5LjEwMDAxMzczMjkxMDE2IDI4OS43MTM0Mzk5NDE0MDYyIDE5LjAwMDAwMzgxNDY5NzI3IDI4OS45NzU2MTY0NTUwNzgxIDE5LjAwMDAwMzgxNDY5NzI3IEMgMjkwLjIzNzc5Mjk2ODc1IDE5LjAwMDAwMzgxNDY5NzI3IDI5MC40OTk5Mzg5NjQ4NDM4IDE5LjEwMDAxMzczMjkxMDE2IDI5MC42OTk5NTExNzE4NzUgMTkuMzAwMDQxMTk4NzMwNDcgQyAyOTEuMTAwMDA2MTAzNTE1NiAxOS43MDAwODg1MDA5NzY1NiAyOTEuMTAwMDA2MTAzNTE1NiAyMC4zNDg2OTAwMzI5NTg5OCAyOTAuNjk5OTUxMTcxODc1IDIwLjc0ODczOTI0MjU1MzcxIEwgMjg1LjQ0ODY5OTk1MTE3MTkgMjYgTCAyOTAuNjk5OTUxMTcxODc1IDMxLjI1MTI2MDc1NzQ0NjI5IEMgMjkxLjEwMDAwNjEwMzUxNTYgMzEuNjUxMzA5OTY3MDQxMDIgMjkxLjEwMDAwNjEwMzUxNTYgMzIuMjk5OTE5MTI4NDE3OTcgMjkwLjY5OTk1MTE3MTg3NSAzMi42OTk5NTg4MDEyNjk1MyBDIDI5MC40OTk5Mzg5NjQ4NDM4IDMyLjg5OTk4NjI2NzA4OTg0IDI5MC4yMzc3OTI5Njg3NSAzMyAyODkuOTc1NjE2NDU1MDc4MSAzMyBDIDI4OS43MTM0Mzk5NDE0MDYyIDMzIDI4OS40NTEyOTM5NDUzMTI1IDMyLjg5OTk4NjI2NzA4OTg0IDI4OS4yNTEyNTEyMjA3MDMxIDMyLjY5OTk1ODgwMTI2OTUzIEwgMjg0IDI3LjQ0ODcwOTQ4NzkxNTA0IEwgMjc4Ljc0ODc0ODc3OTI5NjkgMzIuNjk5OTU4ODAxMjY5NTMgQyAyNzguNTQ4NzA2MDU0Njg3NSAzMi44OTk5ODYyNjcwODk4NCAyNzguMjg2NTYwMDU4NTkzOCAzMyAyNzguMDI0MzgzNTQ0OTIxOSAzMyBDIDI3Ny43NjIyMDcwMzEyNSAzMyAyNzcuNTAwMDYxMDM1MTU2MiAzMi44OTk5ODYyNjcwODk4NCAyNzcuMzAwMDQ4ODI4MTI1IDMyLjY5OTk1ODgwMTI2OTUzIEMgMjc2Ljg5OTk5Mzg5NjQ4NDQgMzIuMjk5OTE5MTI4NDE3OTcgMjc2Ljg5OTk5Mzg5NjQ4NDQgMzEuNjUxMzA5OTY3MDQxMDIgMjc3LjMwMDA0ODgyODEyNSAzMS4yNTEyNjA3NTc0NDYyOSBMIDI4Mi41NTEzMDAwNDg4MjgxIDI2IEwgMjc3LjMwMDA0ODgyODEyNSAyMC43NDg3MzkyNDI1NTM3MSBDIDI3Ni44OTk5OTM4OTY0ODQ0IDIwLjM0ODY5MDAzMjk1ODk4IDI3Ni44OTk5OTM4OTY0ODQ0IDE5LjcwMDA4ODUwMDk3NjU2IDI3Ny4zMDAwNDg4MjgxMjUgMTkuMzAwMDQxMTk4NzMwNDcgQyAyNzcuNTAwMDYxMDM1MTU2MiAxOS4xMDAwMTM3MzI5MTAxNiAyNzcuNzYyMjA3MDMxMjUgMTkuMDAwMDAzODE0Njk3MjcgMjc4LjAyNDM4MzU0NDkyMTkgMTkuMDAwMDAzODE0Njk3MjcgWiIgc3Ryb2tlPSJub25lIiBmaWxsPSIjZTRlN2VjIi8+CiAgPC9nPgo8L3N2Zz4K"></div><div id="playlist-title">'+e.title+'</div><div id="playlist-info"><span id="modern-video-owner">'+video.video_owner.name+'</span><span class="middot">Â·</span>&nbsp;&nbsp;&nbsp;<span id="current_video">'+t+"</span> / "+i+"</div></div></div></div>",$(document).find(".video-container").after(n);var r='<div id="videos">';$.each(e.videos,function(e,t){let i=video.id==t.id?"active":"";r+='<div data-index="'+e+'" data-video_id="'+t.id+'" class="update-playlist-video video '+i+'"><div class="number">'+(e+1)+'</div><div class="thumbnail"><div class="img" style="background-image: url('+t.thumbnail+');"></div><div class="duration">'+t.duration_formatted+'</div> </div><div class="title">'+t.title+"</div></div>"}),r+="</div></div></div>",$(document).find("#playlist-header").after(r)})}function backdropTheme(e){if(e){$(document).find(".video-container").addClass("backdrop-audio-player"),$(document).find(".backdrop-audio-player-section").css("background-image","url("+video.thumbnail+")");var t='<div class="backdrop-header-block"><div class="back-drop-playlist-title">'+e.title+'</div><div class="backdrop-audio-menubar"><svg id="backdrop-list" xmlns="http://www.w3.org/2000/svg" width="26.361" height="26.373" viewBox="0 0 26.361 26.373"><g id="Group_14820" data-name="Group 14820" transform="translate(0 0.7)"><line id="Line_515" data-name="Line 515" x2="26.361" fill="none" stroke="#fff" stroke-width="1.4"/><line id="Line_516" data-name="Line 516" x2="26.361" transform="translate(0 8.324)" fill="none" stroke="#fff" stroke-width="1.4"/><line id="Line_517" data-name="Line 517" x2="13.874" transform="translate(0 16.649)" fill="none" stroke="#fff" stroke-width="1.4"/><line id="Line_518" data-name="Line 518" x2="13.874" transform="translate(0 24.973)" fill="none" stroke="#fff" stroke-width="1.4"/></g></svg><svg id="backdrop-cancel" xmlns="http://www.w3.org/2000/svg" width="30" height="31" viewBox="0 0 43 44"><g id="Group_14965" data-name="Group 14965" transform="translate(-836 -186)"><rect id="Rectangle_16889" data-name="Rectangle 16889" width="43" height="44" rx="5" transform="translate(836 186)" fill="#011a22" opacity="0.62"/><g id="Group_14820" data-name="Group 14820" transform="translate(844.516 195.513)"><line id="Line_515" data-name="Line 515" x2="26.361" fill="none" stroke="#fff" stroke-width="1.4"/><line id="Line_516" data-name="Line 516" x2="26.361" transform="translate(0 8.324)" fill="none" stroke="#fff" stroke-width="1.4"/><line id="Line_517" data-name="Line 517" x2="13.874" transform="translate(0 16.649)" fill="none" stroke="#fff" stroke-width="1.4"/><line id="Line_518" data-name="Line 518" x2="13.874" transform="translate(0 24.973)" fill="none" stroke="#fff" stroke-width="1.4"/></g></g></svg></div></div><div class="backdrop-audio-detail"><span class="audio-title">'+video.title+'</span><br/><br/><span class="audio-owner-name">'+video.video_owner.name+"</span></div>";$(document).find(".backdrop-header-block").remove(),$(document).find(".backdrop-audio-detail").remove(),$(document).find("#embedVideo").append(t);var i="custom"===e.apperance?e.color:project_setting.color;$(".backdrop-playlist-area").length?($("#backdrop-cancel").show(),$("#backdrop-list").hide()):($("#backdrop-list").show(),$("#backdrop-cancel").hide(),$(".backdrop-playlist-area").remove()),$("#backdrop-list").on("click",function(){var t='<div class="backdrop-playlist-area"><div class="backdrop-playlist-wrap">';if(t+='<div id="videos">',$.each(e.videos,function(e,n){let r=video.id==n.id?"active":"";t+='<div data-index="'+e+'" data-video_id="'+n.id+'" class="update-playlist-video video '+r+'"><div class="thumbnail"><div class="img" style="background-image: url('+n.thumbnail+');"></div> </div><div class="title">'+n.title+' <br><span class="autor_name">'+n.video_owner.name+'</span></div><div class="backdrop-play-button backdrop-buttons" id="backdrop-play-div-'+n.id+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><g data-name="Play Button"><path fill="'+i+'" d="m22.58 13.41-11.06-6.5A3 3 0 0 0 7 9.5v13a3 3 0 0 0 1.51 2.61 3.08 3.08 0 0 0 1.49.4 3 3 0 0 0 1.52-.42l11.06-6.5a3 3 0 0 0 0-5.18Z"/><path fill="'+i+'" d="M7 16v6.5a3 3 0 0 0 1.51 2.61 3.08 3.08 0 0 0 1.49.4 3 3 0 0 0 1.52-.42l11.06-6.5A3 3 0 0 0 24.06 16Z"/></g></svg></div><div class="backdrop-sound-button backdrop-buttons" id="backdrop-sound-div-'+n.id+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path fill="'+i+'" d="M2 10a1 1 0 0 0-1 1v10a1 1 0 0 0 2 0V11a1 1 0 0 0-1-1zm4-5a1 1 0 0 0-1 1v20a1 1 0 0 0 2 0V6a1 1 0 0 0-1-1zm12 5a1 1 0 0 0-1 1v10a1 1 0 0 0 2 0V11a1 1 0 0 0-1-1zm-4-5a1 1 0 0 0-1 1v20a1 1 0 0 0 2 0V6a1 1 0 0 0-1-1zm-4-4a1 1 0 0 0-1 1v28a1 1 0 0 0 2 0V2a1 1 0 0 0-1-1zm20 9a1 1 0 0 0-1 1v10a1 1 0 0 0 2 0V11a1 1 0 0 0-1-1zm-4-5a1 1 0 0 0-1 1v20a1 1 0 0 0 2 0V6a1 1 0 0 0-1-1zm-4-4a1 1 0 0 0-1 1v28a1 1 0 0 0 2 0V2a1 1 0 0 0-1-1z"/></svg></div></div>'}),t+="</div></div></div>",$(document).find(".backdrop-playlist-area").remove(),$(document).find("#embedVideo").after(t),$("#backdrop-cancel").show(),$("#backdrop-list").hide(),"play"===player_status){let e="#backdrop-play-div-"+video.id,t="#backdrop-sound-div-"+video.id;$(".backdrop-sound-button").hide(),$(e).hide(),$(t).show()}}),$("#backdrop-cancel").on("click",function(){$("#backdrop-list").show(),$("#backdrop-cancel").hide(),$(document).find(".backdrop-playlist-area").remove()})}}function superSonicTheme(e){if(e){var t=e.videos.length,i=0;$.each(e.videos,function(e,t){i+=t.duration});var n=timeConvert(i);$(document).find(".video-container").addClass("super-sonic-audio-player"),$(document).find(".super-sonic-audio-player-section").css("background-image","url("+video.thumbnail+")");var r='<div class="super-sonic-audio-detail"><span class="audio-title">'+video.title+'</span><br><br><span class="super-sonic-playlist-count"> '+t+" Contents </span> &nbsp;&nbsp;&nbsp;&nbsp;<span>Playtime: "+n+"</span></div>";$(document).find(".super-sonic-header-block").remove(),$(document).find(".super-sonic-audio-detail").remove(),$(document).find(".super-sonic-audio-player").before('<div class="super-sonic-header-block"><div class="super-sonic-audio-menubar"><svg id="super-sonic-list" xmlns="http://www.w3.org/2000/svg" width="26.361" height="26.373" viewBox="0 0 26.361 26.373"><g id="Group_14820" data-name="Group 14820" transform="translate(0 0.7)"><line id="Line_515" data-name="Line 515" x2="26.361" fill="none" stroke="#fff" stroke-width="1.4"/><line id="Line_516" data-name="Line 516" x2="26.361" transform="translate(0 8.324)" fill="none" stroke="#fff" stroke-width="1.4"/><line id="Line_517" data-name="Line 517" x2="13.874" transform="translate(0 16.649)" fill="none" stroke="#fff" stroke-width="1.4"/><line id="Line_518" data-name="Line 518" x2="13.874" transform="translate(0 24.973)" fill="none" stroke="#fff" stroke-width="1.4"/></g></svg><svg id="super-sonic-cancel" xmlns="http://www.w3.org/2000/svg" width="30" height="31" viewBox="0 0 43 44"><g id="Group_14965" data-name="Group 14965" transform="translate(-836 -186)"><rect id="Rectangle_16889" data-name="Rectangle 16889" width="43" height="44" rx="5" transform="translate(836 186)" fill="#011a22" opacity="0.62"/><g id="Group_14820" data-name="Group 14820" transform="translate(844.516 195.513)"><line id="Line_515" data-name="Line 515" x2="26.361" fill="none" stroke="#fff" stroke-width="1.4"/><line id="Line_516" data-name="Line 516" x2="26.361" transform="translate(0 8.324)" fill="none" stroke="#fff" stroke-width="1.4"/><line id="Line_517" data-name="Line 517" x2="13.874" transform="translate(0 16.649)" fill="none" stroke="#fff" stroke-width="1.4"/><line id="Line_518" data-name="Line 518" x2="13.874" transform="translate(0 24.973)" fill="none" stroke="#fff" stroke-width="1.4"/></g></g></svg></div></div>'),$(document).find(".audio-player").before(r);var a="custom"===e.apperance?e.color:project_setting.color;$(".super-sonic-playlist-area").length?($("#super-sonic-cancel").show(),$("#super-sonic-list").hide()):($("#super-sonic-list").show(),$("#buper-sonic-cancel").hide(),$(".super-sonic-list-playlist-area").remove()),$("#super-sonic-list").on("click",function(){console.log(a);var t='<div class="super-sonic-playlist-area"><div class="super-sonic-playlist-wrap">';if(t+='<div id="videos">',$.each(e.videos,function(e,i){let n=video.id==i.id?"active":"";t+='<div data-index="'+e+'" data-video_id="'+i.id+'" class="update-playlist-video video '+n+'"><div class="thumbnail"><div class="img" style="background-image: url('+i.thumbnail+');"></div> </div><div class="title">'+i.title+' <br><span class="autor_name">'+i.video_owner.name+'</span></div><div class="super-sonic-play-button super-sonic-buttons" id="super-sonic-play-div-'+i.id+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><g data-name="Play Button"><path fill="'+a+'" d="m22.58 13.41-11.06-6.5A3 3 0 0 0 7 9.5v13a3 3 0 0 0 1.51 2.61 3.08 3.08 0 0 0 1.49.4 3 3 0 0 0 1.52-.42l11.06-6.5a3 3 0 0 0 0-5.18Z"/><path fill="'+a+'" d="M7 16v6.5a3 3 0 0 0 1.51 2.61 3.08 3.08 0 0 0 1.49.4 3 3 0 0 0 1.52-.42l11.06-6.5A3 3 0 0 0 24.06 16Z"/></g></svg></div><div class="super-sonic-sound-button super-sonic-buttons" id="super-sonic-sound-div-'+i.id+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path fill="'+a+'" d="M2 10a1 1 0 0 0-1 1v10a1 1 0 0 0 2 0V11a1 1 0 0 0-1-1zm4-5a1 1 0 0 0-1 1v20a1 1 0 0 0 2 0V6a1 1 0 0 0-1-1zm12 5a1 1 0 0 0-1 1v10a1 1 0 0 0 2 0V11a1 1 0 0 0-1-1zm-4-5a1 1 0 0 0-1 1v20a1 1 0 0 0 2 0V6a1 1 0 0 0-1-1zm-4-4a1 1 0 0 0-1 1v28a1 1 0 0 0 2 0V2a1 1 0 0 0-1-1zm20 9a1 1 0 0 0-1 1v10a1 1 0 0 0 2 0V11a1 1 0 0 0-1-1zm-4-5a1 1 0 0 0-1 1v20a1 1 0 0 0 2 0V6a1 1 0 0 0-1-1zm-4-4a1 1 0 0 0-1 1v28a1 1 0 0 0 2 0V2a1 1 0 0 0-1-1z"/></svg></div></div>'}),t+="</div></div></div>",$(document).find(".super-sonic-playlist-area").remove(),$(document).find("#embedVideo").after(t),$(".super-sonic-audio-player-section .super-sonic-playlist-area").css("border-color",a),$(".super-sonic-playlist-wrap .video").css("border-bottom-color",a),$("#super-sonic-cancel").show(),$("#super-sonic-list").hide(),"play"===player_status){let e="#super-sonic-play-div-"+video.id,t="#super-sonic-sound-div-"+video.id;$(".super-sonic-sound-button").hide(),$(e).hide(),$(t).show()}}),$("#super-sonic-cancel").on("click",function(){$("#super-sonic-list").show(),$("#super-sonic-cancel").hide(),$(document).find(".super-sonic-playlist-area").remove()})}}function timeConvert(e){var t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=minutes_formatted="";return t>0&&(n=t+" hours"),i>0&&(minutes_formatted=i+" minutes"),n+minutes_formatted}$(document).on("mpuseup",".scrollButtonDown",function(){var e=$(this).data("id");e&&$("html, body").animate({scrollTop:$("#comment-"+e).offset().top},1e3)}),window.addEventListener("message",function(e){1==e.data.timeline&&(comment_permission=1,queryParams.has("editor")&&commentTimeline()),0==e.data.timeline&&($(".comment-timeline").remove(),comment_permission=0)}),$(document).on("mouseenter",".comment-profile .timeline-logo",function(e){let t=$(this).data("id"),i=$(this).attr("src"),n=$(this).css("background-color");if(i)$("#pro-img-"+t).css("background-image","url("+i+")");else{let e=$(this).text();$("#pro-default-"+t).css("background-color",n),$("#pro-default-"+t).text(e)}$(".comment-show-box").not("#comment-show-box-"+t).removeClass("d-flex"),$("#comment-show-box-"+t).toggleClass("d-flex")}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};(t=function(){var t=0;return function(i,n){var r,a=this;a.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(i),appendDots:e(i),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,i){return e('<button type="button" />').text(i+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},a.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(a,a.initials),a.activeBreakpoint=null,a.animType=null,a.animProp=null,a.breakpoints=[],a.breakpointSettings=[],a.cssTransitions=!1,a.focussed=!1,a.interrupted=!1,a.hidden="hidden",a.paused=!0,a.positionProp=null,a.respondTo=null,a.rowCount=1,a.shouldClick=!0,a.$slider=e(i),a.$slidesCache=null,a.transformType=null,a.transitionType=null,a.visibilityChange="visibilitychange",a.windowWidth=0,a.windowTimer=null,r=e(i).data("slick")||{},a.options=e.extend({},a.defaults,n,r),a.currentSlide=a.options.initialSlide,a.originalSettings=a.options,void 0!==document.mozHidden?(a.hidden="mozHidden",a.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(a.hidden="webkitHidden",a.visibilityChange="webkitvisibilitychange"),a.autoPlay=e.proxy(a.autoPlay,a),a.autoPlayClear=e.proxy(a.autoPlayClear,a),a.autoPlayIterator=e.proxy(a.autoPlayIterator,a),a.changeSlide=e.proxy(a.changeSlide,a),a.clickHandler=e.proxy(a.clickHandler,a),a.selectHandler=e.proxy(a.selectHandler,a),a.setPosition=e.proxy(a.setPosition,a),a.swipeHandler=e.proxy(a.swipeHandler,a),a.dragHandler=e.proxy(a.dragHandler,a),a.keyHandler=e.proxy(a.keyHandler,a),a.instanceUid=t++,a.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,a.registerBreakpoints(),a.init(!0)}}()).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},t.prototype.addSlide=t.prototype.slickAdd=function(t,i,n){var r=this;if("boolean"==typeof i)n=i,i=null;else if(i<0||i>=r.slideCount)return!1;r.unload(),"number"==typeof i?0===i&&0===r.$slides.length?e(t).appendTo(r.$slideTrack):n?e(t).insertBefore(r.$slides.eq(i)):e(t).insertAfter(r.$slides.eq(i)):!0===n?e(t).prependTo(r.$slideTrack):e(t).appendTo(r.$slideTrack),r.$slides=r.$slideTrack.children(this.options.slide),r.$slideTrack.children(this.options.slide).detach(),r.$slideTrack.append(r.$slides),r.$slides.each(function(t,i){e(i).attr("data-slick-index",t)}),r.$slidesCache=r.$slides,r.reinit()},t.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,i){var n={},r=this;r.animateHeight(),!0===r.options.rtl&&!1===r.options.vertical&&(t=-t),!1===r.transformsEnabled?!1===r.options.vertical?r.$slideTrack.animate({left:t},r.options.speed,r.options.easing,i):r.$slideTrack.animate({top:t},r.options.speed,r.options.easing,i):!1===r.cssTransitions?(!0===r.options.rtl&&(r.currentLeft=-r.currentLeft),e({animStart:r.currentLeft}).animate({animStart:t},{duration:r.options.speed,easing:r.options.easing,step:function(e){e=Math.ceil(e),!1===r.options.vertical?(n[r.animType]="translate("+e+"px, 0px)",r.$slideTrack.css(n)):(n[r.animType]="translate(0px,"+e+"px)",r.$slideTrack.css(n))},complete:function(){i&&i.call()}})):(r.applyTransition(),t=Math.ceil(t),!1===r.options.vertical?n[r.animType]="translate3d("+t+"px, 0px, 0px)":n[r.animType]="translate3d(0px,"+t+"px, 0px)",r.$slideTrack.css(n),i&&setTimeout(function(){r.disableTransition(),i.call()},r.options.speed))},t.prototype.getNavTarget=function(){var t=this.options.asNavFor;return t&&null!==t&&(t=e(t).not(this.$slider)),t},t.prototype.asNavFor=function(t){var i=this.getNavTarget();null!==i&&"object"==typeof i&&i.each(function(){var i=e(this).slick("getSlick");i.unslicked||i.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,i={};!1===t.options.fade?i[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:i[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,!1===t.options.fade?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.autoPlay=function(){var e=this;e.autoPlayClear(),e.slideCount>e.options.slidesToShow&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;e.paused||e.interrupted||e.focussed||(!1===e.options.infinite&&(1===e.direction&&e.currentSlide+1===e.slideCount-1?e.direction=0:0===e.direction&&(t=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1==0&&(e.direction=1))),e.slideHandler(t))},t.prototype.buildArrows=function(){var t=this;!0===t.options.arrows&&(t.$prevArrow=e(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=e(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),!0!==t.options.infinite&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},t.prototype.buildDots=function(){var t,i,n=this;if(!0===n.options.dots){for(n.$slider.addClass("slick-dotted"),i=e("<ul />").addClass(n.options.dotsClass),t=0;t<=n.getDotCount();t+=1)i.append(e("<li />").append(n.options.customPaging.call(this,n,t)));n.$dots=i.appendTo(n.options.appendDots),n.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,i){e(i).attr("data-slick-index",t).data("originalStyling",e(i).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),!0!==t.options.centerMode&&!0!==t.options.swipeToSlide||(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),!0===t.options.draggable&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e,t,i,n,r,a,s,o=this;if(n=document.createDocumentFragment(),a=o.$slider.children(),o.options.rows>1){for(s=o.options.slidesPerRow*o.options.rows,r=Math.ceil(a.length/s),e=0;e<r;e++){var l=document.createElement("div");for(t=0;t<o.options.rows;t++){var u=document.createElement("div");for(i=0;i<o.options.slidesPerRow;i++){var d=e*s+(t*o.options.slidesPerRow+i);a.get(d)&&u.appendChild(a.get(d))}l.appendChild(u)}n.appendChild(l)}o.$slider.empty().append(n),o.$slider.children().children().children().css({width:100/o.options.slidesPerRow+"%",display:"inline-block"})}},t.prototype.checkResponsive=function(t,i){var n,r,a,s=this,o=!1,l=s.$slider.width(),u=window.innerWidth||e(window).width();if("window"===s.respondTo?a=u:"slider"===s.respondTo?a=l:"min"===s.respondTo&&(a=Math.min(u,l)),s.options.responsive&&s.options.responsive.length&&null!==s.options.responsive){for(n in r=null,s.breakpoints)s.breakpoints.hasOwnProperty(n)&&(!1===s.originalSettings.mobileFirst?a<s.breakpoints[n]&&(r=s.breakpoints[n]):a>s.breakpoints[n]&&(r=s.breakpoints[n]));null!==r?null!==s.activeBreakpoint?(r!==s.activeBreakpoint||i)&&(s.activeBreakpoint=r,"unslick"===s.breakpointSettings[r]?s.unslick(r):(s.options=e.extend({},s.originalSettings,s.breakpointSettings[r]),!0===t&&(s.currentSlide=s.options.initialSlide),s.refresh(t)),o=r):(s.activeBreakpoint=r,"unslick"===s.breakpointSettings[r]?s.unslick(r):(s.options=e.extend({},s.originalSettings,s.breakpointSettings[r]),!0===t&&(s.currentSlide=s.options.initialSlide),s.refresh(t)),o=r):null!==s.activeBreakpoint&&(s.activeBreakpoint=null,s.options=s.originalSettings,!0===t&&(s.currentSlide=s.options.initialSlide),s.refresh(t),o=r),t||!1===o||s.$slider.trigger("breakpoint",[s,o])}},t.prototype.changeSlide=function(t,i){var n,r,a=this,s=e(t.currentTarget);switch(s.is("a")&&t.preventDefault(),s.is("li")||(s=s.closest("li")),n=a.slideCount%a.options.slidesToScroll!=0?0:(a.slideCount-a.currentSlide)%a.options.slidesToScroll,t.data.message){case"previous":r=0===n?a.options.slidesToScroll:a.options.slidesToShow-n,a.slideCount>a.options.slidesToShow&&a.slideHandler(a.currentSlide-r,!1,i);break;case"next":r=0===n?a.options.slidesToScroll:n,a.slideCount>a.options.slidesToShow&&a.slideHandler(a.currentSlide+r,!1,i);break;case"index":var o=0===t.data.index?0:t.data.index||s.index()*a.options.slidesToScroll;a.slideHandler(a.checkNavigable(o),!1,i),s.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t,i;if(i=0,e>(t=this.getNavigableIndexes())[t.length-1])e=t[t.length-1];else for(var n in t){if(e<t[n]){e=i;break}i=t[n]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(e("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",e.proxy(t.interrupt,t,!0)).off("mouseleave.slick",e.proxy(t.interrupt,t,!1)),!0===t.options.accessibility&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),!0===t.options.accessibility&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),!0===t.options.accessibility&&t.$list.off("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>1&&((e=t.$slides.children().children()).removeAttr("style"),t.$slider.empty().append(e))},t.prototype.clickHandler=function(e){!1===this.shouldClick&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var i=this;i.autoPlayClear(),i.touchObject={},i.cleanUpEvents(),e(".slick-cloned",i.$slider).detach(),i.$dots&&i.$dots.remove(),i.$prevArrow&&i.$prevArrow.length&&(i.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.remove()),i.$nextArrow&&i.$nextArrow.length&&(i.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.remove()),i.$slides&&(i.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){e(this).attr("style",e(this).data("originalStyling"))}),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.detach(),i.$list.detach(),i.$slider.append(i.$slides)),i.cleanUpRows(),i.$slider.removeClass("slick-slider"),i.$slider.removeClass("slick-initialized"),i.$slider.removeClass("slick-dotted"),i.unslicked=!0,t||i.$slider.trigger("destroy",[i])},t.prototype.disableTransition=function(e){var t=this,i={};i[t.transitionType]="",!1===t.options.fade?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.fadeSlide=function(e,t){var i=this;!1===i.cssTransitions?(i.$slides.eq(e).css({zIndex:i.options.zIndex}),i.$slides.eq(e).animate({opacity:1},i.options.speed,i.options.easing,t)):(i.applyTransition(e),i.$slides.eq(e).css({opacity:1,zIndex:i.options.zIndex}),t&&setTimeout(function(){i.disableTransition(e),t.call()},i.options.speed))},t.prototype.fadeSlideOut=function(e){var t=this;!1===t.cssTransitions?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.$slidesCache=t.$slides,t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.focusHandler=function(){var t=this;t.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(i){i.stopImmediatePropagation();var n=e(this);setTimeout(function(){t.options.pauseOnFocus&&(t.focussed=n.is(":focus"),t.autoPlay())},0)})},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){return this.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,i=0,n=0;if(!0===e.options.infinite)if(e.slideCount<=e.options.slidesToShow)++n;else for(;t<e.slideCount;)++n,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(!0===e.options.centerMode)n=e.slideCount;else if(e.options.asNavFor)for(;t<e.slideCount;)++n,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else n=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll);return n-1},t.prototype.getLeft=function(e){var t,i,n,r,a=this,s=0;return a.slideOffset=0,i=a.$slides.first().outerHeight(!0),!0===a.options.infinite?(a.slideCount>a.options.slidesToShow&&(a.slideOffset=a.slideWidth*a.options.slidesToShow*-1,r=-1,!0===a.options.vertical&&!0===a.options.centerMode&&(2===a.options.slidesToShow?r=-1.5:1===a.options.slidesToShow&&(r=-2)),s=i*a.options.slidesToShow*r),a.slideCount%a.options.slidesToScroll!=0&&e+a.options.slidesToScroll>a.slideCount&&a.slideCount>a.options.slidesToShow&&(e>a.slideCount?(a.slideOffset=(a.options.slidesToShow-(e-a.slideCount))*a.slideWidth*-1,s=(a.options.slidesToShow-(e-a.slideCount))*i*-1):(a.slideOffset=a.slideCount%a.options.slidesToScroll*a.slideWidth*-1,s=a.slideCount%a.options.slidesToScroll*i*-1))):e+a.options.slidesToShow>a.slideCount&&(a.slideOffset=(e+a.options.slidesToShow-a.slideCount)*a.slideWidth,s=(e+a.options.slidesToShow-a.slideCount)*i),a.slideCount<=a.options.slidesToShow&&(a.slideOffset=0,s=0),!0===a.options.centerMode&&a.slideCount<=a.options.slidesToShow?a.slideOffset=a.slideWidth*Math.floor(a.options.slidesToShow)/2-a.slideWidth*a.slideCount/2:!0===a.options.centerMode&&!0===a.options.infinite?a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)-a.slideWidth:!0===a.options.centerMode&&(a.slideOffset=0,a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)),t=!1===a.options.vertical?e*a.slideWidth*-1+a.slideOffset:e*i*-1+s,!0===a.options.variableWidth&&(n=a.slideCount<=a.options.slidesToShow||!1===a.options.infinite?a.$slideTrack.children(".slick-slide").eq(e):a.$slideTrack.children(".slick-slide").eq(e+a.options.slidesToShow),t=!0===a.options.rtl?n[0]?-1*(a.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,!0===a.options.centerMode&&(n=a.slideCount<=a.options.slidesToShow||!1===a.options.infinite?a.$slideTrack.children(".slick-slide").eq(e):a.$slideTrack.children(".slick-slide").eq(e+a.options.slidesToShow+1),t=!0===a.options.rtl?n[0]?-1*(a.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,t+=(a.$list.width()-n.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){return this.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,i=0,n=0,r=[];for(!1===t.options.infinite?e=t.slideCount:(i=-1*t.options.slidesToScroll,n=-1*t.options.slidesToScroll,e=2*t.slideCount);i<e;)r.push(i),i=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return r},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t,i,n=this;return i=!0===n.options.centerMode?n.slideWidth*Math.floor(n.options.slidesToShow/2):0,!0===n.options.swipeToSlide?(n.$slideTrack.find(".slick-slide").each(function(r,a){if(a.offsetLeft-i+e(a).outerWidth()/2>-1*n.swipeLeft)return t=a,!1}),Math.abs(e(t).attr("data-slick-index")-n.currentSlide)||1):n.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){this.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var i=this;e(i.$slider).hasClass("slick-initialized")||(e(i.$slider).addClass("slick-initialized"),i.buildRows(),i.buildOut(),i.setProps(),i.startLoad(),i.loadSlider(),i.initializeEvents(),i.updateArrows(),i.updateDots(),i.checkResponsive(!0),i.focusHandler()),t&&i.$slider.trigger("init",[i]),!0===i.options.accessibility&&i.initADA(),i.options.autoplay&&(i.paused=!1,i.autoPlay())},t.prototype.initADA=function(){var t=this,i=Math.ceil(t.slideCount/t.options.slidesToShow),n=t.getNavigableIndexes().filter(function(e){return e>=0&&e<t.slideCount});t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==t.$dots&&(t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(i){var r=n.indexOf(i);e(this).attr({role:"tabpanel",id:"slick-slide"+t.instanceUid+i,tabindex:-1}),-1!==r&&e(this).attr({"aria-describedby":"slick-slide-control"+t.instanceUid+r})}),t.$dots.attr("role","tablist").find("li").each(function(r){var a=n[r];e(this).attr({role:"presentation"}),e(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+t.instanceUid+r,"aria-controls":"slick-slide"+t.instanceUid+a,"aria-label":r+1+" of "+i,"aria-selected":null,tabindex:"-1"})}).eq(t.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var r=t.currentSlide,a=r+t.options.slidesToShow;r<a;r++)t.$slides.eq(r).attr("tabindex",0);t.activateADA()},t.prototype.initArrowEvents=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.off("click.slick").on("click.slick",{message:"next"},e.changeSlide),!0===e.options.accessibility&&(e.$prevArrow.on("keydown.slick",e.keyHandler),e.$nextArrow.on("keydown.slick",e.keyHandler)))},t.prototype.initDotEvents=function(){var t=this;!0===t.options.dots&&(e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),!0===t.options.accessibility&&t.$dots.on("keydown.slick",t.keyHandler)),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.interrupt,t,!0)).on("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.interrupt,t,!1)))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),!0===t.options.accessibility&&t.$list.on("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(t.setPosition)},t.prototype.initUI=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.show()},t.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&!0===t.options.accessibility?t.changeSlide({data:{message:!0===t.options.rtl?"next":"previous"}}):39===e.keyCode&&!0===t.options.accessibility&&t.changeSlide({data:{message:!0===t.options.rtl?"previous":"next"}}))},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),i=e(this).attr("data-lazy"),n=e(this).attr("data-srcset"),r=e(this).attr("data-sizes")||a.$slider.attr("data-sizes"),s=document.createElement("img");s.onload=function(){t.animate({opacity:0},100,function(){n&&(t.attr("srcset",n),r&&t.attr("sizes",r)),t.attr("src",i).animate({opacity:1},200,function(){t.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),a.$slider.trigger("lazyLoaded",[a,t,i])})},s.onerror=function(){t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),a.$slider.trigger("lazyLoadError",[a,t,i])},s.src=i})}var i,n,r,a=this;if(!0===a.options.centerMode?!0===a.options.infinite?r=(n=a.currentSlide+(a.options.slidesToShow/2+1))+a.options.slidesToShow+2:(n=Math.max(0,a.currentSlide-(a.options.slidesToShow/2+1)),r=a.options.slidesToShow/2+1+2+a.currentSlide):(n=a.options.infinite?a.options.slidesToShow+a.currentSlide:a.currentSlide,r=Math.ceil(n+a.options.slidesToShow),!0===a.options.fade&&(n>0&&n--,r<=a.slideCount&&r++)),i=a.$slider.find(".slick-slide").slice(n,r),"anticipated"===a.options.lazyLoad)for(var s=n-1,o=r,l=a.$slider.find(".slick-slide"),u=0;u<a.options.slidesToScroll;u++)s<0&&(s=a.slideCount-1),i=(i=i.add(l.eq(s))).add(l.eq(o)),s--,o++;t(i),a.slideCount<=a.options.slidesToShow?t(a.$slider.find(".slick-slide")):a.currentSlide>=a.slideCount-a.options.slidesToShow?t(a.$slider.find(".slick-cloned").slice(0,a.options.slidesToShow)):0===a.currentSlide&&t(a.$slider.find(".slick-cloned").slice(-1*a.options.slidesToShow))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.autoPlay(),e.options.autoplay=!0,e.paused=!1,e.focussed=!1,e.interrupted=!1},t.prototype.postSlide=function(t){var i=this;i.unslicked||(i.$slider.trigger("afterChange",[i,t]),i.animating=!1,i.slideCount>i.options.slidesToShow&&i.setPosition(),i.swipeLeft=null,i.options.autoplay&&i.autoPlay(),!0===i.options.accessibility&&(i.initADA(),i.options.focusOnChange&&e(i.$slides.get(i.currentSlide)).attr("tabindex",0).focus()))},t.prototype.prev=t.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(t){t=t||1;var i,n,r,a,s,o=this,l=e("img[data-lazy]",o.$slider);l.length?(i=l.first(),n=i.attr("data-lazy"),r=i.attr("data-srcset"),a=i.attr("data-sizes")||o.$slider.attr("data-sizes"),(s=document.createElement("img")).onload=function(){r&&(i.attr("srcset",r),a&&i.attr("sizes",a)),i.attr("src",n).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===o.options.adaptiveHeight&&o.setPosition(),o.$slider.trigger("lazyLoaded",[o,i,n]),o.progressiveLazyLoad()},s.onerror=function(){t<3?setTimeout(function(){o.progressiveLazyLoad(t+1)},500):(i.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),o.$slider.trigger("lazyLoadError",[o,i,n]),o.progressiveLazyLoad())},s.src=n):o.$slider.trigger("allImagesLoaded",[o])},t.prototype.refresh=function(t){var i,n,r=this;n=r.slideCount-r.options.slidesToShow,!r.options.infinite&&r.currentSlide>n&&(r.currentSlide=n),r.slideCount<=r.options.slidesToShow&&(r.currentSlide=0),i=r.currentSlide,r.destroy(!0),e.extend(r,r.initials,{currentSlide:i}),r.init(),t||r.changeSlide({data:{message:"index",index:i}},!1)},t.prototype.registerBreakpoints=function(){var t,i,n,r=this,a=r.options.responsive||null;if("array"===e.type(a)&&a.length){for(t in r.respondTo=r.options.respondTo||"window",a)if(n=r.breakpoints.length-1,a.hasOwnProperty(t)){for(i=a[t].breakpoint;n>=0;)r.breakpoints[n]&&r.breakpoints[n]===i&&r.breakpoints.splice(n,1),n--;r.breakpoints.push(i),r.breakpointSettings[i]=a[t].settings}r.breakpoints.sort(function(e,t){return r.options.mobileFirst?e-t:t-e})}},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,i){var n=this;if(e="boolean"==typeof e?!0===(t=e)?0:n.slideCount-1:!0===t?--e:e,n.slideCount<1||e<0||e>n.slideCount-1)return!1;n.unload(),!0===i?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(e).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,n.reinit()},t.prototype.setCSS=function(e){var t,i,n=this,r={};!0===n.options.rtl&&(e=-e),t="left"==n.positionProp?Math.ceil(e)+"px":"0px",i="top"==n.positionProp?Math.ceil(e)+"px":"0px",r[n.positionProp]=e,!1===n.transformsEnabled?n.$slideTrack.css(r):(r={},!1===n.cssTransitions?(r[n.animType]="translate("+t+", "+i+")",n.$slideTrack.css(r)):(r[n.animType]="translate3d("+t+", "+i+", 0px)",n.$slideTrack.css(r)))},t.prototype.setDimensions=function(){var e=this;!1===e.options.vertical?!0===e.options.centerMode&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),!0===e.options.centerMode&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),!1===e.options.vertical&&!1===e.options.variableWidth?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):!0===e.options.variableWidth?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();!1===e.options.variableWidth&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,i=this;i.$slides.each(function(n,r){t=i.slideWidth*n*-1,!0===i.options.rtl?e(r).css({position:"relative",right:t,top:0,zIndex:i.options.zIndex-2,opacity:0}):e(r).css({position:"relative",left:t,top:0,zIndex:i.options.zIndex-2,opacity:0})}),i.$slides.eq(i.currentSlide).css({zIndex:i.options.zIndex-1,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(){var t,i,n,r,a,s=this,o=!1;if("object"===e.type(arguments[0])?(n=arguments[0],o=arguments[1],a="multiple"):"string"===e.type(arguments[0])&&(n=arguments[0],r=arguments[1],o=arguments[2],"responsive"===arguments[0]&&"array"===e.type(arguments[1])?a="responsive":void 0!==arguments[1]&&(a="single")),"single"===a)s.options[n]=r;else if("multiple"===a)e.each(n,function(e,t){s.options[e]=t});else if("responsive"===a)for(i in r)if("array"!==e.type(s.options.responsive))s.options.responsive=[r[i]];else{for(t=s.options.responsive.length-1;t>=0;)s.options.responsive[t].breakpoint===r[i].breakpoint&&s.options.responsive.splice(t,1),t--;s.options.responsive.push(r[i])}o&&(s.unload(),s.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),!1===e.options.fade?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||!0===e.options.useCSS&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&!1!==e.animType},t.prototype.setSlideClasses=function(e){var t,i,n,r,a=this;if(i=a.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),a.$slides.eq(e).addClass("slick-current"),!0===a.options.centerMode){var s=a.options.slidesToShow%2==0?1:0;t=Math.floor(a.options.slidesToShow/2),!0===a.options.infinite&&(e>=t&&e<=a.slideCount-1-t?a.$slides.slice(e-t+s,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(n=a.options.slidesToShow+e,i.slice(n-t+1+s,n+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?i.eq(i.length-1-a.options.slidesToShow).addClass("slick-center"):e===a.slideCount-1&&i.eq(a.options.slidesToShow).addClass("slick-center")),a.$slides.eq(e).addClass("slick-center")}else e>=0&&e<=a.slideCount-a.options.slidesToShow?a.$slides.slice(e,e+a.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=a.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(r=a.slideCount%a.options.slidesToShow,n=!0===a.options.infinite?a.options.slidesToShow+e:e,a.options.slidesToShow==a.options.slidesToScroll&&a.slideCount-e<a.options.slidesToShow?i.slice(n-(a.options.slidesToShow-r),n+r).addClass("slick-active").attr("aria-hidden","false"):i.slice(n,n+a.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==a.options.lazyLoad&&"anticipated"!==a.options.lazyLoad||a.lazyLoad()},t.prototype.setupInfinite=function(){var t,i,n,r=this;if(!0===r.options.fade&&(r.options.centerMode=!1),!0===r.options.infinite&&!1===r.options.fade&&(i=null,r.slideCount>r.options.slidesToShow)){for(n=!0===r.options.centerMode?r.options.slidesToShow+1:r.options.slidesToShow,t=r.slideCount;t>r.slideCount-n;t-=1)i=t-1,e(r.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i-r.slideCount).prependTo(r.$slideTrack).addClass("slick-cloned");for(t=0;t<n+r.slideCount;t+=1)i=t,e(r.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i+r.slideCount).appendTo(r.$slideTrack).addClass("slick-cloned");r.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.interrupt=function(e){e||this.autoPlay(),this.interrupted=e},t.prototype.selectHandler=function(t){var i=this,n=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),r=parseInt(n.attr("data-slick-index"));r||(r=0),i.slideCount<=i.options.slidesToShow?i.slideHandler(r,!1,!0):i.slideHandler(r)},t.prototype.slideHandler=function(e,t,i){var n,r,a,s,o,l=null,u=this;if(t=t||!1,!(!0===u.animating&&!0===u.options.waitForAnimate||!0===u.options.fade&&u.currentSlide===e))if(!1===t&&u.asNavFor(e),n=e,l=u.getLeft(n),s=u.getLeft(u.currentSlide),u.currentLeft=null===u.swipeLeft?s:u.swipeLeft,!1===u.options.infinite&&!1===u.options.centerMode&&(e<0||e>u.getDotCount()*u.options.slidesToScroll))!1===u.options.fade&&(n=u.currentSlide,!0!==i?u.animateSlide(s,function(){u.postSlide(n)}):u.postSlide(n));else if(!1===u.options.infinite&&!0===u.options.centerMode&&(e<0||e>u.slideCount-u.options.slidesToScroll))!1===u.options.fade&&(n=u.currentSlide,!0!==i?u.animateSlide(s,function(){u.postSlide(n)}):u.postSlide(n));else{if(u.options.autoplay&&clearInterval(u.autoPlayTimer),r=n<0?u.slideCount%u.options.slidesToScroll!=0?u.slideCount-u.slideCount%u.options.slidesToScroll:u.slideCount+n:n>=u.slideCount?u.slideCount%u.options.slidesToScroll!=0?0:n-u.slideCount:n,u.animating=!0,u.$slider.trigger("beforeChange",[u,u.currentSlide,r]),a=u.currentSlide,u.currentSlide=r,u.setSlideClasses(u.currentSlide),u.options.asNavFor&&(o=(o=u.getNavTarget()).slick("getSlick")).slideCount<=o.options.slidesToShow&&o.setSlideClasses(u.currentSlide),u.updateDots(),u.updateArrows(),!0===u.options.fade)return!0!==i?(u.fadeSlideOut(a),u.fadeSlide(r,function(){u.postSlide(r)})):u.postSlide(r),void u.animateHeight();!0!==i?u.animateSlide(l,function(){u.postSlide(r)}):u.postSlide(r)}},t.prototype.startLoad=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,i,n,r=this;return e=r.touchObject.startX-r.touchObject.curX,t=r.touchObject.startY-r.touchObject.curY,i=Math.atan2(t,e),(n=Math.round(180*i/Math.PI))<0&&(n=360-Math.abs(n)),n<=45&&n>=0?!1===r.options.rtl?"left":"right":n<=360&&n>=315?!1===r.options.rtl?"left":"right":n>=135&&n<=225?!1===r.options.rtl?"right":"left":!0===r.options.verticalSwiping?n>=35&&n<=135?"down":"up":"vertical"},t.prototype.swipeEnd=function(e){var t,i,n=this;if(n.dragging=!1,n.swiping=!1,n.scrolling)return n.scrolling=!1,!1;if(n.interrupted=!1,n.shouldClick=!(n.touchObject.swipeLength>10),void 0===n.touchObject.curX)return!1;if(!0===n.touchObject.edgeHit&&n.$slider.trigger("edge",[n,n.swipeDirection()]),n.touchObject.swipeLength>=n.touchObject.minSwipe){switch(i=n.swipeDirection()){case"left":case"down":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide+n.getSlideCount()):n.currentSlide+n.getSlideCount(),n.currentDirection=0;break;case"right":case"up":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide-n.getSlideCount()):n.currentSlide-n.getSlideCount(),n.currentDirection=1}"vertical"!=i&&(n.slideHandler(t),n.touchObject={},n.$slider.trigger("swipe",[n,i]))}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(!1===t.options.swipe||"ontouchend"in document&&!1===t.options.swipe||!1===t.options.draggable&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,!0===t.options.verticalSwiping&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,i,n,r,a,s,o=this;return a=void 0!==e.originalEvent?e.originalEvent.touches:null,!(!o.dragging||o.scrolling||a&&1!==a.length)&&(t=o.getLeft(o.currentSlide),o.touchObject.curX=void 0!==a?a[0].pageX:e.clientX,o.touchObject.curY=void 0!==a?a[0].pageY:e.clientY,o.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(o.touchObject.curX-o.touchObject.startX,2))),s=Math.round(Math.sqrt(Math.pow(o.touchObject.curY-o.touchObject.startY,2))),!o.options.verticalSwiping&&!o.swiping&&s>4?(o.scrolling=!0,!1):(!0===o.options.verticalSwiping&&(o.touchObject.swipeLength=s),i=o.swipeDirection(),void 0!==e.originalEvent&&o.touchObject.swipeLength>4&&(o.swiping=!0,e.preventDefault()),r=(!1===o.options.rtl?1:-1)*(o.touchObject.curX>o.touchObject.startX?1:-1),!0===o.options.verticalSwiping&&(r=o.touchObject.curY>o.touchObject.startY?1:-1),n=o.touchObject.swipeLength,o.touchObject.edgeHit=!1,!1===o.options.infinite&&(0===o.currentSlide&&"right"===i||o.currentSlide>=o.getDotCount()&&"left"===i)&&(n=o.touchObject.swipeLength*o.options.edgeFriction,o.touchObject.edgeHit=!0),!1===o.options.vertical?o.swipeLeft=t+n*r:o.swipeLeft=t+n*(o.$list.height()/o.listWidth)*r,!0===o.options.verticalSwiping&&(o.swipeLeft=t+n*r),!0!==o.options.fade&&!1!==o.options.touchMove&&(!0===o.animating?(o.swipeLeft=null,!1):void o.setCSS(o.swipeLeft))))},t.prototype.swipeStart=function(e){var t,i=this;if(i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow)return i.touchObject={},!1;void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==t?t.pageX:e.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==t?t.pageY:e.clientY,i.dragging=!0},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e=this;Math.floor(e.options.slidesToShow/2),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&!1===e.options.centerMode?(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-1&&!0===e.options.centerMode&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").end(),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},t.prototype.visibility=function(){var e=this;e.options.autoplay&&(document[e.hidden]?e.interrupted=!0:e.interrupted=!1)},e.fn.slick=function(){var e,i,n=this,r=arguments[0],a=Array.prototype.slice.call(arguments,1),s=n.length;for(e=0;e<s;e++)if("object"==typeof r||void 0===r?n[e].slick=new t(n[e],r):i=n[e].slick[r].apply(n[e].slick,a),void 0!==i)return i;return n}});
